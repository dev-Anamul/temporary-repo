var Ao=Object.defineProperty;var ko=(i,e,s)=>e in i?Ao(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var Zt=(i,e,s)=>(ko(i,typeof e!="symbol"?e+"":e,s),s),Eo=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)};var Gt=(i,e,s)=>(Eo(i,e,"read from private field"),s?s.call(i):e.get(i)),Wr=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},ln=(i,e,s,a)=>(Eo(i,e,"write to private field"),a?a.call(i,s):e.set(i,s),s);var os=(i,e,s)=>(Eo(i,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$1(i){return i===null||typeof i!="object"?null:(i=z$2&&i[z$2]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(i,e,s){this.props=i,this.context=e,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,e,s){this.props=i,this.context=e,this.refs=D$1,this.updater=s||B$1}var H$2=G$1.prototype=new F;H$2.constructor=G$1;C$1(H$2,E$1.prototype);H$2.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$2={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(i,e,s){var a,o={},c=null,d=null;if(e!=null)for(a in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)J.call(e,a)&&!L$1.hasOwnProperty(a)&&(o[a]=e[a]);var h=arguments.length-2;if(h===1)o.children=s;else if(1<h){for(var _=Array(h),$=0;$<h;$++)_[$]=arguments[$+2];o.children=_}if(i&&i.defaultProps)for(a in h=i.defaultProps,h)o[a]===void 0&&(o[a]=h[a]);return{$$typeof:l$1,type:i,key:c,ref:d,props:o,_owner:K$2.current}}function N$1(i,e){return{$$typeof:l$1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$1(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return e[s]})}var P$1=/\/+/g;function Q$1(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape(""+i.key):e.toString(36)}function R$2(i,e,s,a,o){var c=typeof i;(c==="undefined"||c==="boolean")&&(i=null);var d=!1;if(i===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=i,o=o(d),i=a===""?"."+Q$1(d,0):a,I$1(o)?(s="",i!=null&&(s=i.replace(P$1,"$&/")+"/"),R$2(o,e,s,"",function($){return $})):o!=null&&(O$1(o)&&(o=N$1(o,s+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(P$1,"$&/")+"/")+i)),e.push(o)),1;if(d=0,a=a===""?".":a+":",I$1(i))for(var h=0;h<i.length;h++){c=i[h];var _=a+Q$1(c,h);d+=R$2(c,e,s,_,o)}else if(_=A$1(i),typeof _=="function")for(i=_.call(i),h=0;!(c=i.next()).done;)c=c.value,_=a+Q$1(c,h++),d+=R$2(c,e,s,_,o);else if(c==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(i,e,s){if(i==null)return i;var a=[],o=0;return R$2(i,a,"","",function(c){return e.call(s,c,o++)}),a}function T$1(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$2={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$2};react_production_min.Children={map:S$1,forEach:function(i,e,s){S$1(i,function(){e.apply(this,arguments)},s)},count:function(i){var e=0;return S$1(i,function(){e++}),e},toArray:function(i){return S$1(i,function(e){return e})||[]},only:function(i){if(!O$1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(i,e,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var a=C$1({},i.props),o=i.key,c=i.ref,d=i._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=K$2.current),e.key!==void 0&&(o=""+e.key),i.type&&i.type.defaultProps)var h=i.type.defaultProps;for(_ in e)J.call(e,_)&&!L$1.hasOwnProperty(_)&&(a[_]=e[_]===void 0&&h!==void 0?h[_]:e[_])}var _=arguments.length-2;if(_===1)a.children=s;else if(1<_){h=Array(_);for(var $=0;$<_;$++)h[$]=arguments[$+2];a.children=h}return{$$typeof:l$1,type:i.type,key:o,ref:c,props:a,_owner:d}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$1;react_production_min.createFactory=function(i){var e=M$1.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$1,render:i}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(i){return{$$typeof:y,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,e){return{$$typeof:x,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(i,e){return U$1.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$1.current.useEffect(i,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,e,s){return U$1.current.useImperativeHandle(i,e,s)};react_production_min.useInsertionEffect=function(i,e){return U$1.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$1.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$1.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,s){return U$1.current.useReducer(i,e,s)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,s){return U$1.current.useSyncExternalStore(i,e,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(i,e,s){var a,o={},c=null,d=null;s!==void 0&&(c=""+s),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(a in e)m$1.call(e,a)&&!p$1.hasOwnProperty(a)&&(o[a]=e[a]);if(i&&i.defaultProps)for(a in e=i.defaultProps,e)o[a]===void 0&&(o[a]=e[a]);return{$$typeof:k,type:i,key:c,ref:d,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(Bt,Ht){var er=Bt.length;Bt.push(Ht);e:for(;0<er;){var lr=er-1>>>1,dr=Bt[lr];if(0<o(dr,Ht))Bt[lr]=Ht,Bt[er]=dr,er=lr;else break e}}function s(Bt){return Bt.length===0?null:Bt[0]}function a(Bt){if(Bt.length===0)return null;var Ht=Bt[0],er=Bt.pop();if(er!==Ht){Bt[0]=er;e:for(var lr=0,dr=Bt.length,kr=dr>>>1;lr<kr;){var Ir=2*(lr+1)-1,Kt=Bt[Ir],br=Ir+1,Zn=Bt[br];if(0>o(Kt,er))br<dr&&0>o(Zn,Kt)?(Bt[lr]=Zn,Bt[br]=er,lr=br):(Bt[lr]=Kt,Bt[Ir]=er,lr=Ir);else if(br<dr&&0>o(Zn,er))Bt[lr]=Zn,Bt[br]=er,lr=br;else break e}}return Ht}function o(Bt,Ht){var er=Bt.sortIndex-Ht.sortIndex;return er!==0?er:Bt.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var _=[],$=[],rt=1,lt=null,ct=3,bt=!1,Ot=!1,dt=!1,vt=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,et=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Bt){for(var Ht=s($);Ht!==null;){if(Ht.callback===null)a($);else if(Ht.startTime<=Bt)a($),Ht.sortIndex=Ht.expirationTime,e(_,Ht);else break;Ht=s($)}}function St(Bt){if(dt=!1,j(Bt),!Ot)if(s(_)!==null)Ot=!0,or(mt);else{var Ht=s($);Ht!==null&&tr(St,Ht.startTime-Bt)}}function mt(Bt,Ht){Ot=!1,dt&&(dt=!1,at(ht),ht=-1),bt=!0;var er=ct;try{for(j(Ht),lt=s(_);lt!==null&&(!(lt.expirationTime>Ht)||Bt&&!It());){var lr=lt.callback;if(typeof lr=="function"){lt.callback=null,ct=lt.priorityLevel;var dr=lr(lt.expirationTime<=Ht);Ht=i.unstable_now(),typeof dr=="function"?lt.callback=dr:lt===s(_)&&a(_),j(Ht)}else a(_);lt=s(_)}if(lt!==null)var kr=!0;else{var Ir=s($);Ir!==null&&tr(St,Ir.startTime-Ht),kr=!1}return kr}finally{lt=null,ct=er,bt=!1}}var ft=!1,st=null,ht=-1,ot=5,ut=-1;function It(){return!(i.unstable_now()-ut<ot)}function Ct(){if(st!==null){var Bt=i.unstable_now();ut=Bt;var Ht=!0;try{Ht=st(!0,Bt)}finally{Ht?zt():(ft=!1,st=null)}}else ft=!1}var zt;if(typeof et=="function")zt=function(){et(Ct)};else if(typeof MessageChannel<"u"){var Wt=new MessageChannel,Ut=Wt.port2;Wt.port1.onmessage=Ct,zt=function(){Ut.postMessage(null)}}else zt=function(){vt(Ct,0)};function or(Bt){st=Bt,ft||(ft=!0,zt())}function tr(Bt,Ht){ht=vt(function(){Bt(i.unstable_now())},Ht)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Bt){Bt.callback=null},i.unstable_continueExecution=function(){Ot||bt||(Ot=!0,or(mt))},i.unstable_forceFrameRate=function(Bt){0>Bt||125<Bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<Bt?Math.floor(1e3/Bt):5},i.unstable_getCurrentPriorityLevel=function(){return ct},i.unstable_getFirstCallbackNode=function(){return s(_)},i.unstable_next=function(Bt){switch(ct){case 1:case 2:case 3:var Ht=3;break;default:Ht=ct}var er=ct;ct=Ht;try{return Bt()}finally{ct=er}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Bt,Ht){switch(Bt){case 1:case 2:case 3:case 4:case 5:break;default:Bt=3}var er=ct;ct=Bt;try{return Ht()}finally{ct=er}},i.unstable_scheduleCallback=function(Bt,Ht,er){var lr=i.unstable_now();switch(typeof er=="object"&&er!==null?(er=er.delay,er=typeof er=="number"&&0<er?lr+er:lr):er=lr,Bt){case 1:var dr=-1;break;case 2:dr=250;break;case 5:dr=1073741823;break;case 4:dr=1e4;break;default:dr=5e3}return dr=er+dr,Bt={id:rt++,callback:Ht,priorityLevel:Bt,startTime:er,expirationTime:dr,sortIndex:-1},er>lr?(Bt.sortIndex=er,e($,Bt),s(_)===null&&Bt===s($)&&(dt?(at(ht),ht=-1):dt=!0,tr(St,er-lr))):(Bt.sortIndex=dr,e(_,Bt),Ot||bt||(Ot=!0,or(mt))),Bt},i.unstable_shouldYield=It,i.unstable_wrapCallback=function(Bt){var Ht=ct;return function(){var er=ct;ct=Ht;try{return Bt.apply(this,arguments)}finally{ct=er}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,e){ha(i,e),ha(i+"Capture",e)}function ha(i,e){for(ea[i]=e,i=0;i<e.length;i++)da.add(e[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,e,s,a){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,e,s,a){if(e===null||typeof e>"u"||pa(i,e,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(i,e,s,a,o,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=s,this.propertyName=i,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z$1[i]=new v(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z$1[e]=new v(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z$1[i]=new v(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z$1[i]=new v(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z$1[i]=new v(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z$1[i]=new v(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z$1[i]=new v(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z$1[i]=new v(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z$1[i]=new v(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra,sa);z$1[e]=new v(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra,sa);z$1[e]=new v(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra,sa);z$1[e]=new v(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z$1[i]=new v(i,1,!1,i.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z$1[i]=new v(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,e,s,a){var o=z$1.hasOwnProperty(e)?z$1[e]:null;(o!==null?o.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,s,o,a)&&(s=null),a||o===null?oa(e)&&(s===null?i.removeAttribute(e):i.setAttribute(e,""+s)):o.mustUseProperty?i[o.propertyName]=s===null?o.type===3?!1:"":s:(e=o.attributeName,a=o.attributeNamespace,s===null?i.removeAttribute(e):(o=o.type,s=o===3||o===4&&s===!0?"":""+s,a?i.setAttributeNS(a,e,s):i.setAttribute(e,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na=!1;function Oa(i,e){if(!i||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch($){var a=$}Reflect.construct(i,[],e)}else{try{e.call()}catch($){a=$}i.call(e.prototype)}else{try{throw Error()}catch($){a=$}i()}}catch($){if($&&a&&typeof $.stack=="string"){for(var o=$.stack.split(`
`),c=a.stack.split(`
`),d=o.length-1,h=c.length-1;1<=d&&0<=h&&o[d]!==c[h];)h--;for(;1<=d&&0<=h;d--,h--)if(o[d]!==c[h]){if(d!==1||h!==1)do if(d--,h--,0>h||o[d]!==c[h]){var _=`
`+o[d].replace(" at new "," at ");return i.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",i.displayName)),_}while(1<=d&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return e=i.displayName||null,e!==null?e:Qa(i.type)||"Memo";case Ha:e=i._payload,i=i._init;try{return Qa(i(e))}catch{}}return null}function Ra(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(i){var e=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),a=""+i[e];if(!i.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,c=s.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return o.call(this)},set:function(d){a=""+d,c.call(this,d)}}),Object.defineProperty(i,e,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var s=e.getValue(),a="";return i&&(a=Ta(i)?i.checked?"true":"false":i.value),i=a,i!==s?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,e){var s=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??i._wrapperState.initialChecked})}function Za(i,e){var s=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;s=Sa(e.value!=null?e.value:s),i._wrapperState={initialChecked:a,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(i,e){e=e.checked,e!=null&&ta(i,"checked",e,!1)}function bb(i,e){ab(i,e);var s=Sa(e.value),a=e.type;if(s!=null)a==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if(a==="submit"||a==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb(i,e.type,s):e.hasOwnProperty("defaultValue")&&cb(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db(i,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,s||e===i.value||(i.value=e),i.defaultValue=e}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb(i,e,s){(e!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb=Array.isArray;function fb(i,e,s,a){if(i=i.options,e){e={};for(var o=0;o<s.length;o++)e["$"+s[o]]=!0;for(s=0;s<i.length;s++)o=e.hasOwnProperty("$"+i[s].value),i[s].selected!==o&&(i[s].selected=o),o&&a&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),e=null,o=0;o<i.length;o++){if(i[o].value===s){i[o].selected=!0,a&&(i[o].defaultSelected=!0);return}e!==null||i[o].disabled||(e=i[o])}e!==null&&(e.selected=!0)}}function gb(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}e=s}e==null&&(e=""),s=e}i._wrapperState={initialValue:Sa(s)}}function ib(i,e){var s=Sa(e.value),a=Sa(e.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),e.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),a!=null&&(i.defaultValue=""+a)}function jb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,a,o){MSApp.execUnsafeLocalFunction(function(){return i(e,s,a,o)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob(i,e){if(e){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=e;return}}i.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb[e]=pb[i]})});function rb(i,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb.hasOwnProperty(i)&&pb[i]?(""+e).trim():e+"px"}function sb(i,e){i=i.style;for(var s in e)if(e.hasOwnProperty(s)){var a=s.indexOf("--")===0,o=rb(s,e[s],a);s==="float"&&(s="cssFloat"),a?i.setProperty(s,o):i[s]=o}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,e){if(e){if(tb[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p(280));var e=i.stateNode;e&&(e=Db(e),yb(i.stateNode,i.type,e))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,e=Ab;if(Ab=zb=null,Bb(i),e)for(i=0;i<e.length;i++)Bb(e[i])}}function Gb(i,e){return i(e)}function Hb(){}var Ib=!1;function Jb(i,e,s){if(Ib)return i(e,s);Ib=!0;try{return Gb(i,e,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,e){var s=i.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(i=i.type,a=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!a;break e;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p(231,e,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,e,s,a,o,c,d,h,_){var $=Array.prototype.slice.call(arguments,3);try{e.apply(s,$)}catch(rt){this.onError(rt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,e,s,a,o,c,d,h,_){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,e,s,a,o,c,d,h,_){if(Tb.apply(this,arguments),Ob){if(Ob){var $=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=$)}}function Vb(i){var e=i,s=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(s=e.return),i=e.return;while(i)}return e.tag===3?s:null}function Wb(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p(188))}function Yb(i){var e=i.alternate;if(!e){if(e=Vb(i),e===null)throw Error(p(188));return e!==i?null:i}for(var s=i,a=e;;){var o=s.return;if(o===null)break;var c=o.alternate;if(c===null){if(a=o.return,a!==null){s=a;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===s)return Xb(o),i;if(c===a)return Xb(o),e;c=c.sibling}throw Error(p(188))}if(s.return!==a.return)s=o,a=c;else{for(var d=!1,h=o.child;h;){if(h===s){d=!0,s=o,a=c;break}if(h===a){d=!0,a=o,s=c;break}h=h.sibling}if(!d){for(h=c.child;h;){if(h===s){d=!0,s=c,a=o;break}if(h===a){d=!0,a=c,s=o;break}h=h.sibling}if(!d)throw Error(p(189))}}if(s.alternate!==a)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?i:e}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b(i);if(e!==null)return e;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,e){var s=i.pendingLanes;if(s===0)return 0;var a=0,o=i.suspendedLanes,c=i.pingedLanes,d=s&268435455;if(d!==0){var h=d&~o;h!==0?a=tc(h):(c&=d,c!==0&&(a=tc(c)))}else d=s&~o,d!==0?a=tc(d):c!==0&&(a=tc(c));if(a===0)return 0;if(e!==0&&e!==a&&!(e&o)&&(o=a&-a,c=e&-e,o>=c||o===16&&(c&4194240)!==0))return e;if(a&4&&(a|=s&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=a;0<e;)s=31-oc(e),o=1<<s,a|=i[s],e&=~o;return a}function vc(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,e){for(var s=i.suspendedLanes,a=i.pingedLanes,o=i.expirationTimes,c=i.pendingLanes;0<c;){var d=31-oc(c),h=1<<d,_=o[d];_===-1?(!(h&s)||h&a)&&(o[d]=vc(h,e)):_<=e&&(i.expiredLanes|=h),c&=~h}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var e=[],s=0;31>s;s++)e.push(i);return e}function Ac(i,e,s){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc(e),i[e]=s}function Bc(i,e){var s=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var a=i.eventTimes;for(i=i.expirationTimes;0<s;){var o=31-oc(s),c=1<<o;e[o]=0,a[o]=-1,i[o]=-1,s&=~c}}function Cc(i,e){var s=i.entangledLanes|=e;for(i=i.entanglements;s;){var a=31-oc(s),o=1<<a;o&e|i[a]&e&&(i[a]|=e),s&=~o}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,e){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(i,e,s,a,o,c){return i===null||i.nativeEvent!==c?(i={blockedOn:e,domEventName:s,eventSystemFlags:a,nativeEvent:c,targetContainers:[o]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),i):(i.eventSystemFlags|=a,e=i.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),i)}function Uc(i,e,s,a,o){switch(e){case"focusin":return Lc=Tc(Lc,i,e,s,a,o),!0;case"dragenter":return Mc=Tc(Mc,i,e,s,a,o),!0;case"mouseover":return Nc=Tc(Nc,i,e,s,a,o),!0;case"pointerover":var c=o.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,i,e,s,a,o)),!0;case"gotpointercapture":return c=o.pointerId,Pc.set(c,Tc(Pc.get(c)||null,i,e,s,a,o)),!0}return!1}function Vc(i){var e=Wc(i.target);if(e!==null){var s=Vb(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb(s),e!==null){i.blockedOn=e,Ic(i.priority,function(){Gc(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var s=Yc(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var a=new s.constructor(s.type,s);wb=a,s.target.dispatchEvent(a),wb=null}else return e=Cb(s),e!==null&&Fc(e),i.blockedOn=s,!1;e.shift()}return!0}function Zc(i,e,s){Xc(i)&&s.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function e(o){return ad(o,i)}if(0<Kc.length){ad(Kc[0],i);for(var s=1;s<Kc.length;s++){var a=Kc[s];a.blockedOn===i&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(e),Pc.forEach(e),s=0;s<Qc.length;s++)a=Qc[s],a.blockedOn===i&&(a.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,e,s,a){var o=C,c=cd.transition;cd.transition=null;try{C=1,fd(i,e,s,a)}finally{C=o,cd.transition=c}}function gd(i,e,s,a){var o=C,c=cd.transition;cd.transition=null;try{C=4,fd(i,e,s,a)}finally{C=o,cd.transition=c}}function fd(i,e,s,a){if(dd){var o=Yc(i,e,s,a);if(o===null)hd(i,e,a,id,s),Sc(i,a);else if(Uc(o,i,e,s,a))a.stopPropagation();else if(Sc(i,a),e&4&&-1<Rc.indexOf(i)){for(;o!==null;){var c=Cb(o);if(c!==null&&Ec(c),c=Yc(i,e,s,a),c===null&&hd(i,e,a,id,s),c===o)break;o=c}o!==null&&a.stopPropagation()}else hd(i,e,a,null,s)}}var id=null;function Yc(i,e,s,a){if(id=null,i=xb(a),i=Wc(i),i!==null)if(e=Vb(i),e===null)i=null;else if(s=e.tag,s===13){if(i=Wb(e),i!==null)return i;i=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,e=ld,s=e.length,a,o="value"in kd?kd.value:kd.textContent,c=o.length;for(i=0;i<s&&e[i]===o[i];i++);var d=s-i;for(a=1;a<=d&&e[s-a]===o[c-a];a++);return md=o.slice(i,1<a?1-a:void 0)}function od(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function e(s,a,o,c,d){this._reactName=s,this._targetInst=o,this.type=a,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var h in i)i.hasOwnProperty(h)&&(s=i[h],this[h]=s?s(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od[i])?!!e[i]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(i){if(i.key){var e=Md[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(i,e){switch(i){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,e){switch(i){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return i=e.data,i===ee&&fe?null:i;default:return null}}function ke(i,e){if(ie)return i==="compositionend"||!ae&&ge(i,e)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le[i.type]:e==="textarea"}function ne(i,e,s,a){Eb(a),e=oe(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,a),i.push({event:s,listeners:e}))}var pe=null,qe=null;function re(i){se(i,0)}function te(i){var e=ue(i);if(Wa(e))return i}function ve(i,e){if(i==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,i,xb(i)),Jb(re,e)}}function Ce(i,e,s){i==="focusin"?(Ae(),pe=e,qe=s,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,e){if(i==="click")return te(e)}function Fe(i,e){if(i==="input"||i==="change")return te(e)}function Ge(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,e){if(He(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var s=Object.keys(i),a=Object.keys(e);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var o=s[a];if(!ja.call(e,o)||!He(i[o],e[o]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,e){var s=Je(i);i=0;for(var a;s;){if(s.nodeType===3){if(a=i+s.textContent.length,i<=e&&a>=e)return{node:s,offset:e-i};i=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe(i){var e=Me(),s=i.focusedElem,a=i.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(a!==null&&Ne(s)){if(e=a.start,i=a.end,i===void 0&&(i=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(i,s.value.length);else if(i=(e=s.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var o=s.textContent.length,c=Math.min(a.start,o);a=a.end===void 0?c:Math.min(a.end,o),!i.extend&&c>a&&(o=a,a=c,c=o),o=Ke(s,c);var d=Ke(s,a);o&&d&&(i.rangeCount!==1||i.anchorNode!==o.node||i.anchorOffset!==o.offset||i.focusNode!==d.node||i.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),i.removeAllRanges(),c>a?(i.addRange(e),i.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),i.addRange(e)))}}for(e=[],i=s;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)i=e[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,e,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,s),i.push({event:e,listeners:a}),e.target=Qe)))}function Ve(i,e){var s={};return s[i.toLowerCase()]=e.toLowerCase(),s["Webkit"+i]="webkit"+e,s["Moz"+i]="moz"+e,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var e=We[i],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye)return Xe[i]=e[s];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,s){var a=i.type||"unknown-event";i.currentTarget=s,Ub(a,e,void 0,i),i.currentTarget=null}function se(i,e){e=(e&4)!==0;for(var s=0;s<i.length;s++){var a=i[s],o=a.event;a=a.listeners;e:{var c=void 0;if(e)for(var d=a.length-1;0<=d;d--){var h=a[d],_=h.instance,$=h.currentTarget;if(h=h.listener,_!==c&&o.isPropagationStopped())break e;nf(o,h,$),c=_}else for(d=0;d<a.length;d++){if(h=a[d],_=h.instance,$=h.currentTarget,h=h.listener,_!==c&&o.isPropagationStopped())break e;nf(o,h,$),c=_}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D(i,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var a=i+"__bubble";s.has(a)||(pf(e,i,2,!1),s.add(a))}function qf(i,e,s){var a=0;e&&(a|=4),pf(s,i,a,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,s,a){switch(jd(e)){case 1:var o=ed;break;case 4:o=gd;break;default:o=fd}s=o.bind(null,e,s,i),o=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),a?o!==void 0?i.addEventListener(e,s,{capture:!0,passive:o}):i.addEventListener(e,s,!0):o!==void 0?i.addEventListener(e,s,{passive:o}):i.addEventListener(e,s,!1)}function hd(i,e,s,a,o){var c=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var h=a.stateNode.containerInfo;if(h===o||h.nodeType===8&&h.parentNode===o)break;if(d===4)for(d=a.return;d!==null;){var _=d.tag;if((_===3||_===4)&&(_=d.stateNode.containerInfo,_===o||_.nodeType===8&&_.parentNode===o))return;d=d.return}for(;h!==null;){if(d=Wc(h),d===null)return;if(_=d.tag,_===5||_===6){a=c=d;continue e}h=h.parentNode}}a=a.return}Jb(function(){var $=c,rt=xb(s),lt=[];e:{var ct=df.get(i);if(ct!==void 0){var bt=td,Ot=i;switch(i){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":bt=Rd;break;case"focusin":Ot="focus",bt=Fd;break;case"focusout":Ot="blur",bt=Fd;break;case"beforeblur":case"afterblur":bt=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=Vd;break;case $e:case af:case bf:bt=Hd;break;case cf:bt=Xd;break;case"scroll":bt=vd;break;case"wheel":bt=Zd;break;case"copy":case"cut":case"paste":bt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Td}var dt=(e&4)!==0,vt=!dt&&i==="scroll",at=dt?ct!==null?ct+"Capture":null:ct;dt=[];for(var et=$,j;et!==null;){j=et;var St=j.stateNode;if(j.tag===5&&St!==null&&(j=St,at!==null&&(St=Kb(et,at),St!=null&&dt.push(tf(et,St,j)))),vt)break;et=et.return}0<dt.length&&(ct=new bt(ct,Ot,null,s,rt),lt.push({event:ct,listeners:dt}))}}if(!(e&7)){e:{if(ct=i==="mouseover"||i==="pointerover",bt=i==="mouseout"||i==="pointerout",ct&&s!==wb&&(Ot=s.relatedTarget||s.fromElement)&&(Wc(Ot)||Ot[uf]))break e;if((bt||ct)&&(ct=rt.window===rt?rt:(ct=rt.ownerDocument)?ct.defaultView||ct.parentWindow:window,bt?(Ot=s.relatedTarget||s.toElement,bt=$,Ot=Ot?Wc(Ot):null,Ot!==null&&(vt=Vb(Ot),Ot!==vt||Ot.tag!==5&&Ot.tag!==6)&&(Ot=null)):(bt=null,Ot=$),bt!==Ot)){if(dt=Bd,St="onMouseLeave",at="onMouseEnter",et="mouse",(i==="pointerout"||i==="pointerover")&&(dt=Td,St="onPointerLeave",at="onPointerEnter",et="pointer"),vt=bt==null?ct:ue(bt),j=Ot==null?ct:ue(Ot),ct=new dt(St,et+"leave",bt,s,rt),ct.target=vt,ct.relatedTarget=j,St=null,Wc(rt)===$&&(dt=new dt(at,et+"enter",Ot,s,rt),dt.target=j,dt.relatedTarget=vt,St=dt),vt=St,bt&&Ot)t:{for(dt=bt,at=Ot,et=0,j=dt;j;j=vf(j))et++;for(j=0,St=at;St;St=vf(St))j++;for(;0<et-j;)dt=vf(dt),et--;for(;0<j-et;)at=vf(at),j--;for(;et--;){if(dt===at||at!==null&&dt===at.alternate)break t;dt=vf(dt),at=vf(at)}dt=null}else dt=null;bt!==null&&wf(lt,ct,bt,dt,!1),Ot!==null&&vt!==null&&wf(lt,vt,Ot,dt,!0)}}e:{if(ct=$?ue($):window,bt=ct.nodeName&&ct.nodeName.toLowerCase(),bt==="select"||bt==="input"&&ct.type==="file")var mt=ve;else if(me(ct))if(we)mt=Fe;else{mt=De;var ft=Ce}else(bt=ct.nodeName)&&bt.toLowerCase()==="input"&&(ct.type==="checkbox"||ct.type==="radio")&&(mt=Ee);if(mt&&(mt=mt(i,$))){ne(lt,mt,s,rt);break e}ft&&ft(i,ct,$),i==="focusout"&&(ft=ct._wrapperState)&&ft.controlled&&ct.type==="number"&&cb(ct,"number",ct.value)}switch(ft=$?ue($):window,i){case"focusin":(me(ft)||ft.contentEditable==="true")&&(Qe=ft,Re=$,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(lt,s,rt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(lt,s,rt)}var st;if(ae)e:{switch(i){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else ie?ge(i,s)&&(ht="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(ht="onCompositionStart");ht&&(de&&s.locale!=="ko"&&(ie||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&ie&&(st=nd()):(kd=rt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ft=oe($,ht),0<ft.length&&(ht=new Ld(ht,i,null,s,rt),lt.push({event:ht,listeners:ft}),st?ht.data=st:(st=he(s),st!==null&&(ht.data=st)))),(st=ce?je(i,s):ke(i,s))&&($=oe($,"onBeforeInput"),0<$.length&&(rt=new Ld("onBeforeInput","beforeinput",null,s,rt),lt.push({event:rt,listeners:$}),rt.data=st))}se(lt,e)})}function tf(i,e,s){return{instance:i,listener:e,currentTarget:s}}function oe(i,e){for(var s=e+"Capture",a=[];i!==null;){var o=i,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Kb(i,s),c!=null&&a.unshift(tf(i,c,o)),c=Kb(i,e),c!=null&&a.push(tf(i,c,o))),i=i.return}return a}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,s,a,o){for(var c=e._reactName,d=[];s!==null&&s!==a;){var h=s,_=h.alternate,$=h.stateNode;if(_!==null&&_===a)break;h.tag===5&&$!==null&&(h=$,o?(_=Kb(s,c),_!=null&&d.unshift(tf(s,_,h))):o||(_=Kb(s,c),_!=null&&d.push(tf(s,_,h)))),s=s.return}d.length!==0&&i.push({event:e,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,s){if(e=zf(e),zf(i)!==e&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var s=e,a=0;do{var o=s.nextSibling;if(i.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(a===0){i.removeChild(o),bd(e);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=o}while(s);bd(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return i;e--}else s==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var e=i[Of];if(e)return e;for(var s=i.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return e}i=s,s=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var s=i.type.contextTypes;if(!s)return Vf;var a=i.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in s)o[c]=e[c];return a&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H$1)}function ag(i,e,s){if(H$1.current!==Vf)throw Error(p(168));G(H$1,e),G(Wf,s)}function bg(i,e,s){var a=i.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var o in a)if(!(o in e))throw Error(p(108,Ra(i)||"Unknown",o));return A({},s,a)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G(H$1,i),G(Wf,Wf.current),!0}function dg(i,e,s){var a=i.stateNode;if(!a)throw Error(p(169));s?(i=bg(i,e,Xf),a.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H$1),G(H$1,i)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C;try{var s=eg;for(C=1;i<s.length;i++){var a=s[i];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(o){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),o}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var a=rg;i=sg;var o=32-oc(a)-1;a&=~(1<<o),s+=1;var c=32-oc(e)+o;if(30<c){var d=o-o%5;c=(a&(1<<d)-1).toString(32),a>>=d,o-=d,rg=1<<32-oc(e)+o|s<<o|a,sg=c+i}else rg=1<<c|s<<o|a,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=i,e=i.deletions,e===null?(i.deletions=[s],i.flags|=16):e.push(s)}function Cg(i,e){switch(i.tag){case 5:var s=i.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var e=yg;if(e){var s=e;if(!Cg(i,e)){if(Dg(i))throw Error(p(418));e=Lf(s.nextSibling);var a=xg;e&&Cg(i,e)?Ag(a,s):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,e){if(i&&i.defaultProps){e=A({},e),i=i.defaultProps;for(var s in i)e[s]===void 0&&(e[s]=i[s]);return e}return e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(i){var e=Mg.current;E(Mg),i._currentValue=e}function Sg(i,e,s){for(;i!==null;){var a=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),i===s)break;i=i.return}}function Tg(i,e){Ng=i,Pg=Og=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Ug=!0),i.firstContext=null)}function Vg(i){var e=i._currentValue;if(Pg!==i)if(i={context:i,memoizedValue:e,next:null},Og===null){if(Ng===null)throw Error(p(308));Og=i,Ng.dependencies={lanes:0,firstContext:i}}else Og=Og.next=i;return e}var Wg=null;function Xg(i){Wg===null?Wg=[i]:Wg.push(i)}function Yg(i,e,s,a){var o=e.interleaved;return o===null?(s.next=s,Xg(e)):(s.next=o.next,o.next=s),e.interleaved=s,Zg(i,a)}function Zg(i,e){i.lanes|=e;var s=i.alternate;for(s!==null&&(s.lanes|=e),s=i,i=i.return;i!==null;)i.childLanes|=e,s=i.alternate,s!==null&&(s.childLanes|=e),s=i,i=i.return;return s.tag===3?s.stateNode:null}var $g=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ch(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function dh(i,e,s){var a=i.updateQueue;if(a===null)return null;if(a=a.shared,K$1&2){var o=a.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),a.pending=e,Zg(i,s)}return o=a.interleaved,o===null?(e.next=e,Xg(a)):(e.next=o.next,o.next=e),a.interleaved=e,Zg(i,s)}function eh(i,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var a=e.lanes;a&=i.pendingLanes,s|=a,e.lanes=s,Cc(i,s)}}function fh(i,e){var s=i.updateQueue,a=i.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var o=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};c===null?o=c=d:c=c.next=d,s=s.next}while(s!==null);c===null?o=c=e:c=c.next=e}else o=c=e;s={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:a.shared,effects:a.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=e:i.next=e,s.lastBaseUpdate=e}function gh(i,e,s,a){var o=i.updateQueue;$g=!1;var c=o.firstBaseUpdate,d=o.lastBaseUpdate,h=o.shared.pending;if(h!==null){o.shared.pending=null;var _=h,$=_.next;_.next=null,d===null?c=$:d.next=$,d=_;var rt=i.alternate;rt!==null&&(rt=rt.updateQueue,h=rt.lastBaseUpdate,h!==d&&(h===null?rt.firstBaseUpdate=$:h.next=$,rt.lastBaseUpdate=_))}if(c!==null){var lt=o.baseState;d=0,rt=$=_=null,h=c;do{var ct=h.lane,bt=h.eventTime;if((a&ct)===ct){rt!==null&&(rt=rt.next={eventTime:bt,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var Ot=i,dt=h;switch(ct=e,bt=s,dt.tag){case 1:if(Ot=dt.payload,typeof Ot=="function"){lt=Ot.call(bt,lt,ct);break e}lt=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=dt.payload,ct=typeof Ot=="function"?Ot.call(bt,lt,ct):Ot,ct==null)break e;lt=A({},lt,ct);break e;case 2:$g=!0}}h.callback!==null&&h.lane!==0&&(i.flags|=64,ct=o.effects,ct===null?o.effects=[h]:ct.push(h))}else bt={eventTime:bt,lane:ct,tag:h.tag,payload:h.payload,callback:h.callback,next:null},rt===null?($=rt=bt,_=lt):rt=rt.next=bt,d|=ct;if(h=h.next,h===null){if(h=o.shared.pending,h===null)break;ct=h,h=ct.next,ct.next=null,o.lastBaseUpdate=ct,o.shared.pending=null}}while(1);if(rt===null&&(_=lt),o.baseState=_,o.firstBaseUpdate=$,o.lastBaseUpdate=rt,e=o.shared.interleaved,e!==null){o=e;do d|=o.lane,o=o.next;while(o!==e)}else c===null&&(o.shared.lanes=0);hh|=d,i.lanes=d,i.memoizedState=lt}}function ih(i,e,s){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var a=i[e],o=a.callback;if(o!==null){if(a.callback=null,a=s,typeof o!="function")throw Error(p(191,o));o.call(a)}}}var jh=new aa.Component().refs;function kh(i,e,s,a){e=i.memoizedState,s=s(a,e),s=s==null?e:A({},e,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var nh={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,e,s){i=i._reactInternals;var a=L(),o=lh(i),c=ch(a,o);c.payload=e,s!=null&&(c.callback=s),e=dh(i,c,o),e!==null&&(mh(e,i,o,a),eh(e,i,o))},enqueueReplaceState:function(i,e,s){i=i._reactInternals;var a=L(),o=lh(i),c=ch(a,o);c.tag=1,c.payload=e,s!=null&&(c.callback=s),e=dh(i,c,o),e!==null&&(mh(e,i,o,a),eh(e,i,o))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var s=L(),a=lh(i),o=ch(s,a);o.tag=2,e!=null&&(o.callback=e),e=dh(i,o,a),e!==null&&(mh(e,i,a,s),eh(e,i,a))}};function oh(i,e,s,a,o,c,d){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(a,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ie(s,a)||!Ie(o,c):!0}function ph(i,e,s){var a=!1,o=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=Vg(c):(o=Zf(e)?Xf:H$1.current,a=e.contextTypes,c=(a=a!=null)?Yf(i,o):Vf),e=new e(s,c),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nh,i.stateNode=e,e._reactInternals=i,a&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=c),e}function qh(i,e,s,a){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,a),e.state!==i&&nh.enqueueReplaceState(e,e.state,null)}function rh(i,e,s,a){var o=i.stateNode;o.props=s,o.state=i.memoizedState,o.refs=jh,ah(i);var c=e.contextType;typeof c=="object"&&c!==null?o.context=Vg(c):(c=Zf(e)?Xf:H$1.current,o.context=Yf(i,c)),o.state=i.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(kh(i,e,c,s),o.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&nh.enqueueReplaceState(o,o.state,null),gh(i,s,o,a),o.state=i.memoizedState),typeof o.componentDidMount=="function"&&(i.flags|=4194308)}function sh(i,e,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var a=s.stateNode}if(!a)throw Error(p(147,i));var o=a,c=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var h=o.refs;h===jh&&(h=o.refs={}),d===null?delete h[c]:h[c]=d},e._stringRef=c,e)}if(typeof i!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,i))}return i}function th(i,e){throw i=Object.prototype.toString.call(e),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function uh(i){var e=i._init;return e(i._payload)}function vh(i){function e(at,et){if(i){var j=at.deletions;j===null?(at.deletions=[et],at.flags|=16):j.push(et)}}function s(at,et){if(!i)return null;for(;et!==null;)e(at,et),et=et.sibling;return null}function a(at,et){for(at=new Map;et!==null;)et.key!==null?at.set(et.key,et):at.set(et.index,et),et=et.sibling;return at}function o(at,et){return at=wh(at,et),at.index=0,at.sibling=null,at}function c(at,et,j){return at.index=j,i?(j=at.alternate,j!==null?(j=j.index,j<et?(at.flags|=2,et):j):(at.flags|=2,et)):(at.flags|=1048576,et)}function d(at){return i&&at.alternate===null&&(at.flags|=2),at}function h(at,et,j,St){return et===null||et.tag!==6?(et=xh(j,at.mode,St),et.return=at,et):(et=o(et,j),et.return=at,et)}function _(at,et,j,St){var mt=j.type;return mt===ya?rt(at,et,j.props.children,St,j.key):et!==null&&(et.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Ha&&uh(mt)===et.type)?(St=o(et,j.props),St.ref=sh(at,et,j),St.return=at,St):(St=yh(j.type,j.key,j.props,null,at.mode,St),St.ref=sh(at,et,j),St.return=at,St)}function $(at,et,j,St){return et===null||et.tag!==4||et.stateNode.containerInfo!==j.containerInfo||et.stateNode.implementation!==j.implementation?(et=zh(j,at.mode,St),et.return=at,et):(et=o(et,j.children||[]),et.return=at,et)}function rt(at,et,j,St,mt){return et===null||et.tag!==7?(et=Ah(j,at.mode,St,mt),et.return=at,et):(et=o(et,j),et.return=at,et)}function lt(at,et,j){if(typeof et=="string"&&et!==""||typeof et=="number")return et=xh(""+et,at.mode,j),et.return=at,et;if(typeof et=="object"&&et!==null){switch(et.$$typeof){case va:return j=yh(et.type,et.key,et.props,null,at.mode,j),j.ref=sh(at,null,et),j.return=at,j;case wa:return et=zh(et,at.mode,j),et.return=at,et;case Ha:var St=et._init;return lt(at,St(et._payload),j)}if(eb(et)||Ka(et))return et=Ah(et,at.mode,j,null),et.return=at,et;th(at,et)}return null}function ct(at,et,j,St){var mt=et!==null?et.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return mt!==null?null:h(at,et,""+j,St);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case va:return j.key===mt?_(at,et,j,St):null;case wa:return j.key===mt?$(at,et,j,St):null;case Ha:return mt=j._init,ct(at,et,mt(j._payload),St)}if(eb(j)||Ka(j))return mt!==null?null:rt(at,et,j,St,null);th(at,j)}return null}function bt(at,et,j,St,mt){if(typeof St=="string"&&St!==""||typeof St=="number")return at=at.get(j)||null,h(et,at,""+St,mt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case va:return at=at.get(St.key===null?j:St.key)||null,_(et,at,St,mt);case wa:return at=at.get(St.key===null?j:St.key)||null,$(et,at,St,mt);case Ha:var ft=St._init;return bt(at,et,j,ft(St._payload),mt)}if(eb(St)||Ka(St))return at=at.get(j)||null,rt(et,at,St,mt,null);th(et,St)}return null}function Ot(at,et,j,St){for(var mt=null,ft=null,st=et,ht=et=0,ot=null;st!==null&&ht<j.length;ht++){st.index>ht?(ot=st,st=null):ot=st.sibling;var ut=ct(at,st,j[ht],St);if(ut===null){st===null&&(st=ot);break}i&&st&&ut.alternate===null&&e(at,st),et=c(ut,et,ht),ft===null?mt=ut:ft.sibling=ut,ft=ut,st=ot}if(ht===j.length)return s(at,st),I&&tg(at,ht),mt;if(st===null){for(;ht<j.length;ht++)st=lt(at,j[ht],St),st!==null&&(et=c(st,et,ht),ft===null?mt=st:ft.sibling=st,ft=st);return I&&tg(at,ht),mt}for(st=a(at,st);ht<j.length;ht++)ot=bt(st,at,ht,j[ht],St),ot!==null&&(i&&ot.alternate!==null&&st.delete(ot.key===null?ht:ot.key),et=c(ot,et,ht),ft===null?mt=ot:ft.sibling=ot,ft=ot);return i&&st.forEach(function(It){return e(at,It)}),I&&tg(at,ht),mt}function dt(at,et,j,St){var mt=Ka(j);if(typeof mt!="function")throw Error(p(150));if(j=mt.call(j),j==null)throw Error(p(151));for(var ft=mt=null,st=et,ht=et=0,ot=null,ut=j.next();st!==null&&!ut.done;ht++,ut=j.next()){st.index>ht?(ot=st,st=null):ot=st.sibling;var It=ct(at,st,ut.value,St);if(It===null){st===null&&(st=ot);break}i&&st&&It.alternate===null&&e(at,st),et=c(It,et,ht),ft===null?mt=It:ft.sibling=It,ft=It,st=ot}if(ut.done)return s(at,st),I&&tg(at,ht),mt;if(st===null){for(;!ut.done;ht++,ut=j.next())ut=lt(at,ut.value,St),ut!==null&&(et=c(ut,et,ht),ft===null?mt=ut:ft.sibling=ut,ft=ut);return I&&tg(at,ht),mt}for(st=a(at,st);!ut.done;ht++,ut=j.next())ut=bt(st,at,ht,ut.value,St),ut!==null&&(i&&ut.alternate!==null&&st.delete(ut.key===null?ht:ut.key),et=c(ut,et,ht),ft===null?mt=ut:ft.sibling=ut,ft=ut);return i&&st.forEach(function(Ct){return e(at,Ct)}),I&&tg(at,ht),mt}function vt(at,et,j,St){if(typeof j=="object"&&j!==null&&j.type===ya&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case va:e:{for(var mt=j.key,ft=et;ft!==null;){if(ft.key===mt){if(mt=j.type,mt===ya){if(ft.tag===7){s(at,ft.sibling),et=o(ft,j.props.children),et.return=at,at=et;break e}}else if(ft.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Ha&&uh(mt)===ft.type){s(at,ft.sibling),et=o(ft,j.props),et.ref=sh(at,ft,j),et.return=at,at=et;break e}s(at,ft);break}else e(at,ft);ft=ft.sibling}j.type===ya?(et=Ah(j.props.children,at.mode,St,j.key),et.return=at,at=et):(St=yh(j.type,j.key,j.props,null,at.mode,St),St.ref=sh(at,et,j),St.return=at,at=St)}return d(at);case wa:e:{for(ft=j.key;et!==null;){if(et.key===ft)if(et.tag===4&&et.stateNode.containerInfo===j.containerInfo&&et.stateNode.implementation===j.implementation){s(at,et.sibling),et=o(et,j.children||[]),et.return=at,at=et;break e}else{s(at,et);break}else e(at,et);et=et.sibling}et=zh(j,at.mode,St),et.return=at,at=et}return d(at);case Ha:return ft=j._init,vt(at,et,ft(j._payload),St)}if(eb(j))return Ot(at,et,j,St);if(Ka(j))return dt(at,et,j,St);th(at,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,et!==null&&et.tag===6?(s(at,et.sibling),et=o(et,j),et.return=at,at=et):(s(at,et),et=xh(j,at.mode,St),et.return=at,at=et),d(at)):s(at,et)}return vt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(i){if(i===Dh)throw Error(p(174));return i}function Ih(i,e){switch(G(Gh,e),G(Fh,i),G(Eh,Dh),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb(e,i)}E(Eh),G(Eh,e)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(i){Hh(Gh.current);var e=Hh(Eh.current),s=lb(e,i.type);e!==s&&(G(Fh,i),G(Eh,s))}function Lh(i){Fh.current===i&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(i){for(var e=i;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nh=[];function Oh(){for(var i=0;i<Nh.length;i++)Nh[i]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321))}function Wh(i,e){if(e===null)return!1;for(var s=0;s<e.length&&s<i.length;s++)if(!He(i[s],e[s]))return!1;return!0}function Xh(i,e,s,a,o,c){if(Rh=c,N=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ph.current=i===null||i.memoizedState===null?Yh:Zh,i=s(a,o),Th){c=0;do{if(Th=!1,Uh=0,25<=c)throw Error(p(301));c+=1,P=O=null,e.updateQueue=null,Ph.current=$h,i=s(a,o)}while(Th)}if(Ph.current=ai,e=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,e)throw Error(p(300));return i}function bi(){var i=Uh!==0;return Uh=0,i}function ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=i:P=P.next=i,P}function di(){if(O===null){var i=N.alternate;i=i!==null?i.memoizedState:null}else i=O.next;var e=P===null?N.memoizedState:P.next;if(e!==null)P=e,O=i;else{if(i===null)throw Error(p(310));O=i,i={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=i:P=P.next=i}return P}function ei(i,e){return typeof e=="function"?e(i):e}function fi(i){var e=di(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=i;var a=O,o=a.baseQueue,c=s.pending;if(c!==null){if(o!==null){var d=o.next;o.next=c.next,c.next=d}a.baseQueue=o=c,s.pending=null}if(o!==null){c=o.next,a=a.baseState;var h=d=null,_=null,$=c;do{var rt=$.lane;if((Rh&rt)===rt)_!==null&&(_=_.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),a=$.hasEagerState?$.eagerState:i(a,$.action);else{var lt={lane:rt,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};_===null?(h=_=lt,d=a):_=_.next=lt,N.lanes|=rt,hh|=rt}$=$.next}while($!==null&&$!==c);_===null?d=a:_.next=h,He(a,e.memoizedState)||(Ug=!0),e.memoizedState=a,e.baseState=d,e.baseQueue=_,s.lastRenderedState=a}if(i=s.interleaved,i!==null){o=i;do c=o.lane,N.lanes|=c,hh|=c,o=o.next;while(o!==i)}else o===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function gi(i){var e=di(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=i;var a=s.dispatch,o=s.pending,c=e.memoizedState;if(o!==null){s.pending=null;var d=o=o.next;do c=i(c,d.action),d=d.next;while(d!==o);He(c,e.memoizedState)||(Ug=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),s.lastRenderedState=c}return[c,a]}function hi(){}function ii(i,e){var s=N,a=di(),o=e(),c=!He(a.memoizedState,o);if(c&&(a.memoizedState=o,Ug=!0),a=a.queue,ji(ki.bind(null,s,a,i),[i]),a.getSnapshot!==e||c||P!==null&&P.memoizedState.tag&1){if(s.flags|=2048,li(9,mi.bind(null,s,a,o,e),void 0,null),R$1===null)throw Error(p(349));Rh&30||ni(s,e,o)}return o}function ni(i,e,s){i.flags|=16384,i={getSnapshot:e,value:s},e=N.updateQueue,e===null?(e={lastEffect:null,stores:null},N.updateQueue=e,e.stores=[i]):(s=e.stores,s===null?e.stores=[i]:s.push(i))}function mi(i,e,s,a){e.value=s,e.getSnapshot=a,oi(e)&&pi(i)}function ki(i,e,s){return s(function(){oi(e)&&pi(i)})}function oi(i){var e=i.getSnapshot;i=i.value;try{var s=e();return!He(i,s)}catch{return!0}}function pi(i){var e=Zg(i,1);e!==null&&mh(e,i,1,-1)}function qi(i){var e=ci();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},e.queue=i,i=i.dispatch=ri.bind(null,N,i),[e.memoizedState,i]}function li(i,e,s,a){return i={tag:i,create:e,destroy:s,deps:a,next:null},e=N.updateQueue,e===null?(e={lastEffect:null,stores:null},N.updateQueue=e,e.lastEffect=i.next=i):(s=e.lastEffect,s===null?e.lastEffect=i.next=i:(a=s.next,s.next=i,i.next=a,e.lastEffect=i)),i}function si(){return di().memoizedState}function ti(i,e,s,a){var o=ci();N.flags|=i,o.memoizedState=li(1|e,s,void 0,a===void 0?null:a)}function ui(i,e,s,a){var o=di();a=a===void 0?null:a;var c=void 0;if(O!==null){var d=O.memoizedState;if(c=d.destroy,a!==null&&Wh(a,d.deps)){o.memoizedState=li(e,s,c,a);return}}N.flags|=i,o.memoizedState=li(1|e,s,c,a)}function vi(i,e){return ti(8390656,8,i,e)}function ji(i,e){return ui(2048,8,i,e)}function wi(i,e){return ui(4,2,i,e)}function xi(i,e){return ui(4,4,i,e)}function yi(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function zi(i,e,s){return s=s!=null?s.concat([i]):null,ui(4,4,yi.bind(null,e,i),s)}function Ai(){}function Bi(i,e){var s=di();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Wh(e,a[1])?a[0]:(s.memoizedState=[i,e],i)}function Ci(i,e){var s=di();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Wh(e,a[1])?a[0]:(i=i(),s.memoizedState=[i,e],i)}function Di(i,e,s){return Rh&21?(He(s,e)||(s=yc(),N.lanes|=s,hh|=s,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Ug=!0),i.memoizedState=s)}function Ei(i,e){var s=C;C=s!==0&&4>s?s:4,i(!0);var a=Qh.transition;Qh.transition={};try{i(!1),e()}finally{C=s,Qh.transition=a}}function Fi(){return di().memoizedState}function Gi(i,e,s){var a=lh(i);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Hi(i))Ii(e,s);else if(s=Yg(i,e,s,a),s!==null){var o=L();mh(s,i,a,o),Ji(s,e,a)}}function ri(i,e,s){var a=lh(i),o={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hi(i))Ii(e,o);else{var c=i.alternate;if(i.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,h=c(d,s);if(o.hasEagerState=!0,o.eagerState=h,He(h,d)){var _=e.interleaved;_===null?(o.next=o,Xg(e)):(o.next=_.next,_.next=o),e.interleaved=o;return}}catch{}finally{}s=Yg(i,e,o,a),s!==null&&(o=L(),mh(s,i,a,o),Ji(s,e,a))}}function Hi(i){var e=i.alternate;return i===N||e!==null&&e===N}function Ii(i,e){Th=Sh=!0;var s=i.pending;s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e}function Ji(i,e,s){if(s&4194240){var a=e.lanes;a&=i.pendingLanes,s|=a,e.lanes=s,Cc(i,s)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(i,e){return ci().memoizedState=[i,e===void 0?null:e],i},useContext:Vg,useEffect:vi,useImperativeHandle:function(i,e,s){return s=s!=null?s.concat([i]):null,ti(4194308,4,yi.bind(null,e,i),s)},useLayoutEffect:function(i,e){return ti(4194308,4,i,e)},useInsertionEffect:function(i,e){return ti(4,2,i,e)},useMemo:function(i,e){var s=ci();return e=e===void 0?null:e,i=i(),s.memoizedState=[i,e],i},useReducer:function(i,e,s){var a=ci();return e=s!==void 0?s(e):e,a.memoizedState=a.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},a.queue=i,i=i.dispatch=Gi.bind(null,N,i),[a.memoizedState,i]},useRef:function(i){var e=ci();return i={current:i},e.memoizedState=i},useState:qi,useDebugValue:Ai,useDeferredValue:function(i){return ci().memoizedState=i},useTransition:function(){var i=qi(!1),e=i[0];return i=Ei.bind(null,i[1]),ci().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,s){var a=N,o=ci();if(I){if(s===void 0)throw Error(p(407));s=s()}else{if(s=e(),R$1===null)throw Error(p(349));Rh&30||ni(a,e,s)}o.memoizedState=s;var c={value:s,getSnapshot:e};return o.queue=c,vi(ki.bind(null,a,c,i),[i]),a.flags|=2048,li(9,mi.bind(null,a,c,s,e),void 0,null),s},useId:function(){var i=ci(),e=R$1.identifierPrefix;if(I){var s=sg,a=rg;s=(a&~(1<<32-oc(a)-1)).toString(32)+s,e=":"+e+"R"+s,s=Uh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Vh++,e=":"+e+"r"+s.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var e=di();return Di(e,O.memoizedState,i)},useTransition:function(){var i=fi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var e=di();return O===null?e.memoizedState=i:Di(e,O.memoizedState,i)},useTransition:function(){var i=gi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(i,e){try{var s="",a=e;do s+=Pa(a),a=a.return;while(a);var o=s}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:i,source:e,stack:o,digest:null}}function Li(i,e,s){return{value:i,source:null,stack:s??null,digest:e??null}}function Mi(i,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(i,e,s){s=ch(-1,s),s.tag=3,s.payload={element:null};var a=e.value;return s.callback=function(){Pi||(Pi=!0,Qi=a),Mi(i,e)},s}function Ri(i,e,s){s=ch(-1,s),s.tag=3;var a=i.type.getDerivedStateFromError;if(typeof a=="function"){var o=e.value;s.payload=function(){return a(o)},s.callback=function(){Mi(i,e)}}var c=i.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(s.callback=function(){Mi(i,e),typeof a!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),s}function Ti(i,e,s){var a=i.pingCache;if(a===null){a=i.pingCache=new Ni;var o=new Set;a.set(e,o)}else o=a.get(e),o===void 0&&(o=new Set,a.set(e,o));o.has(s)||(o.add(s),i=Ui.bind(null,i,e,s),e.then(i,i))}function Vi(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Wi(i,e,s,a,o){return i.mode&1?(i.flags|=65536,i.lanes=o,i):(i===e?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=ch(-1,1),e.tag=2,dh(s,e,1))),s.lanes|=1),i)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(i,e,s,a){e.child=i===null?Ch(e,null,s,a):Bh(e,i.child,s,a)}function Zi(i,e,s,a,o){s=s.render;var c=e.ref;return Tg(e,o),a=Xh(i,e,s,a,c,o),s=bi(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,$i(i,e,o)):(I&&s&&vg(e),e.flags|=1,Yi(i,e,a,o),e.child)}function aj(i,e,s,a,o){if(i===null){var c=s.type;return typeof c=="function"&&!bj(c)&&c.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=c,cj(i,e,c,a,o)):(i=yh(s.type,null,a,e,e.mode,o),i.ref=e.ref,i.return=e,e.child=i)}if(c=i.child,!(i.lanes&o)){var d=c.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(d,a)&&i.ref===e.ref)return $i(i,e,o)}return e.flags|=1,i=wh(c,a),i.ref=e.ref,i.return=e,e.child=i}function cj(i,e,s,a,o){if(i!==null){var c=i.memoizedProps;if(Ie(c,a)&&i.ref===e.ref)if(Ug=!1,e.pendingProps=a=c,(i.lanes&o)!==0)i.flags&131072&&(Ug=!0);else return e.lanes=i.lanes,$i(i,e,o)}return dj(i,e,s,a,o)}function ej(i,e,s){var a=e.pendingProps,o=a.children,c=i!==null?i.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=s;else{if(!(s&1073741824))return i=c!==null?c.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G(fj,gj),gj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:s,G(fj,gj),gj|=a}else c!==null?(a=c.baseLanes|s,e.memoizedState=null):a=s,G(fj,gj),gj|=a;return Yi(i,e,o,s),e.child}function hj(i,e){var s=e.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function dj(i,e,s,a,o){var c=Zf(s)?Xf:H$1.current;return c=Yf(e,c),Tg(e,o),s=Xh(i,e,s,a,c,o),a=bi(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,$i(i,e,o)):(I&&a&&vg(e),e.flags|=1,Yi(i,e,s,o),e.child)}function ij(i,e,s,a,o){if(Zf(s)){var c=!0;cg(e)}else c=!1;if(Tg(e,o),e.stateNode===null)jj(i,e),ph(e,s,a),rh(e,s,a,o),a=!0;else if(i===null){var d=e.stateNode,h=e.memoizedProps;d.props=h;var _=d.context,$=s.contextType;typeof $=="object"&&$!==null?$=Vg($):($=Zf(s)?Xf:H$1.current,$=Yf(e,$));var rt=s.getDerivedStateFromProps,lt=typeof rt=="function"||typeof d.getSnapshotBeforeUpdate=="function";lt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==a||_!==$)&&qh(e,d,a,$),$g=!1;var ct=e.memoizedState;d.state=ct,gh(e,a,d,o),_=e.memoizedState,h!==a||ct!==_||Wf.current||$g?(typeof rt=="function"&&(kh(e,s,rt,a),_=e.memoizedState),(h=$g||oh(e,s,h,a,ct,_,$))?(lt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=_),d.props=a,d.state=_,d.context=$,a=h):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{d=e.stateNode,bh(i,e),h=e.memoizedProps,$=e.type===e.elementType?h:Lg(e.type,h),d.props=$,lt=e.pendingProps,ct=d.context,_=s.contextType,typeof _=="object"&&_!==null?_=Vg(_):(_=Zf(s)?Xf:H$1.current,_=Yf(e,_));var bt=s.getDerivedStateFromProps;(rt=typeof bt=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==lt||ct!==_)&&qh(e,d,a,_),$g=!1,ct=e.memoizedState,d.state=ct,gh(e,a,d,o);var Ot=e.memoizedState;h!==lt||ct!==Ot||Wf.current||$g?(typeof bt=="function"&&(kh(e,s,bt,a),Ot=e.memoizedState),($=$g||oh(e,s,$,a,ct,Ot,_)||!1)?(rt||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,Ot,_),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,Ot,_)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&ct===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&ct===i.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=Ot),d.props=a,d.state=Ot,d.context=_,a=$):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&ct===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&ct===i.memoizedState||(e.flags|=1024),a=!1)}return kj(i,e,s,a,c,o)}function kj(i,e,s,a,o,c){hj(i,e);var d=(e.flags&128)!==0;if(!a&&!d)return o&&dg(e,s,!1),$i(i,e,c);a=e.stateNode,Xi.current=e;var h=d&&typeof s.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,i!==null&&d?(e.child=Bh(e,i.child,null,c),e.child=Bh(e,null,h,c)):Yi(i,e,h,c),e.memoizedState=a.state,o&&dg(e,s,!0),e.child}function lj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),Ih(i,e.containerInfo)}function mj(i,e,s,a,o){return Ig(),Jg(o),e.flags|=256,Yi(i,e,s,a),e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(i){return{baseLanes:i,cachePool:null,transitions:null}}function pj(i,e,s){var a=e.pendingProps,o=M.current,c=!1,d=(e.flags&128)!==0,h;if((h=d)||(h=i!==null&&i.memoizedState===null?!1:(o&2)!==0),h?(c=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(o|=1),G(M,o&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=a.children,i=a.fallback,c?(a=e.mode,c=e.child,d={mode:"hidden",children:d},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=qj(d,a,0,null),i=Ah(i,a,s,null),c.return=e,i.return=e,c.sibling=i,e.child=c,e.child.memoizedState=oj(s),e.memoizedState=nj,i):rj(e,d));if(o=i.memoizedState,o!==null&&(h=o.dehydrated,h!==null))return sj(i,e,d,a,h,o,s);if(c){c=a.fallback,d=e.mode,o=i.child,h=o.sibling;var _={mode:"hidden",children:a.children};return!(d&1)&&e.child!==o?(a=e.child,a.childLanes=0,a.pendingProps=_,e.deletions=null):(a=wh(o,_),a.subtreeFlags=o.subtreeFlags&14680064),h!==null?c=wh(h,c):(c=Ah(c,d,s,null),c.flags|=2),c.return=e,a.return=e,a.sibling=c,e.child=a,a=c,c=e.child,d=i.child.memoizedState,d=d===null?oj(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=i.childLanes&~s,e.memoizedState=nj,a}return c=i.child,i=c.sibling,a=wh(c,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=s),a.return=e,a.sibling=null,i!==null&&(s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)),e.child=a,e.memoizedState=null,a}function rj(i,e){return e=qj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function tj(i,e,s,a){return a!==null&&Jg(a),Bh(e,i.child,null,s),i=rj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function sj(i,e,s,a,o,c,d){if(s)return e.flags&256?(e.flags&=-257,a=Li(Error(p(422))),tj(i,e,d,a)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(c=a.fallback,o=e.mode,a=qj({mode:"visible",children:a.children},o,0,null),c=Ah(c,o,d,null),c.flags|=2,a.return=e,c.return=e,a.sibling=c,e.child=a,e.mode&1&&Bh(e,i.child,null,d),e.child.memoizedState=oj(d),e.memoizedState=nj,c);if(!(e.mode&1))return tj(i,e,d,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var h=a.dgst;return a=h,c=Error(p(419)),a=Li(c,a,void 0),tj(i,e,d,a)}if(h=(d&i.childLanes)!==0,Ug||h){if(a=R$1,a!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|d)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,Zg(i,o),mh(a,i,o,-1))}return uj(),a=Li(Error(p(421))),tj(i,e,d,a)}return o.data==="$?"?(e.flags|=128,e.child=i.child,e=vj.bind(null,i),o._reactRetry=e,null):(i=c.treeContext,yg=Lf(o.nextSibling),xg=e,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=rj(e,a.children),e.flags|=4096,e)}function wj(i,e,s){i.lanes|=e;var a=i.alternate;a!==null&&(a.lanes|=e),Sg(i.return,e,s)}function xj(i,e,s,a,o){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:o}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=s,c.tailMode=o)}function yj(i,e,s){var a=e.pendingProps,o=a.revealOrder,c=a.tail;if(Yi(i,e,a.children,s),a=M.current,a&2)a=a&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wj(i,s,e);else if(i.tag===19)wj(i,s,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}a&=1}if(G(M,a),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(s=e.child,o=null;s!==null;)i=s.alternate,i!==null&&Mh(i)===null&&(o=s),s=s.sibling;s=o,s===null?(o=e.child,e.child=null):(o=s.sibling,s.sibling=null),xj(e,!1,o,s,c);break;case"backwards":for(s=null,o=e.child,e.child=null;o!==null;){if(i=o.alternate,i!==null&&Mh(i)===null){e.child=o;break}i=o.sibling,o.sibling=s,s=o,o=i}xj(e,!0,s,null,c);break;case"together":xj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jj(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function $i(i,e,s){if(i!==null&&(e.dependencies=i.dependencies),hh|=e.lanes,!(s&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p(153));if(e.child!==null){for(i=e.child,s=wh(i,i.pendingProps),e.child=s,s.return=e;i.sibling!==null;)i=i.sibling,s=s.sibling=wh(i,i.pendingProps),s.return=e;s.sibling=null}return e.child}function zj(i,e,s){switch(e.tag){case 3:lj(e),Ig();break;case 5:Kh(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:Ih(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,o=e.memoizedProps.value;G(Mg,a._currentValue),a._currentValue=o;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(G(M,M.current&1),e.flags|=128,null):s&e.child.childLanes?pj(i,e,s):(G(M,M.current&1),i=$i(i,e,s),i!==null?i.sibling:null);G(M,M.current&1);break;case 19:if(a=(s&e.childLanes)!==0,i.flags&128){if(a)return yj(i,e,s);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(M,M.current),a)break;return null;case 22:case 23:return e.lanes=0,ej(i,e,s)}return $i(i,e,s)}var Aj,Bj,Cj,Dj;Aj=function(i,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bj=function(){};Cj=function(i,e,s,a){var o=i.memoizedProps;if(o!==a){i=e.stateNode,Hh(Eh.current);var c=null;switch(s){case"input":o=Ya(i,o),a=Ya(i,a),c=[];break;case"select":o=A({},o,{value:void 0}),a=A({},a,{value:void 0}),c=[];break;case"textarea":o=gb(i,o),a=gb(i,a),c=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(i.onclick=Bf)}ub(s,a);var d;s=null;for($ in o)if(!a.hasOwnProperty($)&&o.hasOwnProperty($)&&o[$]!=null)if($==="style"){var h=o[$];for(d in h)h.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(ea.hasOwnProperty($)?c||(c=[]):(c=c||[]).push($,null));for($ in a){var _=a[$];if(h=o!=null?o[$]:void 0,a.hasOwnProperty($)&&_!==h&&(_!=null||h!=null))if($==="style")if(h){for(d in h)!h.hasOwnProperty(d)||_&&_.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in _)_.hasOwnProperty(d)&&h[d]!==_[d]&&(s||(s={}),s[d]=_[d])}else s||(c||(c=[]),c.push($,s)),s=_;else $==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,h=h?h.__html:void 0,_!=null&&h!==_&&(c=c||[]).push($,_)):$==="children"?typeof _!="string"&&typeof _!="number"||(c=c||[]).push($,""+_):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(ea.hasOwnProperty($)?(_!=null&&$==="onScroll"&&D("scroll",i),c||h===_||(c=[])):(c=c||[]).push($,_))}s&&(c=c||[]).push("style",s);var $=c;(e.updateQueue=$)&&(e.flags|=4)}};Dj=function(i,e,s,a){s!==a&&(e.flags|=4)};function Ej(i,e){if(!I)switch(i.tailMode){case"hidden":e=i.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:a.sibling=null}}function S(i){var e=i.alternate!==null&&i.alternate.child===i.child,s=0,a=0;if(e)for(var o=i.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=i,o=o.sibling;else for(o=i.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=i,o=o.sibling;return i.subtreeFlags|=a,i.childLanes=s,e}function Fj(i,e,s){var a=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return a=e.stateNode,Jh(),E(Wf),E(H$1),Oh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(i,e),S(e),null;case 5:Lh(e);var o=Hh(Gh.current);if(s=e.type,i!==null&&e.stateNode!=null)Cj(i,e,s,a,o),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(i=Hh(Eh.current),Gg(e)){a=e.stateNode,s=e.type;var c=e.memoizedProps;switch(a[Of]=e,a[Pf]=c,i=(e.mode&1)!==0,s){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,c),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D("invalid",a);break;case"textarea":hb(a,c),D("invalid",a)}ub(s,c),o=null;for(var d in c)if(c.hasOwnProperty(d)){var h=c[d];d==="children"?typeof h=="string"?a.textContent!==h&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,h,i),o=["children",h]):typeof h=="number"&&a.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,h,i),o=["children",""+h]):ea.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&D("scroll",a)}switch(s){case"input":Va(a),db(a,c,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}a=o,e.updateQueue=a,a!==null&&(e.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof a.is=="string"?i=d.createElement(s,{is:a.is}):(i=d.createElement(s),s==="select"&&(d=i,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):i=d.createElementNS(i,s),i[Of]=e,i[Pf]=a,Aj(i,e,!1,!1),e.stateNode=i;e:{switch(d=vb(s,a),s){case"dialog":D("cancel",i),D("close",i),o=a;break;case"iframe":case"object":case"embed":D("load",i),o=a;break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],i);o=a;break;case"source":D("error",i),o=a;break;case"img":case"image":case"link":D("error",i),D("load",i),o=a;break;case"details":D("toggle",i),o=a;break;case"input":Za(i,a),o=Ya(i,a),D("invalid",i);break;case"option":o=a;break;case"select":i._wrapperState={wasMultiple:!!a.multiple},o=A({},a,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,a),o=gb(i,a),D("invalid",i);break;default:o=a}ub(s,o),h=o;for(c in h)if(h.hasOwnProperty(c)){var _=h[c];c==="style"?sb(i,_):c==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&nb(i,_)):c==="children"?typeof _=="string"?(s!=="textarea"||_!=="")&&ob(i,_):typeof _=="number"&&ob(i,""+_):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?_!=null&&c==="onScroll"&&D("scroll",i):_!=null&&ta(i,c,_,d))}switch(s){case"input":Va(i),db(i,a,!1);break;case"textarea":Va(i),jb(i);break;case"option":a.value!=null&&i.setAttribute("value",""+Sa(a.value));break;case"select":i.multiple=!!a.multiple,c=a.value,c!=null?fb(i,!!a.multiple,c,!1):a.defaultValue!=null&&fb(i,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(i&&e.stateNode!=null)Dj(i,e,i.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(p(166));if(s=Hh(Gh.current),Hh(Eh.current),Gg(e)){if(a=e.stateNode,s=e.memoizedProps,a[Of]=e,(c=a.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af(a.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(i.mode&1)!==0)}c&&(e.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=e,e.stateNode=a}return S(e),null;case 13:if(E(M),a=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),a!==null&&a.dehydrated!==null){if(i===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),c=!1}else zg!==null&&(Gj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(a=a!==null,a!==(i!==null&&i.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(i===null||M.current&1?T===0&&(T=3):uj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return Jh(),Bj(i,e),i===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return Rg(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(M),c=e.memoizedState,c===null)return S(e),null;if(a=(e.flags&128)!==0,d=c.rendering,d===null)if(a)Ej(c,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(d=Mh(i),d!==null){for(e.flags|=128,Ej(c,!1),a=d.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=s,s=e.child;s!==null;)c=s,i=a,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=i,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,i=d.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G(M,M.current&1|2),e.child}i=i.sibling}c.tail!==null&&B()>Hj&&(e.flags|=128,a=!0,Ej(c,!1),e.lanes=4194304)}else{if(!a)if(i=Mh(d),i!==null){if(e.flags|=128,a=!0,s=i.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Ej(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(e),null}else 2*B()-c.renderingStartTime>Hj&&s!==1073741824&&(e.flags|=128,a=!0,Ej(c,!1),e.lanes=4194304);c.isBackwards?(d.sibling=e.child,e.child=d):(s=c.last,s!==null?s.sibling=d:e.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B(),e.sibling=null,s=M.current,G(M,a?s&1|2:s&1),e):(S(e),null);case 22:case 23:return Ij(),a=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?gj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Jj(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Jh(),E(Wf),E(H$1),Oh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(E(M),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(i,e){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W$1(i,e,a)}else s.current=null}function Nj(i,e,s){try{s()}catch(a){W$1(i,e,a)}}var Oj=!1;function Pj(i,e){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{s=(s=i.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var o=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var d=0,h=-1,_=-1,$=0,rt=0,lt=i,ct=null;t:for(;;){for(var bt;lt!==s||o!==0&&lt.nodeType!==3||(h=d+o),lt!==c||a!==0&&lt.nodeType!==3||(_=d+a),lt.nodeType===3&&(d+=lt.nodeValue.length),(bt=lt.firstChild)!==null;)ct=lt,lt=bt;for(;;){if(lt===i)break t;if(ct===s&&++$===o&&(h=d),ct===c&&++rt===a&&(_=d),(bt=lt.nextSibling)!==null)break;lt=ct,ct=lt.parentNode}lt=bt}s=h===-1||_===-1?null:{start:h,end:_}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd=!1,V=e;V!==null;)if(e=V,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V=i;else for(;V!==null;){e=V;try{var Ot=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Ot!==null){var dt=Ot.memoizedProps,vt=Ot.memoizedState,at=e.stateNode,et=at.getSnapshotBeforeUpdate(e.elementType===e.type?dt:Lg(e.type,dt),vt);at.__reactInternalSnapshotBeforeUpdate=et}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(St){W$1(e,e.return,St)}if(i=e.sibling,i!==null){i.return=e.return,V=i;break}V=e.return}return Ot=Oj,Oj=!1,Ot}function Qj(i,e,s){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&i)===i){var c=o.destroy;o.destroy=void 0,c!==void 0&&Nj(e,s,c)}o=o.next}while(o!==a)}}function Rj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&i)===i){var a=s.create;s.destroy=a()}s=s.next}while(s!==e)}}function Sj(i){var e=i.ref;if(e!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof e=="function"?e(i):e.current=i}}function Tj(i){var e=i.alternate;e!==null&&(i.alternate=null,Tj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uj(i){return i.tag===5||i.tag===3||i.tag===4}function Vj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wj(i,e,s){var a=i.tag;if(a===5||a===6)i=i.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(i,e):s.insertBefore(i,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(i,s)):(e=s,e.appendChild(i)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(a!==4&&(i=i.child,i!==null))for(Wj(i,e,s),i=i.sibling;i!==null;)Wj(i,e,s),i=i.sibling}function Xj(i,e,s){var a=i.tag;if(a===5||a===6)i=i.stateNode,e?s.insertBefore(i,e):s.appendChild(i);else if(a!==4&&(i=i.child,i!==null))for(Xj(i,e,s),i=i.sibling;i!==null;)Xj(i,e,s),i=i.sibling}var X=null,Yj=!1;function Zj(i,e,s){for(s=s.child;s!==null;)ak(i,e,s),s=s.sibling}function ak(i,e,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Mj(s,e);case 6:var a=X,o=Yj;X=null,Zj(i,e,s),X=a,Yj=o,X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd(i)):Kf(X,s.stateNode));break;case 4:a=X,o=Yj,X=s.stateNode.containerInfo,Yj=!0,Zj(i,e,s),X=a,Yj=o;break;case 0:case 11:case 14:case 15:if(!U&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var c=o,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Nj(s,e,d),o=o.next}while(o!==a)}Zj(i,e,s);break;case 1:if(!U&&(Mj(s,e),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(h){W$1(s,e,h)}Zj(i,e,s);break;case 21:Zj(i,e,s);break;case 22:s.mode&1?(U=(a=U)||s.memoizedState!==null,Zj(i,e,s),U=a):Zj(i,e,s);break;default:Zj(i,e,s)}}function bk(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Lj),e.forEach(function(a){var o=ck.bind(null,i,a);s.has(a)||(s.add(a),a.then(o,o))})}}function dk(i,e){var s=e.deletions;if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];try{var c=i,d=e,h=d;e:for(;h!==null;){switch(h.tag){case 5:X=h.stateNode,Yj=!1;break e;case 3:X=h.stateNode.containerInfo,Yj=!0;break e;case 4:X=h.stateNode.containerInfo,Yj=!0;break e}h=h.return}if(X===null)throw Error(p(160));ak(c,d,o),X=null,Yj=!1;var _=o.alternate;_!==null&&(_.return=null),o.return=null}catch($){W$1(o,e,$)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ek(e,i),e=e.sibling}function ek(i,e){var s=i.alternate,a=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dk(e,i),fk(i),a&4){try{Qj(3,i,i.return),Rj(3,i)}catch(dt){W$1(i,i.return,dt)}try{Qj(5,i,i.return)}catch(dt){W$1(i,i.return,dt)}}break;case 1:dk(e,i),fk(i),a&512&&s!==null&&Mj(s,s.return);break;case 5:if(dk(e,i),fk(i),a&512&&s!==null&&Mj(s,s.return),i.flags&32){var o=i.stateNode;try{ob(o,"")}catch(dt){W$1(i,i.return,dt)}}if(a&4&&(o=i.stateNode,o!=null)){var c=i.memoizedProps,d=s!==null?s.memoizedProps:c,h=i.type,_=i.updateQueue;if(i.updateQueue=null,_!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&ab(o,c),vb(h,d);var $=vb(h,c);for(d=0;d<_.length;d+=2){var rt=_[d],lt=_[d+1];rt==="style"?sb(o,lt):rt==="dangerouslySetInnerHTML"?nb(o,lt):rt==="children"?ob(o,lt):ta(o,rt,lt,$)}switch(h){case"input":bb(o,c);break;case"textarea":ib(o,c);break;case"select":var ct=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var bt=c.value;bt!=null?fb(o,!!c.multiple,bt,!1):ct!==!!c.multiple&&(c.defaultValue!=null?fb(o,!!c.multiple,c.defaultValue,!0):fb(o,!!c.multiple,c.multiple?[]:"",!1))}o[Pf]=c}catch(dt){W$1(i,i.return,dt)}}break;case 6:if(dk(e,i),fk(i),a&4){if(i.stateNode===null)throw Error(p(162));o=i.stateNode,c=i.memoizedProps;try{o.nodeValue=c}catch(dt){W$1(i,i.return,dt)}}break;case 3:if(dk(e,i),fk(i),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(dt){W$1(i,i.return,dt)}break;case 4:dk(e,i),fk(i);break;case 13:dk(e,i),fk(i),o=i.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(gk=B())),a&4&&bk(i);break;case 22:if(rt=s!==null&&s.memoizedState!==null,i.mode&1?(U=($=U)||rt,dk(e,i),U=$):dk(e,i),fk(i),a&8192){if($=i.memoizedState!==null,(i.stateNode.isHidden=$)&&!rt&&i.mode&1)for(V=i,rt=i.child;rt!==null;){for(lt=V=rt;V!==null;){switch(ct=V,bt=ct.child,ct.tag){case 0:case 11:case 14:case 15:Qj(4,ct,ct.return);break;case 1:Mj(ct,ct.return);var Ot=ct.stateNode;if(typeof Ot.componentWillUnmount=="function"){a=ct,s=ct.return;try{e=a,Ot.props=e.memoizedProps,Ot.state=e.memoizedState,Ot.componentWillUnmount()}catch(dt){W$1(a,s,dt)}}break;case 5:Mj(ct,ct.return);break;case 22:if(ct.memoizedState!==null){hk(lt);continue}}bt!==null?(bt.return=ct,V=bt):hk(lt)}rt=rt.sibling}e:for(rt=null,lt=i;;){if(lt.tag===5){if(rt===null){rt=lt;try{o=lt.stateNode,$?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=lt.stateNode,_=lt.memoizedProps.style,d=_!=null&&_.hasOwnProperty("display")?_.display:null,h.style.display=rb("display",d))}catch(dt){W$1(i,i.return,dt)}}}else if(lt.tag===6){if(rt===null)try{lt.stateNode.nodeValue=$?"":lt.memoizedProps}catch(dt){W$1(i,i.return,dt)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===i)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===i)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===i)break e;rt===lt&&(rt=null),lt=lt.return}rt===lt&&(rt=null),lt.sibling.return=lt.return,lt=lt.sibling}}break;case 19:dk(e,i),fk(i),a&4&&bk(i);break;case 21:break;default:dk(e,i),fk(i)}}function fk(i){var e=i.flags;if(e&2){try{e:{for(var s=i.return;s!==null;){if(Uj(s)){var a=s;break e}s=s.return}throw Error(p(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(ob(o,""),a.flags&=-33);var c=Vj(i);Xj(i,c,o);break;case 3:case 4:var d=a.stateNode.containerInfo,h=Vj(i);Wj(i,h,d);break;default:throw Error(p(161))}}catch(_){W$1(i,i.return,_)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function ik(i,e,s){V=i,jk(i)}function jk(i,e,s){for(var a=(i.mode&1)!==0;V!==null;){var o=V,c=o.child;if(o.tag===22&&a){var d=o.memoizedState!==null||Kj;if(!d){var h=o.alternate,_=h!==null&&h.memoizedState!==null||U;h=Kj;var $=U;if(Kj=d,(U=_)&&!$)for(V=o;V!==null;)d=V,_=d.child,d.tag===22&&d.memoizedState!==null?kk(o):_!==null?(_.return=d,V=_):kk(o);for(;c!==null;)V=c,jk(c),c=c.sibling;V=o,Kj=h,U=$}lk(i)}else o.subtreeFlags&8772&&c!==null?(c.return=o,V=c):lk(i)}}function lk(i){for(;V!==null;){var e=V;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Rj(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!U)if(s===null)a.componentDidMount();else{var o=e.elementType===e.type?s.memoizedProps:Lg(e.type,s.memoizedProps);a.componentDidUpdate(o,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&ih(e,c,a);break;case 3:var d=e.updateQueue;if(d!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}ih(e,d,s)}break;case 5:var h=e.stateNode;if(s===null&&e.flags&4){s=h;var _=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&s.focus();break;case"img":_.src&&(s.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var $=e.alternate;if($!==null){var rt=$.memoizedState;if(rt!==null){var lt=rt.dehydrated;lt!==null&&bd(lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Sj(e)}catch(ct){W$1(e,e.return,ct)}}if(e===i){V=null;break}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}}function hk(i){for(;V!==null;){var e=V;if(e===i){V=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V=s;break}V=e.return}}function kk(i){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Rj(4,e)}catch(_){W$1(e,s,_)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var o=e.return;try{a.componentDidMount()}catch(_){W$1(e,o,_)}}var c=e.return;try{Sj(e)}catch(_){W$1(e,c,_)}break;case 5:var d=e.return;try{Sj(e)}catch(_){W$1(e,d,_)}}}catch(_){W$1(e,e.return,_)}if(e===i){V=null;break}var h=e.sibling;if(h!==null){h.return=e.return,V=h;break}V=e.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$1=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K$1&6?B():Bk!==-1?Bk:Bk=B()}function lh(i){return i.mode&1?K$1&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function mh(i,e,s,a){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(i,s,a),(!(K$1&2)||i!==R$1)&&(i===R$1&&(!(K$1&2)&&(rk|=s),T===4&&Dk(i,Z)),Ek(i,a),s===1&&K$1===0&&!(e.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(i,e){var s=i.callbackNode;wc(i,e);var a=uc(i,i===R$1?Z:0);if(a===0)s!==null&&bc(s),i.callbackNode=null,i.callbackPriority=0;else if(e=a&-a,i.callbackPriority!==e){if(s!=null&&bc(s),e===1)i.tag===0?ig(Fk.bind(null,i)):hg(Fk.bind(null,i)),Jf(function(){!(K$1&6)&&jg()}),s=null;else{switch(Dc(a)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Gk(s,Hk.bind(null,i))}i.callbackPriority=e,i.callbackNode=s}}function Hk(i,e){if(Bk=-1,Ck=0,K$1&6)throw Error(p(327));var s=i.callbackNode;if(Ik()&&i.callbackNode!==s)return null;var a=uc(i,i===R$1?Z:0);if(a===0)return null;if(a&30||a&i.expiredLanes||e)e=Jk(i,a);else{e=a;var o=K$1;K$1|=2;var c=Kk();(R$1!==i||Z!==e)&&(vk=null,Hj=B()+500,Lk(i,e));do try{Mk();break}catch(h){Nk(i,h)}while(1);Qg(),nk.current=c,K$1=o,Y!==null?e=0:(R$1=null,Z=0,e=T)}if(e!==0){if(e===2&&(o=xc(i),o!==0&&(a=o,e=Ok(i,o))),e===1)throw s=qk,Lk(i,0),Dk(i,a),Ek(i,B()),s;if(e===6)Dk(i,a);else{if(o=i.current.alternate,!(a&30)&&!Pk(o)&&(e=Jk(i,a),e===2&&(c=xc(i),c!==0&&(a=c,e=Ok(i,c))),e===1))throw s=qk,Lk(i,0),Dk(i,a),Ek(i,B()),s;switch(i.finishedWork=o,i.finishedLanes=a,e){case 0:case 1:throw Error(p(345));case 2:Qk(i,uk,vk);break;case 3:if(Dk(i,a),(a&130023424)===a&&(e=gk+500-B(),10<e)){if(uc(i,0)!==0)break;if(o=i.suspendedLanes,(o&a)!==a){L(),i.pingedLanes|=i.suspendedLanes&o;break}i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),e);break}Qk(i,uk,vk);break;case 4:if(Dk(i,a),(a&4194240)===a)break;for(e=i.eventTimes,o=-1;0<a;){var d=31-oc(a);c=1<<d,d=e[d],d>o&&(o=d),a&=~c}if(a=o,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*mk(a/1960))-a,10<a){i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),a);break}Qk(i,uk,vk);break;case 5:Qk(i,uk,vk);break;default:throw Error(p(329))}}}return Ek(i,B()),i.callbackNode===s?Hk.bind(null,i):null}function Ok(i,e){var s=tk;return i.current.memoizedState.isDehydrated&&(Lk(i,e).flags|=256),i=Jk(i,e),i!==2&&(e=uk,uk=s,e!==null&&Gj(e)),i}function Gj(i){uk===null?uk=i:uk.push.apply(uk,i)}function Pk(i){for(var e=i;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var o=s[a],c=o.getSnapshot;o=o.value;try{if(!He(c(),o))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dk(i,e){for(e&=~sk,e&=~rk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var s=31-oc(e),a=1<<s;i[s]=-1,e&=~a}}function Fk(i){if(K$1&6)throw Error(p(327));Ik();var e=uc(i,0);if(!(e&1))return Ek(i,B()),null;var s=Jk(i,e);if(i.tag!==0&&s===2){var a=xc(i);a!==0&&(e=a,s=Ok(i,a))}if(s===1)throw s=qk,Lk(i,0),Dk(i,e),Ek(i,B()),s;if(s===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Qk(i,uk,vk),Ek(i,B()),null}function Rk(i,e){var s=K$1;K$1|=1;try{return i(e)}finally{K$1=s,K$1===0&&(Hj=B()+500,fg&&jg())}}function Sk(i){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var e=K$1;K$1|=1;var s=pk.transition,a=C;try{if(pk.transition=null,C=1,i)return i()}finally{C=a,pk.transition=s,K$1=e,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(i,e){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:Jh(),E(Wf),E(H$1),Oh();break;case 5:Lh(a);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(a.type._context);break;case 22:case 23:Ij()}s=s.return}if(R$1=i,Y=i=wh(i.current,null),Z=gj=e,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(e=0;e<Wg.length;e++)if(s=Wg[e],a=s.interleaved,a!==null){s.interleaved=null;var o=a.next,c=s.pending;if(c!==null){var d=c.next;c.next=o,a.next=d}s.pending=a}Wg=null}return i}function Nk(i,e){do{var s=Y;try{if(Qg(),Ph.current=ai,Sh){for(var a=N.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,s===null||s.return===null){T=1,qk=e,Y=null;break}e:{var c=i,d=s.return,h=s,_=e;if(e=Z,h.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var $=_,rt=h,lt=rt.tag;if(!(rt.mode&1)&&(lt===0||lt===11||lt===15)){var ct=rt.alternate;ct?(rt.updateQueue=ct.updateQueue,rt.memoizedState=ct.memoizedState,rt.lanes=ct.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var bt=Vi(d);if(bt!==null){bt.flags&=-257,Wi(bt,d,h,c,e),bt.mode&1&&Ti(c,$,e),e=bt,_=$;var Ot=e.updateQueue;if(Ot===null){var dt=new Set;dt.add(_),e.updateQueue=dt}else Ot.add(_);break e}else{if(!(e&1)){Ti(c,$,e),uj();break e}_=Error(p(426))}}else if(I&&h.mode&1){var vt=Vi(d);if(vt!==null){!(vt.flags&65536)&&(vt.flags|=256),Wi(vt,d,h,c,e),Jg(Ki(_,h));break e}}c=_=Ki(_,h),T!==4&&(T=2),tk===null?tk=[c]:tk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var at=Oi(c,_,e);fh(c,at);break e;case 1:h=_;var et=c.type,j=c.stateNode;if(!(c.flags&128)&&(typeof et.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Si===null||!Si.has(j)))){c.flags|=65536,e&=-e,c.lanes|=e;var St=Ri(c,h,e);fh(c,St);break e}}c=c.return}while(c!==null)}Tk(s)}catch(mt){e=mt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(1)}function Kk(){var i=nk.current;return nk.current=ai,i===null?ai:i}function uj(){(T===0||T===3||T===2)&&(T=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z)}function Jk(i,e){var s=K$1;K$1|=2;var a=Kk();(R$1!==i||Z!==e)&&(vk=null,Lk(i,e));do try{Uk();break}catch(o){Nk(i,o)}while(1);if(Qg(),K$1=s,nk.current=a,Y!==null)throw Error(p(261));return R$1=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(i){var e=Wk(i.alternate,i,gj);i.memoizedProps=i.pendingProps,e===null?Tk(i):Y=e,ok.current=null}function Tk(i){var e=i;do{var s=e.alternate;if(i=e.return,e.flags&32768){if(s=Jj(s,e),s!==null){s.flags&=32767,Y=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(s=Fj(s,e,gj),s!==null){Y=s;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=i}while(e!==null);T===0&&(T=5)}function Qk(i,e,s){var a=C,o=pk.transition;try{pk.transition=null,C=1,Xk(i,e,s,a)}finally{pk.transition=o,C=a}return null}function Xk(i,e,s,a){do Ik();while(xk!==null);if(K$1&6)throw Error(p(327));s=i.finishedWork;var o=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var c=s.lanes|s.childLanes;if(Bc(i,c),i===R$1&&(Y=R$1=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),c=(s.flags&15990)!==0,s.subtreeFlags&15990||c){c=pk.transition,pk.transition=null;var d=C;C=1;var h=K$1;K$1|=4,ok.current=null,Pj(i,s),ek(s,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=s,ik(s),dc(),K$1=h,C=d,pk.transition=c}else i.current=s;if(wk&&(wk=!1,xk=i,yk=o),c=i.pendingLanes,c===0&&(Si=null),mc(s.stateNode),Ek(i,B()),e!==null)for(a=i.onRecoverableError,s=0;s<e.length;s++)o=e[s],a(o.value,{componentStack:o.stack,digest:o.digest});if(Pi)throw Pi=!1,i=Qi,Qi=null,i;return yk&1&&i.tag!==0&&Ik(),c=i.pendingLanes,c&1?i===Ak?zk++:(zk=0,Ak=i):zk=0,jg(),null}function Ik(){if(xk!==null){var i=Dc(yk),e=pk.transition,s=C;try{if(pk.transition=null,C=16>i?16:i,xk===null)var a=!1;else{if(i=xk,xk=null,yk=0,K$1&6)throw Error(p(331));var o=K$1;for(K$1|=4,V=i.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var h=c.deletions;if(h!==null){for(var _=0;_<h.length;_++){var $=h[_];for(V=$;V!==null;){var rt=V;switch(rt.tag){case 0:case 11:case 15:Qj(8,rt,c)}var lt=rt.child;if(lt!==null)lt.return=rt,V=lt;else for(;V!==null;){rt=V;var ct=rt.sibling,bt=rt.return;if(Tj(rt),rt===$){V=null;break}if(ct!==null){ct.return=bt,V=ct;break}V=bt}}}var Ot=c.alternate;if(Ot!==null){var dt=Ot.child;if(dt!==null){Ot.child=null;do{var vt=dt.sibling;dt.sibling=null,dt=vt}while(dt!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Qj(9,c,c.return)}var at=c.sibling;if(at!==null){at.return=c.return,V=at;break e}V=c.return}}var et=i.current;for(V=et;V!==null;){d=V;var j=d.child;if(d.subtreeFlags&2064&&j!==null)j.return=d,V=j;else e:for(d=et;V!==null;){if(h=V,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Rj(9,h)}}catch(mt){W$1(h,h.return,mt)}if(h===d){V=null;break e}var St=h.sibling;if(St!==null){St.return=h.return,V=St;break e}V=h.return}}if(K$1=o,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}a=!0}return a}finally{C=s,pk.transition=e}}return!1}function Yk(i,e,s){e=Ki(s,e),e=Oi(i,e,1),i=dh(i,e,1),e=L(),i!==null&&(Ac(i,1,e),Ek(i,e))}function W$1(i,e,s){if(i.tag===3)Yk(i,i,s);else for(;e!==null;){if(e.tag===3){Yk(e,i,s);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Si===null||!Si.has(a))){i=Ki(s,i),i=Ri(e,i,1),e=dh(e,i,1),i=L(),e!==null&&(Ac(e,1,i),Ek(e,i));break}}e=e.return}}function Ui(i,e,s){var a=i.pingCache;a!==null&&a.delete(e),e=L(),i.pingedLanes|=i.suspendedLanes&s,R$1===i&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(i,0):sk|=s),Ek(i,e)}function Zk(i,e){e===0&&(i.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var s=L();i=Zg(i,e),i!==null&&(Ac(i,e,s),Ek(i,s))}function vj(i){var e=i.memoizedState,s=0;e!==null&&(s=e.retryLane),Zk(i,s)}function ck(i,e){var s=0;switch(i.tag){case 13:var a=i.stateNode,o=i.memoizedState;o!==null&&(s=o.retryLane);break;case 19:a=i.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(e),Zk(i,s)}var Wk;Wk=function(i,e,s){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)Ug=!0;else{if(!(i.lanes&s)&&!(e.flags&128))return Ug=!1,zj(i,e,s);Ug=!!(i.flags&131072)}else Ug=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;jj(i,e),i=e.pendingProps;var o=Yf(e,H$1.current);Tg(e,s),o=Xh(null,e,a,i,o,s);var c=bi();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(a)?(c=!0,cg(e)):c=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,ah(e),o.updater=nh,e.stateNode=o,o._reactInternals=e,rh(e,a,i,s),e=kj(null,e,a,!0,c,s)):(e.tag=0,I&&c&&vg(e),Yi(null,e,o,s),e=e.child),e;case 16:a=e.elementType;e:{switch(jj(i,e),i=e.pendingProps,o=a._init,a=o(a._payload),e.type=a,o=e.tag=$k(a),i=Lg(a,i),o){case 0:e=dj(null,e,a,i,s);break e;case 1:e=ij(null,e,a,i,s);break e;case 11:e=Zi(null,e,a,i,s);break e;case 14:e=aj(null,e,a,Lg(a.type,i),s);break e}throw Error(p(306,a,""))}return e;case 0:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Lg(a,o),dj(i,e,a,o,s);case 1:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Lg(a,o),ij(i,e,a,o,s);case 3:e:{if(lj(e),i===null)throw Error(p(387));a=e.pendingProps,c=e.memoizedState,o=c.element,bh(i,e),gh(e,a,null,s);var d=e.memoizedState;if(a=d.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){o=Ki(Error(p(423)),e),e=mj(i,e,a,s,o);break e}else if(a!==o){o=Ki(Error(p(424)),e),e=mj(i,e,a,s,o);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,s=Ch(e,null,a,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===o){e=$i(i,e,s);break e}Yi(i,e,a,s)}e=e.child}return e;case 5:return Kh(e),i===null&&Eg(e),a=e.type,o=e.pendingProps,c=i!==null?i.memoizedProps:null,d=o.children,Ef(a,o)?d=null:c!==null&&Ef(a,c)&&(e.flags|=32),hj(i,e),Yi(i,e,d,s),e.child;case 6:return i===null&&Eg(e),null;case 13:return pj(i,e,s);case 4:return Ih(e,e.stateNode.containerInfo),a=e.pendingProps,i===null?e.child=Bh(e,null,a,s):Yi(i,e,a,s),e.child;case 11:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Lg(a,o),Zi(i,e,a,o,s);case 7:return Yi(i,e,e.pendingProps,s),e.child;case 8:return Yi(i,e,e.pendingProps.children,s),e.child;case 12:return Yi(i,e,e.pendingProps.children,s),e.child;case 10:e:{if(a=e.type._context,o=e.pendingProps,c=e.memoizedProps,d=o.value,G(Mg,a._currentValue),a._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===o.children&&!Wf.current){e=$i(i,e,s);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){d=c.child;for(var _=h.firstContext;_!==null;){if(_.context===a){if(c.tag===1){_=ch(-1,s&-s),_.tag=2;var $=c.updateQueue;if($!==null){$=$.shared;var rt=$.pending;rt===null?_.next=_:(_.next=rt.next,rt.next=_),$.pending=_}}c.lanes|=s,_=c.alternate,_!==null&&(_.lanes|=s),Sg(c.return,s,e),h.lanes|=s;break}_=_.next}}else if(c.tag===10)d=c.type===e.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=s,h=d.alternate,h!==null&&(h.lanes|=s),Sg(d,s,e),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Yi(i,e,o.children,s),e=e.child}return e;case 9:return o=e.type,a=e.pendingProps.children,Tg(e,s),o=Vg(o),a=a(o),e.flags|=1,Yi(i,e,a,s),e.child;case 14:return a=e.type,o=Lg(a,e.pendingProps),o=Lg(a.type,o),aj(i,e,a,o,s);case 15:return cj(i,e,e.type,e.pendingProps,s);case 17:return a=e.type,o=e.pendingProps,o=e.elementType===a?o:Lg(a,o),jj(i,e),e.tag=1,Zf(a)?(i=!0,cg(e)):i=!1,Tg(e,s),ph(e,a,o),rh(e,a,o,s),kj(null,e,a,!0,i,s);case 19:return yj(i,e,s);case 22:return ej(i,e,s)}throw Error(p(156,e.tag))};function Gk(i,e){return ac(i,e)}function al(i,e,s,a){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,s,a){return new al(i,e,s,a)}function bj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $k(i){if(typeof i=="function")return bj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function wh(i,e){var s=i.alternate;return s===null?(s=Bg(i.tag,e,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=e,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function yh(i,e,s,a,o,c){var d=2;if(a=i,typeof i=="function")bj(i)&&(d=1);else if(typeof i=="string")d=5;else e:switch(i){case ya:return Ah(s.children,o,c,e);case za:d=8,o|=8;break;case Aa:return i=Bg(12,s,e,o|2),i.elementType=Aa,i.lanes=c,i;case Ea:return i=Bg(13,s,e,o),i.elementType=Ea,i.lanes=c,i;case Fa:return i=Bg(19,s,e,o),i.elementType=Fa,i.lanes=c,i;case Ia:return qj(s,o,c,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,a=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return e=Bg(d,s,e,o),e.elementType=i,e.type=a,e.lanes=c,e}function Ah(i,e,s,a){return i=Bg(7,i,a,e),i.lanes=s,i}function qj(i,e,s,a){return i=Bg(22,i,a,e),i.elementType=Ia,i.lanes=s,i.stateNode={isHidden:!1},i}function xh(i,e,s){return i=Bg(6,i,null,e),i.lanes=s,i}function zh(i,e,s){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=s,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function bl(i,e,s,a,o){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function cl(i,e,s,a,o,c,d,h,_){return i=new bl(i,e,s,h,_),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),i.current=c,c.stateNode=i,c.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(c),i}function dl(i,e,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:i,containerInfo:e,implementation:s}}function el(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,e)}return e}function fl(i,e,s,a,o,c,d,h,_){return i=cl(s,a,!0,i,o,c,d,h,_),i.context=el(null),s=i.current,a=L(),o=lh(s),c=ch(a,o),c.callback=e??null,dh(s,c,o),i.current.lanes=o,Ac(i,o,a),Ek(i,a),i}function gl(i,e,s,a){var o=e.current,c=L(),d=lh(o);return s=el(s),e.context===null?e.context=s:e.pendingContext=s,e=ch(c,d),e.payload={element:i},a=a===void 0?null:a,a!==null&&(e.callback=a),i=dh(o,e,d),i!==null&&(mh(i,o,d,c),eh(i,o,d)),d}function hl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function il(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<e?s:e}}function jl(i,e){il(i,e),(i=i.alternate)&&il(i,e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(i){console.error(i)};function ml(i){this._internalRoot=i}nl.prototype.render=ml.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p(409));gl(i,e,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Sk(function(){gl(null,i,null,null)}),e[uf]=null}};function nl(i){this._internalRoot=i}nl.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc();i={blockedOn:null,target:i,priority:e};for(var s=0;s<Qc.length&&e!==0&&e<Qc[s].priority;s++);Qc.splice(s,0,i),s===0&&Vc(i)}};function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(i,e,s,a,o){if(o){if(typeof a=="function"){var c=a;a=function(){var $=hl(d);c.call($)}}var d=fl(e,a,i,0,null,!1,!1,"",ql);return i._reactRootContainer=d,i[uf]=d.current,sf(i.nodeType===8?i.parentNode:i),Sk(),d}for(;o=i.lastChild;)i.removeChild(o);if(typeof a=="function"){var h=a;a=function(){var $=hl(_);h.call($)}}var _=cl(i,0,!1,null,null,!1,!1,"",ql);return i._reactRootContainer=_,i[uf]=_.current,sf(i.nodeType===8?i.parentNode:i),Sk(function(){gl(e,_,s,a)}),_}function sl(i,e,s,a,o){var c=s._reactRootContainer;if(c){var d=c;if(typeof o=="function"){var h=o;o=function(){var _=hl(d);h.call(_)}}gl(e,d,i,o)}else d=rl(s,e,i,o,a);return hl(d)}Ec=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc(e.pendingLanes);s!==0&&(Cc(e,s|1),Ek(e,B()),!(K$1&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var a=Zg(i,1);if(a!==null){var o=L();mh(a,i,1,o)}}),jl(i,1)}};Fc=function(i){if(i.tag===13){var e=Zg(i,134217728);if(e!==null){var s=L();mh(e,i,134217728,s)}jl(i,134217728)}};Gc=function(i){if(i.tag===13){var e=lh(i),s=Zg(i,e);if(s!==null){var a=L();mh(s,i,e,a)}jl(i,e)}};Hc=function(){return C};Ic=function(i,e){var s=C;try{return C=i,e()}finally{C=s}};yb=function(i,e,s){switch(e){case"input":if(bb(i,s),e=s.name,s.type==="radio"&&e!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var a=s[e];if(a!==i&&a.form===i.form){var o=Db(a);if(!o)throw Error(p(90));Wa(a),bb(a,o)}}}break;case"textarea":ib(i,s);break;case"select":e=s.value,e!=null&&fb(i,!!s.multiple,e,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(i,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(e))throw Error(p(200));return dl(i,e,null,s)};reactDom_production_min.createRoot=function(i,e){if(!ol(i))throw Error(p(299));var s=!1,a="",o=ll;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=cl(i,1,!1,null,null,s,!1,a,o),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ml(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=Zb(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Sk(i)};reactDom_production_min.hydrate=function(i,e,s){if(!pl(e))throw Error(p(200));return sl(null,i,e,!0,s)};reactDom_production_min.hydrateRoot=function(i,e,s){if(!ol(i))throw Error(p(405));var a=s!=null&&s.hydratedSources||null,o=!1,c="",d=ll;if(s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),e=fl(e,null,i,1,s??null,o,!1,c,d),i[uf]=e.current,sf(i),a)for(i=0;i<a.length;i++)s=a[i],o=s._getVersion,o=o(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,o]:e.mutableSourceEagerHydrationData.push(s,o);return new nl(e)};reactDom_production_min.render=function(i,e,s){if(!pl(e))throw Error(p(200));return sl(null,i,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!pl(i))throw Error(p(40));return i._reactRootContainer?(Sk(function(){sl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,s,a){if(!pl(s))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return sl(i,e,s,!1,a)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const logo="/assets/logo-90221358.svg",App$1="",style="",LIB_VERSION="0.9.0";let ElectricContext=reactExports.createContext(void 0);function makeElectricContext(){const i=reactExports.createContext(void 0);return ElectricContext=i,{ElectricContext:i,useElectric:()=>reactExports.useContext(i),ElectricProvider:({children:a,db:o})=>React.createElement(i.Provider,{value:o},a)}}const defaults=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function objectHash(i,e){e?e={...defaults,...e}:e=defaults;const s=createHasher(e);return s.dispatch(i),s.toString()}const defaultPrototypesKeys=Object.freeze(["prototype","__proto__","constructor"]);function createHasher(i){let e="",s=new Map;const a=o=>{e+=o};return{toString(){return e},getContext(){return s},dispatch(o){return i.replacer&&(o=i.replacer(o)),this[o===null?"null":typeof o](o)},object(o){if(o&&typeof o.toJSON=="function")return this.object(o.toJSON());const c=Object.prototype.toString.call(o);let d="";const h=c.length;h<10?d="unknown:["+c+"]":d=c.slice(8,h-1),d=d.toLowerCase();let _=null;if((_=s.get(o))===void 0)s.set(o,s.size);else return this.dispatch("[CIRCULAR:"+_+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(o))return a("buffer:"),a(o.toString("utf8"));if(d!=="object"&&d!=="function"&&d!=="asyncfunction")this[d]?this[d](o):i.ignoreUnknown||this.unkown(o,d);else{let $=Object.keys(o);i.unorderedObjects&&($=$.sort());let rt=[];i.respectType!==!1&&!isNativeFunction(o)&&(rt=defaultPrototypesKeys),i.excludeKeys&&($=$.filter(ct=>!i.excludeKeys(ct)),rt=rt.filter(ct=>!i.excludeKeys(ct))),a("object:"+($.length+rt.length)+":");const lt=ct=>{this.dispatch(ct),a(":"),i.excludeValues||this.dispatch(o[ct]),a(",")};for(const ct of $)lt(ct);for(const ct of rt)lt(ct)}},array(o,c){if(c=c===void 0?i.unorderedArrays!==!1:c,a("array:"+o.length+":"),!c||o.length<=1){for(const _ of o)this.dispatch(_);return}const d=new Map,h=o.map(_=>{const $=createHasher(i);$.dispatch(_);for(const[rt,lt]of $.getContext())d.set(rt,lt);return $.toString()});return s=d,h.sort(),this.array(h,!1)},date(o){return a("date:"+o.toJSON())},symbol(o){return a("symbol:"+o.toString())},unkown(o,c){if(a(c),!!o&&(a(":"),o&&typeof o.entries=="function"))return this.array(Array.from(o.entries()),!0)},error(o){return a("error:"+o.toString())},boolean(o){return a("bool:"+o)},string(o){a("string:"+o.length+":"),a(o)},function(o){a("fn:"),isNativeFunction(o)?this.dispatch("[native]"):this.dispatch(o.toString()),i.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(o.name)),i.respectFunctionProperties&&this.object(o)},number(o){return a("number:"+o)},xml(o){return a("xml:"+o.toString())},null(){return a("Null")},undefined(){return a("Undefined")},regexp(o){return a("regex:"+o.toString())},uint8array(o){return a("uint8array:"),this.dispatch(Array.prototype.slice.call(o))},uint8clampedarray(o){return a("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(o))},int8array(o){return a("int8array:"),this.dispatch(Array.prototype.slice.call(o))},uint16array(o){return a("uint16array:"),this.dispatch(Array.prototype.slice.call(o))},int16array(o){return a("int16array:"),this.dispatch(Array.prototype.slice.call(o))},uint32array(o){return a("uint32array:"),this.dispatch(Array.prototype.slice.call(o))},int32array(o){return a("int32array:"),this.dispatch(Array.prototype.slice.call(o))},float32array(o){return a("float32array:"),this.dispatch(Array.prototype.slice.call(o))},float64array(o){return a("float64array:"),this.dispatch(Array.prototype.slice.call(o))},arraybuffer(o){return a("arraybuffer:"),this.dispatch(new Uint8Array(o))},url(o){return a("url:"+o.toString())},map(o){a("map:");const c=[...o];return this.array(c,i.unorderedSets!==!1)},set(o){a("set:");const c=[...o];return this.array(c,i.unorderedSets!==!1)},file(o){return a("file:"),this.dispatch([o.name,o.size,o.type,o.lastModfied])},blob(){if(i.ignoreUnknown)return a("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return a("domwindow")},bigint(o){return a("bigint:"+o.toString())},process(){return a("process")},timer(){return a("timer")},pipe(){return a("pipe")},tcp(){return a("tcp")},udp(){return a("udp")},tty(){return a("tty")},statwatcher(){return a("statwatcher")},securecontext(){return a("securecontext")},connection(){return a("connection")},zlib(){return a("zlib")},context(){return a("context")},nodescript(){return a("nodescript")},httpparser(){return a("httpparser")},dataview(){return a("dataview")},signal(){return a("signal")},fsevent(){return a("fsevent")},tlswrap(){return a("tlswrap")}}}const nativeFunc="[native code] }",nativeFuncLength=nativeFunc.length;function isNativeFunction(i){return typeof i!="function"?!1:Function.prototype.toString.call(i).slice(-nativeFuncLength)===nativeFunc}class WordArray{constructor(e,s){e=this.words=e||[],this.sigBytes=s===void 0?e.length*4:s}toString(e){return(e||Hex).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let s=0;s<e.sigBytes;s++){const a=e.words[s>>>2]>>>24-s%4*8&255;this.words[this.sigBytes+s>>>2]|=a<<24-(this.sigBytes+s)%4*8}else for(let s=0;s<e.sigBytes;s+=4)this.words[this.sigBytes+s>>>2]=e.words[s>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new WordArray([...this.words])}}const Hex={stringify(i){const e=[];for(let s=0;s<i.sigBytes;s++){const a=i.words[s>>>2]>>>24-s%4*8&255;e.push((a>>>4).toString(16),(a&15).toString(16))}return e.join("")}},Base64={stringify(i){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=[];for(let a=0;a<i.sigBytes;a+=3){const o=i.words[a>>>2]>>>24-a%4*8&255,c=i.words[a+1>>>2]>>>24-(a+1)%4*8&255,d=i.words[a+2>>>2]>>>24-(a+2)%4*8&255,h=o<<16|c<<8|d;for(let _=0;_<4&&a*8+_*6<i.sigBytes*8;_++)s.push(e.charAt(h>>>6*(3-_)&63))}return s.join("")}},Latin1={parse(i){const e=i.length,s=[];for(let a=0;a<e;a++)s[a>>>2]|=(i.charCodeAt(a)&255)<<24-a%4*8;return new WordArray(s,e)}},Utf8={parse(i){return Latin1.parse(unescape(encodeURIComponent(i)))}};class BufferedBlockAlgorithm{constructor(){this._data=new WordArray,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=512/32}reset(){this._data=new WordArray,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=Utf8.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,s){}_process(e){let s,a=this._data.sigBytes/(this.blockSize*4);e?a=Math.ceil(a):a=Math.max((a|0)-this._minBufferSize,0);const o=a*this.blockSize,c=Math.min(o*4,this._data.sigBytes);if(o){for(let d=0;d<o;d+=this.blockSize)this._doProcessBlock(this._data.words,d);s=this._data.words.splice(0,o),this._data.sigBytes-=c}return new WordArray(s,c)}}class Hasher extends BufferedBlockAlgorithm{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}const H=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],K=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],W=[];class SHA256 extends Hasher{constructor(){super(...arguments),this._hash=new WordArray([...H])}reset(){super.reset(),this._hash=new WordArray([...H])}_doProcessBlock(e,s){const a=this._hash.words;let o=a[0],c=a[1],d=a[2],h=a[3],_=a[4],$=a[5],rt=a[6],lt=a[7];for(let ct=0;ct<64;ct++){if(ct<16)W[ct]=e[s+ct]|0;else{const j=W[ct-15],St=(j<<25|j>>>7)^(j<<14|j>>>18)^j>>>3,mt=W[ct-2],ft=(mt<<15|mt>>>17)^(mt<<13|mt>>>19)^mt>>>10;W[ct]=St+W[ct-7]+ft+W[ct-16]}const bt=_&$^~_&rt,Ot=o&c^o&d^c&d,dt=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),vt=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),at=lt+vt+bt+K[ct]+W[ct],et=dt+Ot;lt=rt,rt=$,$=_,_=h+at|0,h=d,d=c,c=o,o=at+et|0}a[0]=a[0]+o|0,a[1]=a[1]+c|0,a[2]=a[2]+d|0,a[3]=a[3]+h|0,a[4]=a[4]+_|0,a[5]=a[5]+$|0,a[6]=a[6]+rt|0,a[7]=a[7]+lt|0}finalize(e){super.finalize(e);const s=this._nDataBytes*8,a=this._data.sigBytes*8;return this._data.words[a>>>5]|=128<<24-a%32,this._data.words[(a+64>>>9<<4)+14]=Math.floor(s/4294967296),this._data.words[(a+64>>>9<<4)+15]=s,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function sha256base64(i){return new SHA256().finalize(i).toString(Base64)}function hash(i,e={}){const s=typeof i=="string"?i:objectHash(i,e);return sha256base64(s).slice(0,10)}class QualifiedTablename{constructor(e,s){Zt(this,"namespace");Zt(this,"tablename");this.namespace=e,this.tablename=s}isEqual({namespace:e,tablename:s}){return e===this.namespace&&s===this.tablename}toString(){return`${this.namespace}.${this.tablename}`}}const hasIntersection=(i,e)=>{const s=i.length,a=e.length;for(let o=0;o<s;++o){const c=i[o];for(let d=0;d<a;++d){const h=e[d];if(c.isEqual(h))return!0}}return!1};function successResult(i){return{error:void 0,results:i,updatedAt:new Date}}function errorResult(i){return{error:i,results:void 0,updatedAt:new Date}}function useLiveQuery(i,e){return e?useLiveQueryWithDependencies(i,e):useLiveQueryWithQueryHash(i)}function useLiveQueryWithDependencies(i,e){const s=reactExports.useMemo(i,e);return useLiveQueryWithQueryUpdates(s,[s])}function useLiveQueryWithQueryHash(i){const e=reactExports.useMemo(()=>hash(i.sourceQuery),[i.sourceQuery]);return useLiveQueryWithQueryUpdates(i,[e])}function useLiveQueryWithQueryUpdates(i,e){const s=reactExports.useContext(ElectricContext),a=reactExports.useRef(),o=reactExports.useRef(),c=reactExports.useRef(),[d,h]=reactExports.useState({});reactExports.useEffect(()=>{let $=!1;return(async()=>{try{const lt=await i();$||(c.current=JSON.stringify(lt.tablenames),o.current=lt.tablenames,h(successResult(lt.result)))}catch(lt){$||h(errorResult(lt))}})(),()=>{$=!0}},e);const _=reactExports.useCallback(async()=>{try{const $=await i();h(successResult($.result))}catch($){h(errorResult($))}},e);return reactExports.useEffect(()=>{if(s===void 0||c.current===void 0||o.current===void 0)return;let $=!1;const rt=s.notifier,lt=bt=>{const Ot=rt.alias(bt);o.current&&hasIntersection(o.current,Ot)&&($||_())},ct=rt.subscribeToDataChanges(lt);return a.current!==void 0&&a.current(),a.current=ct,()=>{$=!0,ct()}},[s,c.current,o.current,_]),d}var useLiveQuery_default=useLiveQuery;const genUUID=()=>{if(globalThis.crypto&&globalThis.crypto.randomUUID)return globalThis.crypto.randomUUID();const i=new Uint8Array(16);if(globalThis.crypto&&globalThis.crypto.getRandomValues)globalThis.crypto.getRandomValues(i);else for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);i[6]=i[6]&15|64,i[8]=i[8]&63|128;const e=[];return i.forEach(s=>{e.push(s.toString(16).padStart(2,"0"))}),e.slice(0,4).join("")+"-"+e.slice(4,6).join("")+"-"+e.slice(6,8).join("")+"-"+e.slice(8,10).join("")+"-"+e.slice(10).join("")};var base64$4={exports:{}};/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */base64$4.exports;(function(i,e){(function(s){var a=e,o=i&&i.exports==a&&i,c=typeof commonjsGlobal=="object"&&commonjsGlobal;(c.global===c||c.window===c)&&(s=c);var d=function(Ot){this.message=Ot};d.prototype=new Error,d.prototype.name="InvalidCharacterError";var h=function(Ot){throw new d(Ot)},_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$=/[\t\n\f\r ]/g,rt=function(Ot){Ot=String(Ot).replace($,"");var dt=Ot.length;dt%4==0&&(Ot=Ot.replace(/==?$/,""),dt=Ot.length),(dt%4==1||/[^+a-zA-Z0-9/]/.test(Ot))&&h("Invalid character: the string to be decoded is not correctly encoded.");for(var vt=0,at,et,j="",St=-1;++St<dt;)et=_.indexOf(Ot.charAt(St)),at=vt%4?at*64+et:et,vt++%4&&(j+=String.fromCharCode(255&at>>(-2*vt&6)));return j},lt=function(Ot){Ot=String(Ot),/[^\0-\xFF]/.test(Ot)&&h("The string to be encoded contains characters outside of the Latin1 range.");for(var dt=Ot.length%3,vt="",at=-1,et,j,St,mt,ft=Ot.length-dt;++at<ft;)et=Ot.charCodeAt(at)<<16,j=Ot.charCodeAt(++at)<<8,St=Ot.charCodeAt(++at),mt=et+j+St,vt+=_.charAt(mt>>18&63)+_.charAt(mt>>12&63)+_.charAt(mt>>6&63)+_.charAt(mt&63);return dt==2?(et=Ot.charCodeAt(at)<<8,j=Ot.charCodeAt(++at),mt=et+j,vt+=_.charAt(mt>>10)+_.charAt(mt>>4&63)+_.charAt(mt<<2&63)+"="):dt==1&&(mt=Ot.charCodeAt(at),vt+=_.charAt(mt>>2)+_.charAt(mt<<4&63)+"=="),vt},ct={encode:lt,decode:rt,version:"1.0.0"};if(a&&!a.nodeType)if(o)o.exports=ct;else for(var bt in ct)ct.hasOwnProperty(bt)&&(a[bt]=ct[bt]);else s.base64=ct})(commonjsGlobal)})(base64$4,base64$4.exports);var base64Exports=base64$4.exports;const BASE64=getDefaultExportFromCjs(base64Exports);let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(i,e=0){return byteToHex[i[e+0]]+byteToHex[i[e+1]]+byteToHex[i[e+2]]+byteToHex[i[e+3]]+"-"+byteToHex[i[e+4]]+byteToHex[i[e+5]]+"-"+byteToHex[i[e+6]]+byteToHex[i[e+7]]+"-"+byteToHex[i[e+8]]+byteToHex[i[e+9]]+"-"+byteToHex[i[e+10]]+byteToHex[i[e+11]]+byteToHex[i[e+12]]+byteToHex[i[e+13]]+byteToHex[i[e+14]]+byteToHex[i[e+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(i,e,s){if(native.randomUUID&&!e&&!i)return native.randomUUID();i=i||{};const a=i.random||(i.rng||rng)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){s=s||0;for(let o=0;o<16;++o)e[s+o]=a[o];return e}return unsafeStringify(a)}let uuidImpl=v4;const typeDecoder={bool:bytesToBool,text:bytesToString,timetz:bytesToTimetzString,float:bytesToFloat},typeEncoder={bool:boolToBytes,text:i=>new TextEncoder().encode(i),timetz:i=>typeEncoder.text(stringToTimetzString(i))},base64$3={fromBytes:i=>BASE64.encode(String.fromCharCode.apply(null,new Uint8Array(i))),toBytes:i=>Uint8Array.from(BASE64.decode(i),e=>e.charCodeAt(0))},DEFAULT_LOG_POS=numberToBytes(0),trueByte="t".charCodeAt(0),falseByte="f".charCodeAt(0);function boolToBytes(i){if(i!==0&&i!==1)throw new Error(`Invalid boolean value: ${i}`);return new Uint8Array([i===1?trueByte:falseByte])}function bytesToBool(i){if(i.length===1&&(i[0]===trueByte||i[0]===falseByte))return i[0]===trueByte?1:0;throw new Error(`Invalid binary-encoded boolean value: ${i}`)}function numberToBytes(i){return Uint8Array.of((i&4278190080)>>24,(i&16711680)>>16,(i&65280)>>8,(i&255)>>0)}function bytesToNumber(i){let e=0;for(const s of i.values())e=e<<8|s;return e}function bytesToString(i){return new TextDecoder().decode(i)}function bytesToTimetzString(i){return bytesToString(i).replace("+00","")}function bytesToFloat(i){const e=typeDecoder.text(i);return e==="NaN"?"NaN":Number(e)}function stringToTimetzString(i){return`${i}+00`}function uuid(){return uuidImpl()}function emptyPromise(){let i,e;return{promise:new Promise((a,o)=>{i=a,e=o}),resolve:i,reject:e}}function getWaiter(){const{promise:i,resolve:e,reject:s}=emptyPromise();let a=!1,o=!1;return{waitOn:async()=>{a=!0,await i},resolve:async()=>{o=!0,e()},reject:async c=>{o=!0,a?s(c):e()},finished:()=>o}}const overrideDefined=(i={},e={})=>{const s={};for(const[a,o]of Object.entries(e))o!==void 0&&(s[a]=o);return Object.assign({},i,s)},dangerousKeywords=["add","alter","commit","create","delete","drop","exec","insert","select into","set","truncate","update"],dangerousKeywordsExp=new RegExp(dangerousKeywords.map(i=>`\\b${i}\\b`).join("|"),"imu"),isPotentiallyDangerous=i=>dangerousKeywordsExp.test(i),parseTableNames=(i,e="main")=>{const s=/(?:FROM|JOIN)\s+([a-zA-Z_][a-zA-Z0-9_$.]*)/gi,a=[];let o;for(;(o=s.exec(i))!==null;)a.push(o[1]);const c=[];return Array.from(a).map(d=>_ensureQualified(d,e)).sort().forEach(d=>{const[h,_]=d.split(".");c.push(new QualifiedTablename(h,_))}),c},_ensureQualified=(i,e="main")=>i.includes(".")?i:`${e}.${i}`;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(i,e,s){this.low=i|0,this.high=e|0,this.unsigned=!!s}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(i){return(i&&i.__isLong__)===!0}function ctz32(i){var e=Math.clz32(i&-i);return i?31-e:e}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(i,e){var s,a,o;return e?(i>>>=0,(o=0<=i&&i<256)&&(a=UINT_CACHE[i],a)?a:(s=fromBits(i,0,!0),o&&(UINT_CACHE[i]=s),s)):(i|=0,(o=-128<=i&&i<128)&&(a=INT_CACHE[i],a)?a:(s=fromBits(i,i<0?-1:0,!1),o&&(INT_CACHE[i]=s),s))}Long.fromInt=fromInt;function fromNumber(i,e){if(isNaN(i))return e?UZERO:ZERO;if(e){if(i<0)return UZERO;if(i>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(i<=-TWO_PWR_63_DBL)return MIN_VALUE;if(i+1>=TWO_PWR_63_DBL)return MAX_VALUE}return i<0?fromNumber(-i,e).neg():fromBits(i%TWO_PWR_32_DBL|0,i/TWO_PWR_32_DBL|0,e)}Long.fromNumber=fromNumber;function fromBits(i,e,s){return new Long(i,e,s)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(i,e,s){if(i.length===0)throw Error("empty string");if(typeof e=="number"?(s=e,e=!1):e=!!e,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return e?UZERO:ZERO;if(s=s||10,s<2||36<s)throw RangeError("radix");var a;if((a=i.indexOf("-"))>0)throw Error("interior hyphen");if(a===0)return fromString(i.substring(1),e,s).neg();for(var o=fromNumber(pow_dbl(s,8)),c=ZERO,d=0;d<i.length;d+=8){var h=Math.min(8,i.length-d),_=parseInt(i.substring(d,d+h),s);if(h<8){var $=fromNumber(pow_dbl(s,h));c=c.mul($).add(fromNumber(_))}else c=c.mul(o),c=c.add(fromNumber(_))}return c.unsigned=e,c}Long.fromString=fromString;function fromValue(i,e){return typeof i=="number"?fromNumber(i,e):typeof i=="string"?fromString(i,e):fromBits(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var s=fromNumber(e),a=this.div(s),o=a.mul(s).sub(this);return a.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var c=fromNumber(pow_dbl(e,6),this.unsigned),d=this,h="";;){var _=d.div(c),$=d.sub(_.mul(c)).toInt()>>>0,rt=$.toString(e);if(d=_,d.isZero())return rt+h;for(;rt.length<6;)rt="0"+rt;h=""+rt+h}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,s=31;s>0&&!(e&1<<s);s--);return this.high!=0?s+33:s+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function(e){return!this.eq(e)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function(e){return this.comp(e)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function(e){return this.comp(e)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var s=this.isNegative(),a=e.isNegative();return s&&!a?-1:!s&&a?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var s=this.high>>>16,a=this.high&65535,o=this.low>>>16,c=this.low&65535,d=e.high>>>16,h=e.high&65535,_=e.low>>>16,$=e.low&65535,rt=0,lt=0,ct=0,bt=0;return bt+=c+$,ct+=bt>>>16,bt&=65535,ct+=o+_,lt+=ct>>>16,ct&=65535,lt+=a+h,rt+=lt>>>16,lt&=65535,rt+=s+d,rt&=65535,fromBits(ct<<16|bt,rt<<16|lt,this.unsigned)};LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function(e){if(this.isZero())return this;if(isLong(e)||(e=fromValue(e)),wasm){var s=wasm.mul(this.low,this.high,e.low,e.high);return fromBits(s,wasm.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?UZERO:ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var a=this.high>>>16,o=this.high&65535,c=this.low>>>16,d=this.low&65535,h=e.high>>>16,_=e.high&65535,$=e.low>>>16,rt=e.low&65535,lt=0,ct=0,bt=0,Ot=0;return Ot+=d*rt,bt+=Ot>>>16,Ot&=65535,bt+=c*rt,ct+=bt>>>16,bt&=65535,bt+=d*$,ct+=bt>>>16,bt&=65535,ct+=o*rt,lt+=ct>>>16,ct&=65535,ct+=c*$,lt+=ct>>>16,ct&=65535,ct+=d*_,lt+=ct>>>16,ct&=65535,lt+=a*rt+o*$+c*_+d*h,lt&=65535,fromBits(bt<<16|Ot,lt<<16|ct,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var s=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high);return fromBits(s,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var a,o,c;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;c=UZERO}else{if(this.eq(MIN_VALUE)){if(e.eq(ONE)||e.eq(NEG_ONE))return MIN_VALUE;if(e.eq(MIN_VALUE))return ONE;var d=this.shr(1);return a=d.div(e).shl(1),a.eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(o=this.sub(e.mul(a)),c=a.add(o.div(e)),c)}else if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();c=ZERO}for(o=this;o.gte(e);){a=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var h=Math.ceil(Math.log(a)/Math.LN2),_=h<=48?1:pow_dbl(2,h-48),$=fromNumber(a),rt=$.mul(e);rt.isNegative()||rt.gt(o);)a-=_,$=fromNumber(a,this.unsigned),rt=$.mul(e);$.isZero()&&($=ONE),c=c.add($),o=o.sub(rt)}return c};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function(e){if(isLong(e)||(e=fromValue(e)),wasm){var s=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high);return fromBits(s,wasm.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};LongPrototype.clz=LongPrototype.countLeadingZeros;LongPrototype.countTrailingZeros=function(){return this.low?ctz32(this.low):ctz32(this.high)+32};LongPrototype.ctz=LongPrototype.countTrailingZeros;LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)};LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)};LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)};LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?fromBits(this.high,0,this.unsigned):fromBits(this.high>>>e-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.rotateLeft=function(e){var s;return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?fromBits(this.high,this.low,this.unsigned):e<32?(s=32-e,fromBits(this.low<<e|this.high>>>s,this.high<<e|this.low>>>s,this.unsigned)):(e-=32,s=32-e,fromBits(this.high<<e|this.low>>>s,this.low<<e|this.high>>>s,this.unsigned))};LongPrototype.rotl=LongPrototype.rotateLeft;LongPrototype.rotateRight=function(e){var s;return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?fromBits(this.high,this.low,this.unsigned):e<32?(s=32-e,fromBits(this.high<<s|this.low>>>e,this.low<<s|this.high>>>e,this.unsigned)):(e-=32,s=32-e,fromBits(this.low<<s|this.high>>>e,this.high<<s|this.low>>>e,this.unsigned))};LongPrototype.rotr=LongPrototype.rotateRight;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var e=this.high,s=this.low;return[s&255,s>>>8&255,s>>>16&255,s>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};LongPrototype.toBytesBE=function(){var e=this.high,s=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,s>>>24,s>>>16&255,s>>>8&255,s&255]};Long.fromBytes=function(e,s,a){return a?Long.fromBytesLE(e,s):Long.fromBytesBE(e,s)};Long.fromBytesLE=function(e,s){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,s)};Long.fromBytesBE=function(e,s){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],s)};var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(i,e){for(var s=new Array(arguments.length-1),a=0,o=2,c=!0;o<arguments.length;)s[a++]=arguments[o++];return new Promise(function(h,_){s[a]=function(rt){if(c)if(c=!1,rt)_(rt);else{for(var lt=new Array(arguments.length-1),ct=0;ct<lt.length;)lt[ct++]=arguments[ct];h.apply(null,lt)}};try{i.apply(e||null,s)}catch($){c&&(c=!1,_($))}})}var base64$2={};(function(i){var e=i;e.length=function(h){var _=h.length;if(!_)return 0;for(var $=0;--_%4>1&&h.charAt(_)==="=";)++$;return Math.ceil(h.length*3)/4-$};for(var s=new Array(64),a=new Array(123),o=0;o<64;)a[s[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(h,_,$){for(var rt=null,lt=[],ct=0,bt=0,Ot;_<$;){var dt=h[_++];switch(bt){case 0:lt[ct++]=s[dt>>2],Ot=(dt&3)<<4,bt=1;break;case 1:lt[ct++]=s[Ot|dt>>4],Ot=(dt&15)<<2,bt=2;break;case 2:lt[ct++]=s[Ot|dt>>6],lt[ct++]=s[dt&63],bt=0;break}ct>8191&&((rt||(rt=[])).push(String.fromCharCode.apply(String,lt)),ct=0)}return bt&&(lt[ct++]=s[Ot],lt[ct++]=61,bt===1&&(lt[ct++]=61)),rt?(ct&&rt.push(String.fromCharCode.apply(String,lt.slice(0,ct))),rt.join("")):String.fromCharCode.apply(String,lt.slice(0,ct))};var c="invalid encoding";e.decode=function(h,_,$){for(var rt=$,lt=0,ct,bt=0;bt<h.length;){var Ot=h.charCodeAt(bt++);if(Ot===61&&lt>1)break;if((Ot=a[Ot])===void 0)throw Error(c);switch(lt){case 0:ct=Ot,lt=1;break;case 1:_[$++]=ct<<2|(Ot&48)>>4,ct=Ot,lt=2;break;case 2:_[$++]=(ct&15)<<4|(Ot&60)>>2,ct=Ot,lt=3;break;case 3:_[$++]=(ct&3)<<6|Ot,lt=0;break}}if(lt===1)throw Error(c);return $-rt},e.test=function(h){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(h)}})(base64$2);var eventemitter=EventEmitter$2;function EventEmitter$2(){this._listeners={}}EventEmitter$2.prototype.on=function(e,s,a){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:s,ctx:a||this}),this};EventEmitter$2.prototype.off=function(e,s){if(e===void 0)this._listeners={};else if(s===void 0)this._listeners[e]=[];else for(var a=this._listeners[e],o=0;o<a.length;)a[o].fn===s?a.splice(o,1):++o;return this};EventEmitter$2.prototype.emit=function(e){var s=this._listeners[e];if(s){for(var a=[],o=1;o<arguments.length;)a.push(arguments[o++]);for(o=0;o<s.length;)s[o].fn.apply(s[o++].ctx,a)}return this};var float=factory(factory);function factory(i){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),s=new Uint8Array(e.buffer),a=s[3]===128;function o(_,$,rt){e[0]=_,$[rt]=s[0],$[rt+1]=s[1],$[rt+2]=s[2],$[rt+3]=s[3]}function c(_,$,rt){e[0]=_,$[rt]=s[3],$[rt+1]=s[2],$[rt+2]=s[1],$[rt+3]=s[0]}i.writeFloatLE=a?o:c,i.writeFloatBE=a?c:o;function d(_,$){return s[0]=_[$],s[1]=_[$+1],s[2]=_[$+2],s[3]=_[$+3],e[0]}function h(_,$){return s[3]=_[$],s[2]=_[$+1],s[1]=_[$+2],s[0]=_[$+3],e[0]}i.readFloatLE=a?d:h,i.readFloatBE=a?h:d}():function(){function e(a,o,c,d){var h=o<0?1:0;if(h&&(o=-o),o===0)a(1/o>0?0:2147483648,c,d);else if(isNaN(o))a(2143289344,c,d);else if(o>34028234663852886e22)a((h<<31|2139095040)>>>0,c,d);else if(o<11754943508222875e-54)a((h<<31|Math.round(o/1401298464324817e-60))>>>0,c,d);else{var _=Math.floor(Math.log(o)/Math.LN2),$=Math.round(o*Math.pow(2,-_)*8388608)&8388607;a((h<<31|_+127<<23|$)>>>0,c,d)}}i.writeFloatLE=e.bind(null,writeUintLE),i.writeFloatBE=e.bind(null,writeUintBE);function s(a,o,c){var d=a(o,c),h=(d>>31)*2+1,_=d>>>23&255,$=d&8388607;return _===255?$?NaN:h*(1/0):_===0?h*1401298464324817e-60*$:h*Math.pow(2,_-150)*($+8388608)}i.readFloatLE=s.bind(null,readUintLE),i.readFloatBE=s.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),s=new Uint8Array(e.buffer),a=s[7]===128;function o(_,$,rt){e[0]=_,$[rt]=s[0],$[rt+1]=s[1],$[rt+2]=s[2],$[rt+3]=s[3],$[rt+4]=s[4],$[rt+5]=s[5],$[rt+6]=s[6],$[rt+7]=s[7]}function c(_,$,rt){e[0]=_,$[rt]=s[7],$[rt+1]=s[6],$[rt+2]=s[5],$[rt+3]=s[4],$[rt+4]=s[3],$[rt+5]=s[2],$[rt+6]=s[1],$[rt+7]=s[0]}i.writeDoubleLE=a?o:c,i.writeDoubleBE=a?c:o;function d(_,$){return s[0]=_[$],s[1]=_[$+1],s[2]=_[$+2],s[3]=_[$+3],s[4]=_[$+4],s[5]=_[$+5],s[6]=_[$+6],s[7]=_[$+7],e[0]}function h(_,$){return s[7]=_[$],s[6]=_[$+1],s[5]=_[$+2],s[4]=_[$+3],s[3]=_[$+4],s[2]=_[$+5],s[1]=_[$+6],s[0]=_[$+7],e[0]}i.readDoubleLE=a?d:h,i.readDoubleBE=a?h:d}():function(){function e(a,o,c,d,h,_){var $=d<0?1:0;if($&&(d=-d),d===0)a(0,h,_+o),a(1/d>0?0:2147483648,h,_+c);else if(isNaN(d))a(0,h,_+o),a(2146959360,h,_+c);else if(d>17976931348623157e292)a(0,h,_+o),a(($<<31|2146435072)>>>0,h,_+c);else{var rt;if(d<22250738585072014e-324)rt=d/5e-324,a(rt>>>0,h,_+o),a(($<<31|rt/4294967296)>>>0,h,_+c);else{var lt=Math.floor(Math.log(d)/Math.LN2);lt===1024&&(lt=1023),rt=d*Math.pow(2,-lt),a(rt*4503599627370496>>>0,h,_+o),a(($<<31|lt+1023<<20|rt*1048576&1048575)>>>0,h,_+c)}}}i.writeDoubleLE=e.bind(null,writeUintLE,0,4),i.writeDoubleBE=e.bind(null,writeUintBE,4,0);function s(a,o,c,d,h){var _=a(d,h+o),$=a(d,h+c),rt=($>>31)*2+1,lt=$>>>20&2047,ct=4294967296*($&1048575)+_;return lt===2047?ct?NaN:rt*(1/0):lt===0?rt*5e-324*ct:rt*Math.pow(2,lt-1075)*(ct+4503599627370496)}i.readDoubleLE=s.bind(null,readUintLE,0,4),i.readDoubleBE=s.bind(null,readUintBE,4,0)}(),i}function writeUintLE(i,e,s){e[s]=i&255,e[s+1]=i>>>8&255,e[s+2]=i>>>16&255,e[s+3]=i>>>24}function writeUintBE(i,e,s){e[s]=i>>>24,e[s+1]=i>>>16&255,e[s+2]=i>>>8&255,e[s+3]=i&255}function readUintLE(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16|i[e+3]<<24)>>>0}function readUintBE(i,e){return(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(i){}return null}var utf8$2={};(function(i){var e=i;e.length=function(a){for(var o=0,c=0,d=0;d<a.length;++d)c=a.charCodeAt(d),c<128?o+=1:c<2048?o+=2:(c&64512)===55296&&(a.charCodeAt(d+1)&64512)===56320?(++d,o+=4):o+=3;return o},e.read=function(a,o,c){var d=c-o;if(d<1)return"";for(var h=null,_=[],$=0,rt;o<c;)rt=a[o++],rt<128?_[$++]=rt:rt>191&&rt<224?_[$++]=(rt&31)<<6|a[o++]&63:rt>239&&rt<365?(rt=((rt&7)<<18|(a[o++]&63)<<12|(a[o++]&63)<<6|a[o++]&63)-65536,_[$++]=55296+(rt>>10),_[$++]=56320+(rt&1023)):_[$++]=(rt&15)<<12|(a[o++]&63)<<6|a[o++]&63,$>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,_)),$=0);return h?($&&h.push(String.fromCharCode.apply(String,_.slice(0,$))),h.join("")):String.fromCharCode.apply(String,_.slice(0,$))},e.write=function(a,o,c){for(var d=c,h,_,$=0;$<a.length;++$)h=a.charCodeAt($),h<128?o[c++]=h:h<2048?(o[c++]=h>>6|192,o[c++]=h&63|128):(h&64512)===55296&&((_=a.charCodeAt($+1))&64512)===56320?(h=65536+((h&1023)<<10)+(_&1023),++$,o[c++]=h>>18|240,o[c++]=h>>12&63|128,o[c++]=h>>6&63|128,o[c++]=h&63|128):(o[c++]=h>>12|224,o[c++]=h>>6&63|128,o[c++]=h&63|128);return c-d}})(utf8$2);var pool_1=pool;function pool(i,e,s){var a=s||8192,o=a>>>1,c=null,d=a;return function(_){if(_<1||_>o)return i(_);d+_>a&&(c=i(a),d=0);var $=e.call(c,d,d+=_);return d&7&&(d=(d|7)+1),$}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var i=requireMinimal();function e(c,d){this.lo=c>>>0,this.hi=d>>>0}var s=e.zero=new e(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var a=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(d){if(d===0)return s;var h=d<0;h&&(d=-d);var _=d>>>0,$=(d-_)/4294967296>>>0;return h&&($=~$>>>0,_=~_>>>0,++_>4294967295&&(_=0,++$>4294967295&&($=0))),new e(_,$)},e.from=function(d){if(typeof d=="number")return e.fromNumber(d);if(i.isString(d))if(i.Long)d=i.Long.fromString(d);else return e.fromNumber(parseInt(d,10));return d.low||d.high?new e(d.low>>>0,d.high>>>0):s},e.prototype.toNumber=function(d){if(!d&&this.hi>>>31){var h=~this.lo+1>>>0,_=~this.hi>>>0;return h||(_=_+1>>>0),-(h+_*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(d){return i.Long?new i.Long(this.lo|0,this.hi|0,!!d):{low:this.lo|0,high:this.hi|0,unsigned:!!d}};var o=String.prototype.charCodeAt;return e.fromHash=function(d){return d===a?s:new e((o.call(d,0)|o.call(d,1)<<8|o.call(d,2)<<16|o.call(d,3)<<24)>>>0,(o.call(d,4)|o.call(d,5)<<8|o.call(d,6)<<16|o.call(d,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var d=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^d)>>>0,this.lo=(this.lo<<1^d)>>>0,this},e.prototype.zzDecode=function(){var d=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^d)>>>0,this.hi=(this.hi>>>1^d)>>>0,this},e.prototype.length=function(){var d=this.lo,h=(this.lo>>>28|this.hi<<4)>>>0,_=this.hi>>>24;return _===0?h===0?d<16384?d<128?1:2:d<2097152?3:4:h<16384?h<128?5:6:h<2097152?7:8:_<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(i){var e=i;e.asPromise=aspromise,e.base64=base64$2,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c},e.isString=function(c){return typeof c=="string"||c instanceof String},e.isObject=function(c){return c&&typeof c=="object"},e.isset=e.isSet=function(c,d){var h=c[d];return h!=null&&c.hasOwnProperty(d)?typeof h!="object"||(Array.isArray(h)?h.length:Object.keys(h).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(c){return typeof c=="number"?e.Buffer?e._Buffer_allocUnsafe(c):new e.Array(c):e.Buffer?e._Buffer_from(c):typeof Uint8Array>"u"?c:new Uint8Array(c)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(c){return c?e.LongBits.from(c).toHash():e.LongBits.zeroHash},e.longFromHash=function(c,d){var h=e.LongBits.fromHash(c);return e.Long?e.Long.fromBits(h.lo,h.hi,d):h.toNumber(!!d)};function s(o,c,d){for(var h=Object.keys(c),_=0;_<h.length;++_)(o[h[_]]===void 0||!d)&&(o[h[_]]=c[h[_]]);return o}e.merge=s,e.lcFirst=function(c){return c.charAt(0).toLowerCase()+c.substring(1)};function a(o){function c(d,h){if(!(this instanceof c))return new c(d,h);Object.defineProperty(this,"message",{get:function(){return d}}),Error.captureStackTrace?Error.captureStackTrace(this,c):Object.defineProperty(this,"stack",{value:new Error().stack||""}),h&&s(this,h)}return c.prototype=Object.create(Error.prototype,{constructor:{value:c,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),c}e.newError=a,e.ProtocolError=a("ProtocolError"),e.oneOfGetter=function(c){for(var d={},h=0;h<c.length;++h)d[c[h]]=1;return function(){for(var _=Object.keys(this),$=_.length-1;$>-1;--$)if(d[_[$]]===1&&this[_[$]]!==void 0&&this[_[$]]!==null)return _[$]}},e.oneOfSetter=function(c){return function(d){for(var h=0;h<c.length;++h)c[h]!==d&&delete this[c[h]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(d,h){return new o(d,h)},e._Buffer_allocUnsafe=o.allocUnsafe||function(d){return new o(d)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$5=requireMinimal(),BufferWriter$1,LongBits$1=util$5.LongBits,base64$1=util$5.base64,utf8$1=util$5.utf8;function Op(i,e,s){this.fn=i,this.len=e,this.next=void 0,this.val=s}function noop(){}function State(i){this.head=i.head,this.tail=i.tail,this.len=i.len,this.next=i.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function i(){return util$5.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function i(e){return new util$5.Array(e)};util$5.Array!==Array&&(Writer$1.alloc=util$5.pool(Writer$1.alloc,util$5.Array.prototype.subarray));Writer$1.prototype._push=function i(e,s,a){return this.tail=this.tail.next=new Op(e,s,a),this.len+=s,this};function writeByte(i,e,s){e[s]=i&255}function writeVarint32(i,e,s){for(;i>127;)e[s++]=i&127|128,i>>>=7;e[s]=i}function VarintOp(i,e){this.len=i,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function i(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function i(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function i(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(i,e,s){for(;i.hi;)e[s++]=i.lo&127|128,i.lo=(i.lo>>>7|i.hi<<25)>>>0,i.hi>>>=7;for(;i.lo>127;)e[s++]=i.lo&127|128,i.lo=i.lo>>>7;e[s++]=i.lo}Writer$1.prototype.uint64=function i(e){var s=LongBits$1.from(e);return this._push(writeVarint64,s.length(),s)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function i(e){var s=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,s.length(),s)};Writer$1.prototype.bool=function i(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(i,e,s){e[s]=i&255,e[s+1]=i>>>8&255,e[s+2]=i>>>16&255,e[s+3]=i>>>24}Writer$1.prototype.fixed32=function i(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function i(e){var s=LongBits$1.from(e);return this._push(writeFixed32,4,s.lo)._push(writeFixed32,4,s.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function i(e){return this._push(util$5.float.writeFloatLE,4,e)};Writer$1.prototype.double=function i(e){return this._push(util$5.float.writeDoubleLE,8,e)};var writeBytes=util$5.Array.prototype.set?function i(e,s,a){s.set(e,a)}:function i(e,s,a){for(var o=0;o<e.length;++o)s[a+o]=e[o]};Writer$1.prototype.bytes=function i(e){var s=e.length>>>0;if(!s)return this._push(writeByte,1,0);if(util$5.isString(e)){var a=Writer$1.alloc(s=base64$1.length(e));base64$1.decode(e,a,0),e=a}return this.uint32(s)._push(writeBytes,s,e)};Writer$1.prototype.string=function i(e){var s=utf8$1.length(e);return s?this.uint32(s)._push(utf8$1.write,s,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function i(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function i(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function i(){var e=this.head,s=this.tail,a=this.len;return this.reset().uint32(a),a&&(this.tail.next=e.next,this.tail=s,this.len+=a),this};Writer$1.prototype.finish=function i(){for(var e=this.head.next,s=this.constructor.alloc(this.len),a=0;e;)e.fn(e.val,s,a),a+=e.len,e=e.next;return s};Writer$1._configure=function(i){BufferWriter$1=i,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$4=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$4._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$4.Buffer&&util$4.Buffer.prototype instanceof Uint8Array&&util$4.Buffer.prototype.set.name==="set"?function(e,s,a){s.set(e,a)}:function(e,s,a){if(e.copy)e.copy(s,a,0,e.length);else for(var o=0;o<e.length;)s[a++]=e[o++]}};BufferWriter.prototype.bytes=function i(e){util$4.isString(e)&&(e=util$4._Buffer_from(e,"base64"));var s=e.length>>>0;return this.uint32(s),s&&this._push(BufferWriter.writeBytesBuffer,s,e),this};function writeStringBuffer(i,e,s){i.length<40?util$4.utf8.write(i,e,s):e.utf8Write?e.utf8Write(i,s):e.write(i,s)}BufferWriter.prototype.string=function i(e){var s=util$4.Buffer.byteLength(e);return this.uint32(s),s&&this._push(writeStringBuffer,s,e),this};BufferWriter._configure();var reader=Reader$1,util$3=requireMinimal(),BufferReader$1,LongBits=util$3.LongBits,utf8=util$3.utf8;function indexOutOfRange(i,e){return RangeError("index out of range: "+i.pos+" + "+(e||1)+" > "+i.len)}function Reader$1(i){this.buf=i,this.pos=0,this.len=i.length}var create_array=typeof Uint8Array<"u"?function i(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function i(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function i(){return util$3.Buffer?function(s){return(Reader$1.create=function(o){return util$3.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(s)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$3.Array.prototype.subarray||util$3.Array.prototype.slice;Reader$1.prototype.uint32=function i(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function i(){return this.uint32()|0};Reader$1.prototype.sint32=function i(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var i=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(i.lo=(i.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return i;if(i.lo=(i.lo|(this.buf[this.pos]&127)<<28)>>>0,i.hi=(i.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return i;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(i.lo=(i.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return i}return i.lo=(i.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,i}if(this.len-this.pos>4){for(;e<5;++e)if(i.hi=(i.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return i}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(i.hi=(i.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return i}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function i(){return this.uint32()!==0};function readFixed32_end(i,e){return(i[e-4]|i[e-3]<<8|i[e-2]<<16|i[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function i(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function i(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function i(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$3.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function i(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$3.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function i(){var e=this.uint32(),s=this.pos,a=this.pos+e;if(a>this.len)throw indexOutOfRange(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(s,a);if(s===a){var o=util$3.Buffer;return o?o.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,s,a)};Reader$1.prototype.string=function i(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function i(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(i){switch(i){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(i=this.uint32()&7)!==4;)this.skipType(i);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+i+" at offset "+this.pos)}return this};Reader$1._configure=function(i){BufferReader$1=i,Reader$1.create=create(),BufferReader$1._configure();var e=util$3.Long?"toLong":"toNumber";util$3.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$2=requireMinimal();function BufferReader(i){Reader.call(this,i)}BufferReader._configure=function(){util$2.Buffer&&(BufferReader.prototype._slice=util$2.Buffer.prototype.slice)};BufferReader.prototype.string=function i(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util$1=requireMinimal();(Service.prototype=Object.create(util$1.EventEmitter.prototype)).constructor=Service;function Service(i,e,s){if(typeof i!="function")throw TypeError("rpcImpl must be a function");util$1.EventEmitter.call(this),this.rpcImpl=i,this.requestDelimited=!!e,this.responseDelimited=!!s}Service.prototype.rpcCall=function i(e,s,a,o,c){if(!o)throw TypeError("request must be specified");var d=this;if(!c)return util$1.asPromise(i,d,e,s,a,o);if(!d.rpcImpl){setTimeout(function(){c(Error("already ended"))},0);return}try{return d.rpcImpl(e,s[d.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(_,$){if(_)return d.emit("error",_,e),c(_);if($===null){d.end(!0);return}if(!($ instanceof a))try{$=a[d.responseDelimited?"decodeDelimited":"decode"]($)}catch(rt){return d.emit("error",rt,e),c(rt)}return d.emit("data",$,e),c(null,$)})}catch(h){d.emit("error",h,e),setTimeout(function(){c(h)},0);return}};Service.prototype.end=function i(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(i){var e=i;e.Service=service})(rpc);var roots={};(function(i){var e=i;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=s;function s(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}s()})(indexMinimal);var minimal=indexMinimal;const _m0=getDefaultExportFromCjs(minimal),messageTypeRegistry=new Map,protobufPackage="Electric.Satellite";var SatErrorResp_ErrorCode=(i=>(i[i.INTERNAL=0]="INTERNAL",i[i.AUTH_REQUIRED=1]="AUTH_REQUIRED",i[i.AUTH_FAILED=2]="AUTH_FAILED",i[i.REPLICATION_FAILED=3]="REPLICATION_FAILED",i[i.INVALID_REQUEST=4]="INVALID_REQUEST",i[i.PROTO_VSN_MISMATCH=5]="PROTO_VSN_MISMATCH",i[i.SCHEMA_VSN_MISMATCH=6]="SCHEMA_VSN_MISMATCH",i[i.UNRECOGNIZED=-1]="UNRECOGNIZED",i))(SatErrorResp_ErrorCode||{}),SatInStartReplicationResp_ReplicationError_Code=(i=>(i[i.CODE_UNSPECIFIED=0]="CODE_UNSPECIFIED",i[i.BEHIND_WINDOW=1]="BEHIND_WINDOW",i[i.INVALID_POSITION=2]="INVALID_POSITION",i[i.SUBSCRIPTION_NOT_FOUND=3]="SUBSCRIPTION_NOT_FOUND",i[i.MALFORMED_LSN=4]="MALFORMED_LSN",i[i.UNKNOWN_SCHEMA_VSN=5]="UNKNOWN_SCHEMA_VSN",i[i.UNRECOGNIZED=-1]="UNRECOGNIZED",i))(SatInStartReplicationResp_ReplicationError_Code||{}),SatRelation_RelationType=(i=>(i[i.TABLE=0]="TABLE",i[i.INDEX=1]="INDEX",i[i.VIEW=2]="VIEW",i[i.TRIGGER=3]="TRIGGER",i[i.UNRECOGNIZED=-1]="UNRECOGNIZED",i))(SatRelation_RelationType||{}),SatOpMigrate_Type=(i=>(i[i.CREATE_TABLE=0]="CREATE_TABLE",i[i.CREATE_INDEX=1]="CREATE_INDEX",i[i.ALTER_ADD_COLUMN=6]="ALTER_ADD_COLUMN",i[i.UNRECOGNIZED=-1]="UNRECOGNIZED",i))(SatOpMigrate_Type||{}),SatSubsResp_SatSubsError_Code=(i=>(i[i.CODE_UNSPECIFIED=0]="CODE_UNSPECIFIED",i[i.SUBSCRIPTION_ID_ALREADY_EXISTS=1]="SUBSCRIPTION_ID_ALREADY_EXISTS",i[i.SHAPE_REQUEST_ERROR=2]="SHAPE_REQUEST_ERROR",i[i.UNRECOGNIZED=-1]="UNRECOGNIZED",i))(SatSubsResp_SatSubsError_Code||{}),SatSubsResp_SatSubsError_ShapeReqError_Code=(i=>(i[i.CODE_UNSPECIFIED=0]="CODE_UNSPECIFIED",i[i.TABLE_NOT_FOUND=1]="TABLE_NOT_FOUND",i[i.REFERENTIAL_INTEGRITY_VIOLATION=2]="REFERENTIAL_INTEGRITY_VIOLATION",i[i.EMPTY_SHAPE_DEFINITION=3]="EMPTY_SHAPE_DEFINITION",i[i.DUPLICATE_TABLE_IN_SHAPE_DEFINITION=4]="DUPLICATE_TABLE_IN_SHAPE_DEFINITION",i[i.UNRECOGNIZED=-1]="UNRECOGNIZED",i))(SatSubsResp_SatSubsError_ShapeReqError_Code||{}),SatSubsDataError_Code=(i=>(i[i.CODE_UNSPECIFIED=0]="CODE_UNSPECIFIED",i[i.SHAPE_DELIVERY_ERROR=1]="SHAPE_DELIVERY_ERROR",i[i.UNRECOGNIZED=-1]="UNRECOGNIZED",i))(SatSubsDataError_Code||{}),SatSubsDataError_ShapeReqError_Code=(i=>(i[i.CODE_UNSPECIFIED=0]="CODE_UNSPECIFIED",i[i.SHAPE_SIZE_LIMIT_EXCEEDED=1]="SHAPE_SIZE_LIMIT_EXCEEDED",i[i.UNRECOGNIZED=-1]="UNRECOGNIZED",i))(SatSubsDataError_ShapeReqError_Code||{});function createBaseSatRpcRequest(){return{$type:"Electric.Satellite.SatRpcRequest",method:"",requestId:0,message:new Uint8Array}}const SatRpcRequest={$type:"Electric.Satellite.SatRpcRequest",encode(i,e=_m0.Writer.create()){return i.method!==""&&e.uint32(10).string(i.method),i.requestId!==0&&e.uint32(16).uint32(i.requestId),i.message.length!==0&&e.uint32(26).bytes(i.message),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatRpcRequest();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.method=s.string();continue;case 2:if(c!==16)break;o.requestId=s.uint32();continue;case 3:if(c!==26)break;o.message=s.bytes();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatRpcRequest.fromPartial(i??{})},fromPartial(i){const e=createBaseSatRpcRequest();return e.method=i.method??"",e.requestId=i.requestId??0,e.message=i.message??new Uint8Array,e}};messageTypeRegistry.set(SatRpcRequest.$type,SatRpcRequest);function createBaseSatRpcResponse(){return{$type:"Electric.Satellite.SatRpcResponse",method:"",requestId:0,message:void 0,error:void 0}}const SatRpcResponse={$type:"Electric.Satellite.SatRpcResponse",encode(i,e=_m0.Writer.create()){return i.method!==""&&e.uint32(10).string(i.method),i.requestId!==0&&e.uint32(16).uint32(i.requestId),i.message!==void 0&&e.uint32(26).bytes(i.message),i.error!==void 0&&SatErrorResp.encode(i.error,e.uint32(34).fork()).ldelim(),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatRpcResponse();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.method=s.string();continue;case 2:if(c!==16)break;o.requestId=s.uint32();continue;case 3:if(c!==26)break;o.message=s.bytes();continue;case 4:if(c!==34)break;o.error=SatErrorResp.decode(s,s.uint32());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatRpcResponse.fromPartial(i??{})},fromPartial(i){const e=createBaseSatRpcResponse();return e.method=i.method??"",e.requestId=i.requestId??0,e.message=i.message??void 0,e.error=i.error!==void 0&&i.error!==null?SatErrorResp.fromPartial(i.error):void 0,e}};messageTypeRegistry.set(SatRpcResponse.$type,SatRpcResponse);function createBaseSatAuthHeaderPair(){return{$type:"Electric.Satellite.SatAuthHeaderPair",key:0,value:""}}const SatAuthHeaderPair={$type:"Electric.Satellite.SatAuthHeaderPair",encode(i,e=_m0.Writer.create()){return i.key!==0&&e.uint32(8).int32(i.key),i.value!==""&&e.uint32(18).string(i.value),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatAuthHeaderPair();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.key=s.int32();continue;case 2:if(c!==18)break;o.value=s.string();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatAuthHeaderPair.fromPartial(i??{})},fromPartial(i){const e=createBaseSatAuthHeaderPair();return e.key=i.key??0,e.value=i.value??"",e}};messageTypeRegistry.set(SatAuthHeaderPair.$type,SatAuthHeaderPair);function createBaseSatAuthReq(){return{$type:"Electric.Satellite.SatAuthReq",id:"",token:"",headers:[]}}const SatAuthReq={$type:"Electric.Satellite.SatAuthReq",encode(i,e=_m0.Writer.create()){i.id!==""&&e.uint32(10).string(i.id),i.token!==""&&e.uint32(18).string(i.token);for(const s of i.headers)SatAuthHeaderPair.encode(s,e.uint32(26).fork()).ldelim();return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatAuthReq();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.id=s.string();continue;case 2:if(c!==18)break;o.token=s.string();continue;case 3:if(c!==26)break;o.headers.push(SatAuthHeaderPair.decode(s,s.uint32()));continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatAuthReq.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatAuthReq();return e.id=i.id??"",e.token=i.token??"",e.headers=((s=i.headers)==null?void 0:s.map(a=>SatAuthHeaderPair.fromPartial(a)))||[],e}};messageTypeRegistry.set(SatAuthReq.$type,SatAuthReq);function createBaseSatAuthResp(){return{$type:"Electric.Satellite.SatAuthResp",id:"",headers:[]}}const SatAuthResp={$type:"Electric.Satellite.SatAuthResp",encode(i,e=_m0.Writer.create()){i.id!==""&&e.uint32(10).string(i.id);for(const s of i.headers)SatAuthHeaderPair.encode(s,e.uint32(26).fork()).ldelim();return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatAuthResp();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.id=s.string();continue;case 3:if(c!==26)break;o.headers.push(SatAuthHeaderPair.decode(s,s.uint32()));continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatAuthResp.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatAuthResp();return e.id=i.id??"",e.headers=((s=i.headers)==null?void 0:s.map(a=>SatAuthHeaderPair.fromPartial(a)))||[],e}};messageTypeRegistry.set(SatAuthResp.$type,SatAuthResp);function createBaseSatErrorResp(){return{$type:"Electric.Satellite.SatErrorResp",errorType:0,lsn:void 0,message:void 0}}const SatErrorResp={$type:"Electric.Satellite.SatErrorResp",encode(i,e=_m0.Writer.create()){return i.errorType!==0&&e.uint32(8).int32(i.errorType),i.lsn!==void 0&&e.uint32(18).bytes(i.lsn),i.message!==void 0&&e.uint32(26).string(i.message),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatErrorResp();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.errorType=s.int32();continue;case 2:if(c!==18)break;o.lsn=s.bytes();continue;case 3:if(c!==26)break;o.message=s.string();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatErrorResp.fromPartial(i??{})},fromPartial(i){const e=createBaseSatErrorResp();return e.errorType=i.errorType??0,e.lsn=i.lsn??void 0,e.message=i.message??void 0,e}};messageTypeRegistry.set(SatErrorResp.$type,SatErrorResp);function createBaseSatInStartReplicationReq(){return{$type:"Electric.Satellite.SatInStartReplicationReq",lsn:new Uint8Array,options:[],subscriptionIds:[],schemaVersion:void 0}}const SatInStartReplicationReq={$type:"Electric.Satellite.SatInStartReplicationReq",encode(i,e=_m0.Writer.create()){i.lsn.length!==0&&e.uint32(10).bytes(i.lsn),e.uint32(18).fork();for(const s of i.options)e.int32(s);e.ldelim();for(const s of i.subscriptionIds)e.uint32(34).string(s);return i.schemaVersion!==void 0&&e.uint32(42).string(i.schemaVersion),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatInStartReplicationReq();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.lsn=s.bytes();continue;case 2:if(c===16){o.options.push(s.int32());continue}if(c===18){const d=s.uint32()+s.pos;for(;s.pos<d;)o.options.push(s.int32());continue}break;case 4:if(c!==34)break;o.subscriptionIds.push(s.string());continue;case 5:if(c!==42)break;o.schemaVersion=s.string();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatInStartReplicationReq.fromPartial(i??{})},fromPartial(i){var s,a;const e=createBaseSatInStartReplicationReq();return e.lsn=i.lsn??new Uint8Array,e.options=((s=i.options)==null?void 0:s.map(o=>o))||[],e.subscriptionIds=((a=i.subscriptionIds)==null?void 0:a.map(o=>o))||[],e.schemaVersion=i.schemaVersion??void 0,e}};messageTypeRegistry.set(SatInStartReplicationReq.$type,SatInStartReplicationReq);function createBaseSatInStartReplicationResp(){return{$type:"Electric.Satellite.SatInStartReplicationResp",err:void 0}}const SatInStartReplicationResp={$type:"Electric.Satellite.SatInStartReplicationResp",encode(i,e=_m0.Writer.create()){return i.err!==void 0&&SatInStartReplicationResp_ReplicationError.encode(i.err,e.uint32(10).fork()).ldelim(),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatInStartReplicationResp();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.err=SatInStartReplicationResp_ReplicationError.decode(s,s.uint32());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatInStartReplicationResp.fromPartial(i??{})},fromPartial(i){const e=createBaseSatInStartReplicationResp();return e.err=i.err!==void 0&&i.err!==null?SatInStartReplicationResp_ReplicationError.fromPartial(i.err):void 0,e}};messageTypeRegistry.set(SatInStartReplicationResp.$type,SatInStartReplicationResp);function createBaseSatInStartReplicationResp_ReplicationError(){return{$type:"Electric.Satellite.SatInStartReplicationResp.ReplicationError",code:0,message:""}}const SatInStartReplicationResp_ReplicationError={$type:"Electric.Satellite.SatInStartReplicationResp.ReplicationError",encode(i,e=_m0.Writer.create()){return i.code!==0&&e.uint32(8).int32(i.code),i.message!==""&&e.uint32(18).string(i.message),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatInStartReplicationResp_ReplicationError();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.code=s.int32();continue;case 2:if(c!==18)break;o.message=s.string();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatInStartReplicationResp_ReplicationError.fromPartial(i??{})},fromPartial(i){const e=createBaseSatInStartReplicationResp_ReplicationError();return e.code=i.code??0,e.message=i.message??"",e}};messageTypeRegistry.set(SatInStartReplicationResp_ReplicationError.$type,SatInStartReplicationResp_ReplicationError);function createBaseSatInStopReplicationReq(){return{$type:"Electric.Satellite.SatInStopReplicationReq"}}const SatInStopReplicationReq={$type:"Electric.Satellite.SatInStopReplicationReq",encode(i,e=_m0.Writer.create()){return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatInStopReplicationReq();for(;s.pos<a;){const c=s.uint32();if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatInStopReplicationReq.fromPartial(i??{})},fromPartial(i){return createBaseSatInStopReplicationReq()}};messageTypeRegistry.set(SatInStopReplicationReq.$type,SatInStopReplicationReq);function createBaseSatInStopReplicationResp(){return{$type:"Electric.Satellite.SatInStopReplicationResp"}}const SatInStopReplicationResp={$type:"Electric.Satellite.SatInStopReplicationResp",encode(i,e=_m0.Writer.create()){return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatInStopReplicationResp();for(;s.pos<a;){const c=s.uint32();if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatInStopReplicationResp.fromPartial(i??{})},fromPartial(i){return createBaseSatInStopReplicationResp()}};messageTypeRegistry.set(SatInStopReplicationResp.$type,SatInStopReplicationResp);function createBaseSatRelationColumn(){return{$type:"Electric.Satellite.SatRelationColumn",name:"",type:"",primaryKey:!1,isNullable:!1}}const SatRelationColumn={$type:"Electric.Satellite.SatRelationColumn",encode(i,e=_m0.Writer.create()){return i.name!==""&&e.uint32(10).string(i.name),i.type!==""&&e.uint32(18).string(i.type),i.primaryKey===!0&&e.uint32(24).bool(i.primaryKey),i.isNullable===!0&&e.uint32(32).bool(i.isNullable),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatRelationColumn();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.name=s.string();continue;case 2:if(c!==18)break;o.type=s.string();continue;case 3:if(c!==24)break;o.primaryKey=s.bool();continue;case 4:if(c!==32)break;o.isNullable=s.bool();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatRelationColumn.fromPartial(i??{})},fromPartial(i){const e=createBaseSatRelationColumn();return e.name=i.name??"",e.type=i.type??"",e.primaryKey=i.primaryKey??!1,e.isNullable=i.isNullable??!1,e}};messageTypeRegistry.set(SatRelationColumn.$type,SatRelationColumn);function createBaseSatRelation(){return{$type:"Electric.Satellite.SatRelation",schemaName:"",tableType:0,tableName:"",relationId:0,columns:[]}}const SatRelation={$type:"Electric.Satellite.SatRelation",encode(i,e=_m0.Writer.create()){i.schemaName!==""&&e.uint32(10).string(i.schemaName),i.tableType!==0&&e.uint32(16).int32(i.tableType),i.tableName!==""&&e.uint32(26).string(i.tableName),i.relationId!==0&&e.uint32(32).uint32(i.relationId);for(const s of i.columns)SatRelationColumn.encode(s,e.uint32(42).fork()).ldelim();return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatRelation();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.schemaName=s.string();continue;case 2:if(c!==16)break;o.tableType=s.int32();continue;case 3:if(c!==26)break;o.tableName=s.string();continue;case 4:if(c!==32)break;o.relationId=s.uint32();continue;case 5:if(c!==42)break;o.columns.push(SatRelationColumn.decode(s,s.uint32()));continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatRelation.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatRelation();return e.schemaName=i.schemaName??"",e.tableType=i.tableType??0,e.tableName=i.tableName??"",e.relationId=i.relationId??0,e.columns=((s=i.columns)==null?void 0:s.map(a=>SatRelationColumn.fromPartial(a)))||[],e}};messageTypeRegistry.set(SatRelation.$type,SatRelation);function createBaseSatOpLog(){return{$type:"Electric.Satellite.SatOpLog",ops:[]}}const SatOpLog={$type:"Electric.Satellite.SatOpLog",encode(i,e=_m0.Writer.create()){for(const s of i.ops)SatTransOp.encode(s,e.uint32(10).fork()).ldelim();return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpLog();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.ops.push(SatTransOp.decode(s,s.uint32()));continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpLog.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatOpLog();return e.ops=((s=i.ops)==null?void 0:s.map(a=>SatTransOp.fromPartial(a)))||[],e}};messageTypeRegistry.set(SatOpLog.$type,SatOpLog);function createBaseSatTransOp(){return{$type:"Electric.Satellite.SatTransOp",begin:void 0,commit:void 0,update:void 0,insert:void 0,delete:void 0,migrate:void 0,compensation:void 0}}const SatTransOp={$type:"Electric.Satellite.SatTransOp",encode(i,e=_m0.Writer.create()){return i.begin!==void 0&&SatOpBegin.encode(i.begin,e.uint32(10).fork()).ldelim(),i.commit!==void 0&&SatOpCommit.encode(i.commit,e.uint32(18).fork()).ldelim(),i.update!==void 0&&SatOpUpdate.encode(i.update,e.uint32(26).fork()).ldelim(),i.insert!==void 0&&SatOpInsert.encode(i.insert,e.uint32(34).fork()).ldelim(),i.delete!==void 0&&SatOpDelete.encode(i.delete,e.uint32(42).fork()).ldelim(),i.migrate!==void 0&&SatOpMigrate.encode(i.migrate,e.uint32(50).fork()).ldelim(),i.compensation!==void 0&&SatOpCompensation.encode(i.compensation,e.uint32(58).fork()).ldelim(),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatTransOp();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.begin=SatOpBegin.decode(s,s.uint32());continue;case 2:if(c!==18)break;o.commit=SatOpCommit.decode(s,s.uint32());continue;case 3:if(c!==26)break;o.update=SatOpUpdate.decode(s,s.uint32());continue;case 4:if(c!==34)break;o.insert=SatOpInsert.decode(s,s.uint32());continue;case 5:if(c!==42)break;o.delete=SatOpDelete.decode(s,s.uint32());continue;case 6:if(c!==50)break;o.migrate=SatOpMigrate.decode(s,s.uint32());continue;case 7:if(c!==58)break;o.compensation=SatOpCompensation.decode(s,s.uint32());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatTransOp.fromPartial(i??{})},fromPartial(i){const e=createBaseSatTransOp();return e.begin=i.begin!==void 0&&i.begin!==null?SatOpBegin.fromPartial(i.begin):void 0,e.commit=i.commit!==void 0&&i.commit!==null?SatOpCommit.fromPartial(i.commit):void 0,e.update=i.update!==void 0&&i.update!==null?SatOpUpdate.fromPartial(i.update):void 0,e.insert=i.insert!==void 0&&i.insert!==null?SatOpInsert.fromPartial(i.insert):void 0,e.delete=i.delete!==void 0&&i.delete!==null?SatOpDelete.fromPartial(i.delete):void 0,e.migrate=i.migrate!==void 0&&i.migrate!==null?SatOpMigrate.fromPartial(i.migrate):void 0,e.compensation=i.compensation!==void 0&&i.compensation!==null?SatOpCompensation.fromPartial(i.compensation):void 0,e}};messageTypeRegistry.set(SatTransOp.$type,SatTransOp);function createBaseSatOpBegin(){return{$type:"Electric.Satellite.SatOpBegin",commitTimestamp:Long.UZERO,transId:"",lsn:new Uint8Array,origin:void 0,isMigration:!1}}const SatOpBegin={$type:"Electric.Satellite.SatOpBegin",encode(i,e=_m0.Writer.create()){return i.commitTimestamp.isZero()||e.uint32(8).uint64(i.commitTimestamp),i.transId!==""&&e.uint32(18).string(i.transId),i.lsn.length!==0&&e.uint32(26).bytes(i.lsn),i.origin!==void 0&&e.uint32(34).string(i.origin),i.isMigration===!0&&e.uint32(40).bool(i.isMigration),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpBegin();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.commitTimestamp=s.uint64();continue;case 2:if(c!==18)break;o.transId=s.string();continue;case 3:if(c!==26)break;o.lsn=s.bytes();continue;case 4:if(c!==34)break;o.origin=s.string();continue;case 5:if(c!==40)break;o.isMigration=s.bool();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpBegin.fromPartial(i??{})},fromPartial(i){const e=createBaseSatOpBegin();return e.commitTimestamp=i.commitTimestamp!==void 0&&i.commitTimestamp!==null?Long.fromValue(i.commitTimestamp):Long.UZERO,e.transId=i.transId??"",e.lsn=i.lsn??new Uint8Array,e.origin=i.origin??void 0,e.isMigration=i.isMigration??!1,e}};messageTypeRegistry.set(SatOpBegin.$type,SatOpBegin);function createBaseSatOpCommit(){return{$type:"Electric.Satellite.SatOpCommit",commitTimestamp:Long.UZERO,transId:"",lsn:new Uint8Array}}const SatOpCommit={$type:"Electric.Satellite.SatOpCommit",encode(i,e=_m0.Writer.create()){return i.commitTimestamp.isZero()||e.uint32(8).uint64(i.commitTimestamp),i.transId!==""&&e.uint32(18).string(i.transId),i.lsn.length!==0&&e.uint32(26).bytes(i.lsn),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpCommit();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.commitTimestamp=s.uint64();continue;case 2:if(c!==18)break;o.transId=s.string();continue;case 3:if(c!==26)break;o.lsn=s.bytes();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpCommit.fromPartial(i??{})},fromPartial(i){const e=createBaseSatOpCommit();return e.commitTimestamp=i.commitTimestamp!==void 0&&i.commitTimestamp!==null?Long.fromValue(i.commitTimestamp):Long.UZERO,e.transId=i.transId??"",e.lsn=i.lsn??new Uint8Array,e}};messageTypeRegistry.set(SatOpCommit.$type,SatOpCommit);function createBaseSatOpInsert(){return{$type:"Electric.Satellite.SatOpInsert",relationId:0,rowData:void 0,tags:[]}}const SatOpInsert={$type:"Electric.Satellite.SatOpInsert",encode(i,e=_m0.Writer.create()){i.relationId!==0&&e.uint32(8).uint32(i.relationId),i.rowData!==void 0&&SatOpRow.encode(i.rowData,e.uint32(18).fork()).ldelim();for(const s of i.tags)e.uint32(26).string(s);return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpInsert();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.relationId=s.uint32();continue;case 2:if(c!==18)break;o.rowData=SatOpRow.decode(s,s.uint32());continue;case 3:if(c!==26)break;o.tags.push(s.string());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpInsert.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatOpInsert();return e.relationId=i.relationId??0,e.rowData=i.rowData!==void 0&&i.rowData!==null?SatOpRow.fromPartial(i.rowData):void 0,e.tags=((s=i.tags)==null?void 0:s.map(a=>a))||[],e}};messageTypeRegistry.set(SatOpInsert.$type,SatOpInsert);function createBaseSatOpUpdate(){return{$type:"Electric.Satellite.SatOpUpdate",relationId:0,rowData:void 0,oldRowData:void 0,tags:[]}}const SatOpUpdate={$type:"Electric.Satellite.SatOpUpdate",encode(i,e=_m0.Writer.create()){i.relationId!==0&&e.uint32(8).uint32(i.relationId),i.rowData!==void 0&&SatOpRow.encode(i.rowData,e.uint32(18).fork()).ldelim(),i.oldRowData!==void 0&&SatOpRow.encode(i.oldRowData,e.uint32(26).fork()).ldelim();for(const s of i.tags)e.uint32(34).string(s);return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpUpdate();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.relationId=s.uint32();continue;case 2:if(c!==18)break;o.rowData=SatOpRow.decode(s,s.uint32());continue;case 3:if(c!==26)break;o.oldRowData=SatOpRow.decode(s,s.uint32());continue;case 4:if(c!==34)break;o.tags.push(s.string());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpUpdate.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatOpUpdate();return e.relationId=i.relationId??0,e.rowData=i.rowData!==void 0&&i.rowData!==null?SatOpRow.fromPartial(i.rowData):void 0,e.oldRowData=i.oldRowData!==void 0&&i.oldRowData!==null?SatOpRow.fromPartial(i.oldRowData):void 0,e.tags=((s=i.tags)==null?void 0:s.map(a=>a))||[],e}};messageTypeRegistry.set(SatOpUpdate.$type,SatOpUpdate);function createBaseSatOpDelete(){return{$type:"Electric.Satellite.SatOpDelete",relationId:0,oldRowData:void 0,tags:[]}}const SatOpDelete={$type:"Electric.Satellite.SatOpDelete",encode(i,e=_m0.Writer.create()){i.relationId!==0&&e.uint32(8).uint32(i.relationId),i.oldRowData!==void 0&&SatOpRow.encode(i.oldRowData,e.uint32(18).fork()).ldelim();for(const s of i.tags)e.uint32(26).string(s);return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpDelete();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.relationId=s.uint32();continue;case 2:if(c!==18)break;o.oldRowData=SatOpRow.decode(s,s.uint32());continue;case 3:if(c!==26)break;o.tags.push(s.string());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpDelete.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatOpDelete();return e.relationId=i.relationId??0,e.oldRowData=i.oldRowData!==void 0&&i.oldRowData!==null?SatOpRow.fromPartial(i.oldRowData):void 0,e.tags=((s=i.tags)==null?void 0:s.map(a=>a))||[],e}};messageTypeRegistry.set(SatOpDelete.$type,SatOpDelete);function createBaseSatOpCompensation(){return{$type:"Electric.Satellite.SatOpCompensation",relationId:0,pkData:void 0,tags:[]}}const SatOpCompensation={$type:"Electric.Satellite.SatOpCompensation",encode(i,e=_m0.Writer.create()){i.relationId!==0&&e.uint32(8).uint32(i.relationId),i.pkData!==void 0&&SatOpRow.encode(i.pkData,e.uint32(18).fork()).ldelim();for(const s of i.tags)e.uint32(34).string(s);return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpCompensation();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.relationId=s.uint32();continue;case 2:if(c!==18)break;o.pkData=SatOpRow.decode(s,s.uint32());continue;case 4:if(c!==34)break;o.tags.push(s.string());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpCompensation.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatOpCompensation();return e.relationId=i.relationId??0,e.pkData=i.pkData!==void 0&&i.pkData!==null?SatOpRow.fromPartial(i.pkData):void 0,e.tags=((s=i.tags)==null?void 0:s.map(a=>a))||[],e}};messageTypeRegistry.set(SatOpCompensation.$type,SatOpCompensation);function createBaseSatOpRow(){return{$type:"Electric.Satellite.SatOpRow",nullsBitmask:new Uint8Array,values:[]}}const SatOpRow={$type:"Electric.Satellite.SatOpRow",encode(i,e=_m0.Writer.create()){i.nullsBitmask.length!==0&&e.uint32(10).bytes(i.nullsBitmask);for(const s of i.values)e.uint32(18).bytes(s);return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpRow();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.nullsBitmask=s.bytes();continue;case 2:if(c!==18)break;o.values.push(s.bytes());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpRow.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatOpRow();return e.nullsBitmask=i.nullsBitmask??new Uint8Array,e.values=((s=i.values)==null?void 0:s.map(a=>a))||[],e}};messageTypeRegistry.set(SatOpRow.$type,SatOpRow);function createBaseSatOpMigrate(){return{$type:"Electric.Satellite.SatOpMigrate",version:"",stmts:[],table:void 0}}const SatOpMigrate={$type:"Electric.Satellite.SatOpMigrate",encode(i,e=_m0.Writer.create()){i.version!==""&&e.uint32(10).string(i.version);for(const s of i.stmts)SatOpMigrate_Stmt.encode(s,e.uint32(18).fork()).ldelim();return i.table!==void 0&&SatOpMigrate_Table.encode(i.table,e.uint32(26).fork()).ldelim(),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpMigrate();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.version=s.string();continue;case 2:if(c!==18)break;o.stmts.push(SatOpMigrate_Stmt.decode(s,s.uint32()));continue;case 3:if(c!==26)break;o.table=SatOpMigrate_Table.decode(s,s.uint32());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpMigrate.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatOpMigrate();return e.version=i.version??"",e.stmts=((s=i.stmts)==null?void 0:s.map(a=>SatOpMigrate_Stmt.fromPartial(a)))||[],e.table=i.table!==void 0&&i.table!==null?SatOpMigrate_Table.fromPartial(i.table):void 0,e}};messageTypeRegistry.set(SatOpMigrate.$type,SatOpMigrate);function createBaseSatOpMigrate_Stmt(){return{$type:"Electric.Satellite.SatOpMigrate.Stmt",type:0,sql:""}}const SatOpMigrate_Stmt={$type:"Electric.Satellite.SatOpMigrate.Stmt",encode(i,e=_m0.Writer.create()){return i.type!==0&&e.uint32(8).int32(i.type),i.sql!==""&&e.uint32(18).string(i.sql),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpMigrate_Stmt();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.type=s.int32();continue;case 2:if(c!==18)break;o.sql=s.string();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpMigrate_Stmt.fromPartial(i??{})},fromPartial(i){const e=createBaseSatOpMigrate_Stmt();return e.type=i.type??0,e.sql=i.sql??"",e}};messageTypeRegistry.set(SatOpMigrate_Stmt.$type,SatOpMigrate_Stmt);function createBaseSatOpMigrate_PgColumnType(){return{$type:"Electric.Satellite.SatOpMigrate.PgColumnType",name:"",array:[],size:[]}}const SatOpMigrate_PgColumnType={$type:"Electric.Satellite.SatOpMigrate.PgColumnType",encode(i,e=_m0.Writer.create()){i.name!==""&&e.uint32(10).string(i.name),e.uint32(18).fork();for(const s of i.array)e.int32(s);e.ldelim(),e.uint32(26).fork();for(const s of i.size)e.int32(s);return e.ldelim(),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpMigrate_PgColumnType();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.name=s.string();continue;case 2:if(c===16){o.array.push(s.int32());continue}if(c===18){const d=s.uint32()+s.pos;for(;s.pos<d;)o.array.push(s.int32());continue}break;case 3:if(c===24){o.size.push(s.int32());continue}if(c===26){const d=s.uint32()+s.pos;for(;s.pos<d;)o.size.push(s.int32());continue}break}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpMigrate_PgColumnType.fromPartial(i??{})},fromPartial(i){var s,a;const e=createBaseSatOpMigrate_PgColumnType();return e.name=i.name??"",e.array=((s=i.array)==null?void 0:s.map(o=>o))||[],e.size=((a=i.size)==null?void 0:a.map(o=>o))||[],e}};messageTypeRegistry.set(SatOpMigrate_PgColumnType.$type,SatOpMigrate_PgColumnType);function createBaseSatOpMigrate_Column(){return{$type:"Electric.Satellite.SatOpMigrate.Column",name:"",sqliteType:"",pgType:void 0}}const SatOpMigrate_Column={$type:"Electric.Satellite.SatOpMigrate.Column",encode(i,e=_m0.Writer.create()){return i.name!==""&&e.uint32(10).string(i.name),i.sqliteType!==""&&e.uint32(18).string(i.sqliteType),i.pgType!==void 0&&SatOpMigrate_PgColumnType.encode(i.pgType,e.uint32(26).fork()).ldelim(),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpMigrate_Column();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.name=s.string();continue;case 2:if(c!==18)break;o.sqliteType=s.string();continue;case 3:if(c!==26)break;o.pgType=SatOpMigrate_PgColumnType.decode(s,s.uint32());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpMigrate_Column.fromPartial(i??{})},fromPartial(i){const e=createBaseSatOpMigrate_Column();return e.name=i.name??"",e.sqliteType=i.sqliteType??"",e.pgType=i.pgType!==void 0&&i.pgType!==null?SatOpMigrate_PgColumnType.fromPartial(i.pgType):void 0,e}};messageTypeRegistry.set(SatOpMigrate_Column.$type,SatOpMigrate_Column);function createBaseSatOpMigrate_ForeignKey(){return{$type:"Electric.Satellite.SatOpMigrate.ForeignKey",fkCols:[],pkTable:"",pkCols:[]}}const SatOpMigrate_ForeignKey={$type:"Electric.Satellite.SatOpMigrate.ForeignKey",encode(i,e=_m0.Writer.create()){for(const s of i.fkCols)e.uint32(10).string(s);i.pkTable!==""&&e.uint32(18).string(i.pkTable);for(const s of i.pkCols)e.uint32(26).string(s);return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpMigrate_ForeignKey();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.fkCols.push(s.string());continue;case 2:if(c!==18)break;o.pkTable=s.string();continue;case 3:if(c!==26)break;o.pkCols.push(s.string());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpMigrate_ForeignKey.fromPartial(i??{})},fromPartial(i){var s,a;const e=createBaseSatOpMigrate_ForeignKey();return e.fkCols=((s=i.fkCols)==null?void 0:s.map(o=>o))||[],e.pkTable=i.pkTable??"",e.pkCols=((a=i.pkCols)==null?void 0:a.map(o=>o))||[],e}};messageTypeRegistry.set(SatOpMigrate_ForeignKey.$type,SatOpMigrate_ForeignKey);function createBaseSatOpMigrate_Table(){return{$type:"Electric.Satellite.SatOpMigrate.Table",name:"",columns:[],fks:[],pks:[]}}const SatOpMigrate_Table={$type:"Electric.Satellite.SatOpMigrate.Table",encode(i,e=_m0.Writer.create()){i.name!==""&&e.uint32(10).string(i.name);for(const s of i.columns)SatOpMigrate_Column.encode(s,e.uint32(18).fork()).ldelim();for(const s of i.fks)SatOpMigrate_ForeignKey.encode(s,e.uint32(26).fork()).ldelim();for(const s of i.pks)e.uint32(34).string(s);return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatOpMigrate_Table();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.name=s.string();continue;case 2:if(c!==18)break;o.columns.push(SatOpMigrate_Column.decode(s,s.uint32()));continue;case 3:if(c!==26)break;o.fks.push(SatOpMigrate_ForeignKey.decode(s,s.uint32()));continue;case 4:if(c!==34)break;o.pks.push(s.string());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatOpMigrate_Table.fromPartial(i??{})},fromPartial(i){var s,a,o;const e=createBaseSatOpMigrate_Table();return e.name=i.name??"",e.columns=((s=i.columns)==null?void 0:s.map(c=>SatOpMigrate_Column.fromPartial(c)))||[],e.fks=((a=i.fks)==null?void 0:a.map(c=>SatOpMigrate_ForeignKey.fromPartial(c)))||[],e.pks=((o=i.pks)==null?void 0:o.map(c=>c))||[],e}};messageTypeRegistry.set(SatOpMigrate_Table.$type,SatOpMigrate_Table);function createBaseSatSubsReq(){return{$type:"Electric.Satellite.SatSubsReq",subscriptionId:"",shapeRequests:[]}}const SatSubsReq={$type:"Electric.Satellite.SatSubsReq",encode(i,e=_m0.Writer.create()){i.subscriptionId!==""&&e.uint32(10).string(i.subscriptionId);for(const s of i.shapeRequests)SatShapeReq.encode(s,e.uint32(18).fork()).ldelim();return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatSubsReq();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.subscriptionId=s.string();continue;case 2:if(c!==18)break;o.shapeRequests.push(SatShapeReq.decode(s,s.uint32()));continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatSubsReq.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatSubsReq();return e.subscriptionId=i.subscriptionId??"",e.shapeRequests=((s=i.shapeRequests)==null?void 0:s.map(a=>SatShapeReq.fromPartial(a)))||[],e}};messageTypeRegistry.set(SatSubsReq.$type,SatSubsReq);function createBaseSatSubsResp(){return{$type:"Electric.Satellite.SatSubsResp",subscriptionId:"",err:void 0}}const SatSubsResp={$type:"Electric.Satellite.SatSubsResp",encode(i,e=_m0.Writer.create()){return i.subscriptionId!==""&&e.uint32(10).string(i.subscriptionId),i.err!==void 0&&SatSubsResp_SatSubsError.encode(i.err,e.uint32(18).fork()).ldelim(),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatSubsResp();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.subscriptionId=s.string();continue;case 2:if(c!==18)break;o.err=SatSubsResp_SatSubsError.decode(s,s.uint32());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatSubsResp.fromPartial(i??{})},fromPartial(i){const e=createBaseSatSubsResp();return e.subscriptionId=i.subscriptionId??"",e.err=i.err!==void 0&&i.err!==null?SatSubsResp_SatSubsError.fromPartial(i.err):void 0,e}};messageTypeRegistry.set(SatSubsResp.$type,SatSubsResp);function createBaseSatSubsResp_SatSubsError(){return{$type:"Electric.Satellite.SatSubsResp.SatSubsError",code:0,message:"",shapeRequestError:[]}}const SatSubsResp_SatSubsError={$type:"Electric.Satellite.SatSubsResp.SatSubsError",encode(i,e=_m0.Writer.create()){i.code!==0&&e.uint32(16).int32(i.code),i.message!==""&&e.uint32(26).string(i.message);for(const s of i.shapeRequestError)SatSubsResp_SatSubsError_ShapeReqError.encode(s,e.uint32(34).fork()).ldelim();return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatSubsResp_SatSubsError();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 2:if(c!==16)break;o.code=s.int32();continue;case 3:if(c!==26)break;o.message=s.string();continue;case 4:if(c!==34)break;o.shapeRequestError.push(SatSubsResp_SatSubsError_ShapeReqError.decode(s,s.uint32()));continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatSubsResp_SatSubsError.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatSubsResp_SatSubsError();return e.code=i.code??0,e.message=i.message??"",e.shapeRequestError=((s=i.shapeRequestError)==null?void 0:s.map(a=>SatSubsResp_SatSubsError_ShapeReqError.fromPartial(a)))||[],e}};messageTypeRegistry.set(SatSubsResp_SatSubsError.$type,SatSubsResp_SatSubsError);function createBaseSatSubsResp_SatSubsError_ShapeReqError(){return{$type:"Electric.Satellite.SatSubsResp.SatSubsError.ShapeReqError",code:0,message:"",requestId:""}}const SatSubsResp_SatSubsError_ShapeReqError={$type:"Electric.Satellite.SatSubsResp.SatSubsError.ShapeReqError",encode(i,e=_m0.Writer.create()){return i.code!==0&&e.uint32(8).int32(i.code),i.message!==""&&e.uint32(18).string(i.message),i.requestId!==""&&e.uint32(26).string(i.requestId),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatSubsResp_SatSubsError_ShapeReqError();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.code=s.int32();continue;case 2:if(c!==18)break;o.message=s.string();continue;case 3:if(c!==26)break;o.requestId=s.string();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatSubsResp_SatSubsError_ShapeReqError.fromPartial(i??{})},fromPartial(i){const e=createBaseSatSubsResp_SatSubsError_ShapeReqError();return e.code=i.code??0,e.message=i.message??"",e.requestId=i.requestId??"",e}};messageTypeRegistry.set(SatSubsResp_SatSubsError_ShapeReqError.$type,SatSubsResp_SatSubsError_ShapeReqError);function createBaseSatUnsubsReq(){return{$type:"Electric.Satellite.SatUnsubsReq",subscriptionIds:[]}}const SatUnsubsReq={$type:"Electric.Satellite.SatUnsubsReq",encode(i,e=_m0.Writer.create()){for(const s of i.subscriptionIds)e.uint32(10).string(s);return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatUnsubsReq();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.subscriptionIds.push(s.string());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatUnsubsReq.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatUnsubsReq();return e.subscriptionIds=((s=i.subscriptionIds)==null?void 0:s.map(a=>a))||[],e}};messageTypeRegistry.set(SatUnsubsReq.$type,SatUnsubsReq);function createBaseSatUnsubsResp(){return{$type:"Electric.Satellite.SatUnsubsResp"}}const SatUnsubsResp={$type:"Electric.Satellite.SatUnsubsResp",encode(i,e=_m0.Writer.create()){return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatUnsubsResp();for(;s.pos<a;){const c=s.uint32();if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatUnsubsResp.fromPartial(i??{})},fromPartial(i){return createBaseSatUnsubsResp()}};messageTypeRegistry.set(SatUnsubsResp.$type,SatUnsubsResp);function createBaseSatShapeReq(){return{$type:"Electric.Satellite.SatShapeReq",requestId:"",shapeDefinition:void 0}}const SatShapeReq={$type:"Electric.Satellite.SatShapeReq",encode(i,e=_m0.Writer.create()){return i.requestId!==""&&e.uint32(10).string(i.requestId),i.shapeDefinition!==void 0&&SatShapeDef.encode(i.shapeDefinition,e.uint32(18).fork()).ldelim(),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatShapeReq();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.requestId=s.string();continue;case 2:if(c!==18)break;o.shapeDefinition=SatShapeDef.decode(s,s.uint32());continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatShapeReq.fromPartial(i??{})},fromPartial(i){const e=createBaseSatShapeReq();return e.requestId=i.requestId??"",e.shapeDefinition=i.shapeDefinition!==void 0&&i.shapeDefinition!==null?SatShapeDef.fromPartial(i.shapeDefinition):void 0,e}};messageTypeRegistry.set(SatShapeReq.$type,SatShapeReq);function createBaseSatShapeDef(){return{$type:"Electric.Satellite.SatShapeDef",selects:[]}}const SatShapeDef={$type:"Electric.Satellite.SatShapeDef",encode(i,e=_m0.Writer.create()){for(const s of i.selects)SatShapeDef_Select.encode(s,e.uint32(10).fork()).ldelim();return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatShapeDef();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.selects.push(SatShapeDef_Select.decode(s,s.uint32()));continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatShapeDef.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatShapeDef();return e.selects=((s=i.selects)==null?void 0:s.map(a=>SatShapeDef_Select.fromPartial(a)))||[],e}};messageTypeRegistry.set(SatShapeDef.$type,SatShapeDef);function createBaseSatShapeDef_Select(){return{$type:"Electric.Satellite.SatShapeDef.Select",tablename:""}}const SatShapeDef_Select={$type:"Electric.Satellite.SatShapeDef.Select",encode(i,e=_m0.Writer.create()){return i.tablename!==""&&e.uint32(10).string(i.tablename),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatShapeDef_Select();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.tablename=s.string();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatShapeDef_Select.fromPartial(i??{})},fromPartial(i){const e=createBaseSatShapeDef_Select();return e.tablename=i.tablename??"",e}};messageTypeRegistry.set(SatShapeDef_Select.$type,SatShapeDef_Select);function createBaseSatSubsDataError(){return{$type:"Electric.Satellite.SatSubsDataError",code:0,message:"",subscriptionId:"",shapeRequestError:[]}}const SatSubsDataError={$type:"Electric.Satellite.SatSubsDataError",encode(i,e=_m0.Writer.create()){i.code!==0&&e.uint32(8).int32(i.code),i.message!==""&&e.uint32(18).string(i.message),i.subscriptionId!==""&&e.uint32(26).string(i.subscriptionId);for(const s of i.shapeRequestError)SatSubsDataError_ShapeReqError.encode(s,e.uint32(34).fork()).ldelim();return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatSubsDataError();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.code=s.int32();continue;case 2:if(c!==18)break;o.message=s.string();continue;case 3:if(c!==26)break;o.subscriptionId=s.string();continue;case 4:if(c!==34)break;o.shapeRequestError.push(SatSubsDataError_ShapeReqError.decode(s,s.uint32()));continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatSubsDataError.fromPartial(i??{})},fromPartial(i){var s;const e=createBaseSatSubsDataError();return e.code=i.code??0,e.message=i.message??"",e.subscriptionId=i.subscriptionId??"",e.shapeRequestError=((s=i.shapeRequestError)==null?void 0:s.map(a=>SatSubsDataError_ShapeReqError.fromPartial(a)))||[],e}};messageTypeRegistry.set(SatSubsDataError.$type,SatSubsDataError);function createBaseSatSubsDataError_ShapeReqError(){return{$type:"Electric.Satellite.SatSubsDataError.ShapeReqError",code:0,message:"",requestId:""}}const SatSubsDataError_ShapeReqError={$type:"Electric.Satellite.SatSubsDataError.ShapeReqError",encode(i,e=_m0.Writer.create()){return i.code!==0&&e.uint32(8).int32(i.code),i.message!==""&&e.uint32(18).string(i.message),i.requestId!==""&&e.uint32(26).string(i.requestId),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatSubsDataError_ShapeReqError();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==8)break;o.code=s.int32();continue;case 2:if(c!==18)break;o.message=s.string();continue;case 3:if(c!==26)break;o.requestId=s.string();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatSubsDataError_ShapeReqError.fromPartial(i??{})},fromPartial(i){const e=createBaseSatSubsDataError_ShapeReqError();return e.code=i.code??0,e.message=i.message??"",e.requestId=i.requestId??"",e}};messageTypeRegistry.set(SatSubsDataError_ShapeReqError.$type,SatSubsDataError_ShapeReqError);function createBaseSatSubsDataBegin(){return{$type:"Electric.Satellite.SatSubsDataBegin",subscriptionId:"",lsn:new Uint8Array}}const SatSubsDataBegin={$type:"Electric.Satellite.SatSubsDataBegin",encode(i,e=_m0.Writer.create()){return i.subscriptionId!==""&&e.uint32(10).string(i.subscriptionId),i.lsn.length!==0&&e.uint32(18).bytes(i.lsn),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatSubsDataBegin();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.subscriptionId=s.string();continue;case 2:if(c!==18)break;o.lsn=s.bytes();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatSubsDataBegin.fromPartial(i??{})},fromPartial(i){const e=createBaseSatSubsDataBegin();return e.subscriptionId=i.subscriptionId??"",e.lsn=i.lsn??new Uint8Array,e}};messageTypeRegistry.set(SatSubsDataBegin.$type,SatSubsDataBegin);function createBaseSatSubsDataEnd(){return{$type:"Electric.Satellite.SatSubsDataEnd"}}const SatSubsDataEnd={$type:"Electric.Satellite.SatSubsDataEnd",encode(i,e=_m0.Writer.create()){return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatSubsDataEnd();for(;s.pos<a;){const c=s.uint32();if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatSubsDataEnd.fromPartial(i??{})},fromPartial(i){return createBaseSatSubsDataEnd()}};messageTypeRegistry.set(SatSubsDataEnd.$type,SatSubsDataEnd);function createBaseSatShapeDataBegin(){return{$type:"Electric.Satellite.SatShapeDataBegin",requestId:"",uuid:""}}const SatShapeDataBegin={$type:"Electric.Satellite.SatShapeDataBegin",encode(i,e=_m0.Writer.create()){return i.requestId!==""&&e.uint32(10).string(i.requestId),i.uuid!==""&&e.uint32(18).string(i.uuid),e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatShapeDataBegin();for(;s.pos<a;){const c=s.uint32();switch(c>>>3){case 1:if(c!==10)break;o.requestId=s.string();continue;case 2:if(c!==18)break;o.uuid=s.string();continue}if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatShapeDataBegin.fromPartial(i??{})},fromPartial(i){const e=createBaseSatShapeDataBegin();return e.requestId=i.requestId??"",e.uuid=i.uuid??"",e}};messageTypeRegistry.set(SatShapeDataBegin.$type,SatShapeDataBegin);function createBaseSatShapeDataEnd(){return{$type:"Electric.Satellite.SatShapeDataEnd"}}const SatShapeDataEnd={$type:"Electric.Satellite.SatShapeDataEnd",encode(i,e=_m0.Writer.create()){return e},decode(i,e){const s=i instanceof _m0.Reader?i:_m0.Reader.create(i);let a=e===void 0?s.len:s.pos+e;const o=createBaseSatShapeDataEnd();for(;s.pos<a;){const c=s.uint32();if((c&7)===4||c===0)break;s.skipType(c&7)}return o},create(i){return SatShapeDataEnd.fromPartial(i??{})},fromPartial(i){return createBaseSatShapeDataEnd()}};messageTypeRegistry.set(SatShapeDataEnd.$type,SatShapeDataEnd);class RootClientImpl{constructor(e,s){Zt(this,"rpc");Zt(this,"service");this.service=(s==null?void 0:s.service)||"Electric.Satellite.Root",this.rpc=e,this.authenticate=this.authenticate.bind(this),this.startReplication=this.startReplication.bind(this),this.stopReplication=this.stopReplication.bind(this),this.subscribe=this.subscribe.bind(this),this.unsubscribe=this.unsubscribe.bind(this)}authenticate(e){const s=SatAuthReq.encode(e).finish();return this.rpc.request(this.service,"authenticate",s).then(o=>SatAuthResp.decode(_m0.Reader.create(o)))}startReplication(e){const s=SatInStartReplicationReq.encode(e).finish();return this.rpc.request(this.service,"startReplication",s).then(o=>SatInStartReplicationResp.decode(_m0.Reader.create(o)))}stopReplication(e){const s=SatInStopReplicationReq.encode(e).finish();return this.rpc.request(this.service,"stopReplication",s).then(o=>SatInStopReplicationResp.decode(_m0.Reader.create(o)))}subscribe(e){const s=SatSubsReq.encode(e).finish();return this.rpc.request(this.service,"subscribe",s).then(o=>SatSubsResp.decode(_m0.Reader.create(o)))}unsubscribe(e){const s=SatUnsubsReq.encode(e).finish();return this.rpc.request(this.service,"unsubscribe",s).then(o=>SatUnsubsResp.decode(_m0.Reader.create(o)))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());class SatelliteError extends Error{constructor(s,a){super(a);Zt(this,"code");this.code=s}}var SatelliteErrorCode=(i=>(i[i.CONNECTION_FAILED_AFTER_RETRY=0]="CONNECTION_FAILED_AFTER_RETRY",i[i.INTERNAL=1]="INTERNAL",i[i.TIMEOUT=2]="TIMEOUT",i[i.REPLICATION_NOT_STARTED=3]="REPLICATION_NOT_STARTED",i[i.REPLICATION_ALREADY_STARTED=4]="REPLICATION_ALREADY_STARTED",i[i.UNEXPECTED_STATE=5]="UNEXPECTED_STATE",i[i.UNEXPECTED_MESSAGE_TYPE=6]="UNEXPECTED_MESSAGE_TYPE",i[i.PROTOCOL_VIOLATION=7]="PROTOCOL_VIOLATION",i[i.UNKNOWN_DATA_TYPE=8]="UNKNOWN_DATA_TYPE",i[i.SOCKET_ERROR=9]="SOCKET_ERROR",i[i.UNRECOGNIZED=10]="UNRECOGNIZED",i[i.FATAL_ERROR=11]="FATAL_ERROR",i[i.AUTH_ERROR=12]="AUTH_ERROR",i[i.AUTH_FAILED=13]="AUTH_FAILED",i[i.AUTH_REQUIRED=14]="AUTH_REQUIRED",i[i.INVALID_REQUEST=15]="INVALID_REQUEST",i[i.PROTO_VSN_MISMATCH=16]="PROTO_VSN_MISMATCH",i[i.REPLICATION_FAILED=17]="REPLICATION_FAILED",i[i.BEHIND_WINDOW=18]="BEHIND_WINDOW",i[i.INVALID_POSITION=19]="INVALID_POSITION",i[i.SUBSCRIPTION_NOT_FOUND=20]="SUBSCRIPTION_NOT_FOUND",i[i.SUBSCRIPTION_ERROR=21]="SUBSCRIPTION_ERROR",i[i.MALFORMED_LSN=22]="MALFORMED_LSN",i[i.UNKNOWN_SCHEMA_VSN=23]="UNKNOWN_SCHEMA_VSN",i[i.SHAPE_REQUEST_ERROR=24]="SHAPE_REQUEST_ERROR",i[i.SUBSCRIPTION_ID_ALREADY_EXISTS=25]="SUBSCRIPTION_ID_ALREADY_EXISTS",i[i.SUBSCRIPTION_ALREADY_EXISTS=26]="SUBSCRIPTION_ALREADY_EXISTS",i[i.UNEXPECTED_SUBSCRIPTION_STATE=27]="UNEXPECTED_SUBSCRIPTION_STATE",i[i.TABLE_NOT_FOUND=28]="TABLE_NOT_FOUND",i[i.REFERENTIAL_INTEGRITY_VIOLATION=29]="REFERENTIAL_INTEGRITY_VIOLATION",i[i.EMPTY_SHAPE_DEFINITION=30]="EMPTY_SHAPE_DEFINITION",i[i.DUPLICATE_TABLE_IN_SHAPE_DEFINITION=31]="DUPLICATE_TABLE_IN_SHAPE_DEFINITION",i[i.SHAPE_DELIVERY_ERROR=32]="SHAPE_DELIVERY_ERROR",i[i.SHAPE_SIZE_LIMIT_EXCEEDED=33]="SHAPE_SIZE_LIMIT_EXCEEDED",i))(SatelliteErrorCode||{}),DataChangeType=(i=>(i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE",i.COMPENSATION="COMPENSATION",i))(DataChangeType||{});function isDataChange(i){return"relation"in i}var ReplicationStatus=(i=>(i[i.STOPPED=0]="STOPPED",i[i.STARTING=1]="STARTING",i[i.STOPPING=2]="STOPPING",i[i.ACTIVE=3]="ACTIVE",i))(ReplicationStatus||{});function setMaskBit(i,e){const s=Math.floor(e/8),o=1<<7-e%8;i[s]=i[s]|o}function getMaskBit(i,e){const s=Math.floor(e/8),a=7-e%8;return i[s]>>>a&1}const serverErrorToSatError={[SatErrorResp_ErrorCode.AUTH_FAILED]:SatelliteErrorCode.AUTH_FAILED,[SatErrorResp_ErrorCode.AUTH_REQUIRED]:SatelliteErrorCode.AUTH_REQUIRED,[SatErrorResp_ErrorCode.INVALID_REQUEST]:SatelliteErrorCode.INVALID_REQUEST,[SatErrorResp_ErrorCode.PROTO_VSN_MISMATCH]:SatelliteErrorCode.PROTO_VSN_MISMATCH,[SatErrorResp_ErrorCode.REPLICATION_FAILED]:SatelliteErrorCode.REPLICATION_FAILED,[SatErrorResp_ErrorCode.SCHEMA_VSN_MISMATCH]:SatelliteErrorCode.UNKNOWN_SCHEMA_VSN,[SatErrorResp_ErrorCode.INTERNAL]:SatelliteErrorCode.INTERNAL,[SatErrorResp_ErrorCode.UNRECOGNIZED]:SatelliteErrorCode.UNRECOGNIZED},startReplicationErrorToSatError={[SatInStartReplicationResp_ReplicationError_Code.CODE_UNSPECIFIED]:SatelliteErrorCode.INTERNAL,[SatInStartReplicationResp_ReplicationError_Code.UNRECOGNIZED]:SatelliteErrorCode.INTERNAL,[SatInStartReplicationResp_ReplicationError_Code.BEHIND_WINDOW]:SatelliteErrorCode.BEHIND_WINDOW,[SatInStartReplicationResp_ReplicationError_Code.INVALID_POSITION]:SatelliteErrorCode.INVALID_POSITION,[SatInStartReplicationResp_ReplicationError_Code.SUBSCRIPTION_NOT_FOUND]:SatelliteErrorCode.SUBSCRIPTION_NOT_FOUND,[SatInStartReplicationResp_ReplicationError_Code.MALFORMED_LSN]:SatelliteErrorCode.MALFORMED_LSN,[SatInStartReplicationResp_ReplicationError_Code.UNKNOWN_SCHEMA_VSN]:SatelliteErrorCode.UNKNOWN_SCHEMA_VSN},subsErrorToSatError={[SatSubsResp_SatSubsError_Code.CODE_UNSPECIFIED]:SatelliteErrorCode.INTERNAL,[SatSubsResp_SatSubsError_Code.UNRECOGNIZED]:SatelliteErrorCode.INTERNAL,[SatSubsResp_SatSubsError_Code.SHAPE_REQUEST_ERROR]:SatelliteErrorCode.SHAPE_REQUEST_ERROR,[SatSubsResp_SatSubsError_Code.SUBSCRIPTION_ID_ALREADY_EXISTS]:SatelliteErrorCode.SUBSCRIPTION_ID_ALREADY_EXISTS},subsErrorShapeReqErrorToSatError={[SatSubsResp_SatSubsError_ShapeReqError_Code.CODE_UNSPECIFIED]:SatelliteErrorCode.INTERNAL,[SatSubsResp_SatSubsError_ShapeReqError_Code.UNRECOGNIZED]:SatelliteErrorCode.INTERNAL,[SatSubsResp_SatSubsError_ShapeReqError_Code.TABLE_NOT_FOUND]:SatelliteErrorCode.TABLE_NOT_FOUND,[SatSubsResp_SatSubsError_ShapeReqError_Code.REFERENTIAL_INTEGRITY_VIOLATION]:SatelliteErrorCode.REFERENTIAL_INTEGRITY_VIOLATION,[SatSubsResp_SatSubsError_ShapeReqError_Code.EMPTY_SHAPE_DEFINITION]:SatelliteErrorCode.EMPTY_SHAPE_DEFINITION,[SatSubsResp_SatSubsError_ShapeReqError_Code.DUPLICATE_TABLE_IN_SHAPE_DEFINITION]:SatelliteErrorCode.DUPLICATE_TABLE_IN_SHAPE_DEFINITION},subsDataErrorToSatError={[SatSubsDataError_Code.CODE_UNSPECIFIED]:SatelliteErrorCode.INTERNAL,[SatSubsDataError_Code.UNRECOGNIZED]:SatelliteErrorCode.INTERNAL,[SatSubsDataError_Code.SHAPE_DELIVERY_ERROR]:SatelliteErrorCode.SHAPE_DELIVERY_ERROR},subsDataErrorShapeReqToSatError={[SatSubsDataError_ShapeReqError_Code.CODE_UNSPECIFIED]:SatelliteErrorCode.INTERNAL,[SatSubsDataError_ShapeReqError_Code.UNRECOGNIZED]:SatelliteErrorCode.INTERNAL,[SatSubsDataError_ShapeReqError_Code.SHAPE_SIZE_LIMIT_EXCEEDED]:SatelliteErrorCode.SHAPE_SIZE_LIMIT_EXCEEDED},msgtypetuples={SatErrorResp:[0,SatErrorResp],SatOpLog:[9,SatOpLog],SatRelation:[10,SatRelation],SatSubsDataError:[14,SatSubsDataError],SatSubsDataBegin:[15,SatSubsDataBegin],SatSubsDataEnd:[16,SatSubsDataEnd],SatShapeDataBegin:[17,SatShapeDataBegin],SatShapeDataEnd:[18,SatShapeDataEnd],SatRpcRequest:[21,SatRpcRequest],SatRpcResponse:[22,SatRpcResponse]},msgtypemapping=Object.fromEntries(Object.entries(msgtypetuples).map(i=>[getFullTypeName(i[0]),i[1]])),codemapping=Object.fromEntries(Object.entries(msgtypetuples).map(i=>[i[1][0],getFullTypeName(i[0])])),rpcResponseEncoders={"Electric.Satellite.SatInStartReplicationResp":SatInStartReplicationResp,"Electric.Satellite.SatInStopReplicationResp":SatInStopReplicationResp};function encodeRpcResponse(i){return rpcResponseEncoders[i.$type].encode(i).finish()}function getMsgType(i){const e=msgtypemapping[i.$type];return e?e[0]:0}function getTypeFromCode(i){return codemapping[i]??""}function getObjFromString(i){var e;return(e=msgtypemapping[i])==null?void 0:e[1]}function getBufWithMsgTag(i){const e=getMsgType(i),s=new Uint8Array(1);return s.set([e],0),s}function getProtocolVersion(){return protobufPackage}function getFullTypeName(i){return getProtocolVersion()+"."+i}function serverErrorToSatelliteError(i){return new SatelliteError(serverErrorToSatError[i.errorType],"server error")}function startReplicationErrorToSatelliteError(i){return new SatelliteError(startReplicationErrorToSatError[i.code],i.message)}function subsErrorToSatelliteError({shapeRequestError:i,code:e,message:s}){if(i.length>0){const a=i.map(subsShapeReqErrorToSatelliteError).map(c=>c.message).join("; "),o=`subscription error message: ${s}; shape error messages: ${a}`;return new SatelliteError(subsErrorToSatError[e],o)}return new SatelliteError(subsErrorToSatError[e],s)}function subsShapeReqErrorToSatelliteError(i){return new SatelliteError(subsErrorShapeReqErrorToSatError[i.code],i.message)}function subsDataErrorToSatelliteError({shapeRequestError:i,code:e,message:s}){if(i.length>0){const a=i.map(subsDataShapeErrorToSatelliteError).map(c=>c.message).join("; "),o=`subscription data error message: ${s}; shape error messages: ${a}`;return new SatelliteError(subsDataErrorToSatError[e],o)}return new SatelliteError(subsDataErrorToSatError[e],s)}function subsDataShapeErrorToSatelliteError(i){return new SatelliteError(subsDataErrorShapeReqToSatError[i.code],i.message)}function shapeRequestToSatShapeReq(i){const e=[];for(const s of i){const a=s.requestId,c={selects:s.definition.selects.map(h=>({tablename:h.tablename}))},d=SatShapeReq.fromPartial({requestId:a,shapeDefinition:c});e.push(d)}return e}function msgToString(i){switch(i.$type){case"Electric.Satellite.SatAuthReq":return`#SatAuthReq{id: ${i.id}, token: ${i.token}}`;case"Electric.Satellite.SatAuthResp":return`#SatAuthResp{id: ${i.id}}`;case"Electric.Satellite.SatErrorResp":return`#SatErrorResp{type: ${SatErrorResp_ErrorCode[i.errorType]}}`;case"Electric.Satellite.SatInStartReplicationReq":{const e=i.schemaVersion?` schema: ${i.schemaVersion},`:"";return`#SatInStartReplicationReq{lsn: ${base64$3.fromBytes(i.lsn)},${e} subscriptions: [${i.subscriptionIds}]}`}case"Electric.Satellite.SatInStartReplicationResp":return`#SatInStartReplicationResp{${i.err?"`"+startReplicationErrorToSatelliteError(i.err)+"`":""}}`;case"Electric.Satellite.SatInStopReplicationReq":return"#SatInStopReplicationReq{}";case"Electric.Satellite.SatInStopReplicationResp":return"#SatInStopReplicationResp{}";case"Electric.Satellite.SatRelation":{const e=i.columns.map(s=>`${s.name}: ${s.type}${s.primaryKey?" PK":""}`).join(", ");return`#SatRelation{for: ${i.schemaName}.${i.tableName}, as: ${i.relationId}, cols: [${e}]}`}case"Electric.Satellite.SatSubsDataBegin":return`#SatSubsDataBegin{id: ${i.subscriptionId}, lsn: ${base64$3.fromBytes(i.lsn)}}`;case"Electric.Satellite.SatSubsDataEnd":return"#SatSubsDataEnd{}";case"Electric.Satellite.SatShapeDataBegin":return`#SatShapeDataBegin{id: ${i.requestId}}`;case"Electric.Satellite.SatShapeDataEnd":return"#SatShapeDataEnd{}";case"Electric.Satellite.SatSubsDataError":{const e=i.shapeRequestError.map(a=>`${a.requestId}: ${SatSubsDataError_ShapeReqError_Code[a.code]} (${a.message})`),s=SatSubsDataError_Code[i.code];return`#SatSubsDataError{id: ${i.subscriptionId}, code: ${s}, msg: "${i.message}", errors: [${e}]}`}case"Electric.Satellite.SatSubsReq":return`#SatSubsReq{id: ${i.subscriptionId}, shapes: ${JSON.stringify(i.shapeRequests)}}`;case"Electric.Satellite.SatSubsResp":if(i.err){const e=i.err.shapeRequestError.map(s=>`${s.requestId}: ${SatSubsResp_SatSubsError_ShapeReqError_Code[s.code]} (${s.message})`);return`#SatSubsResp{id: ${i.subscriptionId}, err: ${SatSubsResp_SatSubsError_Code[i.err.code]} (${i.err.message}), shapes: [${e}]}`}else return`#SatSubsResp{id: ${i.subscriptionId}}`;case"Electric.Satellite.SatUnsubsReq":return`#SatUnsubsReq{ids: ${i.subscriptionIds}}`;case"Electric.Satellite.SatUnsubsResp":return"#SatUnsubsResp{}";case"Electric.Satellite.SatOpLog":return`#SatOpLog{ops: [${i.ops.map(opToString).join(", ")}]}`;case"Electric.Satellite.SatRpcRequest":return`#SatRpcRequest{method: ${i.method}, requestId: ${i.requestId}}`;case"Electric.Satellite.SatRpcResponse":return`#SatRpcResponse{method: ${i.method}, requestId: ${i.requestId}${i.error?", error: "+msgToString(i.error):""}}`}}function opToString(i){var e;return i.begin?`#Begin{lsn: ${base64$3.fromBytes(i.begin.lsn)}, ts: ${i.begin.commitTimestamp.toString()}, isMigration: ${i.begin.isMigration}}`:i.commit?`#Commit{lsn: ${base64$3.fromBytes(i.commit.lsn)}}`:i.insert?`#Insert{for: ${i.insert.relationId}, tags: [${i.insert.tags}], new: [${i.insert.rowData?rowToString(i.insert.rowData):""}]}`:i.update?`#Update{for: ${i.update.relationId}, tags: [${i.update.tags}], new: [${i.update.rowData?rowToString(i.update.rowData):""}], old: data: [${i.update.oldRowData?rowToString(i.update.oldRowData):""}]}`:i.delete?`#Delete{for: ${i.delete.relationId}, tags: [${i.delete.tags}], old: [${i.delete.oldRowData?rowToString(i.delete.oldRowData):""}]}`:i.migrate?`#Migrate{vsn: ${i.migrate.version}, for: ${(e=i.migrate.table)==null?void 0:e.name}, stmts: [${i.migrate.stmts.map(s=>s.sql.replaceAll(`
`,"\\n")).join("; ")}]}`:""}function rowToString(i){return i.values.map((e,s)=>getMaskBit(i.nullsBitmask,s)==0?JSON.stringify(typeDecoder.text(e)):"").join(", ")}const defaultKey="electric-sql.utils.tab:id";let tabId=null;const uniqueTabId=(i={})=>{const e=i.key??defaultKey;let s;if(i.storage!==void 0)s=i.storage;else try{s=window.sessionStorage}catch{s={}}let a;if(i.navEntries!==void 0)a=i.navEntries;else try{a=window.performance.getEntriesByType("navigation")}catch{a=[]}let o,c;try{o=s.getItem(e),c=!0}catch{o=tabId,c=!1}const d=o!==null;if(d&&!c)return{tabId:o,hasExisting:!0,usingExisting:!0};const _=(a&&a.length?a[0]:{type:null}).type==="back_forward";if(d&&!_)return{tabId:o,hasExisting:!0,usingExisting:!0,mayBeDuplicate:!1};const $=genUUID();try{s.setItem(e,$)}catch{tabId=$}return{tabId:$,hasExisting:d,usingExisting:!1,mayBeDuplicate:_}};function chunkBy(i,e){return{*[Symbol.iterator](){if(i.length===0)return;let s=e(i[0],0,i),a,o=[i[0]];for(let c=1;c<i.length;++c)a=e(i[c],c,i),s===a?(o.push(i[c]),s=a):(yield[s,o],s=a,o=[i[c]]);yield[s,o]}}}class AsyncEventEmitter{constructor(){Zt(this,"maxListeners",10);Zt(this,"listeners",{});Zt(this,"eventQueue",[]);Zt(this,"processing",!1)}getListeners(e){return this.listeners[e]??[]}assignListeners(e,s){this.listeners[e]=s,s.length>this.maxListeners&&this.maxListeners!==0&&console.warn(`Possible AsyncEventEmitter memory leak detected. ${s.length} listeners added.`)}addListener(e,s){const a=this.getListeners(e);return a.push(s),this.assignListeners(e,a),this}on(e,s){return this.addListener(e,s)}prependListener(e,s){const a=this.getListeners(e);return a.unshift(s),this.assignListeners(e,a),this}createOnceListener(e,s){const a=async(...o)=>{this.removeListener(e,a),await s(...o)};return a}once(e,s){const a=this.createOnceListener(e,s);return this.addListener(e,a)}prependOnceListener(e,s){const a=this.createOnceListener(e,s);return this.prependListener(e,a)}processQueue(){this.processing=!0;const e=this.eventQueue.shift();if(e){const{event:s,args:a}=e,o=this.getListeners(s);if(s==="error"&&o.length===0)throw this.processing=!1,a[0];const d=[...o].map(async h=>await h(...a));Promise.allSettled(d).then(()=>this.processQueue())}else this.processing=!1}enqueueEmit(e,...s){this.eventQueue.push({event:e,args:s}),this.processing||this.processQueue()}removeAllListeners(e){return typeof e>"u"?this.listeners={}:delete this.listeners[e],this}removeListener(e,s){const a=this.getListeners(e),o=a.indexOf(s);return o!==-1&&a.splice(o,1),this}off(e,s){return this.removeListener(e,s)}eventNames(){return Object.keys(this.listeners)}listenerCount(e){return this.getListeners(e).length}getMaxListeners(){return this.maxListeners}setMaxListeners(e){return this.maxListeners=e,this}}class TableNameImpl{tableNames({sql:e}){return parseTableNames(e)}}const E_CANCELED=new Error("request for lock canceled");var __awaiter$2=function(i,e,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function h(rt){try{$(a.next(rt))}catch(lt){d(lt)}}function _(rt){try{$(a.throw(rt))}catch(lt){d(lt)}}function $(rt){rt.done?c(rt.value):o(rt.value).then(h,_)}$((a=a.apply(i,e||[])).next())})};class Semaphore{constructor(e,s=E_CANCELED){this._value=e,this._cancelError=s,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((s,a)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:s,reject:a}),this._dispatch()})}runExclusive(e,s=1){return __awaiter$2(this,void 0,void 0,function*(){const[a,o]=yield this.acquire(s);try{return yield e(a)}finally{o()}})}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(s=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(s),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(s=>s.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var e;for(let s=this._value;s>0;s--){const a=(e=this._weightedQueues[s-1])===null||e===void 0?void 0:e.shift();if(!a)continue;const o=this._value,c=s;this._value-=s,s=this._value+1,a.resolve([o,this._newReleaser(c)])}this._drainUnlockWaiters()}_newReleaser(e){let s=!1;return()=>{s||(s=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)this._weightedWaiters[e-1]&&(this._weightedWaiters[e-1].forEach(s=>s()),this._weightedWaiters[e-1]=[])}}var __awaiter$1$1=function(i,e,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function h(rt){try{$(a.next(rt))}catch(lt){d(lt)}}function _(rt){try{$(a.throw(rt))}catch(lt){d(lt)}}function $(rt){rt.done?c(rt.value):o(rt.value).then(h,_)}$((a=a.apply(i,e||[])).next())})};class Mutex{constructor(e){this._semaphore=new Semaphore(1,e)}acquire(){return __awaiter$1$1(this,void 0,void 0,function*(){const[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}let DatabaseAdapter$1=class extends TableNameImpl{constructor(){super();Zt(this,"txMutex");this.txMutex=new Mutex}async transaction(s){const a=await this.txMutex.acquire();try{await this._run({sql:"BEGIN"})}catch(o){throw a(),o}return new Promise((o,c)=>{const d=_=>{a(),c(_)},h=new Transaction(this,d);s(h,_=>{this._run({sql:"COMMIT"}).then(()=>{a(),o(_)}).catch($=>{a(),c($)})})})}run(s){return this.txMutex.runExclusive(()=>this._run(s))}query(s){return this.txMutex.runExclusive(()=>this._query(s))}};class SerialDatabaseAdapter extends DatabaseAdapter$1{async runInTransaction(...e){const s=await this.txMutex.acquire();let a=!1,o=0;try{await this._run({sql:"BEGIN"}),a=!0;for(const c of e){const{rowsAffected:d}=await this._run(c);o+=d}return{rowsAffected:o}}catch(c){throw await this._run({sql:"ROLLBACK"}),a=!1,c}finally{a&&await this._run({sql:"COMMIT"}),s()}}}class Transaction{constructor(e,s){this.adapter=e,this.signalFailure=s}rollback(e,s){const a=()=>{typeof s<"u"&&s(e),this.signalFailure(e)};this.adapter._run({sql:"ROLLBACK"}).then(()=>{a()}).catch(()=>a())}invokeCallback(e,s,a){e.then(o=>{typeof s<"u"&&s(this,o)}).catch(o=>{this.rollback(o,a)})}run(e,s,a){const o=this.adapter._run(e);this.invokeCallback(o,s,a)}query(e,s,a){const o=this.adapter._query(e);this.invokeCallback(o,s,a)}}class DatabaseAdapter extends SerialDatabaseAdapter{constructor(s){super();Zt(this,"db");this.db=s}exec(s){return this.db.exec(s)}getRowsModified(){return this.db.getRowsModified()}async _run(s){return await this.exec(s),{rowsAffected:this.getRowsModified()}}_query(s){return this.exec(s)}}var Module=(()=>{var i=import.meta.url;return function(e={}){var s=e,a,o;s.ready=new Promise((g,_e)=>{a=g,o=_e});var c=Object.assign({},s),d="./this.program",h=(g,_e)=>{throw _e},_=typeof window=="object",$=typeof importScripts=="function",rt="",lt;(_||$)&&($?rt=self.location.href:typeof document<"u"&&document.currentScript&&(rt=document.currentScript.src),i&&(rt=i),rt.indexOf("blob:")!==0?rt=rt.substr(0,rt.replace(/[?#].*/,"").lastIndexOf("/")+1):rt="",$&&(lt=g=>{var _e=new XMLHttpRequest;return _e.open("GET",g,!1),_e.responseType="arraybuffer",_e.send(null),new Uint8Array(_e.response)}));var ct=s.print||console.log.bind(console),bt=s.printErr||console.error.bind(console);Object.assign(s,c),c=null,s.thisProgram&&(d=s.thisProgram),s.quit&&(h=s.quit);var Ot;s.wasmBinary&&(Ot=s.wasmBinary),typeof WebAssembly!="object"&&tr("no native wasm support detected");var dt,vt=!1,at,et,j,St,mt,ft,st,ht;function ot(){var g=dt.buffer;s.HEAP8=et=new Int8Array(g),s.HEAP16=St=new Int16Array(g),s.HEAPU8=j=new Uint8Array(g),s.HEAPU16=new Uint16Array(g),s.HEAP32=mt=new Int32Array(g),s.HEAPU32=ft=new Uint32Array(g),s.HEAPF32=st=new Float32Array(g),s.HEAPF64=ht=new Float64Array(g)}var ut=[],It=[],Ct=[],zt=[];function Wt(){var g=s.preRun.shift();ut.unshift(g)}var Ut=0,or=null;function tr(g){throw s.onAbort&&s.onAbort(g),g="Aborted("+g+")",bt(g),vt=!0,at=1,g=new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info."),o(g),g}var Bt=g=>g.startsWith("data:application/octet-stream;base64,"),Ht;if(s.locateFile){if(Ht="wa-sqlite-async.wasm",!Bt(Ht)){var er=Ht;Ht=s.locateFile?s.locateFile(er,rt):rt+er}}else Ht=new URL("/assets/wa-sqlite-async-715b3d85.wasm",self.location).href;function lr(g){if(g==Ht&&Ot)return new Uint8Array(Ot);if(lt)return lt(g);throw"both async and sync fetching of the wasm failed"}function dr(g){return Ot||!_&&!$||typeof fetch!="function"?Promise.resolve().then(()=>lr(g)):fetch(g,{credentials:"same-origin"}).then(_e=>{if(!_e.ok)throw"failed to load wasm binary file at '"+g+"'";return _e.arrayBuffer()}).catch(()=>lr(g))}function kr(g,_e,nt){return dr(g).then(gt=>WebAssembly.instantiate(gt,_e)).then(gt=>gt).then(nt,gt=>{bt(`failed to asynchronously prepare wasm: ${gt}`),tr(gt)})}function Ir(g,_e){var nt=Ht;return Ot||typeof WebAssembly.instantiateStreaming!="function"||Bt(nt)||typeof fetch!="function"?kr(nt,g,_e):fetch(nt,{credentials:"same-origin"}).then(gt=>WebAssembly.instantiateStreaming(gt,g).then(_e,function(Tt){return bt(`wasm streaming compile failed: ${Tt}`),bt("falling back to ArrayBuffer instantiation"),kr(nt,g,_e)}))}var Kt,br;function Zn(g){this.name="ExitStatus",this.message=`Program terminated with exit(${g})`,this.status=g}var qt=g=>{for(;0<g.length;)g.shift()(s)};function Br(g,_e="i8"){switch(_e.endsWith("*")&&(_e="*"),_e){case"i1":return et[g>>0];case"i8":return et[g>>0];case"i16":return St[g>>1];case"i32":return mt[g>>2];case"i64":tr("to do getValue(i64) use WASM_BIGINT");case"float":return st[g>>2];case"double":return ht[g>>3];case"*":return ft[g>>2];default:tr(`invalid type for getValue: ${_e}`)}}var Rs=s.noExitRuntime||!0;function mr(g,_e,nt="i8"){switch(nt.endsWith("*")&&(nt="*"),nt){case"i1":et[g>>0]=_e;break;case"i8":et[g>>0]=_e;break;case"i16":St[g>>1]=_e;break;case"i32":mt[g>>2]=_e;break;case"i64":tr("to do setValue(i64) use WASM_BIGINT");case"float":st[g>>2]=_e;break;case"double":ht[g>>3]=_e;break;case"*":ft[g>>2]=_e;break;default:tr(`invalid type for setValue: ${nt}`)}}var Bn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,_r=(g,_e,nt)=>{var gt=_e+nt;for(nt=_e;g[nt]&&!(nt>=gt);)++nt;if(16<nt-_e&&g.buffer&&Bn)return Bn.decode(g.subarray(_e,nt));for(gt="";_e<nt;){var Tt=g[_e++];if(Tt&128){var Dt=g[_e++]&63;if((Tt&224)==192)gt+=String.fromCharCode((Tt&31)<<6|Dt);else{var $t=g[_e++]&63;Tt=(Tt&240)==224?(Tt&15)<<12|Dt<<6|$t:(Tt&7)<<18|Dt<<12|$t<<6|g[_e++]&63,65536>Tt?gt+=String.fromCharCode(Tt):(Tt-=65536,gt+=String.fromCharCode(55296|Tt>>10,56320|Tt&1023))}}else gt+=String.fromCharCode(Tt)}return gt},Os=(g,_e)=>{for(var nt=0,gt=g.length-1;0<=gt;gt--){var Tt=g[gt];Tt==="."?g.splice(gt,1):Tt===".."?(g.splice(gt,1),nt++):nt&&(g.splice(gt,1),nt--)}if(_e)for(;nt;nt--)g.unshift("..");return g},pn=g=>{var _e=g.charAt(0)==="/",nt=g.substr(-1)==="/";return(g=Os(g.split("/").filter(gt=>!!gt),!_e).join("/"))||_e||(g="."),g&&nt&&(g+="/"),(_e?"/":"")+g},ls=g=>{var _e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(g).slice(1);return g=_e[0],_e=_e[1],!g&&!_e?".":(_e&&(_e=_e.substr(0,_e.length-1)),g+_e)},Fn=g=>{if(g==="/")return"/";g=pn(g),g=g.replace(/\/$/,"");var _e=g.lastIndexOf("/");return _e===-1?g:g.substr(_e+1)},Us=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return g=>crypto.getRandomValues(g);tr("initRandomDevice")},js=g=>(js=Us())(g);function hs(){for(var g="",_e=!1,nt=arguments.length-1;-1<=nt&&!_e;nt--){if(_e=0<=nt?arguments[nt]:"/",typeof _e!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!_e)return"";g=_e+"/"+g,_e=_e.charAt(0)==="/"}return g=Os(g.split("/").filter(gt=>!!gt),!_e).join("/"),(_e?"/":"")+g||"."}var Ps=[],Wn=g=>{for(var _e=0,nt=0;nt<g.length;++nt){var gt=g.charCodeAt(nt);127>=gt?_e++:2047>=gt?_e+=2:55296<=gt&&57343>=gt?(_e+=4,++nt):_e+=3}return _e},An=(g,_e,nt,gt)=>{if(!(0<gt))return 0;var Tt=nt;gt=nt+gt-1;for(var Dt=0;Dt<g.length;++Dt){var $t=g.charCodeAt(Dt);if(55296<=$t&&57343>=$t){var Yt=g.charCodeAt(++Dt);$t=65536+(($t&1023)<<10)|Yt&1023}if(127>=$t){if(nt>=gt)break;_e[nt++]=$t}else{if(2047>=$t){if(nt+1>=gt)break;_e[nt++]=192|$t>>6}else{if(65535>=$t){if(nt+2>=gt)break;_e[nt++]=224|$t>>12}else{if(nt+3>=gt)break;_e[nt++]=240|$t>>18,_e[nt++]=128|$t>>12&63}_e[nt++]=128|$t>>6&63}_e[nt++]=128|$t&63}}return _e[nt]=0,nt-Tt},Un=[];function Ms(g,_e){Un[g]={input:[],Rb:[],bc:_e},Gr(g,Ns)}var Ns={open(g){var _e=Un[g.node.ec];if(!_e)throw new Jt(43);g.Sb=_e,g.seekable=!1},close(g){g.Sb.bc.ic(g.Sb)},ic(g){g.Sb.bc.ic(g.Sb)},read(g,_e,nt,gt){if(!g.Sb||!g.Sb.bc.xc)throw new Jt(60);for(var Tt=0,Dt=0;Dt<gt;Dt++){try{var $t=g.Sb.bc.xc(g.Sb)}catch{throw new Jt(29)}if($t===void 0&&Tt===0)throw new Jt(6);if($t==null)break;Tt++,_e[nt+Dt]=$t}return Tt&&(g.node.timestamp=Date.now()),Tt},write(g,_e,nt,gt){if(!g.Sb||!g.Sb.bc.rc)throw new Jt(60);try{for(var Tt=0;Tt<gt;Tt++)g.Sb.bc.rc(g.Sb,_e[nt+Tt])}catch{throw new Jt(29)}return gt&&(g.node.timestamp=Date.now()),Tt}},ms={xc(){e:{if(!Ps.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"?(g=window.prompt("Input: "),g!==null&&(g+=`
`)):typeof readline=="function"&&(g=readline(),g!==null&&(g+=`
`)),!g){var _e=null;break e}_e=Array(Wn(g)+1),g=An(g,_e,0,_e.length),_e.length=g,Ps=_e}_e=Ps.shift()}return _e},rc(g,_e){_e===null||_e===10?(ct(_r(g.Rb,0)),g.Rb=[]):_e!=0&&g.Rb.push(_e)},ic(g){g.Rb&&0<g.Rb.length&&(ct(_r(g.Rb,0)),g.Rb=[])},Yc(){return{Uc:25856,Wc:5,Tc:191,Vc:35387,Sc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Zc(){return 0},$c(){return[24,80]}},Cs={rc(g,_e){_e===null||_e===10?(bt(_r(g.Rb,0)),g.Rb=[]):_e!=0&&g.Rb.push(_e)},ic(g){g.Rb&&0<g.Rb.length&&(bt(_r(g.Rb,0)),g.Rb=[])}};function Jn(g,_e){var nt=g.Nb?g.Nb.length:0;nt>=_e||(_e=Math.max(_e,nt*(1048576>nt?2:1.125)>>>0),nt!=0&&(_e=Math.max(_e,256)),nt=g.Nb,g.Nb=new Uint8Array(_e),0<g.Pb&&g.Nb.set(nt.subarray(0,g.Pb),0))}var ur={Vb:null,Ub(){return ur.createNode(null,"/",16895,0)},createNode(g,_e,nt,gt){if((nt&61440)===24576||(nt&61440)===4096)throw new Jt(63);return ur.Vb||(ur.Vb={dir:{node:{Tb:ur.Cb.Tb,Qb:ur.Cb.Qb,cc:ur.Cb.cc,jc:ur.Cb.jc,Bc:ur.Cb.Bc,oc:ur.Cb.oc,mc:ur.Cb.mc,Ac:ur.Cb.Ac,nc:ur.Cb.nc},stream:{Zb:ur.Mb.Zb}},file:{node:{Tb:ur.Cb.Tb,Qb:ur.Cb.Qb},stream:{Zb:ur.Mb.Zb,read:ur.Mb.read,write:ur.Mb.write,uc:ur.Mb.uc,kc:ur.Mb.kc,lc:ur.Mb.lc}},link:{node:{Tb:ur.Cb.Tb,Qb:ur.Cb.Qb,fc:ur.Cb.fc},stream:{}},vc:{node:{Tb:ur.Cb.Tb,Qb:ur.Cb.Qb},stream:Hn}}),nt=nn(g,_e,nt,gt),xr(nt.mode)?(nt.Cb=ur.Vb.dir.node,nt.Mb=ur.Vb.dir.stream,nt.Nb={}):(nt.mode&61440)===32768?(nt.Cb=ur.Vb.file.node,nt.Mb=ur.Vb.file.stream,nt.Pb=0,nt.Nb=null):(nt.mode&61440)===40960?(nt.Cb=ur.Vb.link.node,nt.Mb=ur.Vb.link.stream):(nt.mode&61440)===8192&&(nt.Cb=ur.Vb.vc.node,nt.Mb=ur.Vb.vc.stream),nt.timestamp=Date.now(),g&&(g.Nb[_e]=nt,g.timestamp=nt.timestamp),nt},Xc(g){return g.Nb?g.Nb.subarray?g.Nb.subarray(0,g.Pb):new Uint8Array(g.Nb):new Uint8Array(0)},Cb:{Tb(g){var _e={};return _e.Hc=(g.mode&61440)===8192?g.id:1,_e.yc=g.id,_e.mode=g.mode,_e.Nc=1,_e.uid=0,_e.Kc=0,_e.ec=g.ec,xr(g.mode)?_e.size=4096:(g.mode&61440)===32768?_e.size=g.Pb:(g.mode&61440)===40960?_e.size=g.link.length:_e.size=0,_e.Dc=new Date(g.timestamp),_e.Mc=new Date(g.timestamp),_e.Gc=new Date(g.timestamp),_e.Ec=4096,_e.Fc=Math.ceil(_e.size/_e.Ec),_e},Qb(g,_e){if(_e.mode!==void 0&&(g.mode=_e.mode),_e.timestamp!==void 0&&(g.timestamp=_e.timestamp),_e.size!==void 0&&(_e=_e.size,g.Pb!=_e))if(_e==0)g.Nb=null,g.Pb=0;else{var nt=g.Nb;g.Nb=new Uint8Array(_e),nt&&g.Nb.set(nt.subarray(0,Math.min(_e,g.Pb))),g.Pb=_e}},cc(){throw xn[44]},jc(g,_e,nt,gt){return ur.createNode(g,_e,nt,gt)},Bc(g,_e,nt){if(xr(g.mode)){try{var gt=qr(_e,nt)}catch{}if(gt)for(var Tt in gt.Nb)throw new Jt(55)}delete g.parent.Nb[g.name],g.parent.timestamp=Date.now(),g.name=nt,_e.Nb[nt]=g,_e.timestamp=g.parent.timestamp,g.parent=_e},oc(g,_e){delete g.Nb[_e],g.timestamp=Date.now()},mc(g,_e){var nt=qr(g,_e),gt;for(gt in nt.Nb)throw new Jt(55);delete g.Nb[_e],g.timestamp=Date.now()},Ac(g){var _e=[".",".."],nt;for(nt in g.Nb)g.Nb.hasOwnProperty(nt)&&_e.push(nt);return _e},nc(g,_e,nt){return g=ur.createNode(g,_e,41471,0),g.link=nt,g},fc(g){if((g.mode&61440)!==40960)throw new Jt(28);return g.link}},Mb:{read(g,_e,nt,gt,Tt){var Dt=g.node.Nb;if(Tt>=g.node.Pb)return 0;if(g=Math.min(g.node.Pb-Tt,gt),8<g&&Dt.subarray)_e.set(Dt.subarray(Tt,Tt+g),nt);else for(gt=0;gt<g;gt++)_e[nt+gt]=Dt[Tt+gt];return g},write(g,_e,nt,gt,Tt,Dt){if(_e.buffer===et.buffer&&(Dt=!1),!gt)return 0;if(g=g.node,g.timestamp=Date.now(),_e.subarray&&(!g.Nb||g.Nb.subarray)){if(Dt)return g.Nb=_e.subarray(nt,nt+gt),g.Pb=gt;if(g.Pb===0&&Tt===0)return g.Nb=_e.slice(nt,nt+gt),g.Pb=gt;if(Tt+gt<=g.Pb)return g.Nb.set(_e.subarray(nt,nt+gt),Tt),gt}if(Jn(g,Tt+gt),g.Nb.subarray&&_e.subarray)g.Nb.set(_e.subarray(nt,nt+gt),Tt);else for(Dt=0;Dt<gt;Dt++)g.Nb[Tt+Dt]=_e[nt+Dt];return g.Pb=Math.max(g.Pb,Tt+gt),gt},Zb(g,_e,nt){if(nt===1?_e+=g.position:nt===2&&(g.node.mode&61440)===32768&&(_e+=g.node.Pb),0>_e)throw new Jt(28);return _e},uc(g,_e,nt){Jn(g.node,_e+nt),g.node.Pb=Math.max(g.node.Pb,_e+nt)},kc(g,_e,nt,gt,Tt){if((g.node.mode&61440)!==32768)throw new Jt(43);if(g=g.node.Nb,Tt&2||g.buffer!==et.buffer){if((0<nt||nt+_e<g.length)&&(g.subarray?g=g.subarray(nt,nt+_e):g=Array.prototype.slice.call(g,nt,nt+_e)),nt=!0,_e=65536*Math.ceil(_e/65536),(Tt=xt(65536,_e))?(j.fill(0,Tt,Tt+_e),_e=Tt):_e=0,!_e)throw new Jt(48);et.set(g,_e)}else nt=!1,_e=g.byteOffset;return{Oc:_e,Cc:nt}},lc(g,_e,nt,gt){return ur.Mb.write(g,_e,0,gt,nt,!1),0}}},kn=(g,_e)=>{var nt=0;return g&&(nt|=365),_e&&(nt|=146),nt},jn=null,un={},vr=[],Mr=1,bn=null,Vn=!0,Jt=null,xn={};function Yr(g,_e={}){if(g=hs(g),!g)return{path:"",node:null};if(_e=Object.assign({wc:!0,sc:0},_e),8<_e.sc)throw new Jt(32);g=g.split("/").filter($t=>!!$t);for(var nt=jn,gt="/",Tt=0;Tt<g.length;Tt++){var Dt=Tt===g.length-1;if(Dt&&_e.parent)break;if(nt=qr(nt,g[Tt]),gt=pn(gt+"/"+g[Tt]),nt.$b&&(!Dt||Dt&&_e.wc)&&(nt=nt.$b.root),!Dt||_e.Yb){for(Dt=0;(nt.mode&61440)===40960;)if(nt=Nr(gt),gt=hs(ls(gt),nt),nt=Yr(gt,{sc:_e.sc+1}).node,40<Dt++)throw new Jt(32)}}return{path:gt,node:nt}}function _i(g){for(var _e;;){if(g===g.parent)return g=g.Ub.zc,_e?g[g.length-1]!=="/"?`${g}/${_e}`:g+_e:g;_e=_e?`${g.name}/${_e}`:g.name,g=g.parent}}function cn(g,_e){for(var nt=0,gt=0;gt<_e.length;gt++)nt=(nt<<5)-nt+_e.charCodeAt(gt)|0;return(g+nt>>>0)%bn.length}function rn(g){var _e=cn(g.parent.id,g.name);if(bn[_e]===g)bn[_e]=g.ac;else for(_e=bn[_e];_e;){if(_e.ac===g){_e.ac=g.ac;break}_e=_e.ac}}function qr(g,_e){var nt;if(nt=(nt=hn(g,"x"))?nt:g.Cb.cc?0:2)throw new Jt(nt,g);for(nt=bn[cn(g.id,_e)];nt;nt=nt.ac){var gt=nt.name;if(nt.parent.id===g.id&&gt===_e)return nt}return g.Cb.cc(g,_e)}function nn(g,_e,nt,gt){return g=new _t(g,_e,nt,gt),_e=cn(g.parent.id,g.name),g.ac=bn[_e],bn[_e]=g}function xr(g){return(g&61440)===16384}function sn(g){var _e=["r","w","rw"][g&3];return g&512&&(_e+="w"),_e}function hn(g,_e){if(Vn)return 0;if(!_e.includes("r")||g.mode&292){if(_e.includes("w")&&!(g.mode&146)||_e.includes("x")&&!(g.mode&73))return 2}else return 2;return 0}function es(g,_e){try{return qr(g,_e),20}catch{}return hn(g,"wx")}function qs(g,_e,nt){try{var gt=qr(g,_e)}catch(Tt){return Tt.Ob}if(g=hn(g,"wx"))return g;if(nt){if(!xr(gt.mode))return 54;if(gt===gt.parent||_i(gt)==="/")return 10}else if(xr(gt.mode))return 31;return 0}function Xs(){for(var g=0;4096>=g;g++)if(!vr[g])return g;throw new Jt(33)}function Vr(g){if(g=vr[g],!g)throw new Jt(8);return g}function Tn(g,_e=-1){return an||(an=function(){this.hc={}},an.prototype={},Object.defineProperties(an.prototype,{object:{get(){return this.node},set(nt){this.node=nt}},flags:{get(){return this.hc.flags},set(nt){this.hc.flags=nt}},position:{get(){return this.hc.position},set(nt){this.hc.position=nt}}})),g=Object.assign(new an,g),_e==-1&&(_e=Xs()),g.Wb=_e,vr[_e]=g}var Hn={open(g){g.Mb=un[g.node.ec].Mb,g.Mb.open&&g.Mb.open(g)},Zb(){throw new Jt(70)}};function Gr(g,_e){un[g]={Mb:_e}}function Ur(g,_e){var nt=_e==="/",gt=!_e;if(nt&&jn)throw new Jt(10);if(!nt&&!gt){var Tt=Yr(_e,{wc:!1});if(_e=Tt.path,Tt=Tt.node,Tt.$b)throw new Jt(10);if(!xr(Tt.mode))throw new Jt(54)}_e={type:g,bd:{},zc:_e,Lc:[]},g=g.Ub(_e),g.Ub=_e,_e.root=g,nt?jn=g:Tt&&(Tt.$b=_e,Tt.Ub&&Tt.Ub.Lc.push(_e))}function gs(g,_e,nt){var gt=Yr(g,{parent:!0}).node;if(g=Fn(g),!g||g==="."||g==="..")throw new Jt(28);var Tt=es(gt,g);if(Tt)throw new Jt(Tt);if(!gt.Cb.jc)throw new Jt(63);return gt.Cb.jc(gt,g,_e,nt)}function Kr(g,_e){return gs(g,(_e!==void 0?_e:511)&1023|16384,0)}function ys(g,_e,nt){typeof nt>"u"&&(nt=_e,_e=438),gs(g,_e|8192,nt)}function As(g,_e){if(!hs(g))throw new Jt(44);var nt=Yr(_e,{parent:!0}).node;if(!nt)throw new Jt(44);_e=Fn(_e);var gt=es(nt,_e);if(gt)throw new Jt(gt);if(!nt.Cb.nc)throw new Jt(63);nt.Cb.nc(nt,_e,g)}function wn(g){var _e=Yr(g,{parent:!0}).node;g=Fn(g);var nt=qr(_e,g),gt=qs(_e,g,!0);if(gt)throw new Jt(gt);if(!_e.Cb.mc)throw new Jt(63);if(nt.$b)throw new Jt(10);_e.Cb.mc(_e,g),rn(nt)}function Nr(g){if(g=Yr(g).node,!g)throw new Jt(44);if(!g.Cb.fc)throw new Jt(28);return hs(_i(g.parent),g.Cb.fc(g))}function _s(g,_e){if(g=Yr(g,{Yb:!_e}).node,!g)throw new Jt(44);if(!g.Cb.Tb)throw new Jt(63);return g.Cb.Tb(g)}function In(g){return _s(g,!0)}function zs(g,_e){if(g=typeof g=="string"?Yr(g,{Yb:!0}).node:g,!g.Cb.Qb)throw new Jt(63);g.Cb.Qb(g,{mode:_e&4095|g.mode&-4096,timestamp:Date.now()})}function Zs(g,_e){if(0>_e)throw new Jt(28);if(g=typeof g=="string"?Yr(g,{Yb:!0}).node:g,!g.Cb.Qb)throw new Jt(63);if(xr(g.mode))throw new Jt(31);if((g.mode&61440)!==32768)throw new Jt(28);var nt=hn(g,"w");if(nt)throw new Jt(nt);g.Cb.Qb(g,{size:_e,timestamp:Date.now()})}function mn(g,_e,nt){if(g==="")throw new Jt(44);if(typeof _e=="string"){var gt={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[_e];if(typeof gt>"u")throw Error(`Unknown file open mode: ${_e}`);_e=gt}if(nt=_e&64?(typeof nt>"u"?438:nt)&4095|32768:0,typeof g=="object")var Tt=g;else{g=pn(g);try{Tt=Yr(g,{Yb:!(_e&131072)}).node}catch{}}if(gt=!1,_e&64)if(Tt){if(_e&128)throw new Jt(20)}else Tt=gs(g,nt,0),gt=!0;if(!Tt)throw new Jt(44);if((Tt.mode&61440)===8192&&(_e&=-513),_e&65536&&!xr(Tt.mode))throw new Jt(54);if(!gt&&(nt=Tt?(Tt.mode&61440)===40960?32:xr(Tt.mode)&&(sn(_e)!=="r"||_e&512)?31:hn(Tt,sn(_e)):44))throw new Jt(nt);return _e&512&&!gt&&Zs(Tt,0),_e&=-131713,Tt=Tn({node:Tt,path:_i(Tt),flags:_e,seekable:!0,position:0,Mb:Tt.Mb,Rc:[],error:!1}),Tt.Mb.open&&Tt.Mb.open(Tt),!s.logReadFiles||_e&1||(vs||(vs={}),g in vs||(vs[g]=1)),Tt}function Lr(g,_e,nt){if(g.Wb===null)throw new Jt(8);if(!g.seekable||!g.Mb.Zb)throw new Jt(70);if(nt!=0&&nt!=1&&nt!=2)throw new Jt(28);g.position=g.Mb.Zb(g,_e,nt),g.Rc=[]}function Ws(){Jt||(Jt=function(g,_e){this.name="ErrnoError",this.node=_e,this.Pc=function(nt){this.Ob=nt},this.Pc(g),this.message="FS error"},Jt.prototype=Error(),Jt.prototype.constructor=Jt,[44].forEach(g=>{xn[g]=new Jt(g),xn[g].stack="<generic error, no stack>"}))}var Rn;function us(g,_e,nt){g=pn("/dev/"+g);var gt=kn(!!_e,!!nt);ks||(ks=64);var Tt=ks++<<8|0;Gr(Tt,{open(Dt){Dt.seekable=!1},close(){nt&&nt.buffer&&nt.buffer.length&&nt(10)},read(Dt,$t,Yt,Ft){for(var Mt=0,ar=0;ar<Ft;ar++){try{var Vt=_e()}catch{throw new Jt(29)}if(Vt===void 0&&Mt===0)throw new Jt(6);if(Vt==null)break;Mt++,$t[Yt+ar]=Vt}return Mt&&(Dt.node.timestamp=Date.now()),Mt},write(Dt,$t,Yt,Ft){for(var Mt=0;Mt<Ft;Mt++)try{nt($t[Yt+Mt])}catch{throw new Jt(29)}return Ft&&(Dt.node.timestamp=Date.now()),Mt}}),ys(g,gt,Tt)}var ks,Rr={},an,vs;function Hr(g,_e,nt){if(_e.charAt(0)==="/")return _e;if(g=g===-100?"/":Vr(g).path,_e.length==0){if(!nt)throw new Jt(44);return g}return pn(g+"/"+_e)}function Pr(g,_e,nt){try{var gt=g(_e)}catch(Dt){if(Dt&&Dt.node&&pn(_e)!==pn(_i(Dt.node)))return-54;throw Dt}mt[nt>>2]=gt.Hc,mt[nt+4>>2]=gt.mode,ft[nt+8>>2]=gt.Nc,mt[nt+12>>2]=gt.uid,mt[nt+16>>2]=gt.Kc,mt[nt+20>>2]=gt.ec,br=[gt.size>>>0,(Kt=gt.size,1<=+Math.abs(Kt)?0<Kt?+Math.floor(Kt/4294967296)>>>0:~~+Math.ceil((Kt-+(~~Kt>>>0))/4294967296)>>>0:0)],mt[nt+24>>2]=br[0],mt[nt+28>>2]=br[1],mt[nt+32>>2]=4096,mt[nt+36>>2]=gt.Fc,g=gt.Dc.getTime(),_e=gt.Mc.getTime();var Tt=gt.Gc.getTime();return br=[Math.floor(g/1e3)>>>0,(Kt=Math.floor(g/1e3),1<=+Math.abs(Kt)?0<Kt?+Math.floor(Kt/4294967296)>>>0:~~+Math.ceil((Kt-+(~~Kt>>>0))/4294967296)>>>0:0)],mt[nt+40>>2]=br[0],mt[nt+44>>2]=br[1],ft[nt+48>>2]=g%1e3*1e3,br=[Math.floor(_e/1e3)>>>0,(Kt=Math.floor(_e/1e3),1<=+Math.abs(Kt)?0<Kt?+Math.floor(Kt/4294967296)>>>0:~~+Math.ceil((Kt-+(~~Kt>>>0))/4294967296)>>>0:0)],mt[nt+56>>2]=br[0],mt[nt+60>>2]=br[1],ft[nt+64>>2]=_e%1e3*1e3,br=[Math.floor(Tt/1e3)>>>0,(Kt=Math.floor(Tt/1e3),1<=+Math.abs(Kt)?0<Kt?+Math.floor(Kt/4294967296)>>>0:~~+Math.ceil((Kt-+(~~Kt>>>0))/4294967296)>>>0:0)],mt[nt+72>>2]=br[0],mt[nt+76>>2]=br[1],ft[nt+80>>2]=Tt%1e3*1e3,br=[gt.yc>>>0,(Kt=gt.yc,1<=+Math.abs(Kt)?0<Kt?+Math.floor(Kt/4294967296)>>>0:~~+Math.ceil((Kt-+(~~Kt>>>0))/4294967296)>>>0:0)],mt[nt+88>>2]=br[0],mt[nt+92>>2]=br[1],0}var Ss=void 0;function gn(){var g=mt[+Ss>>2];return Ss+=4,g}var cs=(g,_e)=>_e+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*_e:NaN,Ys=[0,31,60,91,121,152,182,213,244,274,305,335],Js=[0,31,59,90,120,151,181,212,243,273,304,334],fs=g=>{var _e=Wn(g)+1,nt=it(_e);return nt&&An(g,j,nt,_e),nt},yn={},xs=()=>{if(!vn){var g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},_e;for(_e in yn)yn[_e]===void 0?delete g[_e]:g[_e]=yn[_e];var nt=[];for(_e in g)nt.push(`${_e}=${g[_e]}`);vn=nt}return vn},vn;function Es(){}function Ls(){}function ts(){}function Vs(){}function bs(){}function rs(){}function Ds(){}function Hs(){}function Gs(){}function Ts(){}function ds(){}function Gn(){}function Ks(){}function $s(){}function Ln(){}function Bs(){}function ws(){}function Fs(){}function ns(){}function Qs(){}function Jr(){}function On(){}function ps(){}function _n(){}function Pn(){}function on(){}function Qr(){}function Nn(){}function is(){}function Sn(){}function Dn(){}function ss(){}function Mn(){}function Kn(){}function as(){}function Et(){}function Nt(){}function jt(){}function nr(){}var gr=0,fr=g=>{at=g,Rs||0<gr||(s.onExit&&s.onExit(g),vt=!0),h(g,new Zn(g))},wr=g=>{g instanceof Zn||g=="unwind"||h(1,g)},yr=g=>{try{g()}catch(_e){tr(_e)}};function Dr(){var g=Pt,_e={},nt;for(nt in g)(function(gt){var Tt=g[gt];_e[gt]=typeof Tt=="function"?function(){Ar.push(gt);try{return Tt.apply(null,arguments)}finally{vt||(Ar.pop()===gt||tr(),Cr&&Sr===1&&Ar.length===0&&(Sr=0,yr(Er),typeof Fibers<"u"&&Fibers.cd()))}}:Tt})(nt);return _e}var Sr=0,Cr=null,Xr=0,Ar=[],$r={},jr={},En=0,fn=null,pt=[];function wt(){return new Promise((g,_e)=>{fn={resolve:g,reject:_e}})}function Lt(){var g=it(16396),_e=g+12;ft[g>>2]=_e,ft[g+4>>2]=_e+16384,_e=Ar[0];var nt=$r[_e];return nt===void 0&&(nt=En++,$r[_e]=nt,jr[nt]=_e),mt[g+8>>2]=nt,g}function Qt(g){if(!vt){if(Sr===0){var _e=!1,nt=!1;g((gt=0)=>{if(!vt&&(Xr=gt,_e=!0,nt)){Sr=2,yr(()=>Or(Cr)),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.resume(),gt=!1;try{var Tt=(0,Pt[jr[mt[Cr+8>>2]]])()}catch(Yt){Tt=Yt,gt=!0}var Dt=!1;if(!Cr){var $t=fn;$t&&(fn=null,(gt?$t.reject:$t.resolve)(Tt),Dt=!0)}if(gt&&!Dt)throw Tt}}),nt=!0,_e||(Sr=1,Cr=Lt(),typeof Browser<"u"&&Browser.qc.Jc&&Browser.qc.pause(),yr(()=>hr(Cr)))}else Sr===2?(Sr=0,yr(Fr),yt(Cr),Cr=null,pt.forEach(gt=>{if(!vt)try{if(gt(),!(Rs||0<gr))try{at=gt=at,fr(gt)}catch(Tt){wr(Tt)}}catch(Tt){wr(Tt)}})):tr(`invalid state: ${Sr}`);return Xr}}function pr(g){return Qt(_e=>{g().then(_e)})}var b={},tt=(g,_e,nt,gt,Tt)=>{function Dt(Vt){return--gr,Ft!==0&&ir(Ft),_e==="string"?Vt?_r(j,Vt):"":_e==="boolean"?!!Vt:Vt}var $t={string:Vt=>{var sr=0;if(Vt!=null&&Vt!==0){sr=Wn(Vt)+1;var Tr=cr(sr);An(Vt,j,Tr,sr),sr=Tr}return sr},array:Vt=>{var sr=cr(Vt.length);return et.set(Vt,sr),sr}};g=s["_"+g];var Yt=[],Ft=0;if(gt)for(var Mt=0;Mt<gt.length;Mt++){var ar=$t[nt[Mt]];ar?(Ft===0&&(Ft=Xt()),Yt[Mt]=ar(gt[Mt])):Yt[Mt]=gt[Mt]}return nt=Cr,gt=g.apply(null,Yt),Tt=Tt&&Tt.async,gr+=1,Cr!=nt?wt().then(Dt):(gt=Dt(gt),Tt?Promise.resolve(gt):gt)};function _t(g,_e,nt,gt){g||(g=this),this.parent=g,this.Ub=g.Ub,this.$b=null,this.id=Mr++,this.name=_e,this.mode=nt,this.Cb={},this.Mb={},this.ec=gt}Object.defineProperties(_t.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(g){g?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(g){g?this.mode|=146:this.mode&=-147}}}),Ws(),bn=Array(4096),Ur(ur,"/"),Kr("/tmp"),Kr("/home"),Kr("/home/web_user"),function(){Kr("/dev"),Gr(259,{read:()=>0,write:(gt,Tt,Dt,$t)=>$t}),ys("/dev/null",259),Ms(1280,ms),Ms(1536,Cs),ys("/dev/tty",1280),ys("/dev/tty1",1536);var g=new Uint8Array(1024),_e=0,nt=()=>(_e===0&&(_e=js(g).byteLength),g[--_e]);us("random",nt),us("urandom",nt),Kr("/dev/shm"),Kr("/dev/shm/tmp")}(),function(){Kr("/proc");var g=Kr("/proc/self");Kr("/proc/self/fd"),Ur({Ub(){var _e=nn(g,"fd",16895,73);return _e.Cb={cc(nt,gt){var Tt=Vr(+gt);return nt={parent:null,Ub:{zc:"fake"},Cb:{fc:()=>Tt.path}},nt.parent=nt}},_e}},"/proc/self/fd")}(),function(){const g=new Map;s.setAuthorizer=function(_e,nt,gt){return nt?g.set(_e,{f:nt,tc:gt}):g.delete(_e),tt("set_authorizer","number",["number"],[_e])},Es=function(_e,nt,gt,Tt,Dt,$t){if(g.has(_e)){const{f:Yt,tc:Ft}=g.get(_e);return Yt(Ft,nt,gt?gt?_r(j,gt):"":null,Tt?Tt?_r(j,Tt):"":null,Dt?Dt?_r(j,Dt):"":null,$t?$t?_r(j,$t):"":null)}return 0}}(),function(){const g=new Map,_e=new Map;s.createFunction=function(nt,gt,Tt,Dt,$t,Yt){const Ft=g.size;return g.set(Ft,{f:Yt,Xb:$t}),tt("create_function","number","number string number number number number".split(" "),[nt,gt,Tt,Dt,Ft,0])},s.createAggregate=function(nt,gt,Tt,Dt,$t,Yt,Ft){const Mt=g.size;return g.set(Mt,{step:Yt,Ic:Ft,Xb:$t}),tt("create_function","number","number string number number number number".split(" "),[nt,gt,Tt,Dt,Mt,1])},s.getFunctionUserData=function(nt){return _e.get(nt)},ts=function(nt,gt,Tt,Dt){nt=g.get(nt),_e.set(gt,nt.Xb),nt.f(gt,new Uint32Array(j.buffer,Dt,Tt)),_e.delete(gt)},bs=function(nt,gt,Tt,Dt){nt=g.get(nt),_e.set(gt,nt.Xb),nt.step(gt,new Uint32Array(j.buffer,Dt,Tt)),_e.delete(gt)},Ls=function(nt,gt){nt=g.get(nt),_e.set(gt,nt.Xb),nt.Ic(gt),_e.delete(gt)}}(),function(){const g=new Map;s.progressHandler=function(_e,nt,gt,Tt){return gt?g.set(_e,{f:gt,tc:Tt}):g.delete(_e),tt("progress_handler",null,["number","number"],[_e,nt])},Vs=function(_e){if(g.has(_e)){const{f:nt,tc:gt}=g.get(_e);return nt(gt)}return 0}}(),function(){function g(Ft,Mt){const ar=`get${Ft}`,Vt=`set${Ft}`;return new Proxy(new DataView(j.buffer,Mt,Ft==="Int32"?4:8),{get(sr,Tr){if(Tr===ar)return function(Zr,qn){if(!qn)throw Error("must be little endian");return sr[Tr](Zr,qn)};if(Tr===Vt)return function(Zr,qn,Cn){if(!Cn)throw Error("must be little endian");return sr[Tr](Zr,qn,Cn)};if(typeof Tr=="string"&&Tr.match(/^(get)|(set)/))throw Error("invalid type");return sr[Tr]}})}const _e=typeof b=="object",nt=new Map,gt=new Map,Tt=new Map,Dt=_e?new Set:null,$t=_e?new Set:null,Yt=new Map;On=function(Ft,Mt,ar,Vt){Yt.set(Ft?_r(j,Ft):"",{size:Mt,dc:Array.from(new Uint32Array(j.buffer,Vt,ar))})},s.createModule=function(Ft,Mt,ar,Vt){_e&&(ar.handleAsync=pr);const sr=nt.size;return nt.set(sr,{module:ar,Xb:Vt}),Vt=0,ar.xCreate&&(Vt|=1),ar.xConnect&&(Vt|=2),ar.xBestIndex&&(Vt|=4),ar.xDisconnect&&(Vt|=8),ar.xDestroy&&(Vt|=16),ar.xOpen&&(Vt|=32),ar.xClose&&(Vt|=64),ar.xFilter&&(Vt|=128),ar.xNext&&(Vt|=256),ar.xEof&&(Vt|=512),ar.xColumn&&(Vt|=1024),ar.xRowid&&(Vt|=2048),ar.xUpdate&&(Vt|=4096),ar.xBegin&&(Vt|=8192),ar.xSync&&(Vt|=16384),ar.xCommit&&(Vt|=32768),ar.xRollback&&(Vt|=65536),ar.xFindFunction&&(Vt|=131072),ar.xRename&&(Vt|=262144),tt("create_module","number",["number","string","number","number"],[Ft,Mt,sr,Vt])},Gn=function(Ft,Mt,ar,Vt,sr,Tr){if(Mt=nt.get(Mt),gt.set(sr,Mt),_e){Dt.delete(sr);for(const Zr of Dt)gt.delete(Zr)}return Vt=Array.from(new Uint32Array(j.buffer,Vt,ar)).map(Zr=>Zr?_r(j,Zr):""),Mt.module.xCreate(Ft,Mt.Xb,Vt,sr,g("Int32",Tr))},ds=function(Ft,Mt,ar,Vt,sr,Tr){if(Mt=nt.get(Mt),gt.set(sr,Mt),_e){Dt.delete(sr);for(const Zr of Dt)gt.delete(Zr)}return Vt=Array.from(new Uint32Array(j.buffer,Vt,ar)).map(Zr=>Zr?_r(j,Zr):""),Mt.module.xConnect(Ft,Mt.Xb,Vt,sr,g("Int32",Tr))},Ds=function(Ft,Mt){var ar=gt.get(Ft),Vt=Yt.get("sqlite3_index_info").dc;const sr={};sr.nConstraint=Br(Mt+Vt[0],"i32"),sr.aConstraint=[];for(var Tr=Br(Mt+Vt[1],"*"),Zr=Yt.get("sqlite3_index_constraint").size,qn=0;qn<sr.nConstraint;++qn){var Cn=sr.aConstraint,Is=Cn.push,Qn=Tr+qn*Zr,ro=Yt.get("sqlite3_index_constraint").dc,ga={};ga.iColumn=Br(Qn+ro[0],"i32"),ga.op=Br(Qn+ro[1],"i8"),ga.usable=!!Br(Qn+ro[2],"i8"),Is.call(Cn,ga)}for(sr.nOrderBy=Br(Mt+Vt[2],"i32"),sr.aOrderBy=[],Tr=Br(Mt+Vt[3],"*"),Zr=Yt.get("sqlite3_index_orderby").size,qn=0;qn<sr.nOrderBy;++qn)Cn=sr.aOrderBy,Is=Cn.push,Qn=Tr+qn*Zr,ro=Yt.get("sqlite3_index_orderby").dc,ga={},ga.iColumn=Br(Qn+ro[0],"i32"),ga.desc=!!Br(Qn+ro[1],"i8"),Is.call(Cn,ga);for(sr.aConstraintUsage=[],Tr=0;Tr<sr.nConstraint;++Tr)sr.aConstraintUsage.push({argvIndex:0,omit:!1});for(sr.idxNum=Br(Mt+Vt[5],"i32"),sr.idxStr=null,sr.orderByConsumed=!!Br(Mt+Vt[8],"i8"),sr.estimatedCost=Br(Mt+Vt[9],"double"),sr.estimatedRows=Br(Mt+Vt[10],"i32"),sr.idxFlags=Br(Mt+Vt[11],"i32"),sr.colUsed=Br(Mt+Vt[12],"i32"),Ft=ar.module.xBestIndex(Ft,sr),ar=Yt.get("sqlite3_index_info").dc,Vt=Br(Mt+ar[4],"*"),Tr=Yt.get("sqlite3_index_constraint_usage").size,Is=0;Is<sr.nConstraint;++Is)Zr=Vt+Is*Tr,Cn=sr.aConstraintUsage[Is],Qn=Yt.get("sqlite3_index_constraint_usage").dc,mr(Zr+Qn[0],Cn.argvIndex,"i32"),mr(Zr+Qn[1],Cn.omit?1:0,"i8");return mr(Mt+ar[5],sr.idxNum,"i32"),typeof sr.idxStr=="string"&&(Vt=Wn(sr.idxStr),Tr=tt("sqlite3_malloc","number",["number"],[Vt+1]),An(sr.idxStr,j,Tr,Vt+1),mr(Mt+ar[6],Tr,"*"),mr(Mt+ar[7],1,"i32")),mr(Mt+ar[8],sr.orderByConsumed,"i32"),mr(Mt+ar[9],sr.estimatedCost,"double"),mr(Mt+ar[10],sr.estimatedRows,"i32"),mr(Mt+ar[11],sr.idxFlags,"i32"),Ft},$s=function(Ft){const Mt=gt.get(Ft);return _e?Dt.add(Ft):gt.delete(Ft),Mt.module.xDisconnect(Ft)},Ks=function(Ft){const Mt=gt.get(Ft);return _e?Dt.add(Ft):gt.delete(Ft),Mt.module.xDestroy(Ft)},Fs=function(Ft,Mt){const ar=gt.get(Ft);if(Tt.set(Mt,ar),_e){$t.delete(Mt);for(const Vt of $t)Tt.delete(Vt)}return ar.module.xOpen(Ft,Mt)},Hs=function(Ft){const Mt=Tt.get(Ft);return _e?$t.add(Ft):Tt.delete(Ft),Mt.module.xClose(Ft)},Ln=function(Ft){return Tt.get(Ft).module.xEof(Ft)?1:0},Bs=function(Ft,Mt,ar,Vt,sr){const Tr=Tt.get(Ft);return ar=ar?ar?_r(j,ar):"":null,sr=new Uint32Array(j.buffer,sr,Vt),Tr.module.xFilter(Ft,Mt,ar,sr)},ws=function(Ft){return Tt.get(Ft).module.xNext(Ft)},Gs=function(Ft,Mt,ar){return Tt.get(Ft).module.xColumn(Ft,Mt,ar)},Jr=function(Ft,Mt){return Tt.get(Ft).module.xRowid(Ft,g("BigInt64",Mt))},_n=function(Ft,Mt,ar,Vt){const sr=gt.get(Ft);return ar=new Uint32Array(j.buffer,ar,Mt),sr.module.xUpdate(Ft,ar,g("BigInt64",Vt))},rs=function(Ft){return gt.get(Ft).module.xBegin(Ft)},ps=function(Ft){return gt.get(Ft).module.xSync(Ft)},Ts=function(Ft){return gt.get(Ft).module.xCommit(Ft)},Qs=function(Ft){return gt.get(Ft).module.xRollback(Ft)},ns=function(Ft,Mt){const ar=gt.get(Ft);return Mt=Mt?_r(j,Mt):"",ar.module.xRename(Ft,Mt)}}(),function(){function g($t,Yt){const Ft=`get${$t}`,Mt=`set${$t}`;return new Proxy(new DataView(j.buffer,Yt,$t==="Int32"?4:8),{get(ar,Vt){if(Vt===Ft)return function(sr,Tr){if(!Tr)throw Error("must be little endian");return ar[Vt](sr,Tr)};if(Vt===Mt)return function(sr,Tr,Zr){if(!Zr)throw Error("must be little endian");return ar[Vt](sr,Tr,Zr)};if(typeof Vt=="string"&&Vt.match(/^(get)|(set)/))throw Error("invalid type");return ar[Vt]}})}function _e($t){return $t>>=2,ft[$t]+ft[$t+1]*2**32}const nt=typeof b=="object",gt=new Map,Tt=new Map;s.registerVFS=function($t,Yt){if(tt("sqlite3_vfs_find","number",["string"],[$t.name]))throw Error(`VFS '${$t.name}' already registered`);nt&&($t.handleAsync=pr);var Ft=$t.ad??64;const Mt=s._malloc(4);return Yt=tt("register_vfs","number",["string","number","number","number"],[$t.name,Ft,Yt?1:0,Mt]),Yt||(Ft=Br(Mt,"*"),gt.set(Ft,$t)),s._free(Mt),Yt};const Dt=nt?new Set:null;Qr=function($t){const Yt=Tt.get($t);return nt?Dt.add($t):Tt.delete($t),Yt.xClose($t)},Kn=function($t,Yt,Ft,Mt){return Tt.get($t).xRead($t,j.subarray(Yt,Yt+Ft),_e(Mt))},nr=function($t,Yt,Ft,Mt){return Tt.get($t).xWrite($t,j.subarray(Yt,Yt+Ft),_e(Mt))},Nt=function($t,Yt){return Tt.get($t).xTruncate($t,_e(Yt))},Et=function($t,Yt){return Tt.get($t).xSync($t,Yt)},Dn=function($t,Yt){const Ft=Tt.get($t);return Yt=g("BigInt64",Yt),Ft.xFileSize($t,Yt)},ss=function($t,Yt){return Tt.get($t).xLock($t,Yt)},jt=function($t,Yt){return Tt.get($t).xUnlock($t,Yt)},on=function($t,Yt){const Ft=Tt.get($t);return Yt=g("Int32",Yt),Ft.xCheckReservedLock($t,Yt)},Sn=function($t,Yt,Ft){const Mt=Tt.get($t);return Ft=new DataView(j.buffer,Ft),Mt.xFileControl($t,Yt,Ft)},as=function($t){return Tt.get($t).xSectorSize($t)},is=function($t){return Tt.get($t).xDeviceCharacteristics($t)},Mn=function($t,Yt,Ft,Mt,ar){if($t=gt.get($t),Tt.set(Ft,$t),nt){Dt.delete(Ft);for(var Vt of Dt)Tt.delete(Vt)}if(Vt=null,Mt&64){Vt=1;const sr=[];for(;Vt;){const Tr=j[Yt++];if(Tr)sr.push(Tr);else switch(j[Yt]||(Vt=null),Vt){case 1:sr.push(63),Vt=2;break;case 2:sr.push(61),Vt=3;break;case 3:sr.push(38),Vt=2}}Vt=new TextDecoder().decode(new Uint8Array(sr))}else Yt&&(Vt=Yt?_r(j,Yt):"");return ar=g("Int32",ar),$t.xOpen(Vt,Ft,Mt,ar)},Nn=function($t,Yt,Ft){return gt.get($t).xDelete(Yt?_r(j,Yt):"",Ft)},Pn=function($t,Yt,Ft,Mt){return $t=gt.get($t),Mt=g("Int32",Mt),$t.xAccess(Yt?_r(j,Yt):"",Ft,Mt)}}();var Rt={a:(g,_e,nt,gt)=>{tr(`Assertion failed: ${g?_r(j,g):""}, at: `+[_e?_e?_r(j,_e):"":"unknown filename",nt,gt?gt?_r(j,gt):"":"unknown function"])},K:function(g,_e){try{return g=g?_r(j,g):"",zs(g,_e),0}catch(nt){if(typeof Rr>"u"||nt.name!=="ErrnoError")throw nt;return-nt.Ob}},M:function(g,_e,nt){try{if(_e=_e?_r(j,_e):"",_e=Hr(g,_e),nt&-8)return-28;var gt=Yr(_e,{Yb:!0}).node;return gt?(g="",nt&4&&(g+="r"),nt&2&&(g+="w"),nt&1&&(g+="x"),g&&hn(gt,g)?-2:0):-44}catch(Tt){if(typeof Rr>"u"||Tt.name!=="ErrnoError")throw Tt;return-Tt.Ob}},L:function(g,_e){try{var nt=Vr(g);return zs(nt.node,_e),0}catch(gt){if(typeof Rr>"u"||gt.name!=="ErrnoError")throw gt;return-gt.Ob}},J:function(g){try{var _e=Vr(g).node,nt=typeof _e=="string"?Yr(_e,{Yb:!0}).node:_e;if(!nt.Cb.Qb)throw new Jt(63);return nt.Cb.Qb(nt,{timestamp:Date.now()}),0}catch(gt){if(typeof Rr>"u"||gt.name!=="ErrnoError")throw gt;return-gt.Ob}},b:function(g,_e,nt){Ss=nt;try{var gt=Vr(g);switch(_e){case 0:var Tt=gn();if(0>Tt)return-28;for(;vr[Tt];)Tt++;return Tn(gt,Tt).Wb;case 1:case 2:return 0;case 3:return gt.flags;case 4:return Tt=gn(),gt.flags|=Tt,0;case 5:return Tt=gn(),St[Tt+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return mt[kt()>>2]=28,-1;default:return-28}}catch(Dt){if(typeof Rr>"u"||Dt.name!=="ErrnoError")throw Dt;return-Dt.Ob}},I:function(g,_e){try{var nt=Vr(g);return Pr(_s,nt.path,_e)}catch(gt){if(typeof Rr>"u"||gt.name!=="ErrnoError")throw gt;return-gt.Ob}},n:function(g,_e,nt){_e=cs(_e,nt);try{if(isNaN(_e))return 61;var gt=Vr(g);if(!(gt.flags&2097155))throw new Jt(28);return Zs(gt.node,_e),0}catch(Tt){if(typeof Rr>"u"||Tt.name!=="ErrnoError")throw Tt;return-Tt.Ob}},C:function(g,_e){try{if(_e===0)return-28;var nt=Wn("/")+1;return _e<nt?-68:(An("/",j,g,_e),nt)}catch(gt){if(typeof Rr>"u"||gt.name!=="ErrnoError")throw gt;return-gt.Ob}},F:function(g,_e){try{return g=g?_r(j,g):"",Pr(In,g,_e)}catch(nt){if(typeof Rr>"u"||nt.name!=="ErrnoError")throw nt;return-nt.Ob}},z:function(g,_e,nt){try{return _e=_e?_r(j,_e):"",_e=Hr(g,_e),_e=pn(_e),_e[_e.length-1]==="/"&&(_e=_e.substr(0,_e.length-1)),Kr(_e,nt),0}catch(gt){if(typeof Rr>"u"||gt.name!=="ErrnoError")throw gt;return-gt.Ob}},E:function(g,_e,nt,gt){try{_e=_e?_r(j,_e):"";var Tt=gt&256;return _e=Hr(g,_e,gt&4096),Pr(Tt?In:_s,_e,nt)}catch(Dt){if(typeof Rr>"u"||Dt.name!=="ErrnoError")throw Dt;return-Dt.Ob}},y:function(g,_e,nt,gt){Ss=gt;try{_e=_e?_r(j,_e):"",_e=Hr(g,_e);var Tt=gt?gn():0;return mn(_e,nt,Tt).Wb}catch(Dt){if(typeof Rr>"u"||Dt.name!=="ErrnoError")throw Dt;return-Dt.Ob}},w:function(g,_e,nt,gt){try{if(_e=_e?_r(j,_e):"",_e=Hr(g,_e),0>=gt)return-28;var Tt=Nr(_e),Dt=Math.min(gt,Wn(Tt)),$t=et[nt+Dt];return An(Tt,j,nt,gt+1),et[nt+Dt]=$t,Dt}catch(Yt){if(typeof Rr>"u"||Yt.name!=="ErrnoError")throw Yt;return-Yt.Ob}},u:function(g){try{return g=g?_r(j,g):"",wn(g),0}catch(_e){if(typeof Rr>"u"||_e.name!=="ErrnoError")throw _e;return-_e.Ob}},H:function(g,_e){try{return g=g?_r(j,g):"",Pr(_s,g,_e)}catch(nt){if(typeof Rr>"u"||nt.name!=="ErrnoError")throw nt;return-nt.Ob}},r:function(g,_e,nt){try{if(_e=_e?_r(j,_e):"",_e=Hr(g,_e),nt===0){g=_e;var gt=Yr(g,{parent:!0}).node;if(!gt)throw new Jt(44);var Tt=Fn(g),Dt=qr(gt,Tt),$t=qs(gt,Tt,!1);if($t)throw new Jt($t);if(!gt.Cb.oc)throw new Jt(63);if(Dt.$b)throw new Jt(10);gt.Cb.oc(gt,Tt),rn(Dt)}else nt===512?wn(_e):tr("Invalid flags passed to unlinkat");return 0}catch(Yt){if(typeof Rr>"u"||Yt.name!=="ErrnoError")throw Yt;return-Yt.Ob}},q:function(g,_e,nt){try{if(_e=_e?_r(j,_e):"",_e=Hr(g,_e,!0),nt){var gt=ft[nt>>2]+4294967296*mt[nt+4>>2],Tt=mt[nt+8>>2];Dt=1e3*gt+Tt/1e6,nt+=16,gt=ft[nt>>2]+4294967296*mt[nt+4>>2],Tt=mt[nt+8>>2],$t=1e3*gt+Tt/1e6}else var Dt=Date.now(),$t=Dt;g=Dt;var Yt=Yr(_e,{Yb:!0}).node;return Yt.Cb.Qb(Yt,{timestamp:Math.max(g,$t)}),0}catch(Ft){if(typeof Rr>"u"||Ft.name!=="ErrnoError")throw Ft;return-Ft.Ob}},l:function(g,_e,nt){g=new Date(1e3*cs(g,_e)),mt[nt>>2]=g.getSeconds(),mt[nt+4>>2]=g.getMinutes(),mt[nt+8>>2]=g.getHours(),mt[nt+12>>2]=g.getDate(),mt[nt+16>>2]=g.getMonth(),mt[nt+20>>2]=g.getFullYear()-1900,mt[nt+24>>2]=g.getDay(),_e=g.getFullYear(),mt[nt+28>>2]=(_e%4!==0||_e%100===0&&_e%400!==0?Js:Ys)[g.getMonth()]+g.getDate()-1|0,mt[nt+36>>2]=-(60*g.getTimezoneOffset()),_e=new Date(g.getFullYear(),6,1).getTimezoneOffset();var gt=new Date(g.getFullYear(),0,1).getTimezoneOffset();mt[nt+32>>2]=(_e!=gt&&g.getTimezoneOffset()==Math.min(gt,_e))|0},i:function(g,_e,nt,gt,Tt,Dt,$t,Yt){Tt=cs(Tt,Dt);try{if(isNaN(Tt))return 61;var Ft=Vr(gt);if(_e&2&&!(nt&2)&&(Ft.flags&2097155)!==2)throw new Jt(2);if((Ft.flags&2097155)===1)throw new Jt(2);if(!Ft.Mb.kc)throw new Jt(43);var Mt=Ft.Mb.kc(Ft,g,Tt,_e,nt),ar=Mt.Oc;return mt[$t>>2]=Mt.Cc,ft[Yt>>2]=ar,0}catch(Vt){if(typeof Rr>"u"||Vt.name!=="ErrnoError")throw Vt;return-Vt.Ob}},j:function(g,_e,nt,gt,Tt,Dt,$t){Dt=cs(Dt,$t);try{if(isNaN(Dt))return 61;var Yt=Vr(Tt);if(nt&2){if((Yt.node.mode&61440)!==32768)throw new Jt(43);gt&2||Yt.Mb.lc&&Yt.Mb.lc(Yt,j.slice(g,g+_e),Dt,_e,gt)}}catch(Ft){if(typeof Rr>"u"||Ft.name!=="ErrnoError")throw Ft;return-Ft.Ob}},s:(g,_e,nt)=>{function gt(Ft){return(Ft=Ft.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Ft[1]:"GMT"}var Tt=new Date().getFullYear(),Dt=new Date(Tt,0,1),$t=new Date(Tt,6,1);Tt=Dt.getTimezoneOffset();var Yt=$t.getTimezoneOffset();ft[g>>2]=60*Math.max(Tt,Yt),mt[_e>>2]=+(Tt!=Yt),g=gt(Dt),_e=gt($t),g=fs(g),_e=fs(_e),Yt<Tt?(ft[nt>>2]=g,ft[nt+4>>2]=_e):(ft[nt>>2]=_e,ft[nt+4>>2]=g)},e:()=>Date.now(),d:()=>performance.now(),o:g=>{var _e=j.length;if(g>>>=0,2147483648<g)return!1;for(var nt=1;4>=nt;nt*=2){var gt=_e*(1+.2/nt);gt=Math.min(gt,g+100663296);var Tt=Math;gt=Math.max(g,gt);e:{Tt=(Tt.min.call(Tt,2147483648,gt+(65536-gt%65536)%65536)-dt.buffer.byteLength+65535)/65536;try{dt.grow(Tt),ot();var Dt=1;break e}catch{}Dt=void 0}if(Dt)return!0}return!1},A:(g,_e)=>{var nt=0;return xs().forEach((gt,Tt)=>{var Dt=_e+nt;for(Tt=ft[g+4*Tt>>2]=Dt,Dt=0;Dt<gt.length;++Dt)et[Tt++>>0]=gt.charCodeAt(Dt);et[Tt>>0]=0,nt+=gt.length+1}),0},B:(g,_e)=>{var nt=xs();ft[g>>2]=nt.length;var gt=0;return nt.forEach(Tt=>gt+=Tt.length+1),ft[_e>>2]=gt,0},f:function(g){try{var _e=Vr(g);if(_e.Wb===null)throw new Jt(8);_e.pc&&(_e.pc=null);try{_e.Mb.close&&_e.Mb.close(_e)}catch(nt){throw nt}finally{vr[_e.Wb]=null}return _e.Wb=null,0}catch(nt){if(typeof Rr>"u"||nt.name!=="ErrnoError")throw nt;return nt.Ob}},p:function(g,_e){try{var nt=Vr(g);return et[_e>>0]=nt.Sb?2:xr(nt.mode)?3:(nt.mode&61440)===40960?7:4,St[_e+2>>1]=0,br=[0,(Kt=0,1<=+Math.abs(Kt)?0<Kt?+Math.floor(Kt/4294967296)>>>0:~~+Math.ceil((Kt-+(~~Kt>>>0))/4294967296)>>>0:0)],mt[_e+8>>2]=br[0],mt[_e+12>>2]=br[1],br=[0,(Kt=0,1<=+Math.abs(Kt)?0<Kt?+Math.floor(Kt/4294967296)>>>0:~~+Math.ceil((Kt-+(~~Kt>>>0))/4294967296)>>>0:0)],mt[_e+16>>2]=br[0],mt[_e+20>>2]=br[1],0}catch(gt){if(typeof Rr>"u"||gt.name!=="ErrnoError")throw gt;return gt.Ob}},x:function(g,_e,nt,gt){try{e:{var Tt=Vr(g);g=_e;for(var Dt,$t=_e=0;$t<nt;$t++){var Yt=ft[g>>2],Ft=ft[g+4>>2];g+=8;var Mt=Tt,ar=Yt,Vt=Ft,sr=Dt,Tr=et;if(0>Vt||0>sr)throw new Jt(28);if(Mt.Wb===null)throw new Jt(8);if((Mt.flags&2097155)===1)throw new Jt(8);if(xr(Mt.node.mode))throw new Jt(31);if(!Mt.Mb.read)throw new Jt(28);var Zr=typeof sr<"u";if(!Zr)sr=Mt.position;else if(!Mt.seekable)throw new Jt(70);var qn=Mt.Mb.read(Mt,Tr,ar,Vt,sr);Zr||(Mt.position+=qn);var Cn=qn;if(0>Cn){var Is=-1;break e}if(_e+=Cn,Cn<Ft)break;typeof Dt<"u"&&(Dt+=Cn)}Is=_e}return ft[gt>>2]=Is,0}catch(Qn){if(typeof Rr>"u"||Qn.name!=="ErrnoError")throw Qn;return Qn.Ob}},m:function(g,_e,nt,gt,Tt){_e=cs(_e,nt);try{if(isNaN(_e))return 61;var Dt=Vr(g);return Lr(Dt,_e,gt),br=[Dt.position>>>0,(Kt=Dt.position,1<=+Math.abs(Kt)?0<Kt?+Math.floor(Kt/4294967296)>>>0:~~+Math.ceil((Kt-+(~~Kt>>>0))/4294967296)>>>0:0)],mt[Tt>>2]=br[0],mt[Tt+4>>2]=br[1],Dt.pc&&_e===0&&gt===0&&(Dt.pc=null),0}catch($t){if(typeof Rr>"u"||$t.name!=="ErrnoError")throw $t;return $t.Ob}},D:function(g){try{var _e=Vr(g);return Qt(nt=>{var gt=_e.node.Ub;gt.type.Qc?gt.type.Qc(gt,!1,Tt=>{nt(Tt?29:0)}):nt(0)})}catch(nt){if(typeof Rr>"u"||nt.name!=="ErrnoError")throw nt;return nt.Ob}},t:function(g,_e,nt,gt){try{e:{var Tt=Vr(g);g=_e;for(var Dt,$t=_e=0;$t<nt;$t++){var Yt=ft[g>>2],Ft=ft[g+4>>2];g+=8;var Mt=Tt,ar=Yt,Vt=Ft,sr=Dt,Tr=et;if(0>Vt||0>sr)throw new Jt(28);if(Mt.Wb===null)throw new Jt(8);if(!(Mt.flags&2097155))throw new Jt(8);if(xr(Mt.node.mode))throw new Jt(31);if(!Mt.Mb.write)throw new Jt(28);Mt.seekable&&Mt.flags&1024&&Lr(Mt,0,2);var Zr=typeof sr<"u";if(!Zr)sr=Mt.position;else if(!Mt.seekable)throw new Jt(70);var qn=Mt.Mb.write(Mt,Tr,ar,Vt,sr,void 0);Zr||(Mt.position+=qn);var Cn=qn;if(0>Cn){var Is=-1;break e}_e+=Cn,typeof Dt<"u"&&(Dt+=Cn)}Is=_e}return ft[gt>>2]=Is,0}catch(Qn){if(typeof Rr>"u"||Qn.name!=="ErrnoError")throw Qn;return Qn.Ob}},ra:Es,N:Ls,ga:ts,ca:Vs,Y:bs,la:rs,G:Ds,h:Hs,oa:Gs,ja:Ts,ea:ds,fa:Gn,k:Ks,v:$s,pa:Ln,g:Bs,qa:ws,da:Fs,ha:ns,ia:Qs,na:Jr,c:On,ka:ps,ma:_n,aa:Pn,V:on,$:Qr,ba:Nn,S:is,U:Sn,Z:Dn,X:ss,R:Mn,Q:Kn,T:as,_:Et,O:Nt,W:jt,P:nr},Pt=function(){function g(nt){return Pt=nt.exports,Pt=Dr(),dt=Pt.sa,ot(),It.unshift(Pt.ta),Ut--,s.monitorRunDependencies&&s.monitorRunDependencies(Ut),Ut==0&&or&&(nt=or,or=null,nt()),Pt}var _e={a:Rt};if(Ut++,s.monitorRunDependencies&&s.monitorRunDependencies(Ut),s.instantiateWasm)try{return s.instantiateWasm(_e,g)}catch(nt){bt(`Module.instantiateWasm callback failed with error: ${nt}`),o(nt)}return Ir(_e,function(nt){g(nt.instance)}).catch(o),{}}();s._sqlite3_vfs_find=g=>(s._sqlite3_vfs_find=Pt.ua)(g),s._sqlite3_malloc=g=>(s._sqlite3_malloc=Pt.va)(g),s._sqlite3_free=g=>(s._sqlite3_free=Pt.wa)(g),s._sqlite3_prepare_v2=(g,_e,nt,gt,Tt)=>(s._sqlite3_prepare_v2=Pt.xa)(g,_e,nt,gt,Tt),s._sqlite3_step=g=>(s._sqlite3_step=Pt.ya)(g),s._sqlite3_column_int64=(g,_e)=>(s._sqlite3_column_int64=Pt.za)(g,_e),s._sqlite3_column_int=(g,_e)=>(s._sqlite3_column_int=Pt.Aa)(g,_e),s._sqlite3_finalize=g=>(s._sqlite3_finalize=Pt.Ba)(g),s._sqlite3_reset=g=>(s._sqlite3_reset=Pt.Ca)(g),s._sqlite3_clear_bindings=g=>(s._sqlite3_clear_bindings=Pt.Da)(g),s._sqlite3_value_blob=g=>(s._sqlite3_value_blob=Pt.Ea)(g),s._sqlite3_value_text=g=>(s._sqlite3_value_text=Pt.Fa)(g),s._sqlite3_value_bytes=g=>(s._sqlite3_value_bytes=Pt.Ga)(g),s._sqlite3_value_double=g=>(s._sqlite3_value_double=Pt.Ha)(g),s._sqlite3_value_int=g=>(s._sqlite3_value_int=Pt.Ia)(g),s._sqlite3_value_int64=g=>(s._sqlite3_value_int64=Pt.Ja)(g),s._sqlite3_value_type=g=>(s._sqlite3_value_type=Pt.Ka)(g),s._sqlite3_result_blob=(g,_e,nt,gt)=>(s._sqlite3_result_blob=Pt.La)(g,_e,nt,gt),s._sqlite3_result_double=(g,_e)=>(s._sqlite3_result_double=Pt.Ma)(g,_e),s._sqlite3_result_error=(g,_e,nt)=>(s._sqlite3_result_error=Pt.Na)(g,_e,nt),s._sqlite3_result_int=(g,_e)=>(s._sqlite3_result_int=Pt.Oa)(g,_e),s._sqlite3_result_int64=(g,_e,nt)=>(s._sqlite3_result_int64=Pt.Pa)(g,_e,nt),s._sqlite3_result_null=g=>(s._sqlite3_result_null=Pt.Qa)(g),s._sqlite3_result_text=(g,_e,nt,gt)=>(s._sqlite3_result_text=Pt.Ra)(g,_e,nt,gt),s._sqlite3_column_count=g=>(s._sqlite3_column_count=Pt.Sa)(g),s._sqlite3_data_count=g=>(s._sqlite3_data_count=Pt.Ta)(g),s._sqlite3_column_blob=(g,_e)=>(s._sqlite3_column_blob=Pt.Ua)(g,_e),s._sqlite3_column_bytes=(g,_e)=>(s._sqlite3_column_bytes=Pt.Va)(g,_e),s._sqlite3_column_double=(g,_e)=>(s._sqlite3_column_double=Pt.Wa)(g,_e),s._sqlite3_column_text=(g,_e)=>(s._sqlite3_column_text=Pt.Xa)(g,_e),s._sqlite3_column_type=(g,_e)=>(s._sqlite3_column_type=Pt.Ya)(g,_e),s._sqlite3_column_name=(g,_e)=>(s._sqlite3_column_name=Pt.Za)(g,_e),s._sqlite3_bind_blob=(g,_e,nt,gt,Tt)=>(s._sqlite3_bind_blob=Pt._a)(g,_e,nt,gt,Tt),s._sqlite3_bind_double=(g,_e,nt)=>(s._sqlite3_bind_double=Pt.$a)(g,_e,nt),s._sqlite3_bind_int=(g,_e,nt)=>(s._sqlite3_bind_int=Pt.ab)(g,_e,nt),s._sqlite3_bind_int64=(g,_e,nt,gt)=>(s._sqlite3_bind_int64=Pt.bb)(g,_e,nt,gt),s._sqlite3_bind_null=(g,_e)=>(s._sqlite3_bind_null=Pt.cb)(g,_e),s._sqlite3_bind_text=(g,_e,nt,gt,Tt)=>(s._sqlite3_bind_text=Pt.db)(g,_e,nt,gt,Tt),s._sqlite3_bind_parameter_count=g=>(s._sqlite3_bind_parameter_count=Pt.eb)(g),s._sqlite3_bind_parameter_name=(g,_e)=>(s._sqlite3_bind_parameter_name=Pt.fb)(g,_e),s._sqlite3_sql=g=>(s._sqlite3_sql=Pt.gb)(g),s._sqlite3_exec=(g,_e,nt,gt,Tt)=>(s._sqlite3_exec=Pt.hb)(g,_e,nt,gt,Tt),s._sqlite3_errmsg=g=>(s._sqlite3_errmsg=Pt.ib)(g),s._sqlite3_declare_vtab=(g,_e)=>(s._sqlite3_declare_vtab=Pt.jb)(g,_e),s._sqlite3_libversion=()=>(s._sqlite3_libversion=Pt.kb)(),s._sqlite3_libversion_number=()=>(s._sqlite3_libversion_number=Pt.lb)(),s._sqlite3_changes=g=>(s._sqlite3_changes=Pt.mb)(g),s._sqlite3_close=g=>(s._sqlite3_close=Pt.nb)(g),s._sqlite3_limit=(g,_e,nt)=>(s._sqlite3_limit=Pt.ob)(g,_e,nt),s._sqlite3_open_v2=(g,_e,nt,gt)=>(s._sqlite3_open_v2=Pt.pb)(g,_e,nt,gt),s._sqlite3_get_autocommit=g=>(s._sqlite3_get_autocommit=Pt.qb)(g);var kt=()=>(kt=Pt.rb)(),it=s._malloc=g=>(it=s._malloc=Pt.sb)(g),yt=s._free=g=>(yt=s._free=Pt.tb)(g);s._RegisterExtensionFunctions=g=>(s._RegisterExtensionFunctions=Pt.ub)(g),s._set_authorizer=g=>(s._set_authorizer=Pt.vb)(g),s._create_function=(g,_e,nt,gt,Tt,Dt)=>(s._create_function=Pt.wb)(g,_e,nt,gt,Tt,Dt),s._create_module=(g,_e,nt,gt)=>(s._create_module=Pt.xb)(g,_e,nt,gt),s._progress_handler=(g,_e)=>(s._progress_handler=Pt.yb)(g,_e),s._register_vfs=(g,_e,nt,gt)=>(s._register_vfs=Pt.zb)(g,_e,nt,gt),s._getSqliteFree=()=>(s._getSqliteFree=Pt.Ab)();var At=s._main=(g,_e)=>(At=s._main=Pt.Bb)(g,_e),xt=(g,_e)=>(xt=Pt.Db)(g,_e),rr=()=>(rr=Pt.Eb)(),Xt=()=>(Xt=Pt.Fb)(),ir=g=>(ir=Pt.Gb)(g),cr=g=>(cr=Pt.Hb)(g),hr=g=>(hr=Pt.Ib)(g),Er=()=>(Er=Pt.Jb)(),Or=g=>(Or=Pt.Kb)(g),Fr=()=>(Fr=Pt.Lb)();s.getTempRet0=rr,s.ccall=tt,s.cwrap=(g,_e,nt,gt)=>{var Tt=!nt||nt.every(Dt=>Dt==="number"||Dt==="boolean");return _e!=="string"&&Tt&&!gt?s["_"+g]:function(){return tt(g,_e,nt,arguments,gt)}},s.setValue=mr,s.getValue=Br,s.UTF8ToString=(g,_e)=>g?_r(j,g,_e):"",s.stringToUTF8=(g,_e,nt)=>An(g,j,_e,nt),s.lengthBytesUTF8=Wn;var zr;or=function g(){zr||en(),zr||(or=g)};function en(){function g(){if(!zr&&(zr=!0,s.calledRun=!0,!vt)){if(s.noFSInit||Rn||(Rn=!0,Ws(),s.stdin=s.stdin,s.stdout=s.stdout,s.stderr=s.stderr,s.stdin?us("stdin",s.stdin):As("/dev/tty","/dev/stdin"),s.stdout?us("stdout",null,s.stdout):As("/dev/tty","/dev/stdout"),s.stderr?us("stderr",null,s.stderr):As("/dev/tty1","/dev/stderr"),mn("/dev/stdin",0),mn("/dev/stdout",1),mn("/dev/stderr",1)),Vn=!1,qt(It),qt(Ct),a(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),tn){var _e=At;try{var nt=_e(0,0);at=nt,fr(nt)}catch(gt){wr(gt)}}if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)_e=s.postRun.shift(),zt.unshift(_e);qt(zt)}}if(!(0<Ut)){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Wt();qt(ut),0<Ut||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),g()},1)):g())}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();var tn=!0;return s.noInitialRun&&(tn=!1),en(),e.ready}})();const SQLITE_OK=0,SQLITE_BUSY=5,SQLITE_IOERR=10,SQLITE_NOTFOUND=12,SQLITE_CANTOPEN=14,SQLITE_MISUSE=21,SQLITE_RANGE=25,SQLITE_NOTICE=27,SQLITE_ROW=100,SQLITE_DONE=101,SQLITE_IOERR_LOCK=3850,SQLITE_IOERR_SHORT_READ=522,SQLITE_OPEN_READONLY=1,SQLITE_OPEN_READWRITE=2,SQLITE_OPEN_CREATE=4,SQLITE_OPEN_DELETEONCLOSE=8,SQLITE_LOCK_NONE=0,SQLITE_LOCK_SHARED=1,SQLITE_LOCK_RESERVED=2,SQLITE_LOCK_PENDING=3,SQLITE_LOCK_EXCLUSIVE=4,SQLITE_IOCAP_SAFE_APPEND=512,SQLITE_IOCAP_SEQUENTIAL=1024,SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN=2048,SQLITE_IOCAP_BATCH_ATOMIC=16384,SQLITE_INTEGER=1,SQLITE_FLOAT=2,SQLITE_TEXT=3,SQLITE_BLOB=4,SQLITE_NULL=5,MAX_INT64=0x7fffffffffffffffn,MIN_INT64=-0x8000000000000000n;class SQLiteError extends Error{constructor(e,s){super(e),this.code=s}}const async=!0;function Factory(i){const e={},s=i._getSqliteFree(),a=i._malloc(8),o=[a,a+4];function c(dt){if(typeof dt!="string")return 0;const vt=i.lengthBytesUTF8(dt),at=i._sqlite3_malloc(vt+1);return i.stringToUTF8(dt,at,vt+1),at}function d(dt,vt){return BigInt(vt)<<32n|BigInt(dt)&0xffffffffn}const h=function(){const dt=BigInt(Number.MAX_SAFE_INTEGER)>>32n,vt=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(at,et){return et>dt||et<vt?d(at,et):et*4294967296+(at&2147483647)-(at&2147483648)}}(),_=new Set;function $(dt){if(!_.has(dt))throw new SQLiteError("not a database",SQLITE_MISUSE)}const rt=new Map;function lt(dt){if(!rt.has(dt))throw new SQLiteError("not a statement",SQLITE_MISUSE)}e.bind_collection=function(dt,vt){lt(dt);const at=Array.isArray(vt),et=e.bind_parameter_count(dt);for(let j=1;j<=et;++j){const St=at?j-1:e.bind_parameter_name(dt,j),mt=vt[St];mt!==void 0&&e.bind(dt,j,mt)}return SQLITE_OK},e.bind=function(dt,vt,at){switch(lt(dt),typeof at){case"number":return at===(at|0)?e.bind_int(dt,vt,at):e.bind_double(dt,vt,at);case"string":return e.bind_text(dt,vt,at);default:return at instanceof Uint8Array||Array.isArray(at)?e.bind_blob(dt,vt,at):at===null?e.bind_null(dt,vt):typeof at=="bigint"?e.bind_int64(dt,vt,at):at===void 0?SQLITE_NOTICE:(console.warn("unknown binding converted to null",at),e.bind_null(dt,vt))}},e.bind_blob=function(){const dt="sqlite3_bind_blob",vt=i.cwrap(dt,...decl("nnnnn:n"));return function(at,et,j){lt(at);const St=j.byteLength??j.length,mt=i._sqlite3_malloc(St);i.HEAPU8.subarray(mt).set(j);const ft=vt(at,et,mt,St,s);return Ot(dt,ft,rt.get(at))}}(),e.bind_parameter_count=function(){const dt="sqlite3_bind_parameter_count",vt=i.cwrap(dt,...decl("n:n"));return function(at){return lt(at),vt(at)}}(),e.bind_double=function(){const dt="sqlite3_bind_double",vt=i.cwrap(dt,...decl("nnn:n"));return function(at,et,j){lt(at);const St=vt(at,et,j);return Ot(dt,St,rt.get(at))}}(),e.bind_int=function(){const dt="sqlite3_bind_int",vt=i.cwrap(dt,...decl("nnn:n"));return function(at,et,j){if(lt(at),j>2147483647||j<-2147483648)return SQLITE_RANGE;const St=vt(at,et,j);return Ot(dt,St,rt.get(at))}}(),e.bind_int64=function(){const dt="sqlite3_bind_int64",vt=i.cwrap(dt,...decl("nnnn:n"));return function(at,et,j){if(lt(at),j>MAX_INT64||j<MIN_INT64)return SQLITE_RANGE;const St=j&0xffffffffn,mt=j>>32n,ft=vt(at,et,Number(St),Number(mt));return Ot(dt,ft,rt.get(at))}}(),e.bind_null=function(){const dt="sqlite3_bind_null",vt=i.cwrap(dt,...decl("nn:n"));return function(at,et){lt(at);const j=vt(at,et);return Ot(dt,j,rt.get(at))}}(),e.bind_parameter_name=function(){const dt="sqlite3_bind_parameter_name",vt=i.cwrap(dt,...decl("n:s"));return function(at,et){return lt(at),vt(at,et)}}(),e.bind_text=function(){const dt="sqlite3_bind_text",vt=i.cwrap(dt,...decl("nnnnn:n"));return function(at,et,j){lt(at);const St=c(j),mt=vt(at,et,St,-1,s);return Ot(dt,mt,rt.get(at))}}(),e.changes=function(){const dt="sqlite3_changes",vt=i.cwrap(dt,...decl("n:n"));return function(at){return $(at),vt(at)}}(),e.close=function(){const dt="sqlite3_close",vt=i.cwrap(dt,...decl("n:n"),{async});return async function(at){$(at);const et=await vt(at);return _.delete(at),Ot(dt,et,at)}}(),e.column=function(dt,vt){lt(dt);const at=e.column_type(dt,vt);switch(at){case SQLITE_BLOB:return e.column_blob(dt,vt);case SQLITE_FLOAT:return e.column_double(dt,vt);case SQLITE_INTEGER:const et=e.column_int(dt,vt),j=i.getTempRet0();return h(et,j);case SQLITE_NULL:return null;case SQLITE_TEXT:return e.column_text(dt,vt);default:throw new SQLiteError("unknown type",at)}},e.column_blob=function(){const dt="sqlite3_column_blob",vt=i.cwrap(dt,...decl("nn:n"));return function(at,et){lt(at);const j=e.column_bytes(at,et),St=vt(at,et);return i.HEAPU8.subarray(St,St+j)}}(),e.column_bytes=function(){const dt="sqlite3_column_bytes",vt=i.cwrap(dt,...decl("nn:n"));return function(at,et){return lt(at),vt(at,et)}}(),e.column_count=function(){const dt="sqlite3_column_count",vt=i.cwrap(dt,...decl("n:n"));return function(at){return lt(at),vt(at)}}(),e.column_double=function(){const dt="sqlite3_column_double",vt=i.cwrap(dt,...decl("nn:n"));return function(at,et){return lt(at),vt(at,et)}}(),e.column_int=function(){const dt="sqlite3_column_int64",vt=i.cwrap(dt,...decl("nn:n"));return function(at,et){return lt(at),vt(at,et)}}(),e.column_int64=function(){const dt="sqlite3_column_int64",vt=i.cwrap(dt,...decl("nn:n"));return function(at,et){lt(at);const j=vt(at,et),St=i.getTempRet0();return d(j,St)}}(),e.column_name=function(){const dt="sqlite3_column_name",vt=i.cwrap(dt,...decl("nn:s"));return function(at,et){return lt(at),vt(at,et)}}(),e.column_names=function(dt){const vt=[],at=e.column_count(dt);for(let et=0;et<at;++et)vt.push(e.column_name(dt,et));return vt},e.column_text=function(){const dt="sqlite3_column_text",vt=i.cwrap(dt,...decl("nn:s"));return function(at,et){return lt(at),vt(at,et)}}(),e.column_type=function(){const dt="sqlite3_column_type",vt=i.cwrap(dt,...decl("nn:n"));return function(at,et){return lt(at),vt(at,et)}}(),e.create_function=function(dt,vt,at,et,j,St,mt,ft){if($(dt),St&&!mt&&!ft){const st=i.createFunction(dt,vt,at,et,j,St);return Ot("sqlite3_create_function",st,dt)}if(!St&&mt&&ft){const st=i.createAggregate(dt,vt,at,et,j,mt,ft);return Ot("sqlite3_create_function",st,dt)}throw new SQLiteError("invalid function combination",SQLITE_MISUSE)},e.create_module=function(dt,vt,at,et){$(dt);const j=i.createModule(dt,vt,at,et);return Ot("sqlite3_create_module",j,dt)},e.data_count=function(){const dt="sqlite3_data_count",vt=i.cwrap(dt,...decl("n:n"));return function(at){return lt(at),vt(at)}}(),e.declare_vtab=function(){const dt="sqlite3_declare_vtab",vt=i.cwrap(dt,...decl("ns:n"));return function(at,et){const j=vt(at,et);return Ot("sqlite3_declare_vtab",j)}}(),e.exec=async function(dt,vt,at){for await(const et of e.statements(dt,vt)){let j;for(;await e.step(et)===SQLITE_ROW;)if(at){j=j??e.column_names(et);const St=e.row(et);await at(St,j)}}return SQLITE_OK},e.finalize=function(){const dt="sqlite3_finalize",vt=i.cwrap(dt,...decl("n:n"),{async});return async function(at){if(!rt.has(at))return SQLITE_MISUSE;const et=await vt(at);return rt.get(at),rt.delete(at),et}}(),e.get_autocommit=function(){const dt="sqlite3_get_autocommit",vt=i.cwrap(dt,...decl("n:n"));return function(at){return vt(at)}}(),e.libversion=function(){const dt="sqlite3_libversion",vt=i.cwrap(dt,...decl(":s"));return function(){return vt()}}(),e.libversion_number=function(){const dt="sqlite3_libversion_number",vt=i.cwrap(dt,...decl(":n"));return function(){return vt()}}(),e.limit=function(){const dt="sqlite3_limit",vt=i.cwrap(dt,...decl("nnn:n"));return function(at,et,j){return vt(at,et,j)}}(),e.open_v2=function(){const dt="sqlite3_open_v2",vt=i.cwrap(dt,...decl("snnn:n"),{async});return async function(at,et,j){et=et||SQLITE_OPEN_CREATE|SQLITE_OPEN_READWRITE,j=c(j);const St=await vt(at,o[0],et,j),mt=i.getValue(o[0],"*");return _.add(mt),i._sqlite3_free(j),i.ccall("RegisterExtensionFunctions","void",["number"],[mt]),Ot(dt,St),mt}}(),e.prepare_v2=function(){const dt="sqlite3_prepare_v2",vt=i.cwrap(dt,...decl("nnnnn:n"),{async});return async function(at,et){const j=await vt(at,et,-1,o[0],o[1]);Ot(dt,j,at);const St=i.getValue(o[0],"*");return St?(rt.set(St,at),{stmt:St,sql:i.getValue(o[1],"*")}):null}}(),e.progress_handler=function(dt,vt,at,et){$(dt),i.progressHandler(dt,vt,at,et)},e.reset=function(){const dt="sqlite3_reset",vt=i.cwrap(dt,...decl("n:n"),{async});return async function(at){lt(at);const et=await vt(at);return Ot(dt,et,rt.get(at))}}(),e.result=function(dt,vt){switch(typeof vt){case"number":vt===(vt|0)?e.result_int(dt,vt):e.result_double(dt,vt);break;case"string":e.result_text(dt,vt);break;default:if(vt instanceof Uint8Array||Array.isArray(vt))e.result_blob(dt,vt);else if(vt===null)e.result_null(dt);else{if(typeof vt=="bigint")return e.result_int64(dt,vt);console.warn("unknown result converted to null",vt),e.result_null(dt)}break}},e.result_blob=function(){const dt="sqlite3_result_blob",vt=i.cwrap(dt,...decl("nnnn:n"));return function(at,et){const j=et.byteLength??et.length,St=i._sqlite3_malloc(j);i.HEAPU8.subarray(St).set(et),vt(at,St,j,s)}}(),e.result_double=function(){const dt="sqlite3_result_double",vt=i.cwrap(dt,...decl("nn:n"));return function(at,et){vt(at,et)}}(),e.result_int=function(){const dt="sqlite3_result_int",vt=i.cwrap(dt,...decl("nn:n"));return function(at,et){vt(at,et)}}(),e.result_int64=function(){const dt="sqlite3_result_int64",vt=i.cwrap(dt,...decl("nnn:n"));return function(at,et){if(et>MAX_INT64||et<MIN_INT64)return SQLITE_RANGE;const j=et&0xffffffffn,St=et>>32n;vt(at,Number(j),Number(St))}}(),e.result_null=function(){const dt="sqlite3_result_null",vt=i.cwrap(dt,...decl("n:n"));return function(at){vt(at)}}(),e.result_text=function(){const dt="sqlite3_result_text",vt=i.cwrap(dt,...decl("nnnn:n"));return function(at,et){const j=c(et);vt(at,j,-1,s)}}(),e.row=function(dt){const vt=[],at=e.data_count(dt);for(let et=0;et<at;++et){const j=e.column(dt,et);vt.push((j==null?void 0:j.buffer)===i.HEAPU8.buffer?j.slice():j)}return vt},e.set_authorizer=function(dt,vt,at){$(dt);const et=i.setAuthorizer(dt,vt,at);return Ot("sqlite3_set_authorizer",et,dt)},e.sql=function(){const dt="sqlite3_sql",vt=i.cwrap(dt,...decl("n:s"));return function(at){return lt(at),vt(at)}}(),e.statements=function(dt,vt){return async function*(){const at=e.str_new(dt,vt);let et={stmt:null,sql:e.str_value(at)};try{for(;et=await e.prepare_v2(dt,et.sql);)yield et.stmt,e.finalize(et.stmt),et.stmt=null}finally{et!=null&&et.stmt&&e.finalize(et.stmt),e.str_finish(at)}}()},e.step=function(){const dt="sqlite3_step",vt=i.cwrap(dt,...decl("n:n"),{async});return async function(at){lt(at);const et=await vt(at);return Ot(dt,et,rt.get(at),[SQLITE_ROW,SQLITE_DONE])}}();let ct=0;const bt=new Map;e.str_new=function(dt,vt=""){const at=i.lengthBytesUTF8(vt),et=ct++&4294967295,j={offset:i._sqlite3_malloc(at+1),bytes:at};return bt.set(et,j),i.stringToUTF8(vt,j.offset,j.bytes+1),et},e.str_appendall=function(dt,vt){if(!bt.has(dt))throw new SQLiteError("not a string",SQLITE_MISUSE);const at=bt.get(dt),et=i.lengthBytesUTF8(vt),j=at.bytes+et,St=i._sqlite3_malloc(j+1);i.HEAPU8.subarray(St,St+j+1).set(i.HEAPU8.subarray(at.offset,at.offset+at.bytes)),i.stringToUTF8(vt,St+at.bytes,et+1),i._sqlite3_free(at.offset),at.offset=St,at.bytes=j,bt.set(dt,at)},e.str_finish=function(dt){if(!bt.has(dt))throw new SQLiteError("not a string",SQLITE_MISUSE);const vt=bt.get(dt);bt.delete(dt),i._sqlite3_free(vt.offset)},e.str_value=function(dt){if(!bt.has(dt))throw new SQLiteError("not a string",SQLITE_MISUSE);return bt.get(dt).offset},e.user_data=function(dt){return i.getFunctionUserData(dt)},e.value=function(dt){const vt=e.value_type(dt);switch(vt){case SQLITE_BLOB:return e.value_blob(dt);case SQLITE_FLOAT:return e.value_double(dt);case SQLITE_INTEGER:const at=e.value_int(dt),et=i.getTempRet0();return h(at,et);case SQLITE_NULL:return null;case SQLITE_TEXT:return e.value_text(dt);default:throw new SQLiteError("unknown type",vt)}},e.value_blob=function(){const dt="sqlite3_value_blob",vt=i.cwrap(dt,...decl("n:n"));return function(at){const et=e.value_bytes(at),j=vt(at);return i.HEAPU8.subarray(j,j+et)}}(),e.value_bytes=function(){const dt="sqlite3_value_bytes",vt=i.cwrap(dt,...decl("n:n"));return function(at){return vt(at)}}(),e.value_double=function(){const dt="sqlite3_value_double",vt=i.cwrap(dt,...decl("n:n"));return function(at){return vt(at)}}(),e.value_int=function(){const dt="sqlite3_value_int64",vt=i.cwrap(dt,...decl("n:n"));return function(at){return vt(at)}}(),e.value_int64=function(){const dt="sqlite3_value_int64",vt=i.cwrap(dt,...decl("n:n"));return function(at){const et=vt(at),j=i.getTempRet0();return d(et,j)}}(),e.value_text=function(){const dt="sqlite3_value_text",vt=i.cwrap(dt,...decl("n:s"));return function(at){return vt(at)}}(),e.value_type=function(){const dt="sqlite3_value_type",vt=i.cwrap(dt,...decl("n:n"));return function(at){return vt(at)}}(),e.vfs_register=function(dt,vt){const at=i.registerVFS(dt,vt);return Ot("sqlite3_vfs_register",at)};function Ot(dt,vt,at=null,et=[SQLITE_OK]){if(et.includes(vt))return vt;const j=at?i.ccall("sqlite3_errmsg","string",["number"],[at]):dt;throw new SQLiteError(j,vt)}return e}function decl(i){const e=[],s=i.match(/([ns@]*):([nsv@])/);switch(s[2]){case"n":e.push("number");break;case"s":e.push("string");break;case"v":e.push(null);break}const a=[];for(let o of s[1])switch(o){case"n":a.push("number");break;case"s":a.push("string");break}return e.push(a),e}class Base{constructor(){Zt(this,"mxPathName",64)}xClose(e){return SQLITE_IOERR}xRead(e,s,a){return SQLITE_IOERR}xWrite(e,s,a){return SQLITE_IOERR}xTruncate(e,s){return SQLITE_IOERR}xSync(e,s){return SQLITE_OK}xFileSize(e,s){return SQLITE_IOERR}xLock(e,s){return SQLITE_OK}xUnlock(e,s){return SQLITE_OK}xCheckReservedLock(e,s){return s.setInt32(0,0,!0),SQLITE_OK}xFileControl(e,s,a){return SQLITE_NOTFOUND}xSectorSize(e){return 512}xDeviceCharacteristics(e){return 0}xOpen(e,s,a,o){return SQLITE_CANTOPEN}xDelete(e,s){return SQLITE_IOERR}xAccess(e,s,a){return SQLITE_IOERR}handleAsync(e){return e()}}const LOCK_TYPE_MASK=SQLITE_LOCK_NONE|SQLITE_LOCK_SHARED|SQLITE_LOCK_RESERVED|SQLITE_LOCK_PENDING|SQLITE_LOCK_EXCLUSIVE;var Xn,io,lo,uo,bo,mo,Io,go,Ro;class WebLocksBase{constructor(){Wr(this,uo);Wr(this,mo);Wr(this,go);Wr(this,Xn,SQLITE_LOCK_NONE);Zt(this,"timeoutMillis",0);Wr(this,io,new Map);Wr(this,lo,Promise.resolve(0))}get state(){return Gt(this,Xn)}async lock(e){return os(this,uo,bo).call(this,os(this,mo,Io),e)}async unlock(e){return os(this,uo,bo).call(this,os(this,go,Ro),e)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(e,s){return new Promise(async(a,o)=>{try{await navigator.locks.request(e,s,c=>{if(a(c),c)return new Promise(d=>Gt(this,io).set(e,d))})}catch(c){o(c)}})}_releaseWebLock(e){var s;(s=Gt(this,io).get(e))==null||s(),Gt(this,io).delete(e)}async _pollWebLock(e){var a;return(a=(await navigator.locks.query()).held.find(({name:o})=>o===e))==null?void 0:a.mode}_getTimeoutSignal(){if(this.timeoutMillis){const e=new AbortController;return setTimeout(()=>e.abort(),this.timeoutMillis),e.signal}}}Xn=new WeakMap,io=new WeakMap,lo=new WeakMap,uo=new WeakSet,bo=async function(e,s){const a=s&LOCK_TYPE_MASK;try{const o=()=>e.call(this,a);return await ln(this,lo,Gt(this,lo).then(o,o)),ln(this,Xn,a),SQLITE_OK}catch(o){return o.name==="AbortError"?SQLITE_BUSY:(console.error(o),SQLITE_IOERR_LOCK)}},mo=new WeakSet,Io=async function(e){if(e===Gt(this,Xn))return SQLITE_OK;switch(Gt(this,Xn)){case SQLITE_LOCK_NONE:switch(e){case SQLITE_LOCK_SHARED:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${Gt(this,Xn)} -> ${e}`)}case SQLITE_LOCK_SHARED:switch(e){case SQLITE_LOCK_RESERVED:return this._SHAREDtoRESERVED();case SQLITE_LOCK_EXCLUSIVE:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${Gt(this,Xn)} -> ${e}`)}case SQLITE_LOCK_RESERVED:switch(e){case SQLITE_LOCK_EXCLUSIVE:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${Gt(this,Xn)} -> ${e}`)}default:throw new Error(`unexpected transition ${Gt(this,Xn)} -> ${e}`)}},go=new WeakSet,Ro=async function(e){if(e===Gt(this,Xn))return SQLITE_OK;switch(Gt(this,Xn)){case SQLITE_LOCK_EXCLUSIVE:switch(e){case SQLITE_LOCK_SHARED:return this._EXCLUSIVEtoSHARED();case SQLITE_LOCK_NONE:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${Gt(this,Xn)} -> ${e}`)}case SQLITE_LOCK_RESERVED:switch(e){case SQLITE_LOCK_SHARED:return this._RESERVEDtoSHARED();case SQLITE_LOCK_NONE:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${Gt(this,Xn)} -> ${e}`)}case SQLITE_LOCK_SHARED:switch(e){case SQLITE_LOCK_NONE:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${Gt(this,Xn)} -> ${e}`)}default:throw new Error(`unexpected transition ${Gt(this,Xn)} -> ${e}`)}};class WebLocksExclusive extends WebLocksBase{constructor(e){super(),this._lockName=e+"-outer",this._reservedName=e+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}}const MAX_TRANSACTION_LIFETIME_MILLIS=5e3;let nextTxId=0;const mapTxToId=new WeakMap;function log$1(...i){}var so,ao,co,zn,fo,oo,xa,yo,Oo;class IDBContext{constructor(e,s={durability:"default"}){Wr(this,yo);Wr(this,so,void 0);Wr(this,ao,void 0);Wr(this,co,void 0);Wr(this,zn,null);Wr(this,fo,0);Wr(this,oo,Promise.resolve());Wr(this,xa,Promise.resolve());ln(this,ao,Promise.resolve(e).then(a=>ln(this,so,a))),ln(this,co,s)}async close(){const e=Gt(this,so)??await Gt(this,ao);await Gt(this,oo),await this.sync(),e.close()}async run(e,s){const a=Gt(this,oo).then(()=>os(this,yo,Oo).call(this,e,s));return ln(this,oo,a.catch(()=>{})),a}async sync(){await Gt(this,xa),ln(this,xa,Promise.resolve())}}so=new WeakMap,ao=new WeakMap,co=new WeakMap,zn=new WeakMap,fo=new WeakMap,oo=new WeakMap,xa=new WeakMap,yo=new WeakSet,Oo=async function(e,s){var o,c;const a=Gt(this,so)??await Gt(this,ao);if(e==="readwrite"&&((o=Gt(this,zn))==null?void 0:o.mode)==="readonly")ln(this,zn,null);else if(performance.now()-Gt(this,fo)>MAX_TRANSACTION_LIFETIME_MILLIS){try{(c=Gt(this,zn))==null||c.commit()}catch(d){if(d.name!=="InvalidStateError")throw d}await new Promise(d=>setTimeout(d)),ln(this,zn,null)}for(let d=0;d<2;++d){if(!Gt(this,zn)){ln(this,zn,a.transaction(a.objectStoreNames,e,Gt(this,co)));const h=ln(this,fo,performance.now());ln(this,xa,Gt(this,xa).then(()=>new Promise((_,$)=>{Gt(this,zn).addEventListener("complete",rt=>{_(),Gt(this,zn)===rt.target&&ln(this,zn,null),log$1(`transaction ${mapTxToId.get(rt.target)} complete`)}),Gt(this,zn).addEventListener("abort",rt=>{console.warn("tx abort",(performance.now()-h)/1e3);const lt=rt.target.error;$(lt),Gt(this,zn)===rt.target&&ln(this,zn,null),log$1(`transaction ${mapTxToId.get(rt.target)} aborted`,lt)})}))),mapTxToId.set(Gt(this,zn),nextTxId++)}try{const h=Object.fromEntries(Array.from(a.objectStoreNames,_=>[_,new ObjectStore(Gt(this,zn).objectStore(_))]));return await s(h)}catch(h){if(ln(this,zn,null),d)throw h}}};function wrapRequest(i){return new Promise((e,s)=>{i.addEventListener("success",()=>e(i.result)),i.addEventListener("error",()=>s(i.error))})}var $n;class ObjectStore{constructor(e){Wr(this,$n,void 0);ln(this,$n,e)}get(e){log$1(`get ${Gt(this,$n).name}`,e);const s=Gt(this,$n).get(e);return wrapRequest(s)}getAll(e,s){log$1(`getAll ${Gt(this,$n).name}`,e,s);const a=Gt(this,$n).getAll(e,s);return wrapRequest(a)}getKey(e){log$1(`getKey ${Gt(this,$n).name}`,e);const s=Gt(this,$n).getKey(e);return wrapRequest(s)}getAllKeys(e,s){log$1(`getAllKeys ${Gt(this,$n).name}`,e,s);const a=Gt(this,$n).getAllKeys(e,s);return wrapRequest(a)}put(e,s){log$1(`put ${Gt(this,$n).name}`,e,s);const a=Gt(this,$n).put(e,s);return wrapRequest(a)}delete(e){log$1(`delete ${Gt(this,$n).name}`,e);const s=Gt(this,$n).delete(e);return wrapRequest(s)}clear(){log$1(`clear ${Gt(this,$n).name}`);const e=Gt(this,$n).clear();return wrapRequest(e)}index(e){return new Index(Gt(this,$n).index(e))}}$n=new WeakMap;var $a;class Index{constructor(e){Wr(this,$a,void 0);ln(this,$a,e)}getAllKeys(e,s){log$1(`IDBIndex.getAllKeys ${Gt(this,$a).objectStore.name}<${Gt(this,$a).name}>`,e,s);const a=Gt(this,$a).getAllKeys(e,s);return wrapRequest(a)}}$a=new WeakMap;const SECTOR_SIZE=512,MAX_TASK_MILLIS=3e3,DEFAULT_OPTIONS={durability:"default",purge:"deferred",purgeAtLeast:16};function log(...i){}var _a,Yn,dn,eo,to,na,po,To,_o,Po,vo,No,ba,no,So,Co;class IDBBatchAtomicVFS extends Base{constructor(s="wa-sqlite",a=DEFAULT_OPTIONS){super();Wr(this,po);Wr(this,_o);Wr(this,vo);Wr(this,ba);Wr(this,So);Wr(this,_a,void 0);Wr(this,Yn,new Map);Wr(this,dn,void 0);Wr(this,eo,new Set);Wr(this,to,performance.now());Wr(this,na,new Set);this.name=s,ln(this,_a,Object.assign({},DEFAULT_OPTIONS,a)),ln(this,dn,new IDBContext(openDatabase(s),{durability:Gt(this,_a).durability}))}async close(){var s;for(const a of Gt(this,Yn).keys())await this.xClose(a);await((s=Gt(this,dn))==null?void 0:s.close()),ln(this,dn,null)}xOpen(s,a,o,c){return this.handleAsync(async()=>{s===null&&(s=`null_${a}`),log(`xOpen ${s} 0x${a.toString(16)} 0x${o.toString(16)}`);try{const d=new URL(s,"http://localhost/"),h={path:d.pathname,flags:o,block0:null,isMetadataChanged:!0,locks:new WebLocksExclusive(d.pathname)};return Gt(this,Yn).set(a,h),await Gt(this,dn).run("readwrite",async({blocks:_})=>{if(h.block0=await _.get(os(this,ba,no).call(this,h,0)),!h.block0)if(o&SQLITE_OPEN_CREATE)h.block0={path:h.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},_.put(h.block0);else throw new Error(`file not found: ${h.path}`)}),c.setInt32(0,o&SQLITE_OPEN_READONLY,!0),SQLITE_OK}catch(d){return console.error(d),SQLITE_CANTOPEN}})}xClose(s){return this.handleAsync(async()=>{try{const a=Gt(this,Yn).get(s);return a&&(log(`xClose ${a.path}`),Gt(this,Yn).delete(s),a.flags&SQLITE_OPEN_DELETEONCLOSE&&Gt(this,dn).run("readwrite",({blocks:o})=>{o.delete(IDBKeyRange.bound([a.path],[a.path,[]]))})),SQLITE_OK}catch(a){return console.error(a),SQLITE_IOERR}})}xRead(s,a,o){return this.handleAsync(async()=>{const c=Gt(this,Yn).get(s);log(`xRead ${c.path} ${a.byteLength} ${o}`);try{return await Gt(this,dn).run("readonly",async({blocks:h})=>{let _=0;for(;_<a.byteLength;){const $=o+_,rt=$<c.block0.data.byteLength?c.block0:await h.get(os(this,ba,no).call(this,c,-$));if(!rt||rt.data.byteLength-rt.offset<=$)return a.fill(0,_),SQLITE_IOERR_SHORT_READ;const lt=a.subarray(_),ct=$+rt.offset,bt=Math.min(Math.max(rt.data.byteLength-ct,0),lt.byteLength);lt.set(rt.data.subarray(ct,ct+bt)),_+=bt}return SQLITE_OK})}catch(d){return console.error(d),SQLITE_IOERR}})}xWrite(s,a,o){const c=Gt(this,na).has(s);if(c||performance.now()-Gt(this,to)>MAX_TASK_MILLIS){const d=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&Gt(this,na).add(s),await new Promise(_=>setTimeout(_));const h=os(this,po,To).call(this,s,a,o);return ln(this,to,performance.now()),h});return c&&Gt(this,na).delete(s),d}return os(this,po,To).call(this,s,a,o)}xTruncate(s,a){const o=Gt(this,Yn).get(s);log(`xTruncate ${o.path} ${a}`);try{Object.assign(o.block0,{fileSize:a,data:o.block0.data.slice(0,a)});const c=Object.assign({},o.block0);return Gt(this,dn).run("readwrite",({blocks:d})=>{d.delete(os(this,ba,no).call(this,o,-1/0,-a)),d.put(c)}),SQLITE_OK}catch(c){return console.error(c),SQLITE_IOERR}}xSync(s,a){const o=Gt(this,na).has(s);if(o||Gt(this,_a).durability!=="relaxed"||performance.now()-Gt(this,to)>MAX_TASK_MILLIS){const d=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&Gt(this,na).add(s);const h=await os(this,_o,Po).call(this,s,a);return ln(this,to,performance.now()),h});return o&&Gt(this,na).delete(s),d}const c=Gt(this,Yn).get(s);return log(`xSync ${c.path} ${a}`),SQLITE_OK}xFileSize(s,a){const o=Gt(this,Yn).get(s);return log(`xFileSize ${o.path}`),a.setBigInt64(0,BigInt(o.block0.fileSize),!0),SQLITE_OK}xLock(s,a){return this.handleAsync(async()=>{const o=Gt(this,Yn).get(s);log(`xLock ${o.path} ${a}`);try{const c=await o.locks.lock(a);return c===SQLITE_OK&&o.locks.state===SQLITE_LOCK_SHARED&&(o.block0=await Gt(this,dn).run("readonly",({blocks:d})=>d.get(os(this,ba,no).call(this,o,0)))),c}catch(c){return console.error(c),SQLITE_IOERR}})}xUnlock(s,a){return this.handleAsync(async()=>{const o=Gt(this,Yn).get(s);log(`xUnlock ${o.path} ${a}`);try{return o.locks.unlock(a)}catch(c){return console.error(c),SQLITE_IOERR}})}xCheckReservedLock(s,a){return this.handleAsync(async()=>{const o=Gt(this,Yn).get(s);log(`xCheckReservedLock ${o.path}`);const c=await o.locks.isSomewhereReserved();return a.setInt32(0,c?1:0,!0),SQLITE_OK})}xSectorSize(s){return SECTOR_SIZE}xDeviceCharacteristics(s){return SQLITE_IOCAP_BATCH_ATOMIC|SQLITE_IOCAP_SAFE_APPEND|SQLITE_IOCAP_SEQUENTIAL|SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN}xFileControl(s,a,o){const c=Gt(this,Yn).get(s);switch(log(`xFileControl ${c.path} ${a}`),a){case 11:return c.overwrite=!0,SQLITE_OK;case 21:if(c.overwrite)try{return this.handleAsync(async()=>(await os(this,So,Co).call(this,c),SQLITE_OK))}catch(d){return console.error(d),SQLITE_IOERR}if(c.isMetadataChanged)try{Gt(this,dn).run("readwrite",async({blocks:d})=>{await d.put(c.block0)})}catch(d){return console.error(d),SQLITE_IOERR}return SQLITE_OK;case 22:return c.overwrite=!1,SQLITE_OK;case 31:return this.handleAsync(async()=>{try{return c.block0.version--,c.changedPages=new Set,Gt(this,dn).run("readwrite",async({blocks:d})=>{const h=await d.index("version").getAllKeys(IDBKeyRange.bound([c.path],[c.path,c.block0.version]));for(const _ of h)d.delete(_)}),SQLITE_OK}catch(d){return console.error(d),SQLITE_IOERR}});case 32:try{const d=Object.assign({},c.block0);d.data=d.data.slice();const h=c.changedPages;return c.changedPages=null,c.isMetadataChanged=!1,Gt(this,dn).run("readwrite",async({blocks:_})=>{_.put(d);const $=await _.get([c.path,"purge",0])??{path:c.path,offset:"purge",version:0,data:new Map,count:0};$.count+=h.size;for(const rt of h)$.data.set(rt,d.version);_.put($),os(this,vo,No).call(this,c.path,$.count)}),SQLITE_OK}catch(d){return console.error(d),SQLITE_IOERR}case 33:return this.handleAsync(async()=>{try{return c.changedPages=null,c.isMetadataChanged=!1,c.block0=await Gt(this,dn).run("readonly",({blocks:d})=>d.get([c.path,0,c.block0.version+1])),SQLITE_OK}catch(d){return console.error(d),SQLITE_IOERR}});default:return SQLITE_NOTFOUND}}xAccess(s,a,o){return this.handleAsync(async()=>{try{const c=new URL(s,"file://localhost/").pathname;log(`xAccess ${c} ${a}`);const d=await Gt(this,dn).run("readonly",({blocks:h})=>h.getKey(os(this,ba,no).call(this,{path:c},0)));return o.setInt32(0,d?1:0,!0),SQLITE_OK}catch(c){return console.error(c),SQLITE_IOERR}})}xDelete(s,a){return this.handleAsync(async()=>{const o=new URL(s,"file://localhost/").pathname;try{return Gt(this,dn).run("readwrite",({blocks:c})=>c.delete(IDBKeyRange.bound([o],[o,[]]))),a&&await Gt(this,dn).sync(),SQLITE_OK}catch(c){return console.error(c),SQLITE_IOERR}})}async purge(s){const a=Date.now();await Gt(this,dn).run("readwrite",async({blocks:o})=>{const c=await o.get([s,"purge",0]);if(c){for(const[d,h]of c.data)o.delete(IDBKeyRange.bound([s,d,h],[s,d,1/0],!0,!1));await o.delete([s,"purge",0])}log(`purge ${s} ${(c==null?void 0:c.data.size)??0} pages in ${Date.now()-a} ms`)})}}_a=new WeakMap,Yn=new WeakMap,dn=new WeakMap,eo=new WeakMap,to=new WeakMap,na=new WeakMap,po=new WeakSet,To=function(s,a,o){const c=Gt(this,Yn).get(s);log(`xWrite ${c.path} ${a.byteLength} ${o}`);try{const d=c.block0.fileSize;c.block0.fileSize<o+a.byteLength&&(c.block0.fileSize=o+a.byteLength,c.isMetadataChanged=!0);const h=o===0?c.block0:{path:c.path,offset:-o,version:c.block0.version,data:null};return h.data=a.slice(),c.changedPages?(d===c.block0.fileSize&&c.changedPages.add(-o),o!==0&&Gt(this,dn).run("readwrite",({blocks:_})=>_.put(h))):Gt(this,dn).run("readwrite",({blocks:_})=>_.put(h)),c.isMetadataChanged=o===0?!1:c.isMetadataChanged,SQLITE_OK}catch(d){return console.error(d),SQLITE_IOERR}},_o=new WeakSet,Po=async function(s,a){const o=Gt(this,Yn).get(s);log(`xSync ${o.path} ${a}`);try{await Gt(this,dn).sync()}catch(c){return console.error(c),SQLITE_IOERR}return SQLITE_OK},vo=new WeakSet,No=function(s,a){Gt(this,_a).purge==="manual"||Gt(this,eo).has(s)||a<Gt(this,_a).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(s),Gt(this,eo).delete(s)}):setTimeout(()=>{this.purge(s),Gt(this,eo).delete(s)}),Gt(this,eo).add(s))},ba=new WeakSet,no=function(s,a,o=0){const c=!a||-a<s.block0.data.length?-1/0:s.block0.version;return IDBKeyRange.bound([s.path,a,c],[s.path,o,1/0])},So=new WeakSet,Co=async function(s){const a=s.block0.data.length;if(a<18)return;const o=new DataView(s.block0.data.buffer,s.block0.data.byteOffset);let c=o.getUint16(16);if(c===1&&(c=65536),c===a)return;const d=Math.max(a,c),h=d/a,_=d/c,rt=o.getUint32(28)*c,lt=s.block0.version;await Gt(this,dn).run("readwrite",async({blocks:ct})=>{const bt=await ct.index("version").getAllKeys(IDBKeyRange.bound([s.path,lt+1],[s.path,1/0]));for(const Ot of bt)ct.delete(Ot);ct.delete([s.path,"purge",0]);for(let Ot=0;Ot<rt;Ot+=d){const dt=await ct.getAll(IDBKeyRange.lowerBound([s.path,-(Ot+d),1/0]),h);for(const vt of dt)ct.delete([vt.path,vt.offset,vt.version]);if(_===1){const vt=new Uint8Array(c);for(const et of dt)vt.set(et.data,-(Ot+et.offset));const at={path:s.path,offset:-Ot,version:lt,data:vt};at.offset===0&&(at.fileSize=rt,s.block0=at),ct.put(at)}else{const vt=dt[0];for(let at=0;at<_;++at){const et=-(Ot+at*c);if(-et>=rt)break;const j={path:vt.path,offset:et,version:lt,data:vt.data.subarray(at*c,(at+1)*c)};j.offset===0&&(j.fileSize=rt,s.block0=j),ct.put(j)}}}})};function openDatabase(i){return new Promise((e,s)=>{const a=globalThis.indexedDB.open(i,5);a.addEventListener("upgradeneeded",function(){a.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),a.addEventListener("success",()=>{e(a.result)}),a.addEventListener("error",()=>{s(a.error)})})}const resultToRows=i=>{const e=i.columns;return i.values.map(s=>{const a={};return s.forEach((o,c)=>{const d=e[c];a[d]=o}),a})};var ho;const wo=class wo{constructor(e,s,a){Wr(this,ho,void 0);this.name=e,this.sqlite3=s,this.db=a,ln(this,ho,new Mutex)}async exec(e){const s=await Gt(this,ho).acquire();try{return await this.execSql(e)}finally{s()}}async execSql(e){for await(const s of this.sqlite3.statements(this.db,e.sql)){typeof e.args<"u"&&this.sqlite3.bind_collection(s,e.args);const a=[];let o=[];for(;await this.sqlite3.step(s)===SQLITE_ROW;){o=o.length===0?this.sqlite3.column_names(s):o;const d=this.sqlite3.row(s);a.push(d)}return resultToRows({columns:o,values:a})}return[]}getRowsModified(){return this.sqlite3.changes(this.db)}static async init(e,s){const o=await Module({locateFile:typeof s=="string"?h=>s+h:s}),c=Factory(o);c.vfs_register(new IDBBatchAtomicVFS(e));const d=await c.open_v2(e,SQLITE_OPEN_CREATE|SQLITE_OPEN_READWRITE,e);return new wo(e,c,d)}};ho=new WeakMap;let ElectricDatabase=wo;const satelliteDefaults={metaTable:new QualifiedTablename("main","_electric_meta"),migrationsTable:new QualifiedTablename("main","_electric_migrations"),oplogTable:new QualifiedTablename("main","_electric_oplog"),triggersTable:new QualifiedTablename("main","_electric_trigger_settings"),shadowTable:new QualifiedTablename("main","_electric_shadow"),pollingInterval:2e3,minSnapshotWindow:40,clearOnBehindWindow:!0,connectionBackOffOptions:{delayFirstAttempt:!1,startingDelay:1e3,jitter:"full",maxDelay:1e4,numOfAttempts:50,timeMultiple:2},debug:!1},satelliteClientDefaults={pushPeriod:500},validateConfig=i=>{const e=[];if(!i)return e.push(`config not defined: ${i}`),e;const{replication:s}=i;if(s){const{host:a,port:o}=s;a||e.push("Please provide config.replication.host"),o||e.push("Please provide config.replication.port"),o&&typeof o!="number"&&e.push("Please provide correct type for config.replication.port")}return e},hydrateConfig=i=>{const e=i.auth;if(!e||!e.token)throw new Error("Invalid configuration. Missing authentication token.");const s=i.debug??!1,a=new URL(i.url??"http://localhost:5133"),c=a.protocol==="https:"||a.protocol==="wss:"||a.searchParams.get("ssl")==="true",d=c?443:80,h=parseInt(a.port,10),_=Number.isNaN(h)?d:h,$={host:a.hostname,port:_,ssl:c,timeout:i.timeout??3e3},{delayFirstAttempt:rt,jitter:lt,maxDelay:ct,numOfAttempts:bt,startingDelay:Ot,timeMultiple:dt}=i.connectionBackOffOptions??satelliteDefaults.connectionBackOffOptions;return{auth:e,replication:$,debug:s,connectionBackOffOptions:{delayFirstAttempt:rt,jitter:lt,maxDelay:ct,numOfAttempts:bt,startingDelay:Ot,timeMultiple:dt}}},{metaTable,migrationsTable,oplogTable,triggersTable,shadowTable}=satelliteDefaults,data={migrations:[{statements:[`CREATE TABLE IF NOT EXISTS ${oplogTable} (
  rowid INTEGER PRIMARY KEY AUTOINCREMENT,
  namespace TEXT NOT NULL,
  tablename TEXT NOT NULL,
  optype TEXT NOT NULL,
  primaryKey TEXT NOT NULL,
  newRow TEXT,
  oldRow TEXT,
  timestamp TEXT,  clearTags TEXT DEFAULT "[]" NOT NULL
);`,`CREATE INDEX IF NOT EXISTS ${oplogTable.namespace}._electric_table_pk_reference ON ${oplogTable.tablename} (namespace, tablename, primaryKey)`,`CREATE INDEX IF NOT EXISTS ${oplogTable.namespace}._electric_timestamp ON ${oplogTable.tablename} (timestamp)`,`CREATE TABLE IF NOT EXISTS ${metaTable} (
  key TEXT PRIMARY KEY,
  value BLOB
);`,`CREATE TABLE IF NOT EXISTS ${migrationsTable} (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  version TEXT NOT NULL UNIQUE,
  applied_at TEXT NOT NULL
);`,`INSERT INTO ${metaTable} (key, value) VALUES ('compensations', 1), ('lsn', ''), ('clientId', ''), ('subscriptions', '');`,`DROP TABLE IF EXISTS ${triggersTable};`,`CREATE TABLE ${triggersTable} (tablename TEXT PRIMARY KEY, flag INTEGER);`,`CREATE TABLE ${shadowTable} (
  namespace TEXT NOT NULL,
  tablename TEXT NOT NULL,
  primaryKey TEXT NOT NULL,
  tags TEXT NOT NULL,
  PRIMARY KEY (namespace, tablename, primaryKey));`],version:"0"}]};var loglevel={exports:{}};(function(i){(function(e,s){i.exports?i.exports=s():e.log=s()})(commonjsGlobal,function(){var e=function(){},s="undefined",a=typeof window!==s&&typeof window.navigator!==s&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function c(dt,vt){var at=dt[vt];if(typeof at.bind=="function")return at.bind(dt);try{return Function.prototype.bind.call(at,dt)}catch{return function(){return Function.prototype.apply.apply(at,[dt,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(dt){return dt==="debug"&&(dt="log"),typeof console===s?!1:dt==="trace"&&a?d:console[dt]!==void 0?c(console,dt):console.log!==void 0?c(console,"log"):e}function _(dt,vt){for(var at=0;at<o.length;at++){var et=o[at];this[et]=at<dt?e:this.methodFactory(et,dt,vt)}this.log=this.debug}function $(dt,vt,at){return function(){typeof console!==s&&(_.call(this,vt,at),this[dt].apply(this,arguments))}}function rt(dt,vt,at){return h(dt)||$.apply(this,arguments)}function lt(dt,vt,at){var et=this,j;vt=vt??"WARN";var St="loglevel";typeof dt=="string"?St+=":"+dt:typeof dt=="symbol"&&(St=void 0);function mt(ot){var ut=(o[ot]||"silent").toUpperCase();if(!(typeof window===s||!St)){try{window.localStorage[St]=ut;return}catch{}try{window.document.cookie=encodeURIComponent(St)+"="+ut+";"}catch{}}}function ft(){var ot;if(!(typeof window===s||!St)){try{ot=window.localStorage[St]}catch{}if(typeof ot===s)try{var ut=window.document.cookie,It=ut.indexOf(encodeURIComponent(St)+"=");It!==-1&&(ot=/^([^;]+)/.exec(ut.slice(It))[1])}catch{}return et.levels[ot]===void 0&&(ot=void 0),ot}}function st(){if(!(typeof window===s||!St)){try{window.localStorage.removeItem(St);return}catch{}try{window.document.cookie=encodeURIComponent(St)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}et.name=dt,et.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},et.methodFactory=at||rt,et.getLevel=function(){return j},et.setLevel=function(ot,ut){if(typeof ot=="string"&&et.levels[ot.toUpperCase()]!==void 0&&(ot=et.levels[ot.toUpperCase()]),typeof ot=="number"&&ot>=0&&ot<=et.levels.SILENT){if(j=ot,ut!==!1&&mt(ot),_.call(et,ot,dt),typeof console===s&&ot<et.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+ot},et.setDefaultLevel=function(ot){vt=ot,ft()||et.setLevel(ot,!1)},et.resetLevel=function(){et.setLevel(vt,!1),st()},et.enableAll=function(ot){et.setLevel(et.levels.TRACE,ot)},et.disableAll=function(ot){et.setLevel(et.levels.SILENT,ot)};var ht=ft();ht==null&&(ht=vt),et.setLevel(ht,!1)}var ct=new lt,bt={};ct.getLogger=function(vt){if(typeof vt!="symbol"&&typeof vt!="string"||vt==="")throw new TypeError("You must supply a name when creating a logger.");var at=bt[vt];return at||(at=bt[vt]=new lt(vt,ct.getLevel(),ct.methodFactory)),at};var Ot=typeof window!==s?window.log:void 0;return ct.noConflict=function(){return typeof window!==s&&window.log===ct&&(window.log=Ot),ct},ct.getLoggers=function(){return bt},ct.default=ct,ct})})(loglevel);var loglevelExports=loglevel.exports;const Log=getDefaultExportFromCjs(loglevelExports),SCHEMA_VSN_ERROR_MSG="Local schema doesn't match server's. Clear local state through developer tools and retry connection manually. If error persists, re-generate the client. Check documentation (https://electric-sql.com/docs/reference/roadmap) to learn more.",DEFAULTS={tableName:"_electric_migrations"},VALID_VERSION_EXP=new RegExp("^[0-9_]+");class BundleMigrator{constructor(e,s=[],a){Zt(this,"adapter");Zt(this,"migrations");Zt(this,"tableName");const c=overrideDefined(DEFAULTS,{tableName:a});this.adapter=e,this.migrations=[...data.migrations,...s].map(makeStmtMigration),this.tableName=c.tableName}async up(){const e=await this.queryApplied(),s=await this.validateApplied(this.migrations,e);let a;for(let o=0;o<s.length;o++)a=s[o],Log.info(`applying migration: ${a.version}`),await this.apply(a);return s.length}async migrationsTableExists(){const e=`
      SELECT 1 FROM sqlite_master
        WHERE type = 'table'
          AND name = ?
    `;return(await this.adapter.query({sql:e,args:[this.tableName]})).length>0}async queryApplied(){if(!await this.migrationsTableExists())return[];const e=`
      SELECT version FROM ${this.tableName}
        ORDER BY id ASC
    `;return await this.adapter.query({sql:e})}async querySchemaVersion(){if(!await this.migrationsTableExists())return;const e=`
      SELECT version FROM ${this.tableName}
        WHERE version != '0'
        ORDER BY version DESC
        LIMIT 1
    `,s=await this.adapter.query({sql:e});if(s.length!==0)return s[0].version}async validateApplied(e,s){const a=s.slice(0,e.length);return a.forEach(({version:o},c)=>{if(e[c].version!==o)throw new SatelliteError(SatelliteErrorCode.UNKNOWN_SCHEMA_VSN,SCHEMA_VSN_ERROR_MSG)}),e.slice(a.length)}async apply({statements:e,version:s}){if(!VALID_VERSION_EXP.test(s))throw new Error(`Invalid migration version, must match ${VALID_VERSION_EXP}`);const a=`INSERT INTO ${this.tableName}
        ('version', 'applied_at') VALUES (?, ?)
        `;await this.adapter.runInTransaction(...e,{sql:a,args:[s,Date.now()]})}async applyIfNotAlready(e){const s=`
      SELECT 1 FROM ${this.tableName}
        WHERE version = ?
    `,o=(await this.adapter.query({sql:s,args:[e.version]})).length===0;return o&&await this.apply(e),o}}var util;(function(i){i.assertEqual=o=>o;function e(o){}i.assertIs=e;function s(o){throw new Error}i.assertNever=s,i.arrayToEnum=o=>{const c={};for(const d of o)c[d]=d;return c},i.getValidEnumValues=o=>{const c=i.objectKeys(o).filter(h=>typeof o[o[h]]!="number"),d={};for(const h of c)d[h]=o[h];return i.objectValues(d)},i.objectValues=o=>i.objectKeys(o).map(function(c){return o[c]}),i.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const c=[];for(const d in o)Object.prototype.hasOwnProperty.call(o,d)&&c.push(d);return c},i.find=(o,c)=>{for(const d of o)if(c(d))return d},i.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function a(o,c=" | "){return o.map(d=>typeof d=="string"?`'${d}'`:d).join(c)}i.joinValues=a,i.jsonStringifyReplacer=(o,c)=>typeof c=="bigint"?c.toString():c})(util||(util={}));var objectUtil;(function(i){i.mergeShapes=(e,s)=>({...e,...s})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=i=>{switch(typeof i){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(i)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(i)?ZodParsedType.array:i===null?ZodParsedType.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&i instanceof Map?ZodParsedType.map:typeof Set<"u"&&i instanceof Set?ZodParsedType.set:typeof Date<"u"&&i instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const s=e||function(c){return c.message},a={_errors:[]},o=c=>{for(const d of c.issues)if(d.code==="invalid_union")d.unionErrors.map(o);else if(d.code==="invalid_return_type")o(d.returnTypeError);else if(d.code==="invalid_arguments")o(d.argumentsError);else if(d.path.length===0)a._errors.push(s(d));else{let h=a,_=0;for(;_<d.path.length;){const $=d.path[_];_===d.path.length-1?(h[$]=h[$]||{_errors:[]},h[$]._errors.push(s(d))):h[$]=h[$]||{_errors:[]},h=h[$],_++}}};return o(this),a}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},a=[];for(const o of this.issues)o.path.length>0?(s[o.path[0]]=s[o.path[0]]||[],s[o.path[0]].push(e(o))):a.push(e(o));return{formErrors:a,fieldErrors:s}}get formErrors(){return this.flatten()}}ZodError.create=i=>new ZodError(i);const errorMap=(i,e)=>{let s;switch(i.code){case ZodIssueCode.invalid_type:i.received===ZodParsedType.undefined?s="Required":s=`Expected ${i.expected}, received ${i.received}`;break;case ZodIssueCode.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(i.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:s=`Unrecognized key(s) in object: ${util.joinValues(i.keys,", ")}`;break;case ZodIssueCode.invalid_union:s="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${util.joinValues(i.options)}`;break;case ZodIssueCode.invalid_enum_value:s=`Invalid enum value. Expected ${util.joinValues(i.options)}, received '${i.received}'`;break;case ZodIssueCode.invalid_arguments:s="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:s="Invalid function return type";break;case ZodIssueCode.invalid_date:s="Invalid date";break;case ZodIssueCode.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(s=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?s=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?s=`Invalid input: must end with "${i.validation.endsWith}"`:util.assertNever(i.validation):i.validation!=="regex"?s=`Invalid ${i.validation}`:s="Invalid";break;case ZodIssueCode.too_small:i.type==="array"?s=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?s=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?s=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?s=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:s="Invalid input";break;case ZodIssueCode.too_big:i.type==="array"?s=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?s=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?s=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?s=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?s=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:s="Invalid input";break;case ZodIssueCode.custom:s="Invalid input";break;case ZodIssueCode.invalid_intersection_types:s="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:s=`Number must be a multiple of ${i.multipleOf}`;break;case ZodIssueCode.not_finite:s="Number must be finite";break;default:s=e.defaultError,util.assertNever(i)}return{message:s}};let overrideErrorMap=errorMap;function setErrorMap(i){overrideErrorMap=i}function getErrorMap(){return overrideErrorMap}const makeIssue=i=>{const{data:e,path:s,errorMaps:a,issueData:o}=i,c=[...s,...o.path||[]],d={...o,path:c};let h="";const _=a.filter($=>!!$).slice().reverse();for(const $ of _)h=$(d,{data:e,defaultError:h}).message;return{...o,path:c,message:o.message||h}},EMPTY_PATH=[];function addIssueToContext(i,e){const s=makeIssue({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,getErrorMap(),errorMap].filter(a=>!!a)});i.common.issues.push(s)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const a=[];for(const o of s){if(o.status==="aborted")return INVALID;o.status==="dirty"&&e.dirty(),a.push(o.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,s){const a=[];for(const o of s)a.push({key:await o.key,value:await o.value});return ParseStatus.mergeObjectSync(e,a)}static mergeObjectSync(e,s){const a={};for(const o of s){const{key:c,value:d}=o;if(c.status==="aborted"||d.status==="aborted")return INVALID;c.status==="dirty"&&e.dirty(),d.status==="dirty"&&e.dirty(),c.value!=="__proto__"&&(typeof d.value<"u"||o.alwaysSet)&&(a[c.value]=d.value)}return{status:e.value,value:a}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=i=>({status:"dirty",value:i}),OK=i=>({status:"valid",value:i}),isAborted=i=>i.status==="aborted",isDirty=i=>i.status==="dirty",isValid=i=>i.status==="valid",isAsync=i=>typeof Promise<"u"&&i instanceof Promise;var errorUtil;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(e,s,a,o){this._cachedPath=[],this.parent=e,this.data=s,this._path=a,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(i,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new ZodError(i.common.issues);return this._error=s,this._error}}};function processCreateParams(i){if(!i)return{};const{errorMap:e,invalid_type_error:s,required_error:a,description:o}=i;if(e&&(s||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(d,h)=>d.code!=="invalid_type"?{message:h.defaultError}:typeof h.data>"u"?{message:a??h.defaultError}:{message:s??h.defaultError},description:o}}class ZodType{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(isAsync(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const a=this.safeParse(e,s);if(a.success)return a.data;throw a.error}safeParse(e,s){var a;const o={common:{issues:[],async:(a=s==null?void 0:s.async)!==null&&a!==void 0?a:!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},c=this._parseSync({data:e,path:o.path,parent:o});return handleResult(o,c)}async parseAsync(e,s){const a=await this.safeParseAsync(e,s);if(a.success)return a.data;throw a.error}async safeParseAsync(e,s){const a={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},o=this._parse({data:e,path:a.path,parent:a}),c=await(isAsync(o)?o:Promise.resolve(o));return handleResult(a,c)}refine(e,s){const a=o=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(o):s;return this._refinement((o,c)=>{const d=e(o),h=()=>c.addIssue({code:ZodIssueCode.custom,...a(o)});return typeof Promise<"u"&&d instanceof Promise?d.then(_=>_?!0:(h(),!1)):d?!0:(h(),!1)})}refinement(e,s){return this._refinement((a,o)=>e(a)?!0:(o.addIssue(typeof s=="function"?s(a,o):s),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:s,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:s,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[a-z][a-z0-9]*$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,datetimeRegex=i=>i.precision?i.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${i.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${i.precision}}Z$`):i.precision===0?i.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):i.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function isValidIP(i,e){return!!((e==="v4"||!e)&&ipv4Regex.test(i)||(e==="v6"||!e)&&ipv6Regex.test(i))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:c.parsedType}),INVALID}const a=new ParseStatus;let o;for(const c of this._def.checks)if(c.kind==="min")e.data.length<c.value&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),a.dirty());else if(c.kind==="max")e.data.length>c.value&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),a.dirty());else if(c.kind==="length"){const d=e.data.length>c.value,h=e.data.length<c.value;(d||h)&&(o=this._getOrReturnCtx(e,o),d?addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):h&&addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),a.dirty())}else if(c.kind==="email")emailRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"email",code:ZodIssueCode.invalid_string,message:c.message}),a.dirty());else if(c.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"emoji",code:ZodIssueCode.invalid_string,message:c.message}),a.dirty());else if(c.kind==="uuid")uuidRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"uuid",code:ZodIssueCode.invalid_string,message:c.message}),a.dirty());else if(c.kind==="cuid")cuidRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"cuid",code:ZodIssueCode.invalid_string,message:c.message}),a.dirty());else if(c.kind==="cuid2")cuid2Regex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:c.message}),a.dirty());else if(c.kind==="ulid")ulidRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"ulid",code:ZodIssueCode.invalid_string,message:c.message}),a.dirty());else if(c.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"url",code:ZodIssueCode.invalid_string,message:c.message}),a.dirty()}else c.kind==="regex"?(c.regex.lastIndex=0,c.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"regex",code:ZodIssueCode.invalid_string,message:c.message}),a.dirty())):c.kind==="trim"?e.data=e.data.trim():c.kind==="includes"?e.data.includes(c.value,c.position)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),a.dirty()):c.kind==="toLowerCase"?e.data=e.data.toLowerCase():c.kind==="toUpperCase"?e.data=e.data.toUpperCase():c.kind==="startsWith"?e.data.startsWith(c.value)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:{startsWith:c.value},message:c.message}),a.dirty()):c.kind==="endsWith"?e.data.endsWith(c.value)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:{endsWith:c.value},message:c.message}),a.dirty()):c.kind==="datetime"?datetimeRegex(c).test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:"datetime",message:c.message}),a.dirty()):c.kind==="ip"?isValidIP(e.data,c.version)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"ip",code:ZodIssueCode.invalid_string,message:c.message}),a.dirty()):util.assertNever(c);return{status:a.value,value:e.data}}_regex(e,s,a){return this.refinement(o=>e.test(o),{validation:s,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(a)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}datetime(e){var s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(s=e==null?void 0:e.offset)!==null&&s!==void 0?s:!1,...errorUtil.errToObj(e==null?void 0:e.message)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...errorUtil.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(s)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}ZodString.create=i=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(i)})};function floatSafeRemainder(i,e){const s=(i.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,o=s>a?s:a,c=parseInt(i.toFixed(o).replace(".","")),d=parseInt(e.toFixed(o).replace(".",""));return c%d/Math.pow(10,o)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:c.parsedType}),INVALID}let a;const o=new ParseStatus;for(const c of this._def.checks)c.kind==="int"?util.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:c.message}),o.dirty()):c.kind==="min"?(c.inclusive?e.data<c.value:e.data<=c.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),o.dirty()):c.kind==="max"?(c.inclusive?e.data>c.value:e.data>=c.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),o.dirty()):c.kind==="multipleOf"?floatSafeRemainder(e.data,c.value)!==0&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.not_multiple_of,multipleOf:c.value,message:c.message}),o.dirty()):c.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.not_finite,message:c.message}),o.dirty()):util.assertNever(c);return{status:o.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,errorUtil.toString(s))}gt(e,s){return this.setLimit("min",e,!1,errorUtil.toString(s))}lte(e,s){return this.setLimit("max",e,!0,errorUtil.toString(s))}lt(e,s){return this.setLimit("max",e,!1,errorUtil.toString(s))}setLimit(e,s,a,o){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:errorUtil.toString(o)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(s===null||a.value>s)&&(s=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(s)&&Number.isFinite(e)}}ZodNumber.create=i=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...processCreateParams(i)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ZodParsedType.bigint){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:c.parsedType}),INVALID}let a;const o=new ParseStatus;for(const c of this._def.checks)c.kind==="min"?(c.inclusive?e.data<c.value:e.data<=c.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,type:"bigint",minimum:c.value,inclusive:c.inclusive,message:c.message}),o.dirty()):c.kind==="max"?(c.inclusive?e.data>c.value:e.data>=c.value)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,type:"bigint",maximum:c.value,inclusive:c.inclusive,message:c.message}),o.dirty()):c.kind==="multipleOf"?e.data%c.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.not_multiple_of,multipleOf:c.value,message:c.message}),o.dirty()):util.assertNever(c);return{status:o.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,errorUtil.toString(s))}gt(e,s){return this.setLimit("min",e,!1,errorUtil.toString(s))}lte(e,s){return this.setLimit("max",e,!0,errorUtil.toString(s))}lt(e,s){return this.setLimit("max",e,!1,errorUtil.toString(s))}setLimit(e,s,a,o){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:errorUtil.toString(o)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}ZodBigInt.create=i=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=i==null?void 0:i.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(i)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:a.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=i=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...processCreateParams(i)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:c.parsedType}),INVALID}if(isNaN(e.data.getTime())){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{code:ZodIssueCode.invalid_date}),INVALID}const a=new ParseStatus;let o;for(const c of this._def.checks)c.kind==="min"?e.data.getTime()<c.value&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_small,message:c.message,inclusive:!0,exact:!1,minimum:c.value,type:"date"}),a.dirty()):c.kind==="max"?e.data.getTime()>c.value&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_big,message:c.message,inclusive:!0,exact:!1,maximum:c.value,type:"date"}),a.dirty()):util.assertNever(c);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}ZodDate.create=i=>new ZodDate({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(i)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:a.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=i=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(i)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:a.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=i=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(i)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:a.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=i=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(i)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=i=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(i)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=i=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(i)});class ZodNever extends ZodType{_parse(e){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:s.parsedType}),INVALID}}ZodNever.create=i=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(i)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:a.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=i=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(i)});class ZodArray extends ZodType{_parse(e){const{ctx:s,status:a}=this._processInputParams(e),o=this._def;if(s.parsedType!==ZodParsedType.array)return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:s.parsedType}),INVALID;if(o.exactLength!==null){const d=s.data.length>o.exactLength.value,h=s.data.length<o.exactLength.value;(d||h)&&(addIssueToContext(s,{code:d?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:h?o.exactLength.value:void 0,maximum:d?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),a.dirty())}if(o.minLength!==null&&s.data.length<o.minLength.value&&(addIssueToContext(s,{code:ZodIssueCode.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),a.dirty()),o.maxLength!==null&&s.data.length>o.maxLength.value&&(addIssueToContext(s,{code:ZodIssueCode.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),a.dirty()),s.common.async)return Promise.all([...s.data].map((d,h)=>o.type._parseAsync(new ParseInputLazyPath(s,d,s.path,h)))).then(d=>ParseStatus.mergeArray(a,d));const c=[...s.data].map((d,h)=>o.type._parseSync(new ParseInputLazyPath(s,d,s.path,h)));return ParseStatus.mergeArray(a,c)}get element(){return this._def.type}min(e,s){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(s)}})}max(e,s){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(s)}})}length(e,s){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(s)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(i,e)=>new ZodArray({type:i,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(i){if(i instanceof ZodObject){const e={};for(const s in i.shape){const a=i.shape[s];e[s]=ZodOptional.create(deepPartialify(a))}return new ZodObject({...i._def,shape:()=>e})}else return i instanceof ZodArray?new ZodArray({...i._def,type:deepPartialify(i.element)}):i instanceof ZodOptional?ZodOptional.create(deepPartialify(i.unwrap())):i instanceof ZodNullable?ZodNullable.create(deepPartialify(i.unwrap())):i instanceof ZodTuple?ZodTuple.create(i.items.map(e=>deepPartialify(e))):i}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=util.objectKeys(e);return this._cached={shape:e,keys:s}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const $=this._getOrReturnCtx(e);return addIssueToContext($,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:$.parsedType}),INVALID}const{status:a,ctx:o}=this._processInputParams(e),{shape:c,keys:d}=this._getCached(),h=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const $ in o.data)d.includes($)||h.push($);const _=[];for(const $ of d){const rt=c[$],lt=o.data[$];_.push({key:{status:"valid",value:$},value:rt._parse(new ParseInputLazyPath(o,lt,o.path,$)),alwaysSet:$ in o.data})}if(this._def.catchall instanceof ZodNever){const $=this._def.unknownKeys;if($==="passthrough")for(const rt of h)_.push({key:{status:"valid",value:rt},value:{status:"valid",value:o.data[rt]}});else if($==="strict")h.length>0&&(addIssueToContext(o,{code:ZodIssueCode.unrecognized_keys,keys:h}),a.dirty());else if($!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const $=this._def.catchall;for(const rt of h){const lt=o.data[rt];_.push({key:{status:"valid",value:rt},value:$._parse(new ParseInputLazyPath(o,lt,o.path,rt)),alwaysSet:rt in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const $=[];for(const rt of _){const lt=await rt.key;$.push({key:lt,value:await rt.value,alwaysSet:rt.alwaysSet})}return $}).then($=>ParseStatus.mergeObjectSync(a,$)):ParseStatus.mergeObjectSync(a,_)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,a)=>{var o,c,d,h;const _=(d=(c=(o=this._def).errorMap)===null||c===void 0?void 0:c.call(o,s,a).message)!==null&&d!==void 0?d:a.defaultError;return s.code==="unrecognized_keys"?{message:(h=errorUtil.errToObj(e).message)!==null&&h!==void 0?h:_}:{message:_}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const s={};return util.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(s[a]=this.shape[a])}),new ZodObject({...this._def,shape:()=>s})}omit(e){const s={};return util.objectKeys(this.shape).forEach(a=>{e[a]||(s[a]=this.shape[a])}),new ZodObject({...this._def,shape:()=>s})}deepPartial(){return deepPartialify(this)}partial(e){const s={};return util.objectKeys(this.shape).forEach(a=>{const o=this.shape[a];e&&!e[a]?s[a]=o:s[a]=o.optional()}),new ZodObject({...this._def,shape:()=>s})}required(e){const s={};return util.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])s[a]=this.shape[a];else{let c=this.shape[a];for(;c instanceof ZodOptional;)c=c._def.innerType;s[a]=c}}),new ZodObject({...this._def,shape:()=>s})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(i,e)=>new ZodObject({shape:()=>i,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(i,e)=>new ZodObject({shape:()=>i,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(i,e)=>new ZodObject({shape:i,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:s}=this._processInputParams(e),a=this._def.options;function o(c){for(const h of c)if(h.result.status==="valid")return h.result;for(const h of c)if(h.result.status==="dirty")return s.common.issues.push(...h.ctx.common.issues),h.result;const d=c.map(h=>new ZodError(h.ctx.common.issues));return addIssueToContext(s,{code:ZodIssueCode.invalid_union,unionErrors:d}),INVALID}if(s.common.async)return Promise.all(a.map(async c=>{const d={...s,common:{...s.common,issues:[]},parent:null};return{result:await c._parseAsync({data:s.data,path:s.path,parent:d}),ctx:d}})).then(o);{let c;const d=[];for(const _ of a){const $={...s,common:{...s.common,issues:[]},parent:null},rt=_._parseSync({data:s.data,path:s.path,parent:$});if(rt.status==="valid")return rt;rt.status==="dirty"&&!c&&(c={result:rt,ctx:$}),$.common.issues.length&&d.push($.common.issues)}if(c)return s.common.issues.push(...c.ctx.common.issues),c.result;const h=d.map(_=>new ZodError(_));return addIssueToContext(s,{code:ZodIssueCode.invalid_union,unionErrors:h}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(i,e)=>new ZodUnion({options:i,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=i=>i instanceof ZodLazy?getDiscriminator(i.schema):i instanceof ZodEffects?getDiscriminator(i.innerType()):i instanceof ZodLiteral?[i.value]:i instanceof ZodEnum?i.options:i instanceof ZodNativeEnum?Object.keys(i.enum):i instanceof ZodDefault?getDiscriminator(i._def.innerType):i instanceof ZodUndefined?[void 0]:i instanceof ZodNull?[null]:null;class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==ZodParsedType.object)return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:s.parsedType}),INVALID;const a=this.discriminator,o=s.data[a],c=this.optionsMap.get(o);return c?s.common.async?c._parseAsync({data:s.data,path:s.path,parent:s}):c._parseSync({data:s.data,path:s.path,parent:s}):(addIssueToContext(s,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,s,a){const o=new Map;for(const c of s){const d=getDiscriminator(c.shape[e]);if(!d)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const h of d){if(o.has(h))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(h)}`);o.set(h,c)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:s,optionsMap:o,...processCreateParams(a)})}}function mergeValues(i,e){const s=getParsedType(i),a=getParsedType(e);if(i===e)return{valid:!0,data:i};if(s===ZodParsedType.object&&a===ZodParsedType.object){const o=util.objectKeys(e),c=util.objectKeys(i).filter(h=>o.indexOf(h)!==-1),d={...i,...e};for(const h of c){const _=mergeValues(i[h],e[h]);if(!_.valid)return{valid:!1};d[h]=_.data}return{valid:!0,data:d}}else if(s===ZodParsedType.array&&a===ZodParsedType.array){if(i.length!==e.length)return{valid:!1};const o=[];for(let c=0;c<i.length;c++){const d=i[c],h=e[c],_=mergeValues(d,h);if(!_.valid)return{valid:!1};o.push(_.data)}return{valid:!0,data:o}}else return s===ZodParsedType.date&&a===ZodParsedType.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:s,ctx:a}=this._processInputParams(e),o=(c,d)=>{if(isAborted(c)||isAborted(d))return INVALID;const h=mergeValues(c.value,d.value);return h.valid?((isDirty(c)||isDirty(d))&&s.dirty(),{status:s.value,value:h.data}):(addIssueToContext(a,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([c,d])=>o(c,d)):o(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}ZodIntersection.create=(i,e,s)=>new ZodIntersection({left:i,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(s)});class ZodTuple extends ZodType{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.array)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:a.parsedType}),INVALID;if(a.data.length<this._def.items.length)return addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&a.data.length>this._def.items.length&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const c=[...a.data].map((d,h)=>{const _=this._def.items[h]||this._def.rest;return _?_._parse(new ParseInputLazyPath(a,d,a.path,h)):null}).filter(d=>!!d);return a.common.async?Promise.all(c).then(d=>ParseStatus.mergeArray(s,d)):ParseStatus.mergeArray(s,c)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:i,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.object)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:a.parsedType}),INVALID;const o=[],c=this._def.keyType,d=this._def.valueType;for(const h in a.data)o.push({key:c._parse(new ParseInputLazyPath(a,h,a.path,h)),value:d._parse(new ParseInputLazyPath(a,a.data[h],a.path,h))});return a.common.async?ParseStatus.mergeObjectAsync(s,o):ParseStatus.mergeObjectSync(s,o)}get element(){return this._def.valueType}static create(e,s,a){return s instanceof ZodType?new ZodRecord({keyType:e,valueType:s,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(a)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(s)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.map)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:a.parsedType}),INVALID;const o=this._def.keyType,c=this._def.valueType,d=[...a.data.entries()].map(([h,_],$)=>({key:o._parse(new ParseInputLazyPath(a,h,a.path,[$,"key"])),value:c._parse(new ParseInputLazyPath(a,_,a.path,[$,"value"]))}));if(a.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const _ of d){const $=await _.key,rt=await _.value;if($.status==="aborted"||rt.status==="aborted")return INVALID;($.status==="dirty"||rt.status==="dirty")&&s.dirty(),h.set($.value,rt.value)}return{status:s.value,value:h}})}else{const h=new Map;for(const _ of d){const $=_.key,rt=_.value;if($.status==="aborted"||rt.status==="aborted")return INVALID;($.status==="dirty"||rt.status==="dirty")&&s.dirty(),h.set($.value,rt.value)}return{status:s.value,value:h}}}}ZodMap.create=(i,e,s)=>new ZodMap({valueType:e,keyType:i,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(s)});class ZodSet extends ZodType{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==ZodParsedType.set)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:a.parsedType}),INVALID;const o=this._def;o.minSize!==null&&a.data.size<o.minSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),s.dirty()),o.maxSize!==null&&a.data.size>o.maxSize.value&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),s.dirty());const c=this._def.valueType;function d(_){const $=new Set;for(const rt of _){if(rt.status==="aborted")return INVALID;rt.status==="dirty"&&s.dirty(),$.add(rt.value)}return{status:s.value,value:$}}const h=[...a.data.values()].map((_,$)=>c._parse(new ParseInputLazyPath(a,_,a.path,$)));return a.common.async?Promise.all(h).then(_=>d(_)):d(h)}min(e,s){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(s)}})}max(e,s){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}ZodSet.create=(i,e)=>new ZodSet({valueType:i,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==ZodParsedType.function)return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:s.parsedType}),INVALID;function a(h,_){return makeIssue({data:h,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,getErrorMap(),errorMap].filter($=>!!$),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:_}})}function o(h,_){return makeIssue({data:h,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,getErrorMap(),errorMap].filter($=>!!$),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:_}})}const c={errorMap:s.common.contextualErrorMap},d=s.data;if(this._def.returns instanceof ZodPromise){const h=this;return OK(async function(..._){const $=new ZodError([]),rt=await h._def.args.parseAsync(_,c).catch(bt=>{throw $.addIssue(a(_,bt)),$}),lt=await Reflect.apply(d,this,rt);return await h._def.returns._def.type.parseAsync(lt,c).catch(bt=>{throw $.addIssue(o(lt,bt)),$})})}else{const h=this;return OK(function(..._){const $=h._def.args.safeParse(_,c);if(!$.success)throw new ZodError([a(_,$.error)]);const rt=Reflect.apply(d,this,$.data),lt=h._def.returns.safeParse(rt,c);if(!lt.success)throw new ZodError([o(rt,lt.error)]);return lt.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,s,a){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:s||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(a)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}ZodLazy.create=(i,e)=>new ZodLazy({getter:i,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{received:s.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(i,e)=>new ZodLiteral({value:i,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(i,e){return new ZodEnum({values:i,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),a=this._def.values;return addIssueToContext(s,{expected:util.joinValues(a),received:s.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._def.values.indexOf(e.data)===-1){const s=this._getOrReturnCtx(e),a=this._def.values;return addIssueToContext(s,{received:s.data,code:ZodIssueCode.invalid_enum_value,options:a}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e){return ZodEnum.create(e)}exclude(e){return ZodEnum.create(this.options.filter(s=>!e.includes(s)))}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(e){const s=util.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==ZodParsedType.string&&a.parsedType!==ZodParsedType.number){const o=util.objectValues(s);return addIssueToContext(a,{expected:util.joinValues(o),received:a.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(s.indexOf(e.data)===-1){const o=util.objectValues(s);return addIssueToContext(a,{received:a.data,code:ZodIssueCode.invalid_enum_value,options:o}),INVALID}return OK(e.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(i,e)=>new ZodNativeEnum({values:i,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==ZodParsedType.promise&&s.common.async===!1)return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:s.parsedType}),INVALID;const a=s.parsedType===ZodParsedType.promise?s.data:Promise.resolve(s.data);return OK(a.then(o=>this._def.type.parseAsync(o,{path:s.path,errorMap:s.common.contextualErrorMap})))}}ZodPromise.create=(i,e)=>new ZodPromise({type:i,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:a}=this._processInputParams(e),o=this._def.effect||null,c={addIssue:d=>{addIssueToContext(a,d),d.fatal?s.abort():s.dirty()},get path(){return a.path}};if(c.addIssue=c.addIssue.bind(c),o.type==="preprocess"){const d=o.transform(a.data,c);return a.common.issues.length?{status:"dirty",value:a.data}:a.common.async?Promise.resolve(d).then(h=>this._def.schema._parseAsync({data:h,path:a.path,parent:a})):this._def.schema._parseSync({data:d,path:a.path,parent:a})}if(o.type==="refinement"){const d=h=>{const _=o.refinement(h,c);if(a.common.async)return Promise.resolve(_);if(_ instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(a.common.async===!1){const h=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return h.status==="aborted"?INVALID:(h.status==="dirty"&&s.dirty(),d(h.value),{status:s.value,value:h.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(h=>h.status==="aborted"?INVALID:(h.status==="dirty"&&s.dirty(),d(h.value).then(()=>({status:s.value,value:h.value}))))}if(o.type==="transform")if(a.common.async===!1){const d=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!isValid(d))return d;const h=o.transform(d.value,c);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:h}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(d=>isValid(d)?Promise.resolve(o.transform(d.value,c)).then(h=>({status:s.value,value:h})):d);util.assertNever(o)}}ZodEffects.create=(i,e,s)=>new ZodEffects({schema:i,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(s)});ZodEffects.createWithPreprocess=(i,e,s)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:i},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(s)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(i,e)=>new ZodOptional({innerType:i,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(i,e)=>new ZodNullable({innerType:i,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:s}=this._processInputParams(e);let a=s.data;return s.parsedType===ZodParsedType.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}ZodDefault.create=(i,e)=>new ZodDefault({innerType:i,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:s}=this._processInputParams(e),a={...s,common:{...s.common,issues:[]}},o=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return isAsync(o)?o.then(c=>({status:"valid",value:c.status==="valid"?c.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ZodError(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(i,e)=>new ZodCatch({innerType:i,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:a.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=i=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(i)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:s}=this._processInputParams(e),a=s.data;return this._def.type._parse({data:a,path:s.path,parent:s})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const c=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return c.status==="aborted"?INVALID:c.status==="dirty"?(s.dirty(),DIRTY(c.value)):this._def.out._parseAsync({data:c.value,path:a.path,parent:a})})();{const o=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?INVALID:o.status==="dirty"?(s.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:a.path,parent:a})}}static create(e,s){return new ZodPipeline({in:e,out:s,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const s=this._def.innerType._parse(e);return isValid(s)&&(s.value=Object.freeze(s.value)),s}}ZodReadonly.create=(i,e)=>new ZodReadonly({innerType:i,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});const custom=(i,e={},s)=>i?ZodAny.create().superRefine((a,o)=>{var c,d;if(!i(a)){const h=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,_=(d=(c=h.fatal)!==null&&c!==void 0?c:s)!==null&&d!==void 0?d:!0,$=typeof h=="string"?{message:h}:h;o.addIssue({code:"custom",...$,fatal:_})}}):ZodAny.create(),late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(i,e={message:`Input not instance of ${i.name}`})=>custom(s=>s instanceof i,e),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:i=>ZodString.create({...i,coerce:!0}),number:i=>ZodNumber.create({...i,coerce:!0}),boolean:i=>ZodBoolean.create({...i,coerce:!0}),bigint:i=>ZodBigInt.create({...i,coerce:!0}),date:i=>ZodDate.create({...i,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),FUNC_ERROR_TEXT$1="Expected a function",NAN=0/0,symbolTag$1="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal$2=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf$2=typeof self=="object"&&self&&self.Object===Object&&self,root$2=freeGlobal$2||freeSelf$2||Function("return this")(),objectProto$2=Object.prototype,objectToString$2=objectProto$2.toString,nativeMax$2=Math.max,nativeMin=Math.min,now=function(){return root$2.Date.now()};function debounce(i,e,s){var a,o,c,d,h,_,$=0,rt=!1,lt=!1,ct=!0;if(typeof i!="function")throw new TypeError(FUNC_ERROR_TEXT$1);e=toNumber(e)||0,isObject$3(s)&&(rt=!!s.leading,lt="maxWait"in s,c=lt?nativeMax$2(toNumber(s.maxWait)||0,e):c,ct="trailing"in s?!!s.trailing:ct);function bt(ft){var st=a,ht=o;return a=o=void 0,$=ft,d=i.apply(ht,st),d}function Ot(ft){return $=ft,h=setTimeout(at,e),rt?bt(ft):d}function dt(ft){var st=ft-_,ht=ft-$,ot=e-st;return lt?nativeMin(ot,c-ht):ot}function vt(ft){var st=ft-_,ht=ft-$;return _===void 0||st>=e||st<0||lt&&ht>=c}function at(){var ft=now();if(vt(ft))return et(ft);h=setTimeout(at,dt(ft))}function et(ft){return h=void 0,ct&&a?bt(ft):(a=o=void 0,d)}function j(){h!==void 0&&clearTimeout(h),$=0,a=_=o=h=void 0}function St(){return h===void 0?d:et(now())}function mt(){var ft=now(),st=vt(ft);if(a=arguments,o=this,_=ft,st){if(h===void 0)return Ot(_);if(lt)return h=setTimeout(at,e),bt(_)}return h===void 0&&(h=setTimeout(at,e)),d}return mt.cancel=j,mt.flush=St,mt}function throttle(i,e,s){var a=!0,o=!0;if(typeof i!="function")throw new TypeError(FUNC_ERROR_TEXT$1);return isObject$3(s)&&(a="leading"in s?!!s.leading:a,o="trailing"in s?!!s.trailing:o),debounce(i,e,{leading:a,maxWait:e,trailing:o})}function isObject$3(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function isObjectLike$2(i){return!!i&&typeof i=="object"}function isSymbol$2(i){return typeof i=="symbol"||isObjectLike$2(i)&&objectToString$2.call(i)==symbolTag$1}function toNumber(i){if(typeof i=="number")return i;if(isSymbol$2(i))return NAN;if(isObject$3(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=isObject$3(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=i.replace(reTrim,"");var s=reIsBinary.test(i);return s||reIsOctal.test(i)?freeParseInt(i.slice(2),s?2:8):reIsBadHex.test(i)?NAN:+i}var lodash_throttle=throttle;const throttle$1=getDefaultExportFromCjs(lodash_throttle);function difference(i,e){const s=new Set(e);return i.filter(a=>!s.has(a))}function union(i,e){return Array.from(new Set([...i,...e]))}const OPTYPES={insert:"INSERT",update:"UPDATE",delete:"DELETE",upsert:"UPSERT"},stringToOpType=i=>{switch(i){case"INSERT":return OPTYPES.insert;case"UPDATE":return OPTYPES.update;case"DELETE":return OPTYPES.delete}throw new Error(`unexpected opType string: ${i}`)},localEntryToChanges=(i,e,s)=>{const a=s[i.tablename],o={namespace:i.namespace,tablename:i.tablename,primaryKeyCols:deserialiseRow(i.primaryKey,a),optype:i.optype===OPTYPES.delete?OPTYPES.delete:OPTYPES.upsert,changes:{},tag:i.optype==OPTYPES.delete?null:e,clearTags:decodeTags(i.clearTags)},c=i.oldRow?deserialiseRow(i.oldRow,a):{},d=i.newRow?deserialiseRow(i.newRow,a):{},h=new Date(i.timestamp).getTime();for(const[_,$]of Object.entries(d))c[_]!==$&&(o.changes[_]={value:$,timestamp:h});return o},remoteEntryToChanges=(i,e)=>{const s=e[i.tablename],a=i.oldRow?deserialiseRow(i.oldRow,s):{},o=i.newRow?deserialiseRow(i.newRow,s):{},c={namespace:i.namespace,tablename:i.tablename,primaryKeyCols:deserialiseRow(i.primaryKey,s),optype:i.optype===OPTYPES.delete?OPTYPES.delete:OPTYPES.upsert,changes:{},fullRow:i.optype===OPTYPES.delete?a:o,tags:decodeTags(i.clearTags)},d=new Date(i.timestamp).getTime();for(const[h,_]of Object.entries(o))a[h]!==_&&(c.changes[h]={value:_,timestamp:d});return c},localOperationsToTableChanges=(i,e,s)=>{const a={};return i.reduce((o,c)=>{const d=localEntryToChanges(c,e(new Date(c.timestamp)),s),h=primaryKeyToStr(d.primaryKeyCols),$=new QualifiedTablename(d.namespace,d.tablename).toString();if(o[$]===void 0&&(o[$]={}),o[$][h]===void 0)o[$][h]=[c.timestamp,d];else{const[rt,lt]=o[$][h];lt.optype=d.optype;for(const[ct,bt]of Object.entries(d.changes))lt.changes[ct]=bt;d.optype=="DELETE"?lt.tag=null:lt.tag=e(new Date(c.timestamp)),rt==c.timestamp?lt.clearTags=d.clearTags:lt.clearTags=union(d.clearTags,lt.clearTags)}return o},a)},remoteOperationsToTableChanges=(i,e)=>{const s={};return i.reduce((a,o)=>{const c=remoteEntryToChanges(o,e),d=primaryKeyToStr(c.primaryKeyCols),_=new QualifiedTablename(c.namespace,c.tablename).toString();if(a[_]===void 0&&(a[_]={}),a[_][d]===void 0)a[_][d]=c;else{const $=a[_][d];$.optype=c.optype;for(const[rt,lt]of Object.entries(c.changes))$.changes[rt]=lt,$.fullRow[rt]=lt.value}return a},s)};function serialiseRow(i){return JSON.stringify(i,(e,s)=>{if(typeof s=="number"){if(Number.isNaN(s))return"NaN";if(s===1/0)return"Inf";if(s===-1/0)return"-Inf"}return typeof s=="bigint"?s.toString():s})}function deserialiseRow(i,e){return JSON.parse(i,(s,a)=>{var c,d;const o=(d=(c=e.columns.find(h=>h.name===s))==null?void 0:c.type)==null?void 0:d.toUpperCase();return(o==="FLOAT4"||o==="FLOAT8"||o==="REAL")&&typeof a=="string"?a==="NaN"?NaN:a==="Inf"?1/0:a==="-Inf"?-1/0:Number(a):o==="INT8"||o==="BIGINT"?BigInt(a):a})}const fromTransaction=(i,e)=>i.changes.map(s=>{const a=s.record?s.record:s.oldRecord,o=primaryKeyToStr(Object.fromEntries(e[`${s.relation.table}`].columns.filter(c=>c.primaryKey).map(c=>[c.name,a[c.name]])));return{namespace:"main",tablename:s.relation.table,optype:stringToOpType(s.type),newRow:serialiseRow(s.record),oldRow:serialiseRow(s.oldRecord),primaryKey:o,rowid:-1,timestamp:new Date(i.commit_timestamp.toNumber()).toISOString(),clearTags:encodeTags(s.tags)}}),toTransactions=(i,e)=>{if(i.length==0)return[];const s=o=>Long.UZERO.add(new Date(o).getTime()),a={commit_timestamp:s(i[0].timestamp),lsn:numberToBytes(i[0].rowid),changes:[]};return i.reduce((o,c)=>{let d=o[o.length-1];if(s(c.timestamp).notEquals(d.commit_timestamp)){const $={commit_timestamp:s(c.timestamp),lsn:numberToBytes(c.rowid),changes:[]};o.push($),d=$}const _=opLogEntryToChange(c,e);return d.changes.push(_),d.lsn=numberToBytes(c.rowid),o},[a])},getShadowPrimaryKey=i=>"primaryKey"in i?i.primaryKey:primaryKeyToStr(i.primaryKeyCols),encodeTags=i=>JSON.stringify(i),decodeTags=i=>JSON.parse(i),opLogEntryToChange=(i,e)=>{const s=e[`${i.tablename}`];let a,o;if(i.newRow!=null&&(a=deserialiseRow(i.newRow,s)),i.oldRow!=null&&(o=deserialiseRow(i.oldRow,s)),typeof s>"u")throw new Error(`Could not find relation for ${i.tablename}`);return{type:i.optype,relation:s,record:a,oldRecord:o,tags:decodeTags(i.clearTags)}},primaryKeyToStr=i=>{const s=Object.keys(i).sort().reduce((a,o)=>(a[o]=i[o],a),{});return serialiseRow(s)},generateTag=(i,e)=>{const s=typeof e=="number"?e:e.getTime();return i+"@"+s.toString()};function dedent(i){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];var a=Array.from(typeof i=="string"?[i]:i);a[a.length-1]=a[a.length-1].replace(/\r?\n([\t ]*)$/,"");var o=a.reduce(function(h,_){var $=_.match(/\n([\t ]+|(?!\s).)/g);return $?h.concat($.map(function(rt){var lt,ct;return(ct=(lt=rt.match(/[\t ]/g))===null||lt===void 0?void 0:lt.length)!==null&&ct!==void 0?ct:0})):h},[]);if(o.length){var c=new RegExp(`
[	 ]{`+Math.min.apply(Math,o)+"}","g");a=a.map(function(h){return h.replace(c,`
`)})}a[0]=a[0].replace(/^\r?\n/,"");var d=a[0];return e.forEach(function(h,_){var $=d.match(/(?:^|\n)( *)$/),rt=$?$[1]:"",lt=h;typeof h=="string"&&h.includes(`
`)&&(lt=String(h).split(`
`).map(function(ct,bt){return bt===0?ct:""+rt+ct}).join(`
`)),d+=lt+a[_+1]}),d}function mkStatement(i){return{sql:i}}function generateOplogTriggers(i,e){const{tableName:s,namespace:a,columns:o,primary:c,columnTypes:d}=e,h=joinColsForJSON(c,d,"new"),_=joinColsForJSON(c,d,"old"),$=joinColsForJSON(o,d,"new"),rt=joinColsForJSON(o,d,"old");return[dedent`
    -- Toggles for turning the triggers on and off
    INSERT OR IGNORE INTO _electric_trigger_settings(tablename,flag) VALUES ('${i}', 1);
    `,dedent`
    /* Triggers for table ${s} */
  
    -- ensures primary key is immutable
    DROP TRIGGER IF EXISTS update_ensure_${a}_${s}_primarykey;
    `,dedent`
    CREATE TRIGGER update_ensure_${a}_${s}_primarykey
      BEFORE UPDATE ON "${a}"."${s}"
    BEGIN
      SELECT
        CASE
          ${c.map(lt=>`WHEN old."${lt}" != new."${lt}" THEN
		RAISE (ABORT, 'cannot change the value of column ${lt} as it belongs to the primary key')`).join(`
`)}
        END;
    END;
    `,dedent`
    -- Triggers that add INSERT, UPDATE, DELETE operation to the _opslog table
    DROP TRIGGER IF EXISTS insert_${a}_${s}_into_oplog;
    `,dedent`
    CREATE TRIGGER insert_${a}_${s}_into_oplog
       AFTER INSERT ON "${a}"."${s}"
       WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == '${i}')
    BEGIN
      INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)
      VALUES ('${a}', '${s}', 'INSERT', json_object(${h}), json_object(${$}), NULL, NULL);
    END;
    `,dedent`
    DROP TRIGGER IF EXISTS update_${a}_${s}_into_oplog;
    `,dedent`
    CREATE TRIGGER update_${a}_${s}_into_oplog
       AFTER UPDATE ON "${a}"."${s}"
       WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == '${i}')
    BEGIN
      INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)
      VALUES ('${a}', '${s}', 'UPDATE', json_object(${h}), json_object(${$}), json_object(${rt}), NULL);
    END;
    `,dedent`
    DROP TRIGGER IF EXISTS delete_${a}_${s}_into_oplog;
    `,dedent`
    CREATE TRIGGER delete_${a}_${s}_into_oplog
       AFTER DELETE ON "${a}"."${s}"
       WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == '${i}')
    BEGIN
      INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)
      VALUES ('${a}', '${s}', 'DELETE', json_object(${_}), NULL, json_object(${rt}), NULL);
    END;
    `].map(mkStatement)}function generateCompensationTriggers(i){const{tableName:e,namespace:s,foreignKeys:a,columnTypes:o}=i,c=h=>{const{childKey:_}=h,$="main",rt=h.table,lt=h.parentKey,ct=joinColsForJSON([lt],{[lt]:o[h.childKey]});return[dedent`-- Triggers for foreign key compensations
      DROP TRIGGER IF EXISTS compensation_insert_${s}_${e}_${_}_into_oplog;`,dedent`
      CREATE TRIGGER compensation_insert_${s}_${e}_${_}_into_oplog
        AFTER INSERT ON "${s}"."${e}"
        WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == '${$}.${rt}') AND
             1 == (SELECT value from _electric_meta WHERE key == 'compensations')
      BEGIN
        INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)
        SELECT '${$}', '${rt}', 'COMPENSATION', json_object(${ct}), json_object(${ct}), NULL, NULL
        FROM "${$}"."${rt}" WHERE "${h.parentKey}" = new."${h.childKey}";
      END;
      `,dedent`DROP TRIGGER IF EXISTS compensation_update_${s}_${e}_${h.childKey}_into_oplog;`,dedent`
      CREATE TRIGGER compensation_update_${s}_${e}_${h.childKey}_into_oplog
         AFTER UPDATE ON "${s}"."${e}"
         WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == '${$}.${rt}') AND
              1 == (SELECT value from _electric_meta WHERE key == 'compensations')
      BEGIN
        INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)
        SELECT '${$}', '${rt}', 'COMPENSATION', json_object(${ct}), json_object(${ct}), NULL, NULL
        FROM "${$}"."${rt}" WHERE "${h.parentKey}" = new."${h.childKey}";
      END;
      `].map(mkStatement)};return a.map(h=>c(h)).flat()}function generateTableTriggers(i,e){const s=generateOplogTriggers(i,e),a=generateCompensationTriggers(e);return s.concat(a)}function joinColsForJSON(i,e,s){const a=(o,c)=>{const d=e[o],h=d.sqliteType,_=d.pgType;return h==="REAL"||_==="INT8"||_==="BIGINT"?`cast(${c} as TEXT)`:c};return typeof s>"u"?i.sort().map(o=>`'${o}', ${a(o,`"${o}"`)}`).join(", "):i.sort().map(o=>`'${o}', ${a(o,`${s}."${o}"`)}`).join(", ")}function prepareInsertBatchedStatements(i,e,s,a){const o=[],c=e.length,d=s.length;let h=0;const _=" ("+"?, ".repeat(c).slice(0,-2)+"),",$=(a-a%c)/c;for(;h<d;){const rt=Math.min(d-h,$),lt=i+_.repeat(rt).slice(0,-1),ct=s.slice(h,h+rt).flatMap(bt=>e.map(Ot=>bt[Ot]));h+=rt,o.push({sql:lt,args:ct})}return o}function mergeEntries(i,e,s,a,o){const c=localOperationsToTableChanges(e,h=>generateTag(i,h),o),d=remoteOperationsToTableChanges(a,o);for(const[h,_]of Object.entries(d)){const $=c[h];if($!==void 0)for(const[rt,lt]of Object.entries(_)){const ct=$[rt];if(ct===void 0)continue;const[bt,Ot]=ct,dt=mergeChangesLastWriteWins(i,Ot.changes,s,lt.changes,lt.fullRow);let vt;const at=mergeOpTags(Ot,lt);at.length==0?vt=OPTYPES.delete:vt=OPTYPES.upsert,Object.assign(lt,{changes:dt,optype:vt,tags:at})}}return d}const mergeChangesLastWriteWins=(i,e,s,a,o)=>{const c=Object.keys(e).concat(Object.keys(a)),d=Array.from(new Set(c)),h={};return d.reduce((_,$)=>{const rt=e[$],lt=a[$];return rt===void 0&&lt===void 0||(rt===void 0?_[$]=lt:lt===void 0?_[$]=rt:rt.timestamp===lt.timestamp?_[$]=i>s?rt:lt:_[$]=rt.timestamp>lt.timestamp?rt:lt,o[$]=_[$].value),_},h)};function mergeOpTags(i,e){return calculateTags(i.tag,e.tags,i.clearTags)}function calculateTags(i,e,s){return i==null?difference(e,s):union([i],difference(e,s))}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function i(e,s,a){return Function.prototype.apply.call(e,s,a)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(i){console&&console.warn&&console.warn(i)}var NumberIsNaN=Number.isNaN||function i(e){return e!==e};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(i){if(typeof i!="number"||i<0||NumberIsNaN(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");defaultMaxListeners=i}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function i(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(i){return i._maxListeners===void 0?EventEmitter.defaultMaxListeners:i._maxListeners}EventEmitter.prototype.getMaxListeners=function i(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function i(e){for(var s=[],a=1;a<arguments.length;a++)s.push(arguments[a]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var d;if(s.length>0&&(d=s[0]),d instanceof Error)throw d;var h=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw h.context=d,h}var _=c[e];if(_===void 0)return!1;if(typeof _=="function")ReflectApply(_,this,s);else for(var $=_.length,rt=arrayClone(_,$),a=0;a<$;++a)ReflectApply(rt[a],this,s);return!0};function _addListener(i,e,s,a){var o,c,d;if(checkListener(s),c=i._events,c===void 0?(c=i._events=Object.create(null),i._eventsCount=0):(c.newListener!==void 0&&(i.emit("newListener",e,s.listener?s.listener:s),c=i._events),d=c[e]),d===void 0)d=c[e]=s,++i._eventsCount;else if(typeof d=="function"?d=c[e]=a?[s,d]:[d,s]:a?d.unshift(s):d.push(s),o=_getMaxListeners(i),o>0&&d.length>o&&!d.warned){d.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=i,h.type=e,h.count=d.length,ProcessEmitWarning(h)}return i}EventEmitter.prototype.addListener=function i(e,s){return _addListener(this,e,s,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function i(e,s){return _addListener(this,e,s,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(i,e,s){var a={fired:!1,wrapFn:void 0,target:i,type:e,listener:s},o=onceWrapper.bind(a);return o.listener=s,a.wrapFn=o,o}EventEmitter.prototype.once=function i(e,s){return checkListener(s),this.on(e,_onceWrap(this,e,s)),this};EventEmitter.prototype.prependOnceListener=function i(e,s){return checkListener(s),this.prependListener(e,_onceWrap(this,e,s)),this};EventEmitter.prototype.removeListener=function i(e,s){var a,o,c,d,h;if(checkListener(s),o=this._events,o===void 0)return this;if(a=o[e],a===void 0)return this;if(a===s||a.listener===s)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,a.listener||s));else if(typeof a!="function"){for(c=-1,d=a.length-1;d>=0;d--)if(a[d]===s||a[d].listener===s){h=a[d].listener,c=d;break}if(c<0)return this;c===0?a.shift():spliceOne(a,c),a.length===1&&(o[e]=a[0]),o.removeListener!==void 0&&this.emit("removeListener",e,h||s)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function i(e){var s,a,o;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[e]),this;if(arguments.length===0){var c=Object.keys(a),d;for(o=0;o<c.length;++o)d=c[o],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(s=a[e],typeof s=="function")this.removeListener(e,s);else if(s!==void 0)for(o=s.length-1;o>=0;o--)this.removeListener(e,s[o]);return this};function _listeners(i,e,s){var a=i._events;if(a===void 0)return[];var o=a[e];return o===void 0?[]:typeof o=="function"?s?[o.listener||o]:[o]:s?unwrapListeners(o):arrayClone(o,o.length)}EventEmitter.prototype.listeners=function i(e){return _listeners(this,e,!0)};EventEmitter.prototype.rawListeners=function i(e){return _listeners(this,e,!1)};EventEmitter.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):listenerCount.call(i,e)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(i){var e=this._events;if(e!==void 0){var s=e[i];if(typeof s=="function")return 1;if(s!==void 0)return s.length}return 0}EventEmitter.prototype.eventNames=function i(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(i,e){for(var s=new Array(e),a=0;a<e;++a)s[a]=i[a];return s}function spliceOne(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function unwrapListeners(i){for(var e=new Array(i.length),s=0;s<e.length;++s)e[s]=i[s].listener||i[s];return e}function once(i,e){return new Promise(function(s,a){function o(d){i.removeListener(e,c),a(d)}function c(){typeof i.removeListener=="function"&&i.removeListener("error",o),s([].slice.call(arguments))}eventTargetAgnosticAddListener(i,e,c,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(i,o,{once:!0})})}function addErrorHandlerIfEventEmitter(i,e,s){typeof i.on=="function"&&eventTargetAgnosticAddListener(i,"error",e,s)}function eventTargetAgnosticAddListener(i,e,s,a){if(typeof i.on=="function")a.once?i.once(e,s):i.on(e,s);else if(typeof i.addEventListener=="function")i.addEventListener(e,function o(c){a.once&&i.removeEventListener(e,o),s(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var eventsExports=events.exports;const EventEmitter$1=getDefaultExportFromCjs(eventsExports);class InMemorySubscriptionsManager extends EventEmitter$1{constructor(s){super();Zt(this,"inFlight",{});Zt(this,"fulfilledSubscriptions",{});Zt(this,"shapeRequestHashmap",new Map);Zt(this,"gcHandler");this.gcHandler=s}subscriptionRequested(s,a){if(this.inFlight[s]||this.fulfilledSubscriptions[s])throw new SatelliteError(SatelliteErrorCode.SUBSCRIPTION_ALREADY_EXISTS,`a subscription with id ${s} already exists`);const o=computeRequestsHash(a);if(this.shapeRequestHashmap.has(o))throw new SatelliteError(SatelliteErrorCode.SUBSCRIPTION_ALREADY_EXISTS,'Subscription with exactly the same shape requests exists. Calling code should use "getDuplicatingSubscription" to avoid establishing same subscription twice');this.inFlight[s]=a,this.shapeRequestHashmap.set(o,s)}subscriptionCancelled(s){delete this.inFlight[s],this.removeSubscriptionFromHash(s)}subscriptionDelivered(s){const{subscriptionId:a,shapeReqToUuid:o}=s;if(!this.inFlight[a])return;const c=this.inFlight[a];delete this.inFlight[a];for(const d of c){const h={uuid:o[d.requestId],definition:d.definition};this.fulfilledSubscriptions[a]=this.fulfilledSubscriptions[a]??[],this.fulfilledSubscriptions[a].push(h)}}shapesForActiveSubscription(s){return this.fulfilledSubscriptions[s]}getFulfilledSubscriptions(){return Object.keys(this.fulfilledSubscriptions)}getDuplicatingSubscription(s){const a=this.shapeRequestHashmap.get(computeClientDefsHash(s));return a?this.inFlight[a]?{inFlight:a}:{fulfilled:a}:null}async unsubscribe(s){const a=this.shapesForActiveSubscription(s);a&&(this.gcHandler&&await this.gcHandler(a),delete this.inFlight[s],delete this.fulfilledSubscriptions[s],this.removeSubscriptionFromHash(s))}async unsubscribeAll(){const s=Object.keys(this.fulfilledSubscriptions);for(const a of s)await this.unsubscribe(a);return s}serialize(){return JSON.stringify(this.fulfilledSubscriptions)}setState(s){this.inFlight={},this.fulfilledSubscriptions=JSON.parse(s),this.shapeRequestHashmap.clear();for(const[a,o]of Object.entries(this.fulfilledSubscriptions))this.shapeRequestHashmap.set(computeRequestsHash(o),a)}removeSubscriptionFromHash(s){for(const[a,o]of this.shapeRequestHashmap)if(o===s){this.shapeRequestHashmap.delete(a);break}}}function computeRequestsHash(i){return computeClientDefsHash(i.map(e=>e.definition))}function computeClientDefsHash(i){return hash(i)}var backoff={},options={},__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(i){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},__assign.apply(this,arguments)};Object.defineProperty(options,"__esModule",{value:!0});var defaultOptions={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function getSanitizedOptions(i){var e=__assign(__assign({},defaultOptions),i);return e.numOfAttempts<1&&(e.numOfAttempts=1),e}options.getSanitizedOptions=getSanitizedOptions;var delay_factory={},skipFirst_delay={},delay_base={},jitter_factory={},full_jitter={};Object.defineProperty(full_jitter,"__esModule",{value:!0});function fullJitter(i){var e=Math.random()*i;return Math.round(e)}full_jitter.fullJitter=fullJitter;var no_jitter={};Object.defineProperty(no_jitter,"__esModule",{value:!0});function noJitter(i){return i}no_jitter.noJitter=noJitter;Object.defineProperty(jitter_factory,"__esModule",{value:!0});var full_jitter_1=full_jitter,no_jitter_1=no_jitter;function JitterFactory(i){switch(i.jitter){case"full":return full_jitter_1.fullJitter;case"none":default:return no_jitter_1.noJitter}}jitter_factory.JitterFactory=JitterFactory;Object.defineProperty(delay_base,"__esModule",{value:!0});var jitter_factory_1=jitter_factory,Delay=function(){function i(e){this.options=e,this.attempt=0}return i.prototype.apply=function(){var e=this;return new Promise(function(s){return setTimeout(s,e.jitteredDelay)})},i.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(i.prototype,"jitteredDelay",{get:function(){var e=jitter_factory_1.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"delay",{get:function(){var e=this.options.startingDelay,s=this.options.timeMultiple,a=this.numOfDelayedAttempts,o=e*Math.pow(s,a);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),i}();delay_base.Delay=Delay;var __extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var i=function(e,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var c in o)o.hasOwnProperty(c)&&(a[c]=o[c])},i(e,s)};return function(e,s){i(e,s);function a(){this.constructor=e}e.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}(),__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(i,e,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function h(rt){try{$(a.next(rt))}catch(lt){d(lt)}}function _(rt){try{$(a.throw(rt))}catch(lt){d(lt)}}function $(rt){rt.done?c(rt.value):o(rt.value).then(h,_)}$((a=a.apply(i,e||[])).next())})},__generator$1=commonjsGlobal&&commonjsGlobal.__generator||function(i,e){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},a,o,c,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h($){return function(rt){return _([$,rt])}}function _($){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(c=$[0]&2?o.return:$[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,$[1])).done)return c;switch(o=0,c&&($=[$[0]&2,c.value]),$[0]){case 0:case 1:c=$;break;case 4:return s.label++,{value:$[1],done:!1};case 5:s.label++,o=$[1],$=[0];continue;case 7:$=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&($[0]===6||$[0]===2)){s=0;continue}if($[0]===3&&(!c||$[1]>c[0]&&$[1]<c[3])){s.label=$[1];break}if($[0]===6&&s.label<c[1]){s.label=c[1],c=$;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push($);break}c[2]&&s.ops.pop(),s.trys.pop();continue}$=e.call(i,s)}catch(rt){$=[6,rt],o=0}finally{a=c=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}};Object.defineProperty(skipFirst_delay,"__esModule",{value:!0});var delay_base_1$1=delay_base,SkipFirstDelay=function(i){__extends$1(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.apply=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(s){return[2,this.isFirstAttempt?!0:i.prototype.apply.call(this)]})})},Object.defineProperty(e.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),e}(delay_base_1$1.Delay);skipFirst_delay.SkipFirstDelay=SkipFirstDelay;var always_delay={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var i=function(e,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var c in o)o.hasOwnProperty(c)&&(a[c]=o[c])},i(e,s)};return function(e,s){i(e,s);function a(){this.constructor=e}e.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(always_delay,"__esModule",{value:!0});var delay_base_1=delay_base,AlwaysDelay=function(i){__extends(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(delay_base_1.Delay);always_delay.AlwaysDelay=AlwaysDelay;Object.defineProperty(delay_factory,"__esModule",{value:!0});var skip_first_delay_1=skipFirst_delay,always_delay_1=always_delay;function DelayFactory(i,e){var s=initDelayClass(i);return s.setAttemptNumber(e),s}delay_factory.DelayFactory=DelayFactory;function initDelayClass(i){return i.delayFirstAttempt?new always_delay_1.AlwaysDelay(i):new skip_first_delay_1.SkipFirstDelay(i)}var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(i,e,s,a){function o(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function h(rt){try{$(a.next(rt))}catch(lt){d(lt)}}function _(rt){try{$(a.throw(rt))}catch(lt){d(lt)}}function $(rt){rt.done?c(rt.value):o(rt.value).then(h,_)}$((a=a.apply(i,e||[])).next())})},__generator=commonjsGlobal&&commonjsGlobal.__generator||function(i,e){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},a,o,c,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h($){return function(rt){return _([$,rt])}}function _($){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(c=$[0]&2?o.return:$[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,$[1])).done)return c;switch(o=0,c&&($=[$[0]&2,c.value]),$[0]){case 0:case 1:c=$;break;case 4:return s.label++,{value:$[1],done:!1};case 5:s.label++,o=$[1],$=[0];continue;case 7:$=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&($[0]===6||$[0]===2)){s=0;continue}if($[0]===3&&(!c||$[1]>c[0]&&$[1]<c[3])){s.label=$[1];break}if($[0]===6&&s.label<c[1]){s.label=c[1],c=$;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push($);break}c[2]&&s.ops.pop(),s.trys.pop();continue}$=e.call(i,s)}catch(rt){$=[6,rt],o=0}finally{a=c=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}};Object.defineProperty(backoff,"__esModule",{value:!0});var options_1=options,delay_factory_1=delay_factory;function backOff(i,e){return e===void 0&&(e={}),__awaiter(this,void 0,void 0,function(){var s,a;return __generator(this,function(o){switch(o.label){case 0:return s=options_1.getSanitizedOptions(e),a=new BackOff(i,s),[4,a.execute()];case 1:return[2,o.sent()]}})})}var backOff_1=backoff.backOff=backOff,BackOff=function(){function i(e,s){this.request=e,this.options=s,this.attemptNumber=0}return i.prototype.execute=function(){return __awaiter(this,void 0,void 0,function(){var e,s;return __generator(this,function(a){switch(a.label){case 0:if(this.attemptLimitReached)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return a.sent(),[4,this.request()];case 3:return[2,a.sent()];case 4:return e=a.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(s=a.sent(),!s||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(i.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),i.prototype.applyDelay=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(s){switch(s.label){case 0:return e=delay_factory_1.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return s.sent(),[2]}})})},i}();const fatalErrorDescription="Client can't connect with the server after a fatal error. This can happen due to divergence between local client and server. Use developer tools to clear the local database, or delete the database file. We're working on tools to allow recovering the state of the local database.",throwErrors=[SatelliteErrorCode.INTERNAL,SatelliteErrorCode.FATAL_ERROR],fatalErrors=[SatelliteErrorCode.INVALID_REQUEST,SatelliteErrorCode.UNKNOWN_SCHEMA_VSN,SatelliteErrorCode.AUTH_REQUIRED],outOfSyncErrors=[SatelliteErrorCode.INVALID_POSITION,SatelliteErrorCode.BEHIND_WINDOW,SatelliteErrorCode.SUBSCRIPTION_NOT_FOUND];function isThrowable(i){return throwErrors.includes(i.code)}function isFatal(i){return fatalErrors.includes(i.code)}function isOutOfSyncError(i){return outOfSyncErrors.includes(i.code)}function logFatalErrorDescription(){Log.error(fatalErrorDescription)}function wrapFatalError(i){return logFatalErrorDescription(),new SatelliteError(SatelliteErrorCode.FATAL_ERROR,`Fatal error: ${i.message}. Check log for more information`)}async function inferRelationsFromSQLite(i,e){const s=await _getLocalTableNames(i,e),a={};let o=0;const c="public";for(const d of s){const h=d.name,_="SELECT * FROM pragma_table_info(?)",$=[h],rt=await i.query({sql:_,args:$});if(rt.length==0)continue;const lt={id:o++,schema:c,table:h,tableType:SatRelation_RelationType.TABLE,columns:[]};for(const ct of rt)lt.columns.push({name:ct.name.toString(),type:ct.type.toString(),isNullable:!ct.notnull.valueOf(),primaryKey:!!ct.pk.valueOf()});a[`${h}`]=lt}return a}async function _getLocalTableNames(i,e){const s=[e.metaTable.tablename.toString(),e.migrationsTable.tablename.toString(),e.oplogTable.tablename.toString(),e.triggersTable.tablename.toString(),e.shadowTable.tablename.toString(),"sqlite_schema","sqlite_sequence","sqlite_temp_schema"],a=`
      SELECT name FROM sqlite_master
        WHERE type = 'table'
          AND name NOT IN (${s.map(()=>"?").join(",")})
    `;return await i.query({sql:a,args:s})}const connectRetryHandler=i=>!(i instanceof SatelliteError)||isThrowable(i)||isFatal(i)?(Log.debug(`connectAndStartRetryHandler was cancelled: ${i.message}`),!1):!0;class SatelliteProcess{constructor(e,s,a,o,c,d){Zt(this,"dbName");Zt(this,"adapter");Zt(this,"migrator");Zt(this,"notifier");Zt(this,"client");Zt(this,"opts");Zt(this,"_authState");Zt(this,"_unsubscribeFromAuthState");Zt(this,"connectivityState");Zt(this,"_unsubscribeFromConnectivityChanges");Zt(this,"_pollingInterval");Zt(this,"_unsubscribeFromPotentialDataChanges");Zt(this,"_throttledSnapshot");Zt(this,"_lsn");Zt(this,"relations");Zt(this,"previousShapeSubscriptions");Zt(this,"subscriptions");Zt(this,"subscriptionNotifiers");Zt(this,"subscriptionIdGenerator");Zt(this,"shapeRequestIdGenerator");Zt(this,"maxSqlParameters",999);Zt(this,"snapshotMutex",new Mutex);Zt(this,"performingSnapshot",!1);Zt(this,"_connectRetryHandler");Zt(this,"initializing");this.dbName=e,this.adapter=s,this.migrator=a,this.notifier=o,this.client=c,this.opts=d,this.relations={},this.previousShapeSubscriptions=[],this.subscriptions=new InMemorySubscriptionsManager(this._garbageCollectShapeHandler.bind(this)),this._throttledSnapshot=throttle$1(this.mutexSnapshot.bind(this),d.minSnapshotWindow,{leading:!0,trailing:!0}),this.subscriptionNotifiers={},this.subscriptionIdGenerator=()=>uuid(),this.shapeRequestIdGenerator=this.subscriptionIdGenerator,this._connectRetryHandler=connectRetryHandler,this.setClientListeners()}async mutexSnapshot(){const e=await this.snapshotMutex.acquire();try{return await this._performSnapshot()}finally{e()}}async start(e){if(this.opts.debug&&await this.logSQLiteVersion(),await this.migrator.up(),!await this._verifyTableStructure())throw new Error("Invalid database schema.");const a=e.clientId&&e.clientId!==""?e.clientId:await this._getClientId();await this._setAuthState({clientId:a,token:e.token}),Object.entries({_authStateSubscription:this._unsubscribeFromAuthState,_connectivityChangeSubscription:this._unsubscribeFromConnectivityChanges,_potentialDataChangeSubscription:this._unsubscribeFromPotentialDataChanges}).forEach(([rt,lt])=>{if(lt!==void 0)throw new Error(`Starting satellite process with an existing
           \`${rt}\`.
           This means there is a notifier subscription leak.`)});const c=this._updateAuthState.bind(this);this._unsubscribeFromAuthState=this.notifier.subscribeToAuthStateChanges(c);const d=({connectivityState:rt})=>{this._handleConnectivityStateChange(rt)};this._unsubscribeFromConnectivityChanges=this.notifier.subscribeToConnectivityStateChanges(d),this._unsubscribeFromPotentialDataChanges=this.notifier.subscribeToPotentialDataChanges(this._throttledSnapshot),this._pollingInterval=setInterval(this._throttledSnapshot,this.opts.pollingInterval),setTimeout(this._throttledSnapshot,0),this.relations=await this._getLocalRelations(),this.checkMaxSqlParameters();const h=await this._getMeta("lsn");h&&h.length>0?(this._lsn=base64$3.toBytes(h),Log.info(`retrieved lsn ${this._lsn}`)):Log.info("no lsn retrieved from store");const _=await this._getMeta("subscriptions");return _&&this.subscriptions.setState(_),{connectionPromise:this._connectWithBackoff()}}async logSQLiteVersion(){const e=await this.adapter.query({sql:"SELECT sqlite_version() AS version"});Log.info(`Using SQLite version: ${e[0].version}`)}async _setAuthState(e){this._authState=e}async _garbageCollectShapeHandler(e){const s=[],a=[];s.push({sql:"PRAGMA defer_foreign_keys = ON"}),e.flatMap(c=>c.definition.selects).map(c=>(a.push("main."+c.tablename),"main."+c.tablename)).reduce((c,d)=>(c.push({sql:`DELETE FROM ${d}`}),c),s);const o=[...this._disableTriggers(a),...s,...this._enableTriggers(a)];await this.adapter.runInTransaction(...o)}setClientListeners(){this.client.subscribeToError(this._handleClientError.bind(this)),this.client.subscribeToRelations(this._updateRelations.bind(this)),this.client.subscribeToTransactions(this._applyTransaction.bind(this)),this.client.subscribeToOutboundStarted(this._throttledSnapshot.bind(this)),this.client.subscribeToSubscriptionEvents(this._handleSubscriptionData.bind(this),this._handleSubscriptionError.bind(this))}async stop(e){this._throttledSnapshot.cancel(),this._pollingInterval!==void 0&&(clearInterval(this._pollingInterval),this._pollingInterval=void 0),["_unsubscribeFromAuthState","_unsubscribeFromConnectivityChanges","_unsubscribeFromPotentialDataChanges"].forEach(a=>{const o=this[a];o!==void 0&&(o(),this[a]=void 0)}),this._disconnect(),e&&this.client.shutdown()}async subscribe(e){var h;await((h=this.initializing)==null?void 0:h.waitOn());const s=this.subscriptions.getDuplicatingSubscription(e);if(s!==null&&"inFlight"in s)return{synced:this.subscriptionNotifiers[s.inFlight].promise};if(s!==null&&"fulfilled"in s)return{synced:Promise.resolve()};const a=e.map(_=>({requestId:this.shapeRequestIdGenerator(),definition:_})),o=this.subscriptionIdGenerator();this.subscriptions.subscriptionRequested(o,a),this.subscriptionNotifiers[o]=emptyPromise();const c=this.subscriptionNotifiers[o].promise,d=_=>{throw delete this.subscriptionNotifiers[o],this.subscriptions.subscriptionCancelled(o),_};try{const{subscriptionId:_,error:$}=await this.client.subscribe(o,a);return o!==_&&d(new Error(`Expected SubscripeResponse for subscription id: ${o} but got it for another id: ${_}`)),$&&d($),{synced:c}}catch(_){return d(_)}}async unsubscribe(e){throw new SatelliteError(SatelliteErrorCode.INTERNAL,"unsubscribe shape not supported")}async _handleSubscriptionData(e){this.subscriptions.subscriptionDelivered(e),await this._applySubscriptionData(e.data,e.lsn);const{resolve:s}=this.subscriptionNotifiers[e.subscriptionId];delete this.subscriptionNotifiers[e.subscriptionId],s()}async _applySubscriptionData(e,s){var h;const a=[];a.push({sql:"PRAGMA defer_foreign_keys = ON"});const o=new Map,c=[];for(const _ of e){const $=new QualifiedTablename("main",_.relation.table);o.has($.toString())?(h=o.get($.toString()))==null||h.records.push(_.record):o.set($.toString(),{columns:_.relation.columns.map(lt=>lt.name),records:[_.record]});const rt=_.relation.columns.reduce((lt,ct)=>(ct.primaryKey&&(lt[ct.name]=_.record[ct.name]),lt),{});c.push({namespace:"main",tablename:_.relation.table,primaryKey:primaryKeyToStr(rt),tags:encodeTags(_.tags)})}a.push(...this._disableTriggers([...o.keys()]));for(const[_,{columns:$,records:rt}]of o){const lt=`INSERT INTO ${_} (${$.join(", ")}) VALUES `;a.push(...prepareInsertBatchedStatements(lt,$,rt,this.maxSqlParameters))}a.push(...this._enableTriggers([...o.keys()]));const d=`INSERT or REPLACE INTO ${this.opts.shadowTable.toString()} (namespace, tablename, primaryKey, tags) VALUES `;a.push(...prepareInsertBatchedStatements(d,["namespace","tablename","primaryKey","tags"],c,this.maxSqlParameters)),a.push(this._setMetaStatement("subscriptions",this.subscriptions.serialize()),this.updateLsnStmt(s));try{await this.adapter.runInTransaction(...a);const _=e.map($=>({qualifiedTablename:new QualifiedTablename("main",$.relation.table),rowids:[]}));this.notifier.actuallyChanged(this.dbName,_)}catch(_){this._handleSubscriptionError(new SatelliteError(SatelliteErrorCode.INTERNAL,`Error applying subscription data: ${_.message}`))}}async _resetClientState(e){Log.warn("resetting client state"),this._disconnect();const s=this.subscriptions.getFulfilledSubscriptions();if(e!=null&&e.keepSubscribedShapes){const a=s.map(o=>this.subscriptions.shapesForActiveSubscription(o)).filter(o=>o!==void 0).flatMap(o=>o.map(c=>c.definition));this.previousShapeSubscriptions.push(...a)}this._lsn=void 0,await this.subscriptions.unsubscribeAll(),await this.adapter.runInTransaction(this._setMetaStatement("lsn",null),this._setMetaStatement("subscriptions",this.subscriptions.serialize()))}async _handleSubscriptionError(e,s){if(Log.error("encountered a subscription error: "+e.message),await this._resetClientState(),s){const{reject:a}=this.subscriptionNotifiers[s];delete this.subscriptionNotifiers[s],a(e)}}_handleClientError(e){if(this.initializing&&!this.initializing.finished()){if(e.code===SatelliteErrorCode.SOCKET_ERROR){Log.warn(`a socket error occurred while connecting to server: ${e.message}`);return}if(e.code===SatelliteErrorCode.AUTH_REQUIRED){Log.warn(`an authentication error occurred while connecting to server: ${e.message}`);return}throw e}Log.warn(`an error occurred in satellite: ${e.message}`),this._handleOrThrowClientError(e)}_handleOrThrowClientError(e){if(this._disconnect(),isThrowable(e))throw e;if(isFatal(e))throw wrapFatalError(e);return Log.warn("Client disconnected with a non fatal error, reconnecting"),this._connectWithBackoff()}async _handleConnectivityStateChange(e){switch(Log.debug(`Connectivity state changed: ${e}`),e){case"available":return Log.warn("checking network availability and reconnecting"),this._connectWithBackoff();case"disconnected":{this.client.disconnect();return}case"connected":return;default:throw new Error(`unexpected connectivity state: ${e}`)}}async _connectWithBackoff(){var s;(!this.initializing||(s=this.initializing)!=null&&s.finished())&&(this.initializing=getWaiter());const e={...this.opts.connectionBackOffOptions,retry:this._connectRetryHandler};await backOff_1(async()=>{var a;await this._connect(),await this._startReplication(),this._subscribePreviousShapeRequests(),this._notifyConnectivityState("connected"),(a=this.initializing)==null||a.resolve()},e).catch(a=>{var c;const o=connectRetryHandler(a)?new SatelliteError(SatelliteErrorCode.CONNECTION_FAILED_AFTER_RETRY,`Failed to connect to server after exhausting retry policy. Last error thrown by server: ${a.message}`):a;throw this._disconnect(),(c=this.initializing)==null||c.reject(o),o})}_subscribePreviousShapeRequests(){try{this.previousShapeSubscriptions.length>0&&(Log.warn("Subscribing previous shape definitions"),this.subscribe(this.previousShapeSubscriptions.splice(0,this.previousShapeSubscriptions.length)))}catch(e){const s=`Client was unable to subscribe previously subscribed shapes: ${e.message}`;throw new SatelliteError(SatelliteErrorCode.INTERNAL,s)}}async _connect(){if(Log.info("connecting to electric server"),!this._authState)throw new Error("trying to connect before authentication");const e=this._authState;try{await this.client.connect();const s=await this.client.authenticate(e);if(s.error)throw s.error}catch(s){throw Log.debug(`server returned an error while establishing connection: ${s.message}`),s}}_disconnect(){this.client.disconnect(),this._notifyConnectivityState("disconnected")}async _startReplication(){var e;try{const s=await this.migrator.querySchemaVersion(),a=this.subscriptions.getFulfilledSubscriptions(),{error:o}=await this.client.startReplication(this._lsn,s,a.length>0?a:void 0);if(o)throw o}catch(s){if(Log.warn(`Couldn't start replication: ${s.message}`),!(s instanceof SatelliteError))throw new SatelliteError(SatelliteErrorCode.INTERNAL,s.message);if(isOutOfSyncError(s)&&((e=this.opts)!=null&&e.clearOnBehindWindow))throw await this._resetClientState({keepSubscribedShapes:!0}),s;if(isThrowable(s))throw s;if(isFatal(s))throw wrapFatalError(s)}}_notifyConnectivityState(e){this.connectivityState=e,this.notifier.connectivityStateChanged(this.dbName,this.connectivityState)}async _verifyTableStructure(){const e=this.opts.metaTable.tablename,s=this.opts.oplogTable.tablename,a=this.opts.shadowTable.tablename,o=`
      SELECT count(name) as numTables FROM sqlite_master
        WHERE type='table'
        AND name IN (?, ?, ?)
    `,[{numTables:c}]=await this.adapter.query({sql:o,args:[e,s,a]});return c===3}async _updateAuthState({authState:e}){this._authState=e}async _performSnapshot(){if(this.performingSnapshot)throw new SatelliteError(SatelliteErrorCode.INTERNAL,"already performing snapshot");this.performingSnapshot=!0;try{const e=this.opts.oplogTable,s=this.opts.shadowTable,a=new Date,o=this._generateTag(a),c={sql:`
      UPDATE ${e} SET timestamp = ?
      WHERE rowid in (
        SELECT rowid FROM ${e}
            WHERE timestamp is NULL
        ORDER BY rowid ASC
        )
      RETURNING *
      `,args:[a.toISOString()]},d={sql:`
      UPDATE ${e}
      SET clearTags = updates.tags
      FROM (
        SELECT shadow.tags as tags, min(op.rowid) as op_rowid
        FROM ${s} AS shadow
        JOIN ${e} as op
          ON op.namespace = shadow.namespace
            AND op.tablename = shadow.tablename
            AND op.primaryKey = shadow.primaryKey
        WHERE op.timestamp = ?
        GROUP BY op.namespace, op.tablename, op.primaryKey
      ) AS updates
      WHERE updates.op_rowid = ${e}.rowid
      `,args:[a.toISOString()]},h={sql:`
      INSERT OR REPLACE INTO ${s} (namespace, tablename, primaryKey, tags)
      SELECT namespace, tablename, primaryKey, ?
        FROM ${e} AS op
        WHERE timestamp = ?
        GROUP BY namespace, tablename, primaryKey
        HAVING rowid = max(rowid) AND optype != 'DELETE'
      `,args:[encodeTags([o]),a.toISOString()]},_={sql:`
      WITH _to_be_deleted (rowid) AS (
        SELECT shadow.rowid
          FROM ${e} AS op
          INNER JOIN ${s} AS shadow
            ON shadow.namespace = op.namespace AND shadow.tablename = op.tablename AND shadow.primaryKey = op.primaryKey
          WHERE op.timestamp = ?
          GROUP BY op.namespace, op.tablename, op.primaryKey
          HAVING op.rowid = max(op.rowid) AND op.optype = 'DELETE'
      )

      DELETE FROM ${s}
      WHERE rowid IN _to_be_deleted
      `,args:[a.toISOString()]},$=await this.adapter.transaction((rt,lt)=>{rt.query(c,(ct,bt)=>{bt.length>0?ct.run(d,Ot=>Ot.run(h,dt=>dt.run(_,()=>lt(bt)))):lt([])})});if($.length>0&&this._notifyChanges($),this.client.isConnected()){const rt=this.client.getLastSentLsn(),lt=bytesToNumber(rt);await this._getEntries(lt).then(ct=>this._replicateSnapshotChanges(ct))}return a}catch(e){throw Log.error(`error performing snapshot: ${e}`),e}finally{this.performingSnapshot=!1}}async _notifyChanges(e){Log.info("notify changes");const s={},a=(c,d)=>{const h=new QualifiedTablename(d.namespace,d.tablename),_=h.toString();if(_ in c){const $=c[_];$.rowids===void 0&&($.rowids=[]),$.rowids.push(d.rowid)}else c[_]={qualifiedTablename:h,rowids:[d.rowid]};return c},o=Object.values(e.reduce(a,s));this.notifier.actuallyChanged(this.dbName,o)}async _replicateSnapshotChanges(e){if(!this.client.isConnected())return;const s=toTransactions(e,this.relations);for(const a of s)this.client.enqueueTransaction(a)}async _apply(e,s){const a=await this._getEntries(),o=mergeEntries(this._authState.clientId,a,s,e,this.relations),c=[];for(const[h,_]of Object.entries(o))for(const $ of Object.values(_)){const rt={namespace:$.namespace,tablename:$.tablename,primaryKey:getShadowPrimaryKey($),tags:encodeTags($.tags)};switch($.optype){case OPTYPES.delete:c.push(_applyDeleteOperation($,h)),c.push(this._deleteShadowTagsStatement(rt));break;default:c.push(_applyNonDeleteOperation($,h)),c.push(this._updateShadowTagsStatement(rt))}}return{tablenames:Object.keys(o),statements:c}}async _getEntries(e){e??(e=-1);const a=`
      SELECT * FROM ${this.opts.oplogTable.toString()}
        WHERE timestamp IS NOT NULL
          AND rowid > ?
        ORDER BY rowid ASC
    `;return await this.adapter.query({sql:a,args:[e]})}_deleteShadowTagsStatement(e){return{sql:`
      DELETE FROM ${this.opts.shadowTable.toString()}
      WHERE namespace = ? AND
            tablename = ? AND
            primaryKey = ?;
    `,args:[e.namespace,e.tablename,e.primaryKey]}}_updateShadowTagsStatement(e){return{sql:`
      INSERT or REPLACE INTO ${this.opts.shadowTable.toString()} (namespace, tablename, primaryKey, tags) VALUES
      (?, ?, ?, ?);
    `,args:[e.namespace,e.tablename,e.primaryKey,e.tags]}}_updateRelations(e){if(e.tableType===SatRelation_RelationType.TABLE){const s=e.table;if(this.relations[s]===void 0){let a=0;for(const c of Object.values(this.relations))c.id>a&&(a=c.id);const o={...e,id:a+1};this.relations[s]=o}else{const a=this.relations[s].id,o={...e,id:a};this.relations[s]=o}}}async _applyTransaction(e){const s=e.origin,a=new Date(e.commit_timestamp.toNumber()),o=[],c=[],d=new Set;let h=new Set;const _=[],$=e.lsn;let rt=!0;o.push({sql:"PRAGMA defer_foreign_keys = ON"}),o.push(this.updateLsnStmt($));const lt=async vt=>{const at={...e,changes:vt},et=fromTransaction(at,this.relations);rt&&(Log.info(`apply incoming changes for LSN: ${base64$3.fromBytes($)}`),await this.mutexSnapshot(),rt=!1);const{statements:j,tablenames:St}=await this._apply(et,s);et.forEach(mt=>_.push(mt)),j.forEach(mt=>{o.push(mt)}),St.forEach(mt=>d.add(mt))},ct=async vt=>{const at=new Set,et=new Map;vt.forEach(j=>{const St={sql:j.sql};if(o.push(St),j.migrationType===SatOpMigrate_Type.CREATE_TABLE||j.migrationType===SatOpMigrate_Type.ALTER_ADD_COLUMN){const mt=j.table.name;et.set(mt,j.table),d.add(mt),j.migrationType===SatOpMigrate_Type.CREATE_TABLE&&at.add(mt)}}),et.forEach(j=>{const St=generateTriggersForTable(j);o.push(...St),c.push(...St)}),o.push(...this._disableTriggers([...at])),h=new Set([...h,...at])};await this.maybeGarbageCollect(s,a);for(const[vt,at]of chunkBy(e.changes,isDataChange))vt?await lt(at):await ct(at);const bt=Array.from(d),Ot=bt.filter(vt=>!h.has(vt)),dt=this._disableTriggers(Ot).concat(o).concat(this._enableTriggers(bt));e.migrationVersion?await this.migrator.applyIfNotAlready({statements:dt,version:e.migrationVersion}):await this.adapter.runInTransaction(...dt),await this._notifyChanges(_)}async maybeGarbageCollect(e,s){e==this._authState.clientId&&await this._garbageCollectOplog(s)}_disableTriggers(e){return this._updateTriggerSettings(e,0)}_enableTriggers(e){return this._updateTriggerSettings(e,1)}_updateTriggerSettings(e,s){const a=this.opts.triggersTable.toString();return e.length>0?[{sql:`UPDATE ${a} SET flag = ? WHERE ${e.map(()=>"tablename = ?").join(" OR ")}`,args:[s,...e]}]:[]}_setMetaStatement(e,s){return{sql:`UPDATE ${this.opts.metaTable.toString()} SET value = ? WHERE key = ?`,args:[s,e]}}async _setMeta(e,s){const a=this._setMetaStatement(e,s);await this.adapter.run(a)}async _getMeta(e){const a=`SELECT value from ${this.opts.metaTable.toString()} WHERE key = ?`,o=[e],c=await this.adapter.query({sql:a,args:o});if(c.length!==1)throw`Invalid metadata table: missing ${e}`;return c[0].value}async _getClientId(){const e="clientId";let s=await this._getMeta(e);return s===""&&(s=uuid(),await this._setMeta(e,s)),s}async _getLocalRelations(){return inferRelationsFromSQLite(this.adapter,this.opts)}_generateTag(e){const s=this._authState.clientId;return generateTag(s,e)}async _garbageCollectOplog(e){const s=e.toISOString(),a=this.opts.oplogTable.tablename.toString();await this.adapter.run({sql:`DELETE FROM ${a} WHERE timestamp = ?`,args:[s]})}updateLsnStmt(e){this._lsn=e;const s=base64$3.fromBytes(e);return{sql:`UPDATE ${this.opts.metaTable.tablename} set value = ? WHERE key = ?`,args:[s,"lsn"]}}async checkMaxSqlParameters(){const[{version:e}]=await this.adapter.query({sql:"SELECT sqlite_version() AS version"}),[s,a,o]=e.split(".").map(c=>parseInt(c));s===3&&a>=32?this.maxSqlParameters=32766:this.maxSqlParameters=999}}function _applyDeleteOperation(i,e){const s=Object.entries(i.primaryKeyCols);if(s.length===0)throw new Error("Can't apply delete operation. None of the columns in changes are marked as PK.");const a=s.reduce((o,[c,d])=>(o.where.push(`${c} = ?`),o.values.push(d),o),{where:[],values:[]});return{sql:`DELETE FROM ${e} WHERE ${a.where.join(" AND ")}`,args:a.values}}function _applyNonDeleteOperation({fullRow:i,primaryKeyCols:e},s){const a=Object.keys(i),o=Object.values(i);let c=`INTO ${s}(${a.join(", ")}) VALUES (${o.map(h=>"?").join(",")})`;const d=a.filter(h=>!(h in e)).reduce((h,_)=>(h.where.push(`${_} = ?`),h.values.push(i[_]),h),{where:[],values:[]});return d.values.length>0?(c=`
                INSERT ${c} 
                ON CONFLICT DO UPDATE SET ${d.where.join(", ")}
              `,o.push(...d.values)):c=`INSERT OR IGNORE ${c}`,{sql:c,args:o}}function generateTriggersForTable(i){const e={tableName:i.name,namespace:"main",columns:i.columns.map(a=>a.name),primary:i.pks,foreignKeys:i.fks.map(a=>{if(a.fkCols.length!==1||a.pkCols.length!==1)throw new Error("Satellite does not yet support compound foreign keys.");return{table:a.pkTable,childKey:a.fkCols[0],parentKey:a.pkCols[0]}}),columnTypes:Object.fromEntries(i.columns.map(a=>[a.name,{sqliteType:a.sqliteType.toUpperCase(),pgType:a.pgType.name.toUpperCase()}]))},s=e.namespace+"."+e.tableName;return generateTableTriggers(s,e)}objectType({format:stringType(),ops:stringType().array(),protocol_version:stringType(),version:stringType()}).strict();function makeStmtMigration(i){return{...i,statements:i.statements.map(e=>({sql:e}))}}const EVENT_NAMES={authChange:"auth:changed",actualDataChange:"data:actually:changed",potentialDataChange:"data:potentially:changed",connectivityStateChange:"network:connectivity:changed"},globalEmitter=new eventsExports.EventEmitter;globalEmitter.setMaxListeners(250);class EventNotifier{constructor(e,s){Zt(this,"dbName");Zt(this,"attachedDbIndex");Zt(this,"events");this.dbName=e,this.attachedDbIndex={byAlias:{},byName:{}},this.events=s!==void 0?s:globalEmitter}attach(e,s){const a=this.attachedDbIndex;a.byAlias[s]=e,a.byName[e]=s}detach(e){const s=this.attachedDbIndex;if(e in s.byAlias){const a=s.byAlias[e];delete s.byAlias[e],delete s.byName[a]}}alias({dbName:e,changes:s}){const a=this.attachedDbIndex,o=this.dbName;return s.map(({qualifiedTablename:c})=>{if(e===o)return c;const d=a.byName[e];if(d!==void 0)return c.namespace=d,c}).filter(c=>c!==void 0)}authStateChanged(e){this._emitAuthStateChange(e)}subscribeToAuthStateChanges(e){return this._subscribe(EVENT_NAMES.authChange,e),()=>{this._unsubscribe(EVENT_NAMES.authChange,e)}}potentiallyChanged(){const e=this._getDbNames(),s=this._emitPotentialChange.bind(this);e.forEach(s)}actuallyChanged(e,s){Log.info("actually changed notifier"),this._hasDbName(e)&&this._emitActualChange(e,s)}subscribeToPotentialDataChanges(e){const s=this._hasDbName.bind(this),a=o=>{s(o.dbName)&&e(o)};return this._subscribe(EVENT_NAMES.potentialDataChange,a),()=>{this._unsubscribe(EVENT_NAMES.potentialDataChange,a)}}subscribeToDataChanges(e){const s=this._hasDbName.bind(this),a=o=>{s(o.dbName)&&e(o)};return this._subscribe(EVENT_NAMES.actualDataChange,a),()=>{this._unsubscribe(EVENT_NAMES.actualDataChange,a)}}connectivityStateChanged(e,s){this._hasDbName(e)&&this._emitConnectivityStatus(e,s)}subscribeToConnectivityStateChanges(e){const s=this._hasDbName.bind(this),a=o=>{s(o.dbName)&&e(o)};return this._subscribe(EVENT_NAMES.connectivityStateChange,a),()=>{this._unsubscribe(EVENT_NAMES.connectivityStateChange,a)}}_getDbNames(){const e=this.attachedDbIndex;return[this.dbName,...Object.keys(e.byName)]}_hasDbName(e){const s=this.attachedDbIndex;return e===this.dbName||e in s.byName}_emitAuthStateChange(e){const s={authState:e};return this._emit(EVENT_NAMES.authChange,s),s}_emitPotentialChange(e){const s={dbName:e};return this._emit(EVENT_NAMES.potentialDataChange,s),s}_emitActualChange(e,s){const a={dbName:e,changes:s};return this._emit(EVENT_NAMES.actualDataChange,a),a}_emitConnectivityStatus(e,s){const a={dbName:e,connectivityState:s};return this._emit(EVENT_NAMES.connectivityStateChange,a),a}_emit(e,s){this.events.emit(e,s)}_subscribe(e,s){this.events.addListener(e,s)}_unsubscribe(e,s){this.events.removeListener(e,s)}}const PROTOCOL_VSN="electric."+LIB_VERSION.split(".").slice(0,2).join(".");var lodash_isequal={exports:{}};lodash_isequal.exports;(function(i,e){var s=200,a="__lodash_hash_undefined__",o=1,c=2,d=9007199254740991,h="[object Arguments]",_="[object Array]",$="[object AsyncFunction]",rt="[object Boolean]",lt="[object Date]",ct="[object Error]",bt="[object Function]",Ot="[object GeneratorFunction]",dt="[object Map]",vt="[object Number]",at="[object Null]",et="[object Object]",j="[object Promise]",St="[object Proxy]",mt="[object RegExp]",ft="[object Set]",st="[object String]",ht="[object Symbol]",ot="[object Undefined]",ut="[object WeakMap]",It="[object ArrayBuffer]",Ct="[object DataView]",zt="[object Float32Array]",Wt="[object Float64Array]",Ut="[object Int8Array]",or="[object Int16Array]",tr="[object Int32Array]",Bt="[object Uint8Array]",Ht="[object Uint8ClampedArray]",er="[object Uint16Array]",lr="[object Uint32Array]",dr=/[\\^$.*+?()[\]{}|]/g,kr=/^\[object .+?Constructor\]$/,Ir=/^(?:0|[1-9]\d*)$/,Kt={};Kt[zt]=Kt[Wt]=Kt[Ut]=Kt[or]=Kt[tr]=Kt[Bt]=Kt[Ht]=Kt[er]=Kt[lr]=!0,Kt[h]=Kt[_]=Kt[It]=Kt[rt]=Kt[Ct]=Kt[lt]=Kt[ct]=Kt[bt]=Kt[dt]=Kt[vt]=Kt[et]=Kt[mt]=Kt[ft]=Kt[st]=Kt[ut]=!1;var br=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Zn=typeof self=="object"&&self&&self.Object===Object&&self,qt=br||Zn||Function("return this")(),Br=e&&!e.nodeType&&e,Rs=Br&&!0&&i&&!i.nodeType&&i,mr=Rs&&Rs.exports===Br,Bn=mr&&br.process,_r=function(){try{return Bn&&Bn.binding&&Bn.binding("util")}catch{}}(),Os=_r&&_r.isTypedArray;function pn(Et,Nt){for(var jt=-1,nr=Et==null?0:Et.length,gr=0,fr=[];++jt<nr;){var wr=Et[jt];Nt(wr,jt,Et)&&(fr[gr++]=wr)}return fr}function ls(Et,Nt){for(var jt=-1,nr=Nt.length,gr=Et.length;++jt<nr;)Et[gr+jt]=Nt[jt];return Et}function Fn(Et,Nt){for(var jt=-1,nr=Et==null?0:Et.length;++jt<nr;)if(Nt(Et[jt],jt,Et))return!0;return!1}function Us(Et,Nt){for(var jt=-1,nr=Array(Et);++jt<Et;)nr[jt]=Nt(jt);return nr}function js(Et){return function(Nt){return Et(Nt)}}function hs(Et,Nt){return Et.has(Nt)}function Ps(Et,Nt){return Et==null?void 0:Et[Nt]}function Wn(Et){var Nt=-1,jt=Array(Et.size);return Et.forEach(function(nr,gr){jt[++Nt]=[gr,nr]}),jt}function An(Et,Nt){return function(jt){return Et(Nt(jt))}}function Un(Et){var Nt=-1,jt=Array(Et.size);return Et.forEach(function(nr){jt[++Nt]=nr}),jt}var Ms=Array.prototype,Ns=Function.prototype,ms=Object.prototype,Cs=qt["__core-js_shared__"],Jn=Ns.toString,ur=ms.hasOwnProperty,kn=function(){var Et=/[^.]+$/.exec(Cs&&Cs.keys&&Cs.keys.IE_PROTO||"");return Et?"Symbol(src)_1."+Et:""}(),jn=ms.toString,un=RegExp("^"+Jn.call(ur).replace(dr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vr=mr?qt.Buffer:void 0,Mr=qt.Symbol,bn=qt.Uint8Array,Vn=ms.propertyIsEnumerable,Jt=Ms.splice,xn=Mr?Mr.toStringTag:void 0,Yr=Object.getOwnPropertySymbols,_i=vr?vr.isBuffer:void 0,cn=An(Object.keys,Object),rn=Gn(qt,"DataView"),qr=Gn(qt,"Map"),nn=Gn(qt,"Promise"),xr=Gn(qt,"Set"),sn=Gn(qt,"WeakMap"),hn=Gn(Object,"create"),es=Jr(rn),qs=Jr(qr),Xs=Jr(nn),Vr=Jr(xr),Tn=Jr(sn),Hn=Mr?Mr.prototype:void 0,Gr=Hn?Hn.valueOf:void 0;function Ur(Et){var Nt=-1,jt=Et==null?0:Et.length;for(this.clear();++Nt<jt;){var nr=Et[Nt];this.set(nr[0],nr[1])}}function gs(){this.__data__=hn?hn(null):{},this.size=0}function Kr(Et){var Nt=this.has(Et)&&delete this.__data__[Et];return this.size-=Nt?1:0,Nt}function ys(Et){var Nt=this.__data__;if(hn){var jt=Nt[Et];return jt===a?void 0:jt}return ur.call(Nt,Et)?Nt[Et]:void 0}function As(Et){var Nt=this.__data__;return hn?Nt[Et]!==void 0:ur.call(Nt,Et)}function wn(Et,Nt){var jt=this.__data__;return this.size+=this.has(Et)?0:1,jt[Et]=hn&&Nt===void 0?a:Nt,this}Ur.prototype.clear=gs,Ur.prototype.delete=Kr,Ur.prototype.get=ys,Ur.prototype.has=As,Ur.prototype.set=wn;function Nr(Et){var Nt=-1,jt=Et==null?0:Et.length;for(this.clear();++Nt<jt;){var nr=Et[Nt];this.set(nr[0],nr[1])}}function _s(){this.__data__=[],this.size=0}function In(Et){var Nt=this.__data__,jt=yn(Nt,Et);if(jt<0)return!1;var nr=Nt.length-1;return jt==nr?Nt.pop():Jt.call(Nt,jt,1),--this.size,!0}function zs(Et){var Nt=this.__data__,jt=yn(Nt,Et);return jt<0?void 0:Nt[jt][1]}function Zs(Et){return yn(this.__data__,Et)>-1}function mn(Et,Nt){var jt=this.__data__,nr=yn(jt,Et);return nr<0?(++this.size,jt.push([Et,Nt])):jt[nr][1]=Nt,this}Nr.prototype.clear=_s,Nr.prototype.delete=In,Nr.prototype.get=zs,Nr.prototype.has=Zs,Nr.prototype.set=mn;function Lr(Et){var Nt=-1,jt=Et==null?0:Et.length;for(this.clear();++Nt<jt;){var nr=Et[Nt];this.set(nr[0],nr[1])}}function Ws(){this.size=0,this.__data__={hash:new Ur,map:new(qr||Nr),string:new Ur}}function Rn(Et){var Nt=ds(this,Et).delete(Et);return this.size-=Nt?1:0,Nt}function us(Et){return ds(this,Et).get(Et)}function ks(Et){return ds(this,Et).has(Et)}function Rr(Et,Nt){var jt=ds(this,Et),nr=jt.size;return jt.set(Et,Nt),this.size+=jt.size==nr?0:1,this}Lr.prototype.clear=Ws,Lr.prototype.delete=Rn,Lr.prototype.get=us,Lr.prototype.has=ks,Lr.prototype.set=Rr;function an(Et){var Nt=-1,jt=Et==null?0:Et.length;for(this.__data__=new Lr;++Nt<jt;)this.add(Et[Nt])}function vs(Et){return this.__data__.set(Et,a),this}function Hr(Et){return this.__data__.has(Et)}an.prototype.add=an.prototype.push=vs,an.prototype.has=Hr;function Pr(Et){var Nt=this.__data__=new Nr(Et);this.size=Nt.size}function Ss(){this.__data__=new Nr,this.size=0}function gn(Et){var Nt=this.__data__,jt=Nt.delete(Et);return this.size=Nt.size,jt}function cs(Et){return this.__data__.get(Et)}function Ys(Et){return this.__data__.has(Et)}function Js(Et,Nt){var jt=this.__data__;if(jt instanceof Nr){var nr=jt.__data__;if(!qr||nr.length<s-1)return nr.push([Et,Nt]),this.size=++jt.size,this;jt=this.__data__=new Lr(nr)}return jt.set(Et,Nt),this.size=jt.size,this}Pr.prototype.clear=Ss,Pr.prototype.delete=gn,Pr.prototype.get=cs,Pr.prototype.has=Ys,Pr.prototype.set=Js;function fs(Et,Nt){var jt=_n(Et),nr=!jt&&ps(Et),gr=!jt&&!nr&&on(Et),fr=!jt&&!nr&&!gr&&ss(Et),wr=jt||nr||gr||fr,yr=wr?Us(Et.length,String):[],Dr=yr.length;for(var Sr in Et)(Nt||ur.call(Et,Sr))&&!(wr&&(Sr=="length"||gr&&(Sr=="offset"||Sr=="parent")||fr&&(Sr=="buffer"||Sr=="byteLength"||Sr=="byteOffset")||Bs(Sr,Dr)))&&yr.push(Sr);return yr}function yn(Et,Nt){for(var jt=Et.length;jt--;)if(On(Et[jt][0],Nt))return jt;return-1}function xs(Et,Nt,jt){var nr=Nt(Et);return _n(Et)?nr:ls(nr,jt(Et))}function vn(Et){return Et==null?Et===void 0?ot:at:xn&&xn in Object(Et)?Ks(Et):Qs(Et)}function Es(Et){return Dn(Et)&&vn(Et)==h}function Ls(Et,Nt,jt,nr,gr){return Et===Nt?!0:Et==null||Nt==null||!Dn(Et)&&!Dn(Nt)?Et!==Et&&Nt!==Nt:ts(Et,Nt,jt,nr,Ls,gr)}function ts(Et,Nt,jt,nr,gr,fr){var wr=_n(Et),yr=_n(Nt),Dr=wr?_:Ln(Et),Sr=yr?_:Ln(Nt);Dr=Dr==h?et:Dr,Sr=Sr==h?et:Sr;var Cr=Dr==et,Xr=Sr==et,Ar=Dr==Sr;if(Ar&&on(Et)){if(!on(Nt))return!1;wr=!0,Cr=!1}if(Ar&&!Cr)return fr||(fr=new Pr),wr||ss(Et)?Ds(Et,Nt,jt,nr,gr,fr):Hs(Et,Nt,Dr,jt,nr,gr,fr);if(!(jt&o)){var $r=Cr&&ur.call(Et,"__wrapped__"),jr=Xr&&ur.call(Nt,"__wrapped__");if($r||jr){var En=$r?Et.value():Et,fn=jr?Nt.value():Nt;return fr||(fr=new Pr),gr(En,fn,jt,nr,fr)}}return Ar?(fr||(fr=new Pr),Gs(Et,Nt,jt,nr,gr,fr)):!1}function Vs(Et){if(!Sn(Et)||Fs(Et))return!1;var Nt=Nn(Et)?un:kr;return Nt.test(Jr(Et))}function bs(Et){return Dn(Et)&&is(Et.length)&&!!Kt[vn(Et)]}function rs(Et){if(!ns(Et))return cn(Et);var Nt=[];for(var jt in Object(Et))ur.call(Et,jt)&&jt!="constructor"&&Nt.push(jt);return Nt}function Ds(Et,Nt,jt,nr,gr,fr){var wr=jt&o,yr=Et.length,Dr=Nt.length;if(yr!=Dr&&!(wr&&Dr>yr))return!1;var Sr=fr.get(Et);if(Sr&&fr.get(Nt))return Sr==Nt;var Cr=-1,Xr=!0,Ar=jt&c?new an:void 0;for(fr.set(Et,Nt),fr.set(Nt,Et);++Cr<yr;){var $r=Et[Cr],jr=Nt[Cr];if(nr)var En=wr?nr(jr,$r,Cr,Nt,Et,fr):nr($r,jr,Cr,Et,Nt,fr);if(En!==void 0){if(En)continue;Xr=!1;break}if(Ar){if(!Fn(Nt,function(fn,pt){if(!hs(Ar,pt)&&($r===fn||gr($r,fn,jt,nr,fr)))return Ar.push(pt)})){Xr=!1;break}}else if(!($r===jr||gr($r,jr,jt,nr,fr))){Xr=!1;break}}return fr.delete(Et),fr.delete(Nt),Xr}function Hs(Et,Nt,jt,nr,gr,fr,wr){switch(jt){case Ct:if(Et.byteLength!=Nt.byteLength||Et.byteOffset!=Nt.byteOffset)return!1;Et=Et.buffer,Nt=Nt.buffer;case It:return!(Et.byteLength!=Nt.byteLength||!fr(new bn(Et),new bn(Nt)));case rt:case lt:case vt:return On(+Et,+Nt);case ct:return Et.name==Nt.name&&Et.message==Nt.message;case mt:case st:return Et==Nt+"";case dt:var yr=Wn;case ft:var Dr=nr&o;if(yr||(yr=Un),Et.size!=Nt.size&&!Dr)return!1;var Sr=wr.get(Et);if(Sr)return Sr==Nt;nr|=c,wr.set(Et,Nt);var Cr=Ds(yr(Et),yr(Nt),nr,gr,fr,wr);return wr.delete(Et),Cr;case ht:if(Gr)return Gr.call(Et)==Gr.call(Nt)}return!1}function Gs(Et,Nt,jt,nr,gr,fr){var wr=jt&o,yr=Ts(Et),Dr=yr.length,Sr=Ts(Nt),Cr=Sr.length;if(Dr!=Cr&&!wr)return!1;for(var Xr=Dr;Xr--;){var Ar=yr[Xr];if(!(wr?Ar in Nt:ur.call(Nt,Ar)))return!1}var $r=fr.get(Et);if($r&&fr.get(Nt))return $r==Nt;var jr=!0;fr.set(Et,Nt),fr.set(Nt,Et);for(var En=wr;++Xr<Dr;){Ar=yr[Xr];var fn=Et[Ar],pt=Nt[Ar];if(nr)var wt=wr?nr(pt,fn,Ar,Nt,Et,fr):nr(fn,pt,Ar,Et,Nt,fr);if(!(wt===void 0?fn===pt||gr(fn,pt,jt,nr,fr):wt)){jr=!1;break}En||(En=Ar=="constructor")}if(jr&&!En){var Lt=Et.constructor,Qt=Nt.constructor;Lt!=Qt&&"constructor"in Et&&"constructor"in Nt&&!(typeof Lt=="function"&&Lt instanceof Lt&&typeof Qt=="function"&&Qt instanceof Qt)&&(jr=!1)}return fr.delete(Et),fr.delete(Nt),jr}function Ts(Et){return xs(Et,Mn,$s)}function ds(Et,Nt){var jt=Et.__data__;return ws(Nt)?jt[typeof Nt=="string"?"string":"hash"]:jt.map}function Gn(Et,Nt){var jt=Ps(Et,Nt);return Vs(jt)?jt:void 0}function Ks(Et){var Nt=ur.call(Et,xn),jt=Et[xn];try{Et[xn]=void 0;var nr=!0}catch{}var gr=jn.call(Et);return nr&&(Nt?Et[xn]=jt:delete Et[xn]),gr}var $s=Yr?function(Et){return Et==null?[]:(Et=Object(Et),pn(Yr(Et),function(Nt){return Vn.call(Et,Nt)}))}:Kn,Ln=vn;(rn&&Ln(new rn(new ArrayBuffer(1)))!=Ct||qr&&Ln(new qr)!=dt||nn&&Ln(nn.resolve())!=j||xr&&Ln(new xr)!=ft||sn&&Ln(new sn)!=ut)&&(Ln=function(Et){var Nt=vn(Et),jt=Nt==et?Et.constructor:void 0,nr=jt?Jr(jt):"";if(nr)switch(nr){case es:return Ct;case qs:return dt;case Xs:return j;case Vr:return ft;case Tn:return ut}return Nt});function Bs(Et,Nt){return Nt=Nt??d,!!Nt&&(typeof Et=="number"||Ir.test(Et))&&Et>-1&&Et%1==0&&Et<Nt}function ws(Et){var Nt=typeof Et;return Nt=="string"||Nt=="number"||Nt=="symbol"||Nt=="boolean"?Et!=="__proto__":Et===null}function Fs(Et){return!!kn&&kn in Et}function ns(Et){var Nt=Et&&Et.constructor,jt=typeof Nt=="function"&&Nt.prototype||ms;return Et===jt}function Qs(Et){return jn.call(Et)}function Jr(Et){if(Et!=null){try{return Jn.call(Et)}catch{}try{return Et+""}catch{}}return""}function On(Et,Nt){return Et===Nt||Et!==Et&&Nt!==Nt}var ps=Es(function(){return arguments}())?Es:function(Et){return Dn(Et)&&ur.call(Et,"callee")&&!Vn.call(Et,"callee")},_n=Array.isArray;function Pn(Et){return Et!=null&&is(Et.length)&&!Nn(Et)}var on=_i||as;function Qr(Et,Nt){return Ls(Et,Nt)}function Nn(Et){if(!Sn(Et))return!1;var Nt=vn(Et);return Nt==bt||Nt==Ot||Nt==$||Nt==St}function is(Et){return typeof Et=="number"&&Et>-1&&Et%1==0&&Et<=d}function Sn(Et){var Nt=typeof Et;return Et!=null&&(Nt=="object"||Nt=="function")}function Dn(Et){return Et!=null&&typeof Et=="object"}var ss=Os?js(Os):bs;function Mn(Et){return Pn(Et)?fs(Et):rs(Et)}function Kn(){return[]}function as(){return!1}i.exports=Qr})(lodash_isequal,lodash_isequal.exports);var lodash_isequalExports=lodash_isequal.exports;const isequal=getDefaultExportFromCjs(lodash_isequalExports),SUBSCRIPTION_DELIVERED="subscription_delivered",SUBSCRIPTION_ERROR="subscription_error";class SubscriptionsDataCache extends EventEmitter$1{constructor(s){super();Zt(this,"requestedSubscriptions");Zt(this,"remainingShapes");Zt(this,"currentShapeRequestId");Zt(this,"inDelivery");Zt(this,"dbDescription");this.requestedSubscriptions={},this.remainingShapes=new Set,this.dbDescription=s}isDelivering(){return this.inDelivery!=null}subscriptionRequest(s){const{subscriptionId:a,shapeRequests:o}=s,c=new Set(o.map(d=>d.requestId));this.requestedSubscriptions[a]=c}subscriptionResponse({subscriptionId:s}){this.requestedSubscriptions[s]||this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,`Received subscribe response for unknown subscription ${s}`,s)}subscriptionDataBegin({subscriptionId:s,lsn:a}){this.requestedSubscriptions[s]||this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,`Received SatSubsDataBegin but for unknown subscription ${s}`,s),this.inDelivery&&this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,`received SatSubsDataStart for subscription ${s} but a subscription (${this.inDelivery.subscriptionId}) is already being delivered`,s),this.remainingShapes=this.requestedSubscriptions[s],this.inDelivery={subscriptionId:s,lsn:a,transaction:[],shapeReqToUuid:{}}}subscriptionDataEnd(s){this.inDelivery||this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,"Received SatSubDataEnd but no subscription is being delivered"),this.remainingShapes.size>0&&this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,"Received SatSubDataEnd but not all shapes have been delivered");const a=this.inDelivery,o={subscriptionId:a.subscriptionId,lsn:a.lsn,data:a.transaction.map(c=>this.proccessShapeDataOperations(c,s)),shapeReqToUuid:a.shapeReqToUuid};return this.reset(o.subscriptionId),this.emit(SUBSCRIPTION_DELIVERED,o),a}shapeDataBegin(s){this.inDelivery||this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,"Received SatShapeDataBegin but no subscription is being delivered"),this.remainingShapes.size==0&&this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,"Received SatShapeDataBegin but all shapes have been delivered for this subscription"),this.currentShapeRequestId&&this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,`Received SatShapeDataBegin for shape with uuid ${s.uuid} but a shape is already being delivered`),this.inDelivery.shapeReqToUuid[s.requestId]&&this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,`Received SatShapeDataBegin for shape with uuid ${s.uuid} but shape has already been delivered`),this.inDelivery.shapeReqToUuid[s.requestId]=s.uuid,this.currentShapeRequestId=s.requestId}shapeDataEnd(){this.inDelivery||this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,"Received SatShapeDataEnd but no subscription is being delivered"),this.currentShapeRequestId||this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,"Received SatShapeDataEnd but no shape is being delivered"),this.remainingShapes.delete(this.currentShapeRequestId),this.currentShapeRequestId=void 0}transaction(s){(this.remainingShapes.size==0||!this.inDelivery||!this.currentShapeRequestId)&&this.internalError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,"Received SatOpLog but no shape is being delivered");for(const a of s)(a.begin||a.commit||a.update||a.delete)&&this.internalError(SatelliteErrorCode.UNEXPECTED_MESSAGE_TYPE,"Received begin, commit, update or delete message, but these messages are not valid in subscriptions"),this.inDelivery.transaction.push(a)}internalError(s,a,o=(c=>(c=this.inDelivery)==null?void 0:c.subscriptionId)()){this.reset(o);const d=new SatelliteError(s,a);throw this.emit(SUBSCRIPTION_ERROR,d),d}subscriptionError(s){this.requestedSubscriptions[s]||this.internalError(SatelliteErrorCode.SUBSCRIPTION_NOT_FOUND,`received subscription error for unknown subscription ${s}`,s),this.reset(s)}subscriptionDataError(s,a){let o=subsDataErrorToSatelliteError(a);throw this.inDelivery||(o=new SatelliteError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,`received subscription data error, but no subscription is being delivered: ${o.message}`)),this.reset(s),this.emit(SUBSCRIPTION_ERROR,a.subscriptionId,o),o}reset(s){var a;s&&delete this.requestedSubscriptions[s],s===((a=this.inDelivery)==null?void 0:a.subscriptionId)&&(this.remainingShapes=new Set,this.currentShapeRequestId=void 0,this.inDelivery=void 0)}proccessShapeDataOperations(s,a){s.insert||this.internalError(SatelliteErrorCode.UNEXPECTED_MESSAGE_TYPE,"invalid shape data operation");const{relationId:o,rowData:c,tags:d}=s.insert,h=a.get(o);h||this.internalError(SatelliteErrorCode.PROTOCOL_VIOLATION,`missing relation ${o} for incoming operation`);const _=deserializeRow(c,h,this.dbDescription);return _||this.internalError(SatelliteErrorCode.PROTOCOL_VIOLATION,"INSERT operations has no data"),{relation:h,record:_,tags:d}}}const setLogLevel=(i="TRACE")=>{Log.setLevel(i)};typeof process<"u"&&process.versions!=null&&process.versions.node!=null;class RPC{constructor(e,s,a){Zt(this,"nextRequestId",1);Zt(this,"pendingRequests",new Map);Zt(this,"timedOutCalls",new Set);this.sender=e,this.defaultTimeout=s,this.log=a}request(e,s,a){const o=this.nextRequestId++,c=SatRpcRequest.create({method:s,requestId:o,message:a});this.sender(c);const{promise:d,resolve:h,reject:_}=emptyPromise();let $=0;return $=setTimeout(()=>this.timedOut(`${s}/${o}`),this.defaultTimeout),this.pendingRequests.set(`${s}/${o}`,{reject:_,resolve:h,timer:$}),d}handleResponse(e){const s=`${e.method}/${e.requestId}`,a=this.pendingRequests.get(s);a?(e.message?a.resolve(e.message):(this.log.warn(`RPC call ${s} failed with ${msgToString(e.error)}`),a.reject(e.error)),this.clearAndDelete(s)):this.timedOutCalls.has(s)?(this.timedOutCalls.delete(s),this.log.warn(`Got an RPC response for ${s} after timeout`)):this.log.warn(`Got an unexpected RPC response for ${s}`)}clearAndDelete(e){const s=this.pendingRequests.get(e);s&&(clearTimeout(s.timer),this.pendingRequests.delete(e))}timedOut(e){const s=this.pendingRequests.get(e);s&&(this.log.error(`Timed out after ${this.defaultTimeout}ms while waiting for RPC response to ${e}`),this.timedOutCalls.add(e),s.reject(new SatelliteError(SatelliteErrorCode.TIMEOUT,e)),this.clearAndDelete(e))}}const rpcRespond=i=>(e,s)=>{const a=s.$type==="Electric.Satellite.SatErrorResp"?s:void 0,o=s.$type!=="Electric.Satellite.SatErrorResp"?encodeRpcResponse(s):void 0;i(SatRpcResponse.create({requestId:e.requestId,method:e.method,message:o,error:a}))};function withRpcRequestLogging(i,e){return new Proxy(i,{get(s,a,o){return typeof s[a]=="function"?new Proxy(s[a],{apply(c,d,h){return e.getLevel()<=1&&e.debug(`[rpc] send: ${msgToString(h[0])}`),Reflect.apply(c,d,h).then(_=>(e.getLevel()<=1&&e.debug(`[rpc] recv: ${msgToString(_)}`),_))}}):Reflect.get(s,a)}})}var PgBasicType=(i=>(i.PG_BOOL="BOOL",i.PG_INT="INT",i.PG_INT2="INT2",i.PG_INT4="INT4",i.PG_INT8="INT8",i.PG_INTEGER="INTEGER",i.PG_REAL="REAL",i.PG_FLOAT4="FLOAT4",i.PG_FLOAT8="FLOAT8",i.PG_TEXT="TEXT",i.PG_VARCHAR="VARCHAR",i.PG_CHAR="CHAR",i.PG_UUID="UUID",i.PG_JSON="JSON",i.PG_JSONB="JSONB",i))(PgBasicType||{}),PgDateType=(i=>(i.PG_TIMESTAMP="TIMESTAMP",i.PG_TIMESTAMPTZ="TIMESTAMPTZ",i.PG_DATE="DATE",i.PG_TIME="TIME",i.PG_TIMETZ="TIMETZ",i))(PgDateType||{});const subscriptionError=[SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,SatelliteErrorCode.SUBSCRIPTION_ERROR,SatelliteErrorCode.SUBSCRIPTION_ALREADY_EXISTS,SatelliteErrorCode.SUBSCRIPTION_ID_ALREADY_EXISTS,SatelliteErrorCode.SUBSCRIPTION_NOT_FOUND,SatelliteErrorCode.SHAPE_DELIVERY_ERROR];class SatelliteClient{constructor(e,s,a){Zt(this,"opts");Zt(this,"emitter");Zt(this,"socketFactory");Zt(this,"socket");Zt(this,"inbound");Zt(this,"outbound");Zt(this,"subscriptionsDataCache");Zt(this,"socketHandler");Zt(this,"throttledPushTransaction");Zt(this,"rpcClient");Zt(this,"service");Zt(this,"incomingMutex",new Mutex);Zt(this,"allowedMutexedRpcResponses",[]);Zt(this,"dbDescription");Zt(this,"isDown",!1);Zt(this,"handlerForMessageType",Object.fromEntries(Object.entries({SatRelation:e=>this.handleRelation(e),SatOpLog:e=>this.handleTransaction(e),SatErrorResp:e=>this.handleError(e),SatSubsDataError:e=>this.handleSubscriptionError(e),SatSubsDataBegin:e=>this.handleSubscriptionDataBegin(e),SatSubsDataEnd:e=>this.handleSubscriptionDataEnd(e),SatShapeDataBegin:e=>this.handleShapeDataBegin(e),SatShapeDataEnd:e=>this.handleShapeDataEnd(e),SatRpcResponse:e=>this.rpcClient.handleResponse(e),SatRpcRequest:e=>this.handleRpcRequest(e)}).map(e=>[getFullTypeName(e[0]),e[1]])));Zt(this,"handlerForRpcRequests",{startReplication:this.handleStartReq.bind(this),stopReplication:this.handleStopReq.bind(this)});this.emitter=new AsyncEventEmitter,this.opts={...satelliteClientDefaults,...a},this.socketFactory=s,this.inbound=this.resetReplication(),this.outbound=this.resetReplication(),this.dbDescription=e,this.subscriptionsDataCache=new SubscriptionsDataCache(e),this.rpcClient=new RPC(this.sendMessage.bind(this),this.opts.timeout,Log),this.service=withRpcRequestLogging(new RootClientImpl(this.rpcClient),Log)}resetReplication(e,s){return{authenticated:!1,isReplicating:s||ReplicationStatus.STOPPED,relations:new Map,last_lsn:e,transactions:[]}}connect(){if(this.isDown)throw new SatelliteError(SatelliteErrorCode.UNEXPECTED_STATE,"client has already shutdown");return this.isConnected()&&this.disconnect(),new Promise((e,s)=>{this.socket=new this.socketFactory(PROTOCOL_VSN);const a=$=>{this.disconnect(),s($)},o=()=>{if(!this.socket)throw new SatelliteError(SatelliteErrorCode.UNEXPECTED_STATE,"socket got unassigned somehow");this.socket.removeErrorListener(a),this.socketHandler=$=>this.handleIncoming($),this.socket.onMessage(this.socketHandler),this.socket.onError($=>{this.emitter.listenerCount("error")===0&&(this.disconnect(),Log.error(`socket error but no listener is attached: ${$.message}`)),this.emitter.enqueueEmit("error",$)}),this.socket.onClose(()=>{this.disconnect(),this.emitter.listenerCount("error")===0&&Log.error("socket closed but no listener is attached"),this.emitter.enqueueEmit("error",new SatelliteError(SatelliteErrorCode.SOCKET_ERROR,"socket closed"))}),e()};this.socket.onceError(a),this.socket.onceConnect(o);const{host:c,port:d,ssl:h}=this.opts,_=`${h?"wss":"ws"}://${c}:${d}/ws`;this.socket.open({url:_})})}disconnect(){this.outbound=this.resetReplication(this.outbound.last_lsn),this.inbound=this.resetReplication(this.inbound.last_lsn),this.socketHandler=void 0,this.socket!==void 0&&(this.socket.closeAndRemoveListeners(),this.socket=void 0)}isConnected(){return!!this.socketHandler}shutdown(){this.disconnect(),this.emitter.removeAllListeners(),this.isDown=!0}startReplication(e,s,a){if(this.inbound.isReplicating!==ReplicationStatus.STOPPED)return Promise.reject(new SatelliteError(SatelliteErrorCode.REPLICATION_ALREADY_STARTED,"replication already started"));let o;if(!e||e.length==0){if(Log.info("no previous LSN, start replication from scratch"),a&&a.length>0)return Promise.reject(new SatelliteError(SatelliteErrorCode.UNEXPECTED_SUBSCRIPTION_STATE,"Cannot start replication with subscription IDs but without previous LSN."));o=SatInStartReplicationReq.fromPartial({schemaVersion:s})}else Log.info(`starting replication with lsn: ${base64$3.fromBytes(e)} subscriptions: ${a}`),o=SatInStartReplicationReq.fromPartial({lsn:e,subscriptionIds:a});return this.inbound=this.resetReplication(e,ReplicationStatus.STARTING),this.delayIncomingMessages(async()=>{const c=await this.service.startReplication(o);return this.handleStartResp(c)},{allowedRpcResponses:["startReplication"]})}stopReplication(){if(this.inbound.isReplicating!==ReplicationStatus.ACTIVE)return Promise.reject(new SatelliteError(SatelliteErrorCode.REPLICATION_NOT_STARTED,"replication not active"));this.inbound.isReplicating=ReplicationStatus.STOPPING;const e=SatInStopReplicationReq.fromPartial({});return this.service.stopReplication(e).then(this.handleStopResp.bind(this))}authenticate({clientId:e,token:s}){const a=SatAuthReq.fromPartial({id:e,token:s,headers:[]});return this.service.authenticate(a).then(this.handleAuthResp.bind(this))}subscribeToTransactions(e){this.emitter.on("transaction",async(s,a)=>{await e(s),a()})}unsubscribeToTransactions(e){this.emitter.removeListener("transaction",e)}subscribeToRelations(e){this.emitter.on("relation",e)}unsubscribeToRelations(e){this.emitter.removeListener("relation",e)}enqueueTransaction(e){var s;if(this.outbound.isReplicating!==ReplicationStatus.ACTIVE)throw new SatelliteError(SatelliteErrorCode.REPLICATION_NOT_STARTED,"enqueuing a transaction while outbound replication has not started");this.outbound.transactions.push(e),this.outbound.last_lsn=e.lsn,(s=this.throttledPushTransaction)==null||s.call(this)}pushTransactions(){if(this.outbound.isReplicating!==ReplicationStatus.ACTIVE)throw new SatelliteError(SatelliteErrorCode.REPLICATION_NOT_STARTED,"sending a transaction while outbound replication has not started");let e;for(;e=this.outbound.transactions.shift();){this.sendMissingRelations(e,this.outbound);const s=this.transactionToSatOpLog(e);this.sendMessage(s)}}subscribeToError(e){this.emitter.on("error",e)}unsubscribeToError(e){this.emitter.removeListener("error",e)}subscribeToOutboundStarted(e){this.emitter.on("outbound_started",e)}unsubscribeToOutboundStarted(e){this.emitter.removeListener("outbound_started",e)}subscribeToSubscriptionEvents(e,s){this.subscriptionsDataCache.on(SUBSCRIPTION_DELIVERED,e),this.subscriptionsDataCache.on(SUBSCRIPTION_ERROR,s)}unsubscribeToSubscriptionEvents(e,s){this.subscriptionsDataCache.removeListener(SUBSCRIPTION_DELIVERED,e),this.subscriptionsDataCache.removeListener(SUBSCRIPTION_ERROR,s)}async subscribe(e,s){if(this.inbound.isReplicating!==ReplicationStatus.ACTIVE)return Promise.reject(new SatelliteError(SatelliteErrorCode.REPLICATION_NOT_STARTED,"replication not active"));const a=SatSubsReq.fromPartial({subscriptionId:e,shapeRequests:shapeRequestToSatShapeReq(s)});return this.subscriptionsDataCache.subscriptionRequest(a),this.service.subscribe(a).then(this.handleSubscription.bind(this))}unsubscribe(e){if(this.inbound.isReplicating!==ReplicationStatus.ACTIVE)return Promise.reject(new SatelliteError(SatelliteErrorCode.REPLICATION_NOT_STARTED,"replication not active"));const s=SatUnsubsReq.create({subscriptionIds:e});return this.service.unsubscribe(s).then(this.handleUnsubscribeResponse.bind(this))}sendMissingRelations(e,s){e.changes.forEach(a=>{const o=a.relation;if(!this.outbound.relations.has(o.id)||!isequal(this.outbound.relations.get(o.id),o)){s.relations.set(o.id,o);const c=SatRelation.fromPartial({relationId:o.id,schemaName:o.schema,tableName:o.table,tableType:o.tableType,columns:o.columns.map(d=>SatRelationColumn.fromPartial({name:d.name,type:d.type,isNullable:d.isNullable}))});this.sendMessage(c)}})}transactionToSatOpLog(e){const s=[SatTransOp.fromPartial({begin:{commitTimestamp:e.commit_timestamp.toString(),lsn:e.lsn}})];return e.changes.forEach(a=>{let o,c,d;const h=this.outbound.relations.get(a.relation.id),_=a.tags;switch(a.oldRecord&&(c=serializeRow(a.oldRecord,h,this.dbDescription)),a.record&&(d=serializeRow(a.record,h,this.dbDescription)),a.type){case DataChangeType.DELETE:o=SatTransOp.fromPartial({delete:{oldRowData:c,relationId:h.id,tags:_}});break;case DataChangeType.INSERT:o=SatTransOp.fromPartial({insert:{rowData:d,relationId:h.id,tags:_}});break;case DataChangeType.UPDATE:o=SatTransOp.fromPartial({update:{rowData:d,oldRowData:c,relationId:h.id,tags:_}});break;case DataChangeType.COMPENSATION:o=SatTransOp.fromPartial({compensation:{pkData:d,relationId:h.id,tags:_}});break}s.push(o)}),s.push(SatTransOp.fromPartial({commit:{}})),SatOpLog.fromPartial({ops:s})}handleAuthResp(e){let s,a;return e.$type==SatAuthResp.$type?(a=e.id,this.inbound.authenticated=!0):s=new SatelliteError(SatelliteErrorCode.AUTH_ERROR,"An internal error occurred during authentication"),{serverId:a,error:s}}handleStartResp(e){if(this.inbound.isReplicating==ReplicationStatus.STARTING){if(e.err)return this.inbound.isReplicating=ReplicationStatus.STOPPED,{error:startReplicationErrorToSatelliteError(e.err)};this.inbound.isReplicating=ReplicationStatus.ACTIVE}else return{error:new SatelliteError(SatelliteErrorCode.UNEXPECTED_STATE,`unexpected state ${this.inbound.isReplicating} handling 'start' response`)};return{}}async handleRpcRequest(e){const s=rpcRespond(this.sendMessage.bind(this));if(e.method==="startReplication"){const a=SatInStartReplicationReq.decode(e.message);s(e,await this.handlerForRpcRequests[e.method](a))}else if(e.method==="stopReplication"){const a=SatInStopReplicationReq.decode(e.message);s(e,await this.handlerForRpcRequests[e.method](a))}else Log.warn(`Server has sent an RPC request with a method that the client does not support: ${e.method}`),s(e,SatErrorResp.create({errorType:SatErrorResp_ErrorCode.INVALID_REQUEST}))}async handleStartReq(e){return Log.info(`Server sent a replication request to start from ${bytesToNumber(e.lsn)}, and options ${JSON.stringify(e.options)}`),this.outbound.isReplicating==ReplicationStatus.STOPPED?(this.outbound=this.resetReplication(e.lsn,ReplicationStatus.ACTIVE),this.throttledPushTransaction=throttle$1(()=>this.pushTransactions(),this.opts.pushPeriod,{leading:!0,trailing:!0}),this.emitter.enqueueEmit("outbound_started"),SatInStartReplicationResp.create()):(this.emitter.enqueueEmit("error",new SatelliteError(SatelliteErrorCode.UNEXPECTED_STATE,`unexpected state ${this.outbound.isReplicating} handling 'start' request`)),SatErrorResp.create({errorType:SatErrorResp_ErrorCode.REPLICATION_FAILED}))}async handleStopReq(e){return this.outbound.isReplicating==ReplicationStatus.ACTIVE?(this.outbound.isReplicating=ReplicationStatus.STOPPED,this.throttledPushTransaction&&(this.throttledPushTransaction=void 0),SatInStopReplicationResp.create()):(this.emitter.enqueueEmit("error",new SatelliteError(SatelliteErrorCode.UNEXPECTED_STATE,`unexpected state ${this.inbound.isReplicating} handling 'stop' request`)),SatErrorResp.create({errorType:SatErrorResp_ErrorCode.REPLICATION_FAILED}))}handleStopResp(){return this.inbound.isReplicating==ReplicationStatus.STOPPING?(this.inbound.isReplicating=ReplicationStatus.STOPPED,{}):{error:new SatelliteError(SatelliteErrorCode.UNEXPECTED_STATE,`unexpected state ${this.inbound.isReplicating} handling 'stop' response`)}}handleRelation(e){if(this.inbound.isReplicating!==ReplicationStatus.ACTIVE){this.emitter.enqueueEmit("error",new SatelliteError(SatelliteErrorCode.UNEXPECTED_STATE,`unexpected state ${ReplicationStatus[this.inbound.isReplicating]} handling 'relation' message`));return}const s={id:e.relationId,schema:e.schemaName,table:e.tableName,tableType:e.tableType,columns:e.columns.map(a=>({name:a.name,type:a.type,isNullable:a.isNullable,primaryKey:a.primaryKey}))};this.inbound.relations.set(s.id,s),this.emitter.enqueueEmit("relation",s)}handleTransaction(e){if(!this.subscriptionsDataCache.isDelivering())this.processOpLogMessage(e);else try{this.subscriptionsDataCache.transaction(e.ops)}catch(s){Log.info(`Error applying transaction message for subs ${JSON.stringify(s)}`)}}handleError(e){this.emitter.enqueueEmit("error",serverErrorToSatelliteError(e))}handleSubscription(e){if(e.err){const s=subsErrorToSatelliteError(e.err);return this.subscriptionsDataCache.subscriptionError(e.subscriptionId),{subscriptionId:e.subscriptionId,error:s}}else return this.subscriptionsDataCache.subscriptionResponse(e),{subscriptionId:e.subscriptionId}}handleSubscriptionError(e){this.subscriptionsDataCache.subscriptionDataError(e.subscriptionId,e)}handleSubscriptionDataBegin(e){this.subscriptionsDataCache.subscriptionDataBegin(e)}handleSubscriptionDataEnd(e){this.subscriptionsDataCache.subscriptionDataEnd(this.inbound.relations)}handleShapeDataBegin(e){this.subscriptionsDataCache.shapeDataBegin(e)}handleShapeDataEnd(e){this.subscriptionsDataCache.shapeDataEnd()}handleUnsubscribeResponse(e){return{}}delayIncomingMessages(e,s){return this.incomingMutex.runExclusive(async()=>{this.allowedMutexedRpcResponses=s.allowedRpcResponses;try{return await e()}finally{this.allowedMutexedRpcResponses=[]}})}async handleIncoming(e){var s,a;try{const o=toMessage(e);this.incomingMutex.isLocked()&&!(o.$type==="Electric.Satellite.SatRpcResponse"&&this.allowedMutexedRpcResponses.includes(o.method))&&await this.incomingMutex.waitForUnlock(),Log.getLevel()<=1&&Log.debug(`[proto] recv: ${msgToString(o)}`),(a=(s=this.handlerForMessageType)[o.$type])==null||a.call(s,o)}catch(o){if(o instanceof SatelliteError)subscriptionError.includes(o.code)||this.emitter.enqueueEmit("error",o);else throw o}}processOpLogMessage(e){const s=this.inbound;e.ops.map(a=>{if(a.begin){const c={commit_timestamp:a.begin.commitTimestamp,lsn:a.begin.lsn,changes:[],origin:a.begin.origin};s.transactions.push(c)}const o=s.transactions.length-1;if(a.commit){const{commit_timestamp:c,lsn:d,changes:h,origin:_,migrationVersion:$}=s.transactions[o],rt={commit_timestamp:c,lsn:d,changes:h,origin:_,migrationVersion:$};this.emitter.enqueueEmit("transaction",rt,()=>this.inbound.last_lsn=rt.lsn),s.transactions.splice(o)}if(a.insert){const c=a.insert.relationId,d=s.relations.get(c);if(!d)throw new SatelliteError(SatelliteErrorCode.PROTOCOL_VIOLATION,`missing relation ${a.insert.relationId} for incoming operation`);const h={relation:d,type:DataChangeType.INSERT,record:deserializeRow(a.insert.rowData,d,this.dbDescription),tags:a.insert.tags};s.transactions[o].changes.push(h)}if(a.update){const c=a.update.relationId,d=s.relations.get(c);if(!d)throw new SatelliteError(SatelliteErrorCode.PROTOCOL_VIOLATION,"missing relation for incoming operation");const h={relation:d,type:DataChangeType.UPDATE,record:deserializeRow(a.update.rowData,d,this.dbDescription),oldRecord:deserializeRow(a.update.oldRowData,d,this.dbDescription),tags:a.update.tags};s.transactions[o].changes.push(h)}if(a.delete){const c=a.delete.relationId,d=s.relations.get(c);if(!d)throw new SatelliteError(SatelliteErrorCode.PROTOCOL_VIOLATION,"missing relation for incoming operation");const h={relation:d,type:DataChangeType.DELETE,oldRecord:deserializeRow(a.delete.oldRowData,d,this.dbDescription),tags:a.delete.tags};s.transactions[o].changes.push(h)}if(a.migrate){const c=s.transactions[o];c.migrationVersion=a.migrate.version,a.migrate.stmts.forEach(h=>{const _={table:a.migrate.table,migrationType:h.type,sql:h.sql};c.changes.push(_)})}})}sendMessage(e){if(Log.getLevel()<=1&&Log.debug(`[proto] send: ${msgToString(e)}`),!this.socket||!this.isConnected())throw new SatelliteError(SatelliteErrorCode.UNEXPECTED_STATE,"trying to send message, but client is closed");const s=getObjFromString(e.$type);if(s==null)throw new SatelliteError(SatelliteErrorCode.UNEXPECTED_MESSAGE_TYPE,`${e.$type})`);const a=getBufWithMsgTag(e),o=s.encode(e,_m0.Writer.create()).finish(),c=new Uint8Array(a.length+o.length);c.set(a,0),c.set(o,1),this.socket.write(c)}getLastSentLsn(){return this.outbound.last_lsn??DEFAULT_LOG_POS}}function getColumnType(i,e,s){return i.hasTable(e)&&i.getFields(e).has(s.name)?i.getFields(e).get(s.name):s.type.toUpperCase()}function serializeRow(i,e,s){let a=0;const o=new Uint8Array(calculateNumBytes(e.columns.length)),c=e.columns.reduce((d,h)=>{if(i[h.name]!=null){const _=getColumnType(s,e.table,h);d.push(serializeColumnData(i[h.name],_))}else d.push(serializeNullData()),setMaskBit(o,a);return a=a+1,d},[]);return SatOpRow.fromPartial({nullsBitmask:o,values:c})}function deserializeRow(i,e,s){if(i!=null)return Object.fromEntries(e.columns.map((a,o)=>{let c;if(getMaskBit(i.nullsBitmask,o)==1)c=null;else{const d=getColumnType(s,e.table,a);c=deserializeColumnData(i.values[o],d)}return[a.name,c]}))}function calculateNumBytes(i){const e=i%8;return e==0?i/8:1+(i-e)/8}function deserializeColumnData(i,e){switch(e){case PgBasicType.PG_BOOL:return typeDecoder.bool(i);case PgBasicType.PG_INT:case PgBasicType.PG_INT2:case PgBasicType.PG_INT4:case PgBasicType.PG_INTEGER:return Number(typeDecoder.text(i));case PgBasicType.PG_FLOAT4:case PgBasicType.PG_FLOAT8:case PgBasicType.PG_REAL:return typeDecoder.float(i);case PgDateType.PG_TIMETZ:return typeDecoder.timetz(i);default:return typeDecoder.text(i)}}function serializeColumnData(i,e){switch(e){case PgBasicType.PG_BOOL:return typeEncoder.bool(i);case PgDateType.PG_TIMETZ:return typeEncoder.timetz(i);default:return typeEncoder.text(i)}}function serializeNullData(){return typeEncoder.text("")}function toMessage(i){const e=i[0],s=getTypeFromCode(e),a=getObjFromString(s);if(a==null)throw new SatelliteError(SatelliteErrorCode.UNEXPECTED_MESSAGE_TYPE,`${e})`);return a.decode(i.subarray(1))}class BaseRegistry{constructor(){Zt(this,"satellites");Zt(this,"startingPromises");Zt(this,"stoppingPromises");this.satellites={},this.startingPromises={},this.stoppingPromises={}}async ensureStarted(e,s,a,o,c,d,h,_){const rt=this.stoppingPromises[e];if(rt!==void 0)return rt.then(()=>this.ensureStarted(e,s,a,o,c,d,h,_));const lt=this.startingPromises,ct=lt[e];if(ct!==void 0)return ct;const bt=this.satellites,Ot=bt[e];if(Ot!==void 0)return Ot;const dt=this.startProcess(e,s,a,o,c,d,h).then(vt=>(bt[e]=vt,vt)).finally(()=>{delete lt[e]});return lt[e]=dt,dt}async ensureAlreadyStarted(e){const s=this.startingPromises[e];if(s!==void 0)return s;const a=this.satellites[e];if(a!==void 0)return a;throw new Error(`Satellite not running for db: ${e}`)}stop(e,s=!0){if(s){const h=this.stop.bind(this),$=this.startingPromises[e];if($!==void 0)return $.then(rt=>h(e))}const a=this.stoppingPromises,o=a[e];if(o!==void 0)return o;const c=this.satellites,d=c[e];if(d!==void 0){const h=d.stop(!0).then(()=>{delete c[e],delete a[e]});return a[e]=h,h}else return Promise.resolve()}async stopAll(e=!0){const s=this.stop.bind(this),a=Object.keys(this.satellites).map(d=>s(d)),o=Object.values(this.stoppingPromises);let c=a.concat(o);if(e){const d=Object.entries(this.startingPromises).map(([h,_])=>_.then(()=>s(h)));c=c.concat(d)}await Promise.all(c)}}class GlobalRegistry extends BaseRegistry{async startProcess(e,s,a,o,c,d,h){const _=validateConfig(h);if(_.length>0)throw Error(`invalid config: ${_}`);const $={host:h.replication.host,port:h.replication.port,ssl:h.replication.ssl,timeout:h.replication.timeout},rt=new SatelliteClient(s,d,$),lt={...satelliteDefaults,connectionBackOffOptions:h.connectionBackOffOptions,debug:h.debug},ct=new SatelliteProcess(e,a,o,c,rt,lt);return await ct.start(h.auth),ct}}const globalRegistry=new GlobalRegistry;class ElectricNamespace{constructor(e,s,a,o){Zt(this,"dbName");Zt(this,"adapter");Zt(this,"notifier");Zt(this,"registry");Zt(this,"_isConnected");Zt(this,"_unsubscribeStateChanges");this.dbName=e,this.adapter=s,this.notifier=a,this.registry=o,this._isConnected=!1,this._unsubscribeStateChanges=this.notifier.subscribeToConnectivityStateChanges(({connectivityState:c})=>{this.setIsConnected(c)})}get isConnected(){return this._isConnected}setIsConnected(e){this._isConnected=e==="connected"}potentiallyChanged(){this.notifier.potentiallyChanged()}async close(){this._unsubscribeStateChanges(),await this.registry.stop(this.dbName)}}class InvalidArgumentError extends Error{constructor(e){super(e),Object.setPrototypeOf(this,InvalidArgumentError.prototype),this.message=e}}function deepOmit(i){Object.keys(i).forEach(e=>{const s=i[e];s===void 0?delete i[e]:typeof s=="object"&&!Array.isArray(s)&&s!==null&&deepOmit(s)})}function validate(i,e){const s=e.parse(i);return deepOmit(s),s}function parseNestedCreate(i){const e=objectType({create:anyType().optional()}).strict();try{return e.parse(i)}catch(s){throw s instanceof ZodError&&s.issues.some(a=>a.code==="unrecognized_keys")?new InvalidArgumentError("Unsupported operation. Currently, only nested `create` operation is supported on create query."):s}}function parseNestedUpdate(i){const e=objectType({update:anyType().optional(),updateMany:anyType().optional()}).strict();try{return e.parse(i)}catch(s){throw s instanceof ZodError&&s.issues.some(a=>a.code==="unrecognized_keys")?new InvalidArgumentError("Unsupported operation. Currently, only nested `update` and `updateMany` operations are supported on an update query."):s}}function omitCountFromSelectAndIncludeSchema(i){const e=i,s=o=>o.unwrap().omit({_count:!0}).optional(),a={select:s(e.shape.select)};return e.shape.include&&(a.include=s(e.shape.include)),e.merge(objectType(a))}var squel$1={exports:{}};(function(i,e){(function(s,a){i.exports=a()})(commonjsGlobal,function(){var s=function et(j,St,mt){j===null&&(j=Function.prototype);var ft=Object.getOwnPropertyDescriptor(j,St);if(ft===void 0){var st=Object.getPrototypeOf(j);return st===null?void 0:et(st,St,mt)}else{if("value"in ft)return ft.value;var ht=ft.get;return ht===void 0?void 0:ht.call(mt)}},a=function(){function et(j,St){for(var mt=0;mt<St.length;mt++){var ft=St[mt];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(j,ft.key,ft)}}return function(j,St,mt){return St&&et(j.prototype,St),mt&&et(j,mt),j}}(),o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};function c(et,j){if(!et)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:et}function d(et,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);et.prototype=Object.create(j&&j.prototype,{constructor:{value:et,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(et,j):et.__proto__=j)}function h(et,j){if(!(et instanceof j))throw new TypeError("Cannot call a class as a function")}function _(et,j){return et.length?et+j:et}function $(et){for(var j=arguments.length,St=Array(j>1?j-1:0),mt=1;mt<j;mt++)St[mt-1]=arguments[mt];if(et&&St){var ft=function(Wt){(typeof Wt>"u"?"undefined":o(Wt))==="object"&&Object.getOwnPropertyNames(Wt).forEach(function(Ut){et[Ut]=Wt[Ut]})},st=!0,ht=!1,ot=void 0;try{for(var ut=St[Symbol.iterator](),It;!(st=(It=ut.next()).done);st=!0){var Ct=It.value;ft(Ct)}}catch(zt){ht=!0,ot=zt}finally{try{!st&&ut.return&&ut.return()}finally{if(ht)throw ot}}}return et}function rt(et){return et&&et.constructor.prototype===Object.prototype}function lt(et){return et&&et.constructor.prototype===Array.prototype}function ct(et){if(!et)return et;if(typeof et.clone=="function")return et.clone();if(rt(et)||lt(et)){var j=new et.constructor;return Object.getOwnPropertyNames(et).forEach(function(St){typeof et[St]!="function"&&(j[St]=ct(et[St]))}),j}else return JSON.parse(JSON.stringify(et))}function bt(et,j,St){var mt=typeof j>"u"?"undefined":o(j);if(mt!=="function"&&mt!=="string")throw new Error("type must be a class constructor or string");if(typeof St!="function")throw new Error("handler must be a function");var ft=!0,st=!1,ht=void 0;try{for(var ot=et[Symbol.iterator](),ut;!(ft=(ut=ot.next()).done);ft=!0){var It=ut.value;if(It.type===j){It.handler=St;return}}}catch(Ct){st=!0,ht=Ct}finally{try{!ft&&ot.return&&ot.return()}finally{if(st)throw ht}}et.push({type:j,handler:St})}function Ot(et,j,St){return dt(et,j)||dt(et,St)}function dt(et,j){for(var St=0;St<j.length;St++){var mt=j[St];if((typeof et>"u"?"undefined":o(et))===mt.type||typeof mt.type!="string"&&et instanceof mt.type)return mt.handler}}function vt(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,j={isSquelBuilder:function(st){return st&&!!st._toParamString}},St=function(st){return!j.isSquelBuilder(st)||!st.options.rawNesting};j.DefaultQueryBuilderOptions={autoQuoteTableNames:!1,autoQuoteFieldNames:!1,autoQuoteAliasNames:!0,useAsForTableAliasNames:!1,nameQuoteCharacter:"`",tableAliasQuoteCharacter:"`",fieldAliasQuoteCharacter:'"',valueHandlers:[],parameterCharacter:"?",numberedParameters:!1,numberedParametersPrefix:"$",numberedParametersStartAt:1,replaceSingleQuotes:!1,singleQuoteReplacement:"''",separator:" ",stringFormatter:null,rawNesting:!1},j.globalValueHandlers=[],j.registerValueHandler=function(ft,st){bt(j.globalValueHandlers,ft,st)},j.Cloneable=function(){function ft(){h(this,ft)}return a(ft,[{key:"clone",value:function(){var ht=new this.constructor;return $(ht,ct($({},this)))}}]),ft}(),j.BaseBuilder=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this)),ut=JSON.parse(JSON.stringify(j.DefaultQueryBuilderOptions));return["stringFormatter"].forEach(function(It){ut[It]=j.DefaultQueryBuilderOptions[It]}),ot.options=$({},ut,ht),ot}return a(st,[{key:"registerValueHandler",value:function(ot,ut){return bt(this.options.valueHandlers,ot,ut),this}},{key:"_sanitizeExpression",value:function(ot){if(!j.isSquelBuilder(ot)&&typeof ot!="string")throw new Error("expression must be a stringor builder instance");return ot}},{key:"_sanitizeName",value:function(ot,ut){if(typeof ot!="string")throw new Error(ut+" must be a string");return ot}},{key:"_sanitizeField",value:function(ot){return j.isSquelBuilder(ot)||(ot=this._sanitizeName(ot,"field name")),ot}},{key:"_sanitizeBaseBuilder",value:function(ot){if(j.isSquelBuilder(ot))return ot;throw new Error("must be a builder instance")}},{key:"_sanitizeTable",value:function(ot){if(typeof ot!="string")try{ot=this._sanitizeBaseBuilder(ot)}catch{throw new Error("table name must be a string or a builder")}else ot=this._sanitizeName(ot,"table");return ot}},{key:"_sanitizeTableAlias",value:function(ot){return this._sanitizeName(ot,"table alias")}},{key:"_sanitizeFieldAlias",value:function(ot){return this._sanitizeName(ot,"field alias")}},{key:"_sanitizeLimitOffset",value:function(ot){if(ot=parseInt(ot),0>ot||isNaN(ot))throw new Error("limit/offset must be >= 0");return ot}},{key:"_sanitizeValue",value:function(ot){var ut=typeof ot>"u"?"undefined":o(ot);if(ot!==null){if(!(ut==="string"||ut==="number"||ut==="boolean")){if(!j.isSquelBuilder(ot)){var It=!!Ot(ot,this.options.valueHandlers,j.globalValueHandlers);if(!It)throw new Error("field value must be a string, number, boolean, null or one of the registered custom value types")}}}return ot}},{key:"_escapeValue",value:function(ot){return this.options.replaceSingleQuotes&&ot?ot.replace(/\'/g,this.options.singleQuoteReplacement):ot}},{key:"_formatTableName",value:function(ot){if(this.options.autoQuoteTableNames){var ut=this.options.nameQuoteCharacter;ot=""+ut+ot+ut}return ot}},{key:"_formatFieldAlias",value:function(ot){if(this.options.autoQuoteAliasNames){var ut=this.options.fieldAliasQuoteCharacter;ot=""+ut+ot+ut}return ot}},{key:"_formatTableAlias",value:function(ot){if(this.options.autoQuoteAliasNames){var ut=this.options.tableAliasQuoteCharacter;ot=""+ut+ot+ut}return this.options.useAsForTableAliasNames?"AS "+ot:ot}},{key:"_formatFieldName",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options.autoQuoteFieldNames){var It=this.options.nameQuoteCharacter;ut.ignorePeriodsForFieldNameQuotes?ot=""+It+ot+It:ot=ot.split(".").map(function(Ct){return Ct==="*"?Ct:""+It+Ct+It}).join(".")}return ot}},{key:"_formatCustomValue",value:function(ot,ut,It){var Ct=Ot(ot,this.options.valueHandlers,j.globalValueHandlers);return Ct&&(ot=Ct(ot,ut,It),ot&&ot.rawNesting)?{formatted:!0,rawNesting:!0,value:ot.value}:{formatted:!!Ct,value:ot}}},{key:"_formatValueForParamArray",value:function(ot){var ut=this,It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return lt(ot)?ot.map(function(Ct){return ut._formatValueForParamArray(Ct,It)}):this._formatCustomValue(ot,!0,It).value}},{key:"_formatValueForQueryString",value:function(ot){var ut=this,It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ct=this._formatCustomValue(ot,!1,It),zt=Ct.rawNesting,Wt=Ct.formatted,Ut=Ct.value;if(Wt)return zt?Ut:this._applyNestingFormatting(Ut,St(ot));if(lt(Ut))Ut=Ut.map(function(Bt){return ut._formatValueForQueryString(Bt)}),Ut=this._applyNestingFormatting(Ut.join(", "),St(Ut));else{var or=typeof Ut>"u"?"undefined":o(Ut);if(Ut===null)Ut="NULL";else if(or==="boolean")Ut=Ut?"TRUE":"FALSE";else if(j.isSquelBuilder(Ut))Ut=this._applyNestingFormatting(Ut.toString(),St(Ut));else if(or!=="number"){if(or==="string"&&this.options.stringFormatter)return this.options.stringFormatter(Ut);if(It.dontQuote)Ut=""+Ut;else{var tr=this._escapeValue(Ut);Ut="'"+tr+"'"}}}return Ut}},{key:"_applyNestingFormatting",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(ot&&typeof ot=="string"&&ut&&!this.options.rawNesting){var It=ot.charAt(0)==="("&&ot.charAt(ot.length-1)===")";if(It)for(var Ct=0,zt=1;ot.length-1>++Ct;){var Wt=ot.charAt(Ct);if(Wt==="(")zt++;else if(Wt===")"&&(zt--,1>zt)){It=!1;break}}It||(ot="("+ot+")")}return ot}},{key:"_buildString",value:function(ot,ut){var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ct=It.nested,zt=It.buildParameterized,Wt=It.formattingOptions;ut=ut||[],ot=ot||"";for(var Ut="",or=-1,tr=[],Bt=this.options.parameterCharacter,Ht=0;ot.length>Ht;)if(ot.substr(Ht,Bt.length)===Bt){var er=ut[++or];if(zt)if(j.isSquelBuilder(er)){var lr=er._toParamString({buildParameterized:zt,nested:!0});Ut+=lr.text,lr.values.forEach(function(kr){return tr.push(kr)})}else if(er=this._formatValueForParamArray(er,Wt),lt(er)){var dr=er.map(function(){return Bt}).join(", ");Ut+="("+dr+")",er.forEach(function(kr){return tr.push(kr)})}else Ut+=Bt,tr.push(er);else Ut+=this._formatValueForQueryString(er,Wt);Ht+=Bt.length}else Ut+=ot.charAt(Ht),Ht++;return{text:this._applyNestingFormatting(Ut,!!Ct),values:tr}}},{key:"_buildManyStrings",value:function(ot,ut){for(var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ct=[],zt=[],Wt=0;ot.length>Wt;++Wt){var Ut=ot[Wt],or=ut[Wt],tr=this._buildString(Ut,or,{buildParameterized:It.buildParameterized,nested:!1}),Bt=tr.text,Ht=tr.values;Ct.push(Bt),Ht.forEach(function(er){return zt.push(er)})}return Ct=Ct.join(this.options.separator),{text:Ct.length?this._applyNestingFormatting(Ct,!!It.nested):"",values:zt}}},{key:"_toParamString",value:function(ot){throw new Error("Not yet implemented")}},{key:"toString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._toParamString(ot).text}},{key:"toParam",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._toParamString($({},ot,{buildParameterized:!0}))}}]),st}(j.Cloneable),j.Expression=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._nodes=[],ot}return a(st,[{key:"and",value:function(ot){for(var ut=arguments.length,It=Array(ut>1?ut-1:0),Ct=1;Ct<ut;Ct++)It[Ct-1]=arguments[Ct];return ot=this._sanitizeExpression(ot),this._nodes.push({type:"AND",expr:ot,para:It}),this}},{key:"or",value:function(ot){for(var ut=arguments.length,It=Array(ut>1?ut-1:0),Ct=1;Ct<ut;Ct++)It[Ct-1]=arguments[Ct];return ot=this._sanitizeExpression(ot),this._nodes.push({type:"OR",expr:ot,para:It}),this}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=[],It=[],Ct=!0,zt=!1,Wt=void 0;try{for(var Ut=this._nodes[Symbol.iterator](),or;!(Ct=(or=Ut.next()).done);Ct=!0){var tr=or.value,Bt=tr.type,Ht=tr.expr,er=tr.para,lr=j.isSquelBuilder(Ht)?Ht._toParamString({buildParameterized:ot.buildParameterized,nested:!0}):this._buildString(Ht,er,{buildParameterized:ot.buildParameterized}),dr=lr.text,kr=lr.values;ut.length&&ut.push(Bt),ut.push(dr),kr.forEach(function(Ir){return It.push(Ir)})}}catch(Ir){zt=!0,Wt=Ir}finally{try{!Ct&&Ut.return&&Ut.return()}finally{if(zt)throw Wt}}return ut=ut.join(" "),{text:this._applyNestingFormatting(ut,!!ot.nested),values:It}}}]),st}(j.BaseBuilder),j.Case=function(ft){d(st,ft);function st(ht){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};h(this,st);var ut=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ot));return rt(ht)&&(ot=ht,ht=null),ht&&(ut._fieldName=ut._sanitizeField(ht)),ut.options=$({},j.DefaultQueryBuilderOptions,ot),ut._cases=[],ut._elseValue=null,ut}return a(st,[{key:"when",value:function(ot){for(var ut=arguments.length,It=Array(ut>1?ut-1:0),Ct=1;Ct<ut;Ct++)It[Ct-1]=arguments[Ct];return this._cases.unshift({expression:ot,values:It||[]}),this}},{key:"then",value:function(ot){if(this._cases.length==0)throw new Error("when() needs to be called first");return this._cases[0].result=ot,this}},{key:"else",value:function(ot){return this._elseValue=ot,this}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut="",It=[],Ct=!0,zt=!1,Wt=void 0;try{for(var Ut=this._cases[Symbol.iterator](),or;!(Ct=(or=Ut.next()).done);Ct=!0){var tr=or.value,Bt=tr.expression,Ht=tr.values,er=tr.result;ut=_(ut," ");var lr=this._buildString(Bt,Ht,{buildParameterized:ot.buildParameterized,nested:!0});ut+="WHEN "+lr.text+" THEN "+this._formatValueForQueryString(er),lr.values.forEach(function(dr){return It.push(dr)})}}catch(dr){zt=!0,Wt=dr}finally{try{!Ct&&Ut.return&&Ut.return()}finally{if(zt)throw Wt}}return ut.length?(ut+=" ELSE "+this._formatValueForQueryString(this._elseValue)+" END",this._fieldName&&(ut=this._fieldName+" "+ut),ut="CASE "+ut):ut=this._formatValueForQueryString(this._elseValue),{text:ut,values:It}}}]),st}(j.BaseBuilder),j.Block=function(ft){d(st,ft);function st(ht){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht))}return a(st,[{key:"exposedMethods",value:function(){for(var ot={},ut=this;ut;)Object.getOwnPropertyNames(ut).forEach(function(It){It!=="constructor"&&typeof ut[It]=="function"&&It.charAt(0)!=="_"&&!j.Block.prototype[It]&&(ot[It]=ut[It])}),ut=Object.getPrototypeOf(ut);return ot}}]),st}(j.BaseBuilder),j.StringBlock=function(ft){d(st,ft);function st(ht,ot){h(this,st);var ut=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ut._str=ot,ut}return a(st,[{key:"_toParamString",value:function(){return{text:this._str,values:[]}}}]),st}(j.Block),j.FunctionBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._strings=[],ot._values=[],ot}return a(st,[{key:"function",value:function(ot){this._strings.push(ot);for(var ut=arguments.length,It=Array(ut>1?ut-1:0),Ct=1;Ct<ut;Ct++)It[Ct-1]=arguments[Ct];this._values.push(It)}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._buildManyStrings(this._strings,this._values,ot)}}]),st}(j.Block),j.registerValueHandler(j.FunctionBlock,function(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return st?ft.toParam():ft.toString()}),j.AbstractTableBlock=function(ft){d(st,ft);function st(ht,ot){h(this,st);var ut=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ut._tables=[],ut}return a(st,[{key:"_table",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ut=ut&&this._sanitizeTableAlias(ut),ot=this._sanitizeTable(ot),this.options.singleTable&&(this._tables=[]),this._tables.push({table:ot,alias:ut})}},{key:"_hasTable",value:function(){return 0<this._tables.length}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut="",It=[];if(this._hasTable()){var Ct=!0,zt=!1,Wt=void 0;try{for(var Ut=this._tables[Symbol.iterator](),or;!(Ct=(or=Ut.next()).done);Ct=!0){var tr=or.value,Bt=tr.table,Ht=tr.alias;ut=_(ut,", ");var er=void 0;if(j.isSquelBuilder(Bt)){var lr=Bt._toParamString({buildParameterized:ot.buildParameterized,nested:!0}),dr=lr.text,kr=lr.values;er=dr,kr.forEach(function(Ir){return It.push(Ir)})}else er=this._formatTableName(Bt);Ht&&(er+=" "+this._formatTableAlias(Ht)),ut+=er}}catch(Ir){zt=!0,Wt=Ir}finally{try{!Ct&&Ut.return&&Ut.return()}finally{if(zt)throw Wt}}this.options.prefix&&(ut=this.options.prefix+" "+ut)}return{text:ut,values:It}}}]),st}(j.Block),j.TargetTableBlock=function(ft){d(st,ft);function st(){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).apply(this,arguments))}return a(st,[{key:"target",value:function(ot){this._table(ot)}}]),st}(j.AbstractTableBlock),j.UpdateTableBlock=function(ft){d(st,ft);function st(){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).apply(this,arguments))}return a(st,[{key:"table",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this._table(ot,ut)}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._hasTable())throw new Error("table() needs to be called");return s(st.prototype.__proto__||Object.getPrototypeOf(st.prototype),"_toParamString",this).call(this,ot)}}]),st}(j.AbstractTableBlock),j.FromTableBlock=function(ft){d(st,ft);function st(ht){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,$({},ht,{prefix:"FROM"})))}return a(st,[{key:"from",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this._table(ot,ut)}}]),st}(j.AbstractTableBlock),j.IntoTableBlock=function(ft){d(st,ft);function st(ht){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,$({},ht,{prefix:"INTO",singleTable:!0})))}return a(st,[{key:"into",value:function(ot){this._table(ot)}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._hasTable())throw new Error("into() needs to be called");return s(st.prototype.__proto__||Object.getPrototypeOf(st.prototype),"_toParamString",this).call(this,ot)}}]),st}(j.AbstractTableBlock),j.GetFieldBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._fields=[],ot}return a(st,[{key:"fields",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(lt(ot)){var It=!0,Ct=!1,zt=void 0;try{for(var Wt=ot[Symbol.iterator](),Ut;!(It=(Ut=Wt.next()).done);It=!0){var or=Ut.value;this.field(or,null,ut)}}catch(Ht){Ct=!0,zt=Ht}finally{try{!It&&Wt.return&&Wt.return()}finally{if(Ct)throw zt}}}else for(var tr in ot){var Bt=ot[tr];this.field(tr,Bt,ut)}}},{key:"field",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ut=ut&&this._sanitizeFieldAlias(ut),ot=this._sanitizeField(ot);var Ct=this._fields.filter(function(zt){return zt.name===ot&&zt.alias===ut});if(Ct.length)return this;this._fields.push({name:ot,alias:ut,options:It})}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=ot.queryBuilder,It=ot.buildParameterized,Ct="",zt=[],Wt=!0,Ut=!1,or=void 0;try{for(var tr=this._fields[Symbol.iterator](),Bt;!(Wt=(Bt=tr.next()).done);Wt=!0){var Ht=Bt.value;Ct=_(Ct,", ");var er=Ht.name,lr=Ht.alias,dr=Ht.options;if(typeof er=="string")Ct+=this._formatFieldName(er,dr);else{var kr=er._toParamString({nested:!0,buildParameterized:It});Ct+=kr.text,kr.values.forEach(function(Kt){return zt.push(Kt)})}lr&&(Ct+=" AS "+this._formatFieldAlias(lr))}}catch(Kt){Ut=!0,or=Kt}finally{try{!Wt&&tr.return&&tr.return()}finally{if(Ut)throw or}}if(!Ct.length){var Ir=ut&&ut.getBlock(j.FromTableBlock);Ir&&Ir._hasTable()&&(Ct="*")}return{text:Ct,values:zt}}}]),st}(j.Block),j.AbstractSetFieldBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._reset(),ot}return a(st,[{key:"_reset",value:function(){this._fields=[],this._values=[[]],this._valueOptions=[[]]}},{key:"_set",value:function(ot,ut){var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this._values.length>1)throw new Error("Cannot set multiple rows of fields this way.");typeof ut<"u"&&(ut=this._sanitizeValue(ut)),ot=this._sanitizeField(ot);var Ct=this._fields.indexOf(ot);Ct===-1&&(this._fields.push(ot),Ct=this._fields.length-1),this._values[0][Ct]=ut,this._valueOptions[0][Ct]=It}},{key:"_setFields",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((typeof ot>"u"?"undefined":o(ot))!=="object")throw new Error("Expected an object but got "+(typeof ot>"u"?"undefined":o(ot)));for(var It in ot)this._set(It,ot[It],ut)}},{key:"_setFieldsRows",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!lt(ot))throw new Error("Expected an array of objects but got "+(typeof ot>"u"?"undefined":o(ot)));this._reset();for(var It=0;ot.length>It;++It){var Ct=ot[It];for(var zt in Ct){var Wt=Ct[zt];zt=this._sanitizeField(zt),Wt=this._sanitizeValue(Wt);var Ut=this._fields.indexOf(zt);if(0<It&&Ut===-1)throw new Error("All fields in subsequent rows must match the fields in the first row");Ut===-1&&(this._fields.push(zt),Ut=this._fields.length-1),lt(this._values[It])||(this._values[It]=[],this._valueOptions[It]=[]),this._values[It][Ut]=Wt,this._valueOptions[It][Ut]=ut}}}}]),st}(j.Block),j.SetFieldBlock=function(ft){d(st,ft);function st(){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).apply(this,arguments))}return a(st,[{key:"set",value:function(ot,ut,It){this._set(ot,ut,It)}},{key:"setFields",value:function(ot,ut){this._setFields(ot,ut)}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=ot.buildParameterized;if(0>=this._fields.length)throw new Error("set() needs to be called");for(var It="",Ct=[],zt=0;zt<this._fields.length;++zt){It=_(It,", ");var Wt=this._formatFieldName(this._fields[zt]),Ut=this._values[0][zt];0>Wt.indexOf("=")&&(Wt=Wt+" = "+this.options.parameterCharacter);var or=this._buildString(Wt,[Ut],{buildParameterized:ut,formattingOptions:this._valueOptions[0][zt]});It+=or.text,or.values.forEach(function(tr){return Ct.push(tr)})}return{text:"SET "+It,values:Ct}}}]),st}(j.AbstractSetFieldBlock),j.InsertFieldValueBlock=function(ft){d(st,ft);function st(){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).apply(this,arguments))}return a(st,[{key:"set",value:function(ot,ut){var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this._set(ot,ut,It)}},{key:"setFields",value:function(ot,ut){this._setFields(ot,ut)}},{key:"setFieldsRows",value:function(ot,ut){this._setFieldsRows(ot,ut)}},{key:"_toParamString",value:function(){for(var ot=this,ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},It=ut.buildParameterized,Ct=this._fields.map(function(Bt){return ot._formatFieldName(Bt)}).join(", "),zt=[],Wt=[],Ut=0;Ut<this._values.length;++Ut){zt[Ut]="";for(var or=0;or<this._values[Ut].length;++or){var tr=this._buildString(this.options.parameterCharacter,[this._values[Ut][or]],{buildParameterized:It,formattingOptions:this._valueOptions[Ut][or]});tr.values.forEach(function(Bt){return Wt.push(Bt)}),zt[Ut]=_(zt[Ut],", "),zt[Ut]+=tr.text}}return{text:Ct.length?"("+Ct+") VALUES ("+zt.join("), (")+")":"",values:Wt}}}]),st}(j.AbstractSetFieldBlock),j.InsertFieldsFromQueryBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._fields=[],ot._query=null,ot}return a(st,[{key:"fromQuery",value:function(ot,ut){var It=this;this._fields=ot.map(function(Ct){return It._sanitizeField(Ct)}),this._query=this._sanitizeBaseBuilder(ut)}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut="",It=[];if(this._fields.length&&this._query){var Ct=this._query._toParamString({buildParameterized:ot.buildParameterized,nested:!0}),zt=Ct.text,Wt=Ct.values;ut="("+this._fields.join(", ")+") "+this._applyNestingFormatting(zt),It=Wt}return{text:ut,values:It}}}]),st}(j.Block),j.DistinctBlock=function(ft){d(st,ft);function st(){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).apply(this,arguments))}return a(st,[{key:"distinct",value:function(){this._useDistinct=!0}},{key:"_toParamString",value:function(){return{text:this._useDistinct?"DISTINCT":"",values:[]}}}]),st}(j.Block),j.GroupByBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._groups=[],ot}return a(st,[{key:"group",value:function(ot){this._groups.push(this._sanitizeField(ot))}},{key:"_toParamString",value:function(){return{text:this._groups.length?"GROUP BY "+this._groups.join(", "):"",values:[]}}}]),st}(j.Block),j.AbstractVerbSingleValueBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._value=null,ot}return a(st,[{key:"_setValue",value:function(ot){this._value=ot!==null?this._sanitizeLimitOffset(ot):ot}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=this._value!==null?this.options.verb+" "+this.options.parameterCharacter:"",It=this._value!==null?[this._value]:[];return this._buildString(ut,It,ot)}}]),st}(j.Block),j.OffsetBlock=function(ft){d(st,ft);function st(ht){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,$({},ht,{verb:"OFFSET"})))}return a(st,[{key:"offset",value:function(ot){this._setValue(ot)}}]),st}(j.AbstractVerbSingleValueBlock),j.LimitBlock=function(ft){d(st,ft);function st(ht){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,$({},ht,{verb:"LIMIT"})))}return a(st,[{key:"limit",value:function(ot){this._setValue(ot)}}]),st}(j.AbstractVerbSingleValueBlock),j.AbstractConditionBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._conditions=[],ot}return a(st,[{key:"_condition",value:function(ot){ot=this._sanitizeExpression(ot);for(var ut=arguments.length,It=Array(ut>1?ut-1:0),Ct=1;Ct<ut;Ct++)It[Ct-1]=arguments[Ct];this._conditions.push({expr:ot,values:It||[]})}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=[],It=[],Ct=!0,zt=!1,Wt=void 0;try{for(var Ut=this._conditions[Symbol.iterator](),or;!(Ct=(or=Ut.next()).done);Ct=!0){var tr=or.value,Bt=tr.expr,Ht=tr.values,er=j.isSquelBuilder(Bt)?Bt._toParamString({buildParameterized:ot.buildParameterized}):this._buildString(Bt,Ht,{buildParameterized:ot.buildParameterized});er.text.length&&ut.push(er.text),er.values.forEach(function(lr){return It.push(lr)})}}catch(lr){zt=!0,Wt=lr}finally{try{!Ct&&Ut.return&&Ut.return()}finally{if(zt)throw Wt}}return ut.length&&(ut=ut.join(") AND (")),{text:ut.length?this.options.verb+" ("+ut+")":"",values:It}}}]),st}(j.Block),j.WhereBlock=function(ft){d(st,ft);function st(ht){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,$({},ht,{verb:"WHERE"})))}return a(st,[{key:"where",value:function(ot){for(var ut=arguments.length,It=Array(ut>1?ut-1:0),Ct=1;Ct<ut;Ct++)It[Ct-1]=arguments[Ct];this._condition.apply(this,[ot].concat(It))}}]),st}(j.AbstractConditionBlock),j.HavingBlock=function(ft){d(st,ft);function st(ht){return h(this,st),c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,$({},ht,{verb:"HAVING"})))}return a(st,[{key:"having",value:function(ot){for(var ut=arguments.length,It=Array(ut>1?ut-1:0),Ct=1;Ct<ut;Ct++)It[Ct-1]=arguments[Ct];this._condition.apply(this,[ot].concat(It))}}]),st}(j.AbstractConditionBlock),j.OrderByBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._orders=[],ot}return a(st,[{key:"order",value:function(ot,ut){ot=this._sanitizeField(ot),typeof ut!="string"&&(ut===void 0?ut="ASC":ut!==null&&(ut=ut?"ASC":"DESC"));for(var It=arguments.length,Ct=Array(It>2?It-2:0),zt=2;zt<It;zt++)Ct[zt-2]=arguments[zt];this._orders.push({field:ot,dir:ut,values:Ct||[]})}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut="",It=[],Ct=!0,zt=!1,Wt=void 0;try{for(var Ut=this._orders[Symbol.iterator](),or;!(Ct=(or=Ut.next()).done);Ct=!0){var tr=or.value,Bt=tr.field,Ht=tr.dir,er=tr.values;ut=_(ut,", ");var lr=this._buildString(Bt,er,{buildParameterized:ot.buildParameterized});ut+=lr.text,lt(lr.values)&&lr.values.forEach(function(dr){return It.push(dr)}),Ht!==null&&(ut+=" "+Ht)}}catch(dr){zt=!0,Wt=dr}finally{try{!Ct&&Ut.return&&Ut.return()}finally{if(zt)throw Wt}}return{text:ut.length?"ORDER BY "+ut:"",values:It}}}]),st}(j.Block),j.JoinBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._joins=[],ot}return a(st,[{key:"join",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Ct=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"INNER";ot=this._sanitizeTable(ot,!0),ut=ut&&this._sanitizeTableAlias(ut),It=It&&this._sanitizeExpression(It),this._joins.push({type:Ct,table:ot,alias:ut,condition:It})}},{key:"left_join",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.join(ot,ut,It,"LEFT")}},{key:"right_join",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.join(ot,ut,It,"RIGHT")}},{key:"outer_join",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.join(ot,ut,It,"OUTER")}},{key:"left_outer_join",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.join(ot,ut,It,"LEFT OUTER")}},{key:"full_join",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.join(ot,ut,It,"FULL")}},{key:"cross_join",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.join(ot,ut,It,"CROSS")}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut="",It=[],Ct=!0,zt=!1,Wt=void 0;try{for(var Ut=this._joins[Symbol.iterator](),or;!(Ct=(or=Ut.next()).done);Ct=!0){var tr=or.value,Bt=tr.type,Ht=tr.table,er=tr.alias,lr=tr.condition;ut=_(ut,this.options.separator);var dr=void 0;if(j.isSquelBuilder(Ht)){var kr=Ht._toParamString({buildParameterized:ot.buildParameterized,nested:!0});kr.values.forEach(function(Kt){return It.push(Kt)}),dr=kr.text}else dr=this._formatTableName(Ht);if(ut+=Bt+" JOIN "+dr,er&&(ut+=" "+this._formatTableAlias(er)),lr){ut+=" ON ";var Ir=void 0;j.isSquelBuilder(lr)?Ir=lr._toParamString({buildParameterized:ot.buildParameterized}):Ir=this._buildString(lr,[],{buildParameterized:ot.buildParameterized}),ut+=this._applyNestingFormatting(Ir.text),Ir.values.forEach(function(Kt){return It.push(Kt)})}}}catch(Kt){zt=!0,Wt=Kt}finally{try{!Ct&&Ut.return&&Ut.return()}finally{if(zt)throw Wt}}return{text:ut,values:It}}}]),st}(j.Block),j.UnionBlock=function(ft){d(st,ft);function st(ht){h(this,st);var ot=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));return ot._unions=[],ot}return a(st,[{key:"union",value:function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"UNION";ot=this._sanitizeTable(ot),this._unions.push({type:ut,table:ot})}},{key:"union_all",value:function(ot){this.union(ot,"UNION ALL")}},{key:"_toParamString",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut="",It=[],Ct=!0,zt=!1,Wt=void 0;try{for(var Ut=this._unions[Symbol.iterator](),or;!(Ct=(or=Ut.next()).done);Ct=!0){var tr=or.value,Bt=tr.type,Ht=tr.table;ut=_(ut,this.options.separator);var er=void 0;if(Ht instanceof j.BaseBuilder){var lr=Ht._toParamString({buildParameterized:ot.buildParameterized,nested:!0});er=lr.text,lr.values.forEach(function(dr){return It.push(dr)})}else ut=this._formatTableName(Ht);ut+=Bt+" "+er}}catch(dr){zt=!0,Wt=dr}finally{try{!Ct&&Ut.return&&Ut.return()}finally{if(zt)throw Wt}}return{text:ut,values:It}}}]),st}(j.Block),j.QueryBuilder=function(ft){d(st,ft);function st(ht,ot){h(this,st);var ut=c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht));ut.blocks=ot||[];var It=!0,Ct=!1,zt=void 0;try{for(var Wt=ut.blocks[Symbol.iterator](),Ut;!(It=(Ut=Wt.next()).done);It=!0){var or=Ut.value,tr=or.exposedMethods();for(var Bt in tr){var Ht=tr[Bt];if(ut[Bt]!==void 0)throw new Error("Builder already has a builder method called: "+Bt);(function(er,lr,dr){ut[lr]=function(){for(var kr=arguments.length,Ir=Array(kr),Kt=0;Kt<kr;Kt++)Ir[Kt]=arguments[Kt];return dr.call.apply(dr,[er].concat(Ir)),ut}})(or,Bt,Ht)}}}catch(er){Ct=!0,zt=er}finally{try{!It&&Wt.return&&Wt.return()}finally{if(Ct)throw zt}}return ut}return a(st,[{key:"registerValueHandler",value:function(ot,ut){var It=!0,Ct=!1,zt=void 0;try{for(var Wt=this.blocks[Symbol.iterator](),Ut;!(It=(Ut=Wt.next()).done);It=!0){var or=Ut.value;or.registerValueHandler(ot,ut)}}catch(tr){Ct=!0,zt=tr}finally{try{!It&&Wt.return&&Wt.return()}finally{if(Ct)throw zt}}return s(st.prototype.__proto__||Object.getPrototypeOf(st.prototype),"registerValueHandler",this).call(this,ot,ut),this}},{key:"updateOptions",value:function(ot){this.options=$({},this.options,ot);var ut=!0,It=!1,Ct=void 0;try{for(var zt=this.blocks[Symbol.iterator](),Wt;!(ut=(Wt=zt.next()).done);ut=!0){var Ut=Wt.value;Ut.options=$({},Ut.options,ot)}}catch(or){It=!0,Ct=or}finally{try{!ut&&zt.return&&zt.return()}finally{if(It)throw Ct}}}},{key:"_toParamString",value:function(){var ot=this,ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ut=$({},this.options,ut);var It=this.blocks.map(function(Bt){return Bt._toParamString({buildParameterized:ut.buildParameterized,queryBuilder:ot})}),Ct=It.map(function(Bt){return Bt.text}),zt=It.map(function(Bt){return Bt.values}),Wt=Ct.filter(function(Bt){return 0<Bt.length}).join(ut.separator),Ut=[];if(zt.forEach(function(Bt){return Bt.forEach(function(Ht){return Ut.push(Ht)})}),!ut.nested&&ut.numberedParameters){var or=ut.numberedParametersStartAt!==void 0?ut.numberedParametersStartAt:1,tr=ut.parameterCharacter.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");Wt=Wt.replace(new RegExp(tr,"g"),function(){return""+ut.numberedParametersPrefix+or++})}return{text:this._applyNestingFormatting(Wt,!!ut.nested),values:Ut}}},{key:"clone",value:function(){var ot=this.blocks.map(function(ut){return ut.clone()});return new this.constructor(this.options,ot)}},{key:"getBlock",value:function(ot){var ut=this.blocks.filter(function(It){return It instanceof ot});return ut[0]}}]),st}(j.BaseBuilder),j.Select=function(ft){d(st,ft);function st(ht){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,st),ot=ot||[new j.StringBlock(ht,"SELECT"),new j.FunctionBlock(ht),new j.DistinctBlock(ht),new j.GetFieldBlock(ht),new j.FromTableBlock(ht),new j.JoinBlock(ht),new j.WhereBlock(ht),new j.GroupByBlock(ht),new j.HavingBlock(ht),new j.OrderByBlock(ht),new j.LimitBlock(ht),new j.OffsetBlock(ht),new j.UnionBlock(ht)],c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht,ot))}return st}(j.QueryBuilder),j.Update=function(ft){d(st,ft);function st(ht){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,st),ot=ot||[new j.StringBlock(ht,"UPDATE"),new j.UpdateTableBlock(ht),new j.SetFieldBlock(ht),new j.WhereBlock(ht),new j.OrderByBlock(ht),new j.LimitBlock(ht)],c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht,ot))}return st}(j.QueryBuilder),j.Delete=function(ft){d(st,ft);function st(ht){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,st),ot=ot||[new j.StringBlock(ht,"DELETE"),new j.TargetTableBlock(ht),new j.FromTableBlock($({},ht,{singleTable:!0})),new j.JoinBlock(ht),new j.WhereBlock(ht),new j.OrderByBlock(ht),new j.LimitBlock(ht)],c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht,ot))}return st}(j.QueryBuilder),j.Insert=function(ft){d(st,ft);function st(ht){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,st),ot=ot||[new j.StringBlock(ht,"INSERT"),new j.IntoTableBlock(ht),new j.InsertFieldValueBlock(ht),new j.InsertFieldsFromQueryBlock(ht)],c(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ht,ot))}return st}(j.QueryBuilder);var mt={VERSION:"5.13.0",flavour:et,expr:function(st){return new j.Expression(st)},case:function(st,ht){return new j.Case(st,ht)},select:function(st,ht){return new j.Select(st,ht)},update:function(st,ht){return new j.Update(st,ht)},insert:function(st,ht){return new j.Insert(st,ht)},delete:function(st,ht){return new j.Delete(st,ht)},str:function(){var st=new j.FunctionBlock;return st.function.apply(st,arguments),st},rstr:function(){var st=new j.FunctionBlock({rawNesting:!0});return st.function.apply(st,arguments),st},registerValueHandler:j.registerValueHandler};return mt.remove=mt.delete,mt.cls=j,mt}var at=vt();return at.flavours={},at.useFlavour=function(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!et)return at;if(at.flavours[et]instanceof Function){var j=vt(et);return at.flavours[et].call(null,j),j.flavours=at.flavours,j.useFlavour=at.useFlavour,j}else throw new Error("Flavour not available: "+et)},at.flavours.mssql=function(et){var j=et.cls;j.DefaultQueryBuilderOptions.replaceSingleQuotes=!0,j.DefaultQueryBuilderOptions.autoQuoteAliasNames=!1,j.DefaultQueryBuilderOptions.numberedParametersPrefix="@",et.registerValueHandler(Date,function(St){return"'"+St.getUTCFullYear()+"-"+(St.getUTCMonth()+1)+"-"+St.getUTCDate()+" "+St.getUTCHours()+":"+St.getUTCMinutes()+":"+St.getUTCSeconds()+"'"}),j.MssqlLimitOffsetTopBlock=function(St){d(mt,St);function mt(ft){h(this,mt);var st=c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft));st._limits=null,st._offsets=null;var ht=function(ut){ut=this._sanitizeLimitOffset(ut),this._parent._limits=ut};return st.ParentBlock=function(ot){d(ut,ot);function ut(It){h(this,ut);var Ct=c(this,(ut.__proto__||Object.getPrototypeOf(ut)).call(this,It.options));return Ct._parent=It,Ct}return ut}(j.Block),st.LimitBlock=function(ot){d(ut,ot);function ut(It){h(this,ut);var Ct=c(this,(ut.__proto__||Object.getPrototypeOf(ut)).call(this,It));return Ct.limit=ht,Ct}return a(ut,[{key:"_toParamString",value:function(){var Ct="";return this._parent._limits&&this._parent._offsets&&(Ct="FETCH NEXT "+this._parent._limits+" ROWS ONLY"),{text:Ct,values:[]}}}]),ut}(st.ParentBlock),st.TopBlock=function(ot){d(ut,ot);function ut(It){h(this,ut);var Ct=c(this,(ut.__proto__||Object.getPrototypeOf(ut)).call(this,It));return Ct.top=ht,Ct}return a(ut,[{key:"_toParamString",value:function(){var Ct="";return this._parent._limits&&!this._parent._offsets&&(Ct="TOP ("+this._parent._limits+")"),{text:Ct,values:[]}}}]),ut}(st.ParentBlock),st.OffsetBlock=function(ot){d(ut,ot);function ut(){return h(this,ut),c(this,(ut.__proto__||Object.getPrototypeOf(ut)).apply(this,arguments))}return a(ut,[{key:"offset",value:function(Ct){this._parent._offsets=this._sanitizeLimitOffset(Ct)}},{key:"_toParamString",value:function(){var Ct="";return this._parent._offsets&&(Ct="OFFSET "+this._parent._offsets+" ROWS"),{text:Ct,values:[]}}}]),ut}(st.ParentBlock),st}return a(mt,[{key:"LIMIT",value:function(){return new this.LimitBlock(this)}},{key:"TOP",value:function(){return new this.TopBlock(this)}},{key:"OFFSET",value:function(){return new this.OffsetBlock(this)}}]),mt}(j.Block),j.MssqlUpdateTopBlock=function(St){d(mt,St);function mt(ft){h(this,mt);var st=c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft));return st._limits=null,st.limit=st.top=function(ht){st._limits=st._sanitizeLimitOffset(ht)},st}return a(mt,[{key:"_toParamString",value:function(){return{text:this._limits?"TOP ("+this._limits+")":"",values:[]}}}]),mt}(j.Block),j.MssqlInsertFieldValueBlock=function(St){d(mt,St);function mt(ft){h(this,mt);var st=c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft));return st._outputs=[],st}return a(mt,[{key:"output",value:function(st){var ht=this;typeof st=="string"?this._outputs.push("INSERTED."+this._sanitizeField(st)):st.forEach(function(ot){ht._outputs.push("INSERTED."+ht._sanitizeField(ot))})}},{key:"_toParamString",value:function(st){var ht=s(mt.prototype.__proto__||Object.getPrototypeOf(mt.prototype),"_toParamString",this).call(this,st);if(ht.text.length&&0<this._outputs.length){var ot="OUTPUT "+this._outputs.join(", ")+" ",ut=ht.text.indexOf("VALUES");ht.text=ht.text.substr(0,ut)+ot+ht.text.substr(ut)}return ht}}]),mt}(j.InsertFieldValueBlock),j.MssqlUpdateDeleteOutputBlock=function(St){d(mt,St);function mt(ft){h(this,mt);var st=c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft));return st._outputs=[],st}return a(mt,[{key:"outputs",value:function(st){for(var ht in st)this.output(ht,st[ht])}},{key:"output",value:function(st){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;st=this._sanitizeField(st),ht=ht&&this._sanitizeFieldAlias(ht),this._outputs.push({name:this.options.forDelete?"DELETED."+st:"INSERTED."+st,alias:ht})}},{key:"_toParamString",value:function(st){var ht="";if(this._outputs.length){var ot=!0,ut=!1,It=void 0;try{for(var Ct=this._outputs[Symbol.iterator](),zt;!(ot=(zt=Ct.next()).done);ot=!0){var Wt=zt.value;ht=_(ht,", "),ht+=Wt.name,Wt.alias&&(ht+=" AS "+this._formatFieldAlias(Wt.alias))}}catch(Ut){ut=!0,It=Ut}finally{try{!ot&&Ct.return&&Ct.return()}finally{if(ut)throw It}}ht="OUTPUT "+ht}return{text:ht,values:[]}}}]),mt}(j.Block),j.Select=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;h(this,mt);var ht=new j.MssqlLimitOffsetTopBlock(ft);return st=st||[new j.StringBlock(ft,"SELECT"),new j.DistinctBlock(ft),ht.TOP(),new j.GetFieldBlock(ft),new j.FromTableBlock(ft),new j.JoinBlock(ft),new j.WhereBlock(ft),new j.GroupByBlock(ft),new j.OrderByBlock(ft),ht.OFFSET(),ht.LIMIT(),new j.UnionBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder),j.Update=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,mt),st=st||[new j.StringBlock(ft,"UPDATE"),new j.MssqlUpdateTopBlock(ft),new j.UpdateTableBlock(ft),new j.SetFieldBlock(ft),new j.MssqlUpdateDeleteOutputBlock(ft),new j.WhereBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder),j.Delete=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,mt),st=st||[new j.StringBlock(ft,"DELETE"),new j.TargetTableBlock(ft),new j.FromTableBlock($({},ft,{singleTable:!0})),new j.JoinBlock(ft),new j.MssqlUpdateDeleteOutputBlock($({},ft,{forDelete:!0})),new j.WhereBlock(ft),new j.OrderByBlock(ft),new j.LimitBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder),j.Insert=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,mt),st=st||[new j.StringBlock(ft,"INSERT"),new j.IntoTableBlock(ft),new j.MssqlInsertFieldValueBlock(ft),new j.InsertFieldsFromQueryBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder)},at.flavours.mysql=function(et){var j=et.cls;j.MysqlOnDuplicateKeyUpdateBlock=function(St){d(mt,St);function mt(){return h(this,mt),c(this,(mt.__proto__||Object.getPrototypeOf(mt)).apply(this,arguments))}return a(mt,[{key:"onDupUpdate",value:function(st,ht,ot){this._set(st,ht,ot)}},{key:"_toParamString",value:function(){for(var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ht="",ot=[],ut=0;ut<this._fields.length;++ut){ht=_(ht,", ");var It=this._fields[ut],Ct=this._values[0][ut],zt=this._valueOptions[0][ut];if(typeof Ct>"u")ht+=It;else{var Wt=this._buildString(It+" = "+this.options.parameterCharacter,[Ct],{buildParameterized:st.buildParameterized,formattingOptions:zt});ht+=Wt.text,Wt.values.forEach(function(Ut){return ot.push(Ut)})}}return{text:ht.length?"ON DUPLICATE KEY UPDATE "+ht:"",values:ot}}}]),mt}(j.AbstractSetFieldBlock),j.Insert=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,mt),st=st||[new j.StringBlock(ft,"INSERT"),new j.IntoTableBlock(ft),new j.InsertFieldValueBlock(ft),new j.InsertFieldsFromQueryBlock(ft),new j.MysqlOnDuplicateKeyUpdateBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder),j.Replace=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,mt),st=st||[new j.StringBlock(ft,"REPLACE"),new j.IntoTableBlock(ft),new j.InsertFieldValueBlock(ft),new j.InsertFieldsFromQueryBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder),et.replace=function(St,mt){return new j.Replace(St,mt)}},at.flavours.postgres=function(et){var j=et.cls;j.DefaultQueryBuilderOptions.numberedParameters=!0,j.DefaultQueryBuilderOptions.numberedParametersStartAt=1,j.DefaultQueryBuilderOptions.autoQuoteAliasNames=!1,j.DefaultQueryBuilderOptions.useAsForTableAliasNames=!0,j.PostgresOnConflictKeyUpdateBlock=function(St){d(mt,St);function mt(){return h(this,mt),c(this,(mt.__proto__||Object.getPrototypeOf(mt)).apply(this,arguments))}return a(mt,[{key:"onConflict",value:function(st,ht){var ot=this;this._onConflict=!0,st&&(lt(st)||(st=[st]),this._dupFields=st.map(this._sanitizeField.bind(this)),ht&&Object.keys(ht).forEach(function(ut){ot._set(ut,ht[ut])}))}},{key:"_toParamString",value:function(){for(var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ht="",ot=[],ut=0;ut<this._fields.length;++ut){ht=_(ht,", ");var It=this._fields[ut],Ct=this._values[0][ut],zt=this._valueOptions[0][ut];if(typeof Ct>"u")ht+=It;else{var Wt=this._buildString(It+" = "+this.options.parameterCharacter,[Ct],{buildParameterized:st.buildParameterized,formattingOptions:zt});ht+=Wt.text,Wt.values.forEach(function(Bt){return ot.push(Bt)})}}var Ut={text:"",values:ot};if(this._onConflict){var or=this._dupFields?"("+this._dupFields.join(", ")+") ":"",tr=ht.length?"UPDATE SET "+ht:"NOTHING";Ut.text="ON CONFLICT "+or+"DO "+tr}return Ut}}]),mt}(j.AbstractSetFieldBlock),j.ReturningBlock=function(St){d(mt,St);function mt(ft){h(this,mt);var st=c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft));return st._fields=[],st}return a(mt,[{key:"returning",value:function(st){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ht=ht&&this._sanitizeFieldAlias(ht),st=this._sanitizeField(st);var ut=this._fields.filter(function(It){return It.name===st&&It.alias===ht});if(ut.length)return this;this._fields.push({name:st,alias:ht,options:ot})}},{key:"_toParamString",value:function(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};st.queryBuilder;var ht=st.buildParameterized,ot="",ut=[],It=!0,Ct=!1,zt=void 0;try{for(var Wt=this._fields[Symbol.iterator](),Ut;!(It=(Ut=Wt.next()).done);It=!0){var or=Ut.value;ot=_(ot,", ");var tr=or.name,Bt=or.alias,Ht=or.options;if(typeof tr=="string")ot+=this._formatFieldName(tr,Ht);else{var er=tr._toParamString({nested:!0,buildParameterized:ht});ot+=er.text,er.values.forEach(function(lr){return ut.push(lr)})}Bt&&(ot+=" AS "+this._formatFieldAlias(Bt))}}catch(lr){Ct=!0,zt=lr}finally{try{!It&&Wt.return&&Wt.return()}finally{if(Ct)throw zt}}return{text:ot.length>0?"RETURNING "+ot:"",values:ut}}}]),mt}(j.Block),j.WithBlock=function(St){d(mt,St);function mt(ft){h(this,mt);var st=c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft));return st._tables=[],st}return a(mt,[{key:"with",value:function(st,ht){this._tables.push({alias:st,table:ht})}},{key:"_toParamString",value:function(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ht=[],ot=[],ut=!0,It=!1,Ct=void 0;try{for(var zt=this._tables[Symbol.iterator](),Wt;!(ut=(Wt=zt.next()).done);ut=!0){var Ut=Wt.value,or=Ut.alias,tr=Ut.table,Bt=tr._toParamString({buildParameterized:st.buildParameterized,nested:!0});ht.push(or+" AS "+Bt.text),Bt.values.forEach(function(Ht){return ot.push(Ht)})}}catch(Ht){It=!0,Ct=Ht}finally{try{!ut&&zt.return&&zt.return()}finally{if(It)throw Ct}}return{text:ht.length?"WITH "+ht.join(", "):"",values:ot}}}]),mt}(j.Block),j.DistinctOnBlock=function(St){d(mt,St);function mt(ft){h(this,mt);var st=c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft));return st._distinctFields=[],st}return a(mt,[{key:"distinct",value:function(){var st=this;this._useDistinct=!0;for(var ht=arguments.length,ot=Array(ht),ut=0;ut<ht;ut++)ot[ut]=arguments[ut];ot.forEach(function(It){st._distinctFields.push(st._sanitizeField(It))})}},{key:"_toParamString",value:function(){var st="";return this._useDistinct&&(st="DISTINCT",this._distinctFields.length&&(st+=" ON ("+this._distinctFields.join(", ")+")")),{text:st,values:[]}}}]),mt}(j.Block),j.Select=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,mt),st=st||[new j.WithBlock(ft),new j.StringBlock(ft,"SELECT"),new j.FunctionBlock(ft),new j.DistinctOnBlock(ft),new j.GetFieldBlock(ft),new j.FromTableBlock(ft),new j.JoinBlock(ft),new j.WhereBlock(ft),new j.GroupByBlock(ft),new j.HavingBlock(ft),new j.OrderByBlock(ft),new j.LimitBlock(ft),new j.OffsetBlock(ft),new j.UnionBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder),j.Insert=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,mt),st=st||[new j.WithBlock(ft),new j.StringBlock(ft,"INSERT"),new j.IntoTableBlock(ft),new j.InsertFieldValueBlock(ft),new j.InsertFieldsFromQueryBlock(ft),new j.PostgresOnConflictKeyUpdateBlock(ft),new j.ReturningBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder),j.Update=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,mt),st=st||[new j.WithBlock(ft),new j.StringBlock(ft,"UPDATE"),new j.UpdateTableBlock(ft),new j.SetFieldBlock(ft),new j.FromTableBlock(ft),new j.WhereBlock(ft),new j.OrderByBlock(ft),new j.LimitBlock(ft),new j.ReturningBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder),j.Delete=function(St){d(mt,St);function mt(ft){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h(this,mt),st=st||[new j.WithBlock(ft),new j.StringBlock(ft,"DELETE"),new j.TargetTableBlock(ft),new j.FromTableBlock($({},ft,{singleTable:!0})),new j.JoinBlock(ft),new j.WhereBlock(ft),new j.OrderByBlock(ft),new j.LimitBlock(ft),new j.ReturningBlock(ft)],c(this,(mt.__proto__||Object.getPrototypeOf(mt)).call(this,ft,st))}return mt}(j.QueryBuilder)},at})})(squel$1);var squelExports=squel$1.exports;const squel=getDefaultExportFromCjs(squelExports);var FUNC_ERROR_TEXT="Expected a function",MAX_SAFE_INTEGER$1=9007199254740991,argsTag$1="[object Arguments]",funcTag$1="[object Function]",genTag$1="[object GeneratorFunction]",freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal$1||freeSelf$1||Function("return this")();function apply$1(i,e,s){switch(s.length){case 0:return i.call(e);case 1:return i.call(e,s[0]);case 2:return i.call(e,s[0],s[1]);case 3:return i.call(e,s[0],s[1],s[2])}return i.apply(e,s)}function arrayPush$1(i,e){for(var s=-1,a=e.length,o=i.length;++s<a;)i[o+s]=e[s];return i}var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty,objectToString$1=objectProto$1.toString,Symbol$2=root$1.Symbol,propertyIsEnumerable$1=objectProto$1.propertyIsEnumerable,spreadableSymbol$1=Symbol$2?Symbol$2.isConcatSpreadable:void 0,nativeMax$1=Math.max;function baseFlatten$1(i,e,s,a,o){var c=-1,d=i.length;for(s||(s=isFlattenable$1),o||(o=[]);++c<d;){var h=i[c];e>0&&s(h)?e>1?baseFlatten$1(h,e-1,s,a,o):arrayPush$1(o,h):a||(o[o.length]=h)}return o}function baseRest$1(i,e){return e=nativeMax$1(e===void 0?i.length-1:e,0),function(){for(var s=arguments,a=-1,o=nativeMax$1(s.length-e,0),c=Array(o);++a<o;)c[a]=s[e+a];a=-1;for(var d=Array(e+1);++a<e;)d[a]=s[a];return d[e]=c,apply$1(i,this,d)}}function createFlow(i){return baseRest$1(function(e){e=baseFlatten$1(e,1);var s=e.length,a=s;for(i&&e.reverse();a--;)if(typeof e[a]!="function")throw new TypeError(FUNC_ERROR_TEXT);return function(){for(var o=0,c=s?e[o].apply(this,arguments):arguments[0];++o<s;)c=e[o].call(this,c);return c}})}function isFlattenable$1(i){return isArray$1(i)||isArguments$2(i)||!!(spreadableSymbol$1&&i&&i[spreadableSymbol$1])}function isArguments$2(i){return isArrayLikeObject$1(i)&&hasOwnProperty$1.call(i,"callee")&&(!propertyIsEnumerable$1.call(i,"callee")||objectToString$1.call(i)==argsTag$1)}var isArray$1=Array.isArray;function isArrayLike$1(i){return i!=null&&isLength$1(i.length)&&!isFunction$2(i)}function isArrayLikeObject$1(i){return isObjectLike$1(i)&&isArrayLike$1(i)}function isFunction$2(i){var e=isObject$2(i)?objectToString$1.call(i):"";return e==funcTag$1||e==genTag$1}function isLength$1(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=MAX_SAFE_INTEGER$1}function isObject$2(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function isObjectLike$1(i){return!!i&&typeof i=="object"}var flow=createFlow(),lodash_flow=flow;const flow$1=getDefaultExportFromCjs(lodash_flow),squelPostgres=squel.useFlavour("postgres");squelPostgres.registerValueHandler("bigint",function(i){return i.toString()});class Builder{constructor(e,s,a,o){this._tableName=e,this._fields=s,this.shapeManager=a,this._tableDescription=o}create(e){const s=squelPostgres.insert().into(this._tableName).setFields(e.data);return this.returnAllFields(s)}createMany(e){const s=squelPostgres.insert().into(this._tableName).setFieldsRows(e.data);return e.skipDuplicates?s.onConflict():s}findUnique(e){return this.findWhere({...e,take:2},!0)}findFirst(e){return this.findWhere({...e,take:1})}findMany(e){return this.findWhere(e)}findWithoutAutoSelect(e){return this.findWhere(e,!1,!1)}update(e){return this.updateInternal(e,!0)}updateMany(e){return this.updateInternal(e)}delete(e){return this.deleteInternal(e,!0)}deleteMany(e){return this.deleteInternal(e)}deleteInternal(e,s=!1){const a=squel.delete().from(this._tableName),o=e.where,c=this.getFields(o,s);return addFilters(c,o,a)}updateInternal(e,s=!1){const a=Object.entries(e.data).find(_=>{const[$,rt]=_;return typeof rt=="object"&&rt!==null});if(a)throw new InvalidArgumentError(`Unsupported value ${JSON.stringify(a[1])} for field "${a[0]}" in update query.`);const o=squelPostgres.update().table(this._tableName).setFields(e.data),c=this.returnAllFields(o),d=e.where,h=this.getFields(d,s);return addFilters(h,d,c)}findWhere(e,s=!1,a=!0){if("cursor"in e&&typeof e.cursor<"u")throw new InvalidArgumentError("Unsupported cursor argument.");const o=e.where,c=this.getFields(o,s);this.shapeManager.hasBeenSubscribed(this._tableName)||Log.debug("Reading from unsynced table "+this._tableName);const d=squelPostgres.select().from(this._tableName),h=this.addFieldSelection.bind(this,e,a?c:[]),_=addFilters.bind(null,c,o),$=addLimit.bind(null,e),rt=addOffset.bind(null,e),lt=addDistinct.bind(null,e),ct=this.addOrderBy.bind(this,e);return flow$1(h,_,$,rt,lt,ct)(d)}addFieldSelection(e,s,a){typeof e.select>"u"&&(e.select={},this._fields.forEach(h=>{e.select[h]=!0}));const o=getSelectedFields(e.select);if(o.length==0)throw new InvalidArgumentError(`The \`select\` statement for type ${this._tableName} needs at least one truthy value.`);const c=o.find(h=>!this._fields.includes(h));if(c)throw new InvalidArgumentError(`Cannot select field ${c} on table ${this._tableName}. Use 'include' to fetch related objects.`);const d=s.filter(h=>this._fields.includes(h)).concat(o).map(h=>this.castBigIntToText(h));return a.fields(d)}castBigIntToText(e){return this._tableDescription.fields.get(e)===PgBasicType.PG_INT8?`cast(${e} as TEXT) AS ${e}`:e}addOrderBy(e,s){return typeof e.orderBy>"u"?s:(Array.isArray(e.orderBy)?e.orderBy:[e.orderBy]).reduce((o,c)=>{const d=Object.keys(c);if(d.length>1)throw new InvalidArgumentError("Argument 'orderBy' can have at most one field per 'OrderByInput' object. Consider providing several 'OrderByInput' objects in an array.");if(d.length===0)return o;const h=d[0],_=c[h];if(typeof _=="object"&&_!==null)throw new InvalidArgumentError(`Ordering query results based on the '${h}' related object(s) is not yet supported`);const $=_==="asc";return o.order(h,$)},s)}getFields(e,s=!1){const o=Object.keys(typeof e<"u"?e:{});if(s&&o.length==0)throw new InvalidArgumentError(`Argument \`where\` for query on ${this._tableName} type requires at least one argument.`);return o}returnAllFields(e){return this._fields.reduce((s,a)=>this._tableDescription.fields.get(a)===PgBasicType.PG_INT8?s.returning(`cast(${a} as TEXT) AS ${a}`):s.returning(a),e)}}function addFilters(i,e,s){return i.reduce((a,o)=>{const c=e[o];return makeFilter(c,o).reduce((h,_)=>h.where(_.sql,..._.args??[]),a)},s)}function makeFilter(i,e){if(i===null)return[{sql:`${e} IS NULL`}];if(e==="AND"||e==="OR"||e==="NOT")return[makeBooleanFilter(e,i)];if(typeof i=="object"){const s={equals:anyType(),in:anyType().array().optional(),not:anyType().optional(),notIn:anyType().optional(),lt:anyType().optional(),lte:anyType().optional(),gt:anyType().optional(),gte:anyType().optional(),startsWith:stringType().optional(),endsWith:stringType().optional(),contains:stringType().optional()},a={equals:makeEqualsFilter.bind(null),in:makeInFilter.bind(null),not:makeNotFilter.bind(null),notIn:makeNotInFilter.bind(null),lt:makeLtFilter.bind(null),lte:makeLteFilter.bind(null),gt:makeGtFilter.bind(null),gte:makeGteFilter.bind(null),startsWith:makeStartsWithFilter.bind(null),endsWith:makeEndsWithFilter.bind(null),contains:makeContainsFilter.bind(null)},c=objectType(s).strict().refine(h=>Object.keys(s).some(_=>_ in h),"Please provide at least one filter.").parse(i),d=[];return Object.entries(a).forEach(h=>{const[_,$]=h;if(_ in c){const rt=$(e,c[_]);d.push(rt)}}),d}else return[{sql:`${e} = ?`,args:[i]}]}function joinStatements(i,e){const s=i.map(o=>o.sql).join(` ${e} `),a=i.map(o=>o.args).reduce((o,c)=>(o??[]).concat(c??[]));return{sql:s,args:a}}function makeBooleanFilter(i,e){const a=(Array.isArray(e)?e:[e]).map(o=>{const d=Object.keys(o).reduce((h,_)=>{const $=o[_],rt=makeFilter($,_);return h.concat(rt)},[]);return joinStatements(d,"AND")});if(i==="NOT"){const o=a.map(({sql:c,args:d})=>({sql:a.length>1?`(NOT ${c})`:`NOT ${c}`,args:d}));return joinStatements(o,"AND")}else return joinStatements(a,i)}function makeEqualsFilter(i,e){return{sql:`${i} = ?`,args:[e]}}function makeInFilter(i,e){return{sql:`${i} IN ?`,args:[e]}}function makeNotInFilter(i,e){return{sql:`${i} NOT IN ?`,args:[e]}}function makeNotFilter(i,e){return e===null?{sql:`${i} IS NOT NULL`}:{sql:`${i} != ?`,args:[e]}}function makeLtFilter(i,e){return{sql:`${i} < ?`,args:[e]}}function makeLteFilter(i,e){return{sql:`${i} <= ?`,args:[e]}}function makeGtFilter(i,e){return{sql:`${i} > ?`,args:[e]}}function makeGteFilter(i,e){return{sql:`${i} >= ?`,args:[e]}}function makeStartsWithFilter(i,e){return{sql:`${i} LIKE ?`,args:[`${e}%`]}}function makeEndsWithFilter(i,e){return{sql:`${i} LIKE ?`,args:[`%${e}`]}}function makeContainsFilter(i,e){return{sql:`${i} LIKE ?`,args:[`%${e}%`]}}function addOffset(i,e){return typeof i.skip>"u"?e:e.offset(i.skip)}function addLimit(i,e){return typeof i.take>"u"?e:e.limit(i.take)}function addDistinct(i,e){return typeof i.distinct>"u"?e:e.distinct(...i.distinct)}function getSelectedFields(i){return Object.keys(i).filter(e=>i[e])}var lodash_mapvalues={exports:{}};lodash_mapvalues.exports;(function(i,e){var s=200,a="Expected a function",o="__lodash_hash_undefined__",c=1,d=2,h=1/0,_=9007199254740991,$="[object Arguments]",rt="[object Array]",lt="[object Boolean]",ct="[object Date]",bt="[object Error]",Ot="[object Function]",dt="[object GeneratorFunction]",vt="[object Map]",at="[object Number]",et="[object Object]",j="[object Promise]",St="[object RegExp]",mt="[object Set]",ft="[object String]",st="[object Symbol]",ht="[object WeakMap]",ot="[object ArrayBuffer]",ut="[object DataView]",It="[object Float32Array]",Ct="[object Float64Array]",zt="[object Int8Array]",Wt="[object Int16Array]",Ut="[object Int32Array]",or="[object Uint8Array]",tr="[object Uint8ClampedArray]",Bt="[object Uint16Array]",Ht="[object Uint32Array]",er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lr=/^\w*$/,dr=/^\./,kr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ir=/[\\^$.*+?()[\]{}|]/g,Kt=/\\(\\)?/g,br=/^\[object .+?Constructor\]$/,Zn=/^(?:0|[1-9]\d*)$/,qt={};qt[It]=qt[Ct]=qt[zt]=qt[Wt]=qt[Ut]=qt[or]=qt[tr]=qt[Bt]=qt[Ht]=!0,qt[$]=qt[rt]=qt[ot]=qt[lt]=qt[ut]=qt[ct]=qt[bt]=qt[Ot]=qt[vt]=qt[at]=qt[et]=qt[St]=qt[mt]=qt[ft]=qt[ht]=!1;var Br=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Rs=typeof self=="object"&&self&&self.Object===Object&&self,mr=Br||Rs||Function("return this")(),Bn=e&&!e.nodeType&&e,_r=Bn&&!0&&i&&!i.nodeType&&i,Os=_r&&_r.exports===Bn,pn=Os&&Br.process,ls=function(){try{return pn&&pn.binding("util")}catch{}}(),Fn=ls&&ls.isTypedArray;function Us(pt,wt){for(var Lt=-1,Qt=pt?pt.length:0;++Lt<Qt;)if(wt(pt[Lt],Lt,pt))return!0;return!1}function js(pt){return function(wt){return wt==null?void 0:wt[pt]}}function hs(pt,wt){for(var Lt=-1,Qt=Array(pt);++Lt<pt;)Qt[Lt]=wt(Lt);return Qt}function Ps(pt){return function(wt){return pt(wt)}}function Wn(pt,wt){return pt==null?void 0:pt[wt]}function An(pt){var wt=!1;if(pt!=null&&typeof pt.toString!="function")try{wt=!!(pt+"")}catch{}return wt}function Un(pt){var wt=-1,Lt=Array(pt.size);return pt.forEach(function(Qt,pr){Lt[++wt]=[pr,Qt]}),Lt}function Ms(pt,wt){return function(Lt){return pt(wt(Lt))}}function Ns(pt){var wt=-1,Lt=Array(pt.size);return pt.forEach(function(Qt){Lt[++wt]=Qt}),Lt}var ms=Array.prototype,Cs=Function.prototype,Jn=Object.prototype,ur=mr["__core-js_shared__"],kn=function(){var pt=/[^.]+$/.exec(ur&&ur.keys&&ur.keys.IE_PROTO||"");return pt?"Symbol(src)_1."+pt:""}(),jn=Cs.toString,un=Jn.hasOwnProperty,vr=Jn.toString,Mr=RegExp("^"+jn.call(un).replace(Ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bn=mr.Symbol,Vn=mr.Uint8Array,Jt=Jn.propertyIsEnumerable,xn=ms.splice,Yr=Ms(Object.keys,Object),_i=Jr(mr,"DataView"),cn=Jr(mr,"Map"),rn=Jr(mr,"Promise"),qr=Jr(mr,"Set"),nn=Jr(mr,"WeakMap"),xr=Jr(Object,"create"),sn=Mn(_i),hn=Mn(cn),es=Mn(rn),qs=Mn(qr),Xs=Mn(nn),Vr=bn?bn.prototype:void 0,Tn=Vr?Vr.valueOf:void 0,Hn=Vr?Vr.toString:void 0;function Gr(pt){var wt=-1,Lt=pt?pt.length:0;for(this.clear();++wt<Lt;){var Qt=pt[wt];this.set(Qt[0],Qt[1])}}function Ur(){this.__data__=xr?xr(null):{}}function gs(pt){return this.has(pt)&&delete this.__data__[pt]}function Kr(pt){var wt=this.__data__;if(xr){var Lt=wt[pt];return Lt===o?void 0:Lt}return un.call(wt,pt)?wt[pt]:void 0}function ys(pt){var wt=this.__data__;return xr?wt[pt]!==void 0:un.call(wt,pt)}function As(pt,wt){var Lt=this.__data__;return Lt[pt]=xr&&wt===void 0?o:wt,this}Gr.prototype.clear=Ur,Gr.prototype.delete=gs,Gr.prototype.get=Kr,Gr.prototype.has=ys,Gr.prototype.set=As;function wn(pt){var wt=-1,Lt=pt?pt.length:0;for(this.clear();++wt<Lt;){var Qt=pt[wt];this.set(Qt[0],Qt[1])}}function Nr(){this.__data__=[]}function _s(pt){var wt=this.__data__,Lt=fs(wt,pt);if(Lt<0)return!1;var Qt=wt.length-1;return Lt==Qt?wt.pop():xn.call(wt,Lt,1),!0}function In(pt){var wt=this.__data__,Lt=fs(wt,pt);return Lt<0?void 0:wt[Lt][1]}function zs(pt){return fs(this.__data__,pt)>-1}function Zs(pt,wt){var Lt=this.__data__,Qt=fs(Lt,pt);return Qt<0?Lt.push([pt,wt]):Lt[Qt][1]=wt,this}wn.prototype.clear=Nr,wn.prototype.delete=_s,wn.prototype.get=In,wn.prototype.has=zs,wn.prototype.set=Zs;function mn(pt){var wt=-1,Lt=pt?pt.length:0;for(this.clear();++wt<Lt;){var Qt=pt[wt];this.set(Qt[0],Qt[1])}}function Lr(){this.__data__={hash:new Gr,map:new(cn||wn),string:new Gr}}function Ws(pt){return ns(this,pt).delete(pt)}function Rn(pt){return ns(this,pt).get(pt)}function us(pt){return ns(this,pt).has(pt)}function ks(pt,wt){return ns(this,pt).set(pt,wt),this}mn.prototype.clear=Lr,mn.prototype.delete=Ws,mn.prototype.get=Rn,mn.prototype.has=us,mn.prototype.set=ks;function Rr(pt){var wt=-1,Lt=pt?pt.length:0;for(this.__data__=new mn;++wt<Lt;)this.add(pt[wt])}function an(pt){return this.__data__.set(pt,o),this}function vs(pt){return this.__data__.has(pt)}Rr.prototype.add=Rr.prototype.push=an,Rr.prototype.has=vs;function Hr(pt){this.__data__=new wn(pt)}function Pr(){this.__data__=new wn}function Ss(pt){return this.__data__.delete(pt)}function gn(pt){return this.__data__.get(pt)}function cs(pt){return this.__data__.has(pt)}function Ys(pt,wt){var Lt=this.__data__;if(Lt instanceof wn){var Qt=Lt.__data__;if(!cn||Qt.length<s-1)return Qt.push([pt,wt]),this;Lt=this.__data__=new mn(Qt)}return Lt.set(pt,wt),this}Hr.prototype.clear=Pr,Hr.prototype.delete=Ss,Hr.prototype.get=gn,Hr.prototype.has=cs,Hr.prototype.set=Ys;function Js(pt,wt){var Lt=Nt(pt)||Et(pt)?hs(pt.length,String):[],Qt=Lt.length,pr=!!Qt;for(var b in pt)(wt||un.call(pt,b))&&!(pr&&(b=="length"||_n(b,Qt)))&&Lt.push(b);return Lt}function fs(pt,wt){for(var Lt=pt.length;Lt--;)if(as(pt[Lt][0],wt))return Lt;return-1}var yn=Ln();function xs(pt,wt){return pt&&yn(pt,wt,$r)}function vn(pt,wt){wt=Pn(wt,pt)?[wt]:$s(wt);for(var Lt=0,Qt=wt.length;pt!=null&&Lt<Qt;)pt=pt[ss(wt[Lt++])];return Lt&&Lt==Qt?pt:void 0}function Es(pt){return vr.call(pt)}function Ls(pt,wt){return pt!=null&&wt in Object(pt)}function ts(pt,wt,Lt,Qt,pr){return pt===wt?!0:pt==null||wt==null||!wr(pt)&&!yr(wt)?pt!==pt&&wt!==wt:Vs(pt,wt,ts,Lt,Qt,pr)}function Vs(pt,wt,Lt,Qt,pr,b){var tt=Nt(pt),_t=Nt(wt),Rt=rt,Pt=rt;tt||(Rt=On(pt),Rt=Rt==$?et:Rt),_t||(Pt=On(wt),Pt=Pt==$?et:Pt);var kt=Rt==et&&!An(pt),it=Pt==et&&!An(wt),yt=Rt==Pt;if(yt&&!kt)return b||(b=new Hr),tt||Sr(pt)?Bs(pt,wt,Lt,Qt,pr,b):ws(pt,wt,Rt,Lt,Qt,pr,b);if(!(pr&d)){var At=kt&&un.call(pt,"__wrapped__"),xt=it&&un.call(wt,"__wrapped__");if(At||xt){var rr=At?pt.value():pt,Xt=xt?wt.value():wt;return b||(b=new Hr),Lt(rr,Xt,Qt,pr,b)}}return yt?(b||(b=new Hr),Fs(pt,wt,Lt,Qt,pr,b)):!1}function bs(pt,wt,Lt,Qt){var pr=Lt.length,b=pr,tt=!Qt;if(pt==null)return!b;for(pt=Object(pt);pr--;){var _t=Lt[pr];if(tt&&_t[2]?_t[1]!==pt[_t[0]]:!(_t[0]in pt))return!1}for(;++pr<b;){_t=Lt[pr];var Rt=_t[0],Pt=pt[Rt],kt=_t[1];if(tt&&_t[2]){if(Pt===void 0&&!(Rt in pt))return!1}else{var it=new Hr;if(Qt)var yt=Qt(Pt,kt,Rt,pt,wt,it);if(!(yt===void 0?ts(kt,Pt,Qt,c|d,it):yt))return!1}}return!0}function rs(pt){if(!wr(pt)||Qr(pt))return!1;var wt=gr(pt)||An(pt)?Mr:br;return wt.test(Mn(pt))}function Ds(pt){return yr(pt)&&fr(pt.length)&&!!qt[vr.call(pt)]}function Hs(pt){return typeof pt=="function"?pt:pt==null?En:typeof pt=="object"?Nt(pt)?ds(pt[0],pt[1]):Ts(pt):fn(pt)}function Gs(pt){if(!Nn(pt))return Yr(pt);var wt=[];for(var Lt in Object(pt))un.call(pt,Lt)&&Lt!="constructor"&&wt.push(Lt);return wt}function Ts(pt){var wt=Qs(pt);return wt.length==1&&wt[0][2]?Sn(wt[0][0],wt[0][1]):function(Lt){return Lt===pt||bs(Lt,pt,wt)}}function ds(pt,wt){return Pn(pt)&&is(wt)?Sn(ss(pt),wt):function(Lt){var Qt=Xr(Lt,pt);return Qt===void 0&&Qt===wt?Ar(Lt,pt):ts(wt,Qt,void 0,c|d)}}function Gn(pt){return function(wt){return vn(wt,pt)}}function Ks(pt){if(typeof pt=="string")return pt;if(Dr(pt))return Hn?Hn.call(pt):"";var wt=pt+"";return wt=="0"&&1/pt==-h?"-0":wt}function $s(pt){return Nt(pt)?pt:Dn(pt)}function Ln(pt){return function(wt,Lt,Qt){for(var pr=-1,b=Object(wt),tt=Qt(wt),_t=tt.length;_t--;){var Rt=tt[pt?_t:++pr];if(Lt(b[Rt],Rt,b)===!1)break}return wt}}function Bs(pt,wt,Lt,Qt,pr,b){var tt=pr&d,_t=pt.length,Rt=wt.length;if(_t!=Rt&&!(tt&&Rt>_t))return!1;var Pt=b.get(pt);if(Pt&&b.get(wt))return Pt==wt;var kt=-1,it=!0,yt=pr&c?new Rr:void 0;for(b.set(pt,wt),b.set(wt,pt);++kt<_t;){var At=pt[kt],xt=wt[kt];if(Qt)var rr=tt?Qt(xt,At,kt,wt,pt,b):Qt(At,xt,kt,pt,wt,b);if(rr!==void 0){if(rr)continue;it=!1;break}if(yt){if(!Us(wt,function(Xt,ir){if(!yt.has(ir)&&(At===Xt||Lt(At,Xt,Qt,pr,b)))return yt.add(ir)})){it=!1;break}}else if(!(At===xt||Lt(At,xt,Qt,pr,b))){it=!1;break}}return b.delete(pt),b.delete(wt),it}function ws(pt,wt,Lt,Qt,pr,b,tt){switch(Lt){case ut:if(pt.byteLength!=wt.byteLength||pt.byteOffset!=wt.byteOffset)return!1;pt=pt.buffer,wt=wt.buffer;case ot:return!(pt.byteLength!=wt.byteLength||!Qt(new Vn(pt),new Vn(wt)));case lt:case ct:case at:return as(+pt,+wt);case bt:return pt.name==wt.name&&pt.message==wt.message;case St:case ft:return pt==wt+"";case vt:var _t=Un;case mt:var Rt=b&d;if(_t||(_t=Ns),pt.size!=wt.size&&!Rt)return!1;var Pt=tt.get(pt);if(Pt)return Pt==wt;b|=c,tt.set(pt,wt);var kt=Bs(_t(pt),_t(wt),Qt,pr,b,tt);return tt.delete(pt),kt;case st:if(Tn)return Tn.call(pt)==Tn.call(wt)}return!1}function Fs(pt,wt,Lt,Qt,pr,b){var tt=pr&d,_t=$r(pt),Rt=_t.length,Pt=$r(wt),kt=Pt.length;if(Rt!=kt&&!tt)return!1;for(var it=Rt;it--;){var yt=_t[it];if(!(tt?yt in wt:un.call(wt,yt)))return!1}var At=b.get(pt);if(At&&b.get(wt))return At==wt;var xt=!0;b.set(pt,wt),b.set(wt,pt);for(var rr=tt;++it<Rt;){yt=_t[it];var Xt=pt[yt],ir=wt[yt];if(Qt)var cr=tt?Qt(ir,Xt,yt,wt,pt,b):Qt(Xt,ir,yt,pt,wt,b);if(!(cr===void 0?Xt===ir||Lt(Xt,ir,Qt,pr,b):cr)){xt=!1;break}rr||(rr=yt=="constructor")}if(xt&&!rr){var hr=pt.constructor,Er=wt.constructor;hr!=Er&&"constructor"in pt&&"constructor"in wt&&!(typeof hr=="function"&&hr instanceof hr&&typeof Er=="function"&&Er instanceof Er)&&(xt=!1)}return b.delete(pt),b.delete(wt),xt}function ns(pt,wt){var Lt=pt.__data__;return on(wt)?Lt[typeof wt=="string"?"string":"hash"]:Lt.map}function Qs(pt){for(var wt=$r(pt),Lt=wt.length;Lt--;){var Qt=wt[Lt],pr=pt[Qt];wt[Lt]=[Qt,pr,is(pr)]}return wt}function Jr(pt,wt){var Lt=Wn(pt,wt);return rs(Lt)?Lt:void 0}var On=Es;(_i&&On(new _i(new ArrayBuffer(1)))!=ut||cn&&On(new cn)!=vt||rn&&On(rn.resolve())!=j||qr&&On(new qr)!=mt||nn&&On(new nn)!=ht)&&(On=function(pt){var wt=vr.call(pt),Lt=wt==et?pt.constructor:void 0,Qt=Lt?Mn(Lt):void 0;if(Qt)switch(Qt){case sn:return ut;case hn:return vt;case es:return j;case qs:return mt;case Xs:return ht}return wt});function ps(pt,wt,Lt){wt=Pn(wt,pt)?[wt]:$s(wt);for(var Qt,pr=-1,tt=wt.length;++pr<tt;){var b=ss(wt[pr]);if(!(Qt=pt!=null&&Lt(pt,b)))break;pt=pt[b]}if(Qt)return Qt;var tt=pt?pt.length:0;return!!tt&&fr(tt)&&_n(b,tt)&&(Nt(pt)||Et(pt))}function _n(pt,wt){return wt=wt??_,!!wt&&(typeof pt=="number"||Zn.test(pt))&&pt>-1&&pt%1==0&&pt<wt}function Pn(pt,wt){if(Nt(pt))return!1;var Lt=typeof pt;return Lt=="number"||Lt=="symbol"||Lt=="boolean"||pt==null||Dr(pt)?!0:lr.test(pt)||!er.test(pt)||wt!=null&&pt in Object(wt)}function on(pt){var wt=typeof pt;return wt=="string"||wt=="number"||wt=="symbol"||wt=="boolean"?pt!=="__proto__":pt===null}function Qr(pt){return!!kn&&kn in pt}function Nn(pt){var wt=pt&&pt.constructor,Lt=typeof wt=="function"&&wt.prototype||Jn;return pt===Lt}function is(pt){return pt===pt&&!wr(pt)}function Sn(pt,wt){return function(Lt){return Lt==null?!1:Lt[pt]===wt&&(wt!==void 0||pt in Object(Lt))}}var Dn=Kn(function(pt){pt=Cr(pt);var wt=[];return dr.test(pt)&&wt.push(""),pt.replace(kr,function(Lt,Qt,pr,b){wt.push(pr?b.replace(Kt,"$1"):Qt||Lt)}),wt});function ss(pt){if(typeof pt=="string"||Dr(pt))return pt;var wt=pt+"";return wt=="0"&&1/pt==-h?"-0":wt}function Mn(pt){if(pt!=null){try{return jn.call(pt)}catch{}try{return pt+""}catch{}}return""}function Kn(pt,wt){if(typeof pt!="function"||wt&&typeof wt!="function")throw new TypeError(a);var Lt=function(){var Qt=arguments,pr=wt?wt.apply(this,Qt):Qt[0],b=Lt.cache;if(b.has(pr))return b.get(pr);var tt=pt.apply(this,Qt);return Lt.cache=b.set(pr,tt),tt};return Lt.cache=new(Kn.Cache||mn),Lt}Kn.Cache=mn;function as(pt,wt){return pt===wt||pt!==pt&&wt!==wt}function Et(pt){return nr(pt)&&un.call(pt,"callee")&&(!Jt.call(pt,"callee")||vr.call(pt)==$)}var Nt=Array.isArray;function jt(pt){return pt!=null&&fr(pt.length)&&!gr(pt)}function nr(pt){return yr(pt)&&jt(pt)}function gr(pt){var wt=wr(pt)?vr.call(pt):"";return wt==Ot||wt==dt}function fr(pt){return typeof pt=="number"&&pt>-1&&pt%1==0&&pt<=_}function wr(pt){var wt=typeof pt;return!!pt&&(wt=="object"||wt=="function")}function yr(pt){return!!pt&&typeof pt=="object"}function Dr(pt){return typeof pt=="symbol"||yr(pt)&&vr.call(pt)==st}var Sr=Fn?Ps(Fn):Ds;function Cr(pt){return pt==null?"":Ks(pt)}function Xr(pt,wt,Lt){var Qt=pt==null?void 0:vn(pt,wt);return Qt===void 0?Lt:Qt}function Ar(pt,wt){return pt!=null&&ps(pt,wt,Ls)}function $r(pt){return jt(pt)?Js(pt):Gs(pt)}function jr(pt,wt){var Lt={};return wt=Hs(wt),xs(pt,function(Qt,pr,b){Lt[pr]=wt(Qt,pr,b)}),Lt}function En(pt){return pt}function fn(pt){return Pn(pt)?js(ss(pt)):Gn(pt)}i.exports=jr})(lodash_mapvalues,lodash_mapvalues.exports);var lodash_mapvaluesExports=lodash_mapvalues.exports;const mapValues=getDefaultExportFromCjs(lodash_mapvaluesExports);function serialiseBoolean(i){return i?1:0}function deserialiseBoolean(i){if(i===0)return!1;if(i===1)return!0;throw new Error(`Could not parse boolean. Value is not 0 or 1: ${i}`)}function serialiseDate(i,e){switch(e){case PgDateType.PG_TIMESTAMP:return ignoreTimeZone(i).toISOString().replace("T"," ").replace("Z","");case PgDateType.PG_TIMESTAMPTZ:return i.toISOString().replace("T"," ");case PgDateType.PG_DATE:return extractDateAndTime(ignoreTimeZone(i)).date;case PgDateType.PG_TIME:return extractDateAndTime(ignoreTimeZone(i)).time;case PgDateType.PG_TIMETZ:return extractDateAndTime(i).time}}function deserialiseDate(i,e){const s=a=>{const o=Date.parse(a);if(isNaN(o))throw new Error(`Could not parse date, invalid format: ${a}`);return new Date(o)};switch(e){case PgDateType.PG_TIMESTAMP:case PgDateType.PG_TIMESTAMPTZ:case PgDateType.PG_DATE:return s(i);case PgDateType.PG_TIME:return s(`1970-01-01 ${i}`);case PgDateType.PG_TIMETZ:return s(`1970-01-01 ${i}+00`)}}function ignoreTimeZone(i){const e=6e4*i.getTimezoneOffset();return new Date(i.getTime()-e)}function extractDateAndTime(i){const e=/([0-9-]*)T([0-9:.]*)Z/g,[s,a,o]=e.exec(i.toISOString());return{date:a,time:o}}function serialiseJSON(i){return isJsonNull(i)?JSON.stringify(null):JSON.stringify(i)}function deserialiseJSON(i){return i===JSON.stringify(null)?{__is_electric_json_null__:!0}:JSON.parse(i)}function isJsonNull(i){return typeof i=="object"&&!Array.isArray(i)&&i!==null&&Object.hasOwn(i,"__is_electric_json_null__")&&i.__is_electric_json_null__}function toSqlite(i,e){if(i===null)return i;if(isPgDateType(e)){if(!(i instanceof Date))throw new InvalidArgumentError(`Unexpected value ${i}. Expected a Date object.`);return serialiseDate(i,e)}else return e===PgBasicType.PG_BOOL?serialiseBoolean(i):Number.isNaN(i)?"NaN":e===PgBasicType.PG_FLOAT4||e===PgBasicType.PG_REAL?Math.fround(i):e===PgBasicType.PG_JSON||e===PgBasicType.PG_JSONB?serialiseJSON(i):i}function fromSqlite(i,e){return i===null?i:isPgDateType(e)?deserialiseDate(i,e):e===PgBasicType.PG_BOOL?deserialiseBoolean(i):i==="NaN"&&(e===PgBasicType.PG_FLOAT8||e===PgBasicType.PG_FLOAT4||e===PgBasicType.PG_REAL)?NaN:e===PgBasicType.PG_FLOAT4||e===PgBasicType.PG_REAL?Math.fround(i):e===PgBasicType.PG_INT8?BigInt(i):e===PgBasicType.PG_JSON||e===PgBasicType.PG_JSONB?deserialiseJSON(i):i}function isDataObject(i){return i instanceof Date}function isPgDateType(i){return Object.values(PgDateType).includes(i)}function notNullNotUndefined(i){return typeof i<"u"&&i!==null}function mapObject(i,e){return Object.fromEntries(Object.entries(i).map(s=>{const[a,o]=s;return[a,e(a,o)]}))}var Transformation=(i=>(i[i.Js2Sqlite=0]="Js2Sqlite",i[i.Sqlite2Js=1]="Sqlite2Js",i))(Transformation||{});function transformCreate(i,e){return{...i,data:transformFields(i.data,e)}}function transformCreateMany(i,e){return{...i,data:i.data.map(s=>transformFields(s,e))}}function transformUpdate(i,e){return{...i,data:transformFields(i.data,e),where:transformWhere(i.where,e)}}function transformUpdateMany(i,e){return{...transformWhereInput(i,e),data:transformFields(i.data,e)}}function transformUpsert(i,e){return{...i,update:transformFields(i.update,e),create:transformFields(i.create,e),where:transformWhere(i.where,e)}}const transformDelete=transformWhereUniqueInput,transformDeleteMany=transformWhereInput,transformFindUnique=transformWhereUniqueInput,transformFindNonUnique=transformWhereInput;function transformWhereUniqueInput(i,e){return{...i,where:transformWhere(i.where,e)}}function transformWhereInput(i,e){const s=i.where?{where:transformWhere(i.where,e)}:{};return{...i,...s}}function transformFields(i,e,s=0){const o=Object.entries(keepTableFieldsOnly(i,e)).map(c=>{const[d,h]=c;return transformField(d,h,i,e,s)});return{...i,...Object.fromEntries(o)}}function transformField(i,e,s,a,o=0){const c=a.get(i);if(!c)throw new InvalidArgumentError(`Unknown field ${i} in object ${JSON.stringify(s)}`);const d=o===0?toSqlite(e,c):fromSqlite(e,c);return[i,d]}function transformWhere(i,e){const s=transformWhereFields(i,e),a=transformBooleanConnectors(i,e);return{...i,...s,...a}}function transformBooleanConnectors(i,e){const s=d=>Array.isArray(d)?d:[d],a=i.AND?{AND:s(i.AND).map(d=>transformWhere(d,e))}:{},o=i.OR?{OR:s(i.OR).map(d=>transformWhere(d,e))}:{},c=i.NOT?{NOT:s(i.NOT).map(d=>transformWhere(d,e))}:{};return{...a,...o,...c}}function transformWhereFields(i,e){const s=keepTableFieldsOnly(i,e),a=mapObject(s,(o,c)=>transformFieldsAllowingFilters(o,c,e));return{...i,...a}}function transformFieldsAllowingFilters(i,e,s){const a=s.get(i);if(!a)throw new InvalidArgumentError(`Unknown field ${i}`);return isFilterObject(e)?transformFilterObject(i,e,a,s):toSqlite(e,a)}function isObject$1(i){return typeof i=="object"&&!Array.isArray(i)&&i!==null}function isFilterObject(i){return isObject$1(i)&&!isDataObject(i)}function transformFilterObject(i,e,s,a){const o=new Set(["equals","lt","lte","gt","gte"]),c=new Set(["in","notIn"]),d=filterKeys(e,o),h=mapValues(d,ct=>toSqlite(ct,s)),_=filterKeys(e,c),$=mapValues(_,ct=>ct.map(bt=>toSqlite(bt,s))),rt=filterKeys(e,new Set(["not"])),lt=mapValues(rt,ct=>transformFieldsAllowingFilters(i,ct,a));return{...e,...h,...$,...lt}}function keepTableFieldsOnly(i,e){return filterKeys(i,new Set(e.keys()))}function filterKeys(i,e){return Object.fromEntries(Object.entries(i).filter(s=>e.has(s[0])))}class TransactionalDB{constructor(e,s){this._tx=e,this._fields=s}run(e,s,a){const{text:o,values:c}=e.toParam({numberedParameters:!1});this._tx.run({sql:o,args:c},(d,h)=>{typeof s<"u"&&s(new TransactionalDB(d,this._fields),h)},a)}query(e,s,a,o){const{text:c,values:d}=e.toParam({numberedParameters:!1});this._tx.query({sql:c,args:d},(h,_)=>{if(typeof a<"u"){const $=_.map(rt=>{const lt=transformFields(rt,this._fields,Transformation.Sqlite2Js);return s.parse(lt)});a(new TransactionalDB(h,this._fields),$)}},o)}raw(e,s,a){this._tx.query(e,(o,c)=>{typeof s<"u"&&s(new TransactionalDB(o,this._fields),c)},a)}}class NonTransactionalDB{constructor(e,s){this._adapter=e,this._fields=s}run(e,s,a){const{text:o,values:c}=e.toParam({numberedParameters:!1});this._adapter.run({sql:o,args:c}).then(d=>{if(typeof s<"u")try{s(this,d)}catch(h){typeof a<"u"&&a(h)}}).catch(d=>{typeof a<"u"&&a(d)})}query(e,s,a,o){const{text:c,values:d}=e.toParam({numberedParameters:!1});this._adapter.query({sql:c,args:d}).then(h=>{try{const _=h.map($=>{const rt=transformFields($,this._fields,Transformation.Sqlite2Js);return s.parse(rt)});a(this,_)}catch(_){typeof o<"u"&&o(_)}}).catch(h=>{typeof o<"u"&&o(h)})}raw(e,s,a){this._adapter.query(e).then(o=>{typeof s<"u"&&s(this,o)}).catch(o=>{typeof a<"u"&&a(o)})}}class Executor{constructor(e,s,a){this._adapter=e,this._notifier=s,this._fields=a}async runInTransaction(e,s=!0){const a=e.map(c=>({sql:c.toString()})),o=this._adapter.runInTransaction(...a);return o.then(c=>{s&&this._notifier.potentiallyChanged()}),o}async transaction(e,s=!0){return await this._adapter.transaction((a,o)=>e(new TransactionalDB(a,this._fields),c=>{s&&this._notifier.potentiallyChanged(),o(c)},()=>{}))}async execute(e,s=!0){return new Promise((a,o)=>{e(new NonTransactionalDB(this._adapter,this._fields),c=>{s&&this._notifier.potentiallyChanged(),a(c)},o)})}}const _NOT_UNIQUE_="Provided input is not unique, query has several results.";function _RECORD_NOT_FOUND_(i){return`${i} failed because the record was not found.`}class LiveResult{constructor(e,s){this.result=e,this.tablenames=s}}function forEach(i,e,s){if(e.length===0)s();else{const[a,...o]=e;i(a,()=>{forEach(i,o,s)})}}var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function apply(i,e,s){switch(s.length){case 0:return i.call(e);case 1:return i.call(e,s[0]);case 2:return i.call(e,s[0],s[1]);case 3:return i.call(e,s[0],s[1],s[2])}return i.apply(e,s)}function arrayMap(i,e){for(var s=-1,a=i?i.length:0,o=Array(a);++s<a;)o[s]=e(i[s],s,i);return o}function arrayPush(i,e){for(var s=-1,a=e.length,o=i.length;++s<a;)i[o+s]=e[s];return i}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,Symbol$1=root.Symbol,propertyIsEnumerable=objectProto.propertyIsEnumerable,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0,nativeMax=Math.max;function baseFlatten(i,e,s,a,o){var c=-1,d=i.length;for(s||(s=isFlattenable),o||(o=[]);++c<d;){var h=i[c];e>0&&s(h)?e>1?baseFlatten(h,e-1,s,a,o):arrayPush(o,h):a||(o[o.length]=h)}return o}function basePick(i,e){return i=Object(i),basePickBy(i,e,function(s,a){return a in i})}function basePickBy(i,e,s){for(var a=-1,o=e.length,c={};++a<o;){var d=e[a],h=i[d];s(h,d)&&(c[d]=h)}return c}function baseRest(i,e){return e=nativeMax(e===void 0?i.length-1:e,0),function(){for(var s=arguments,a=-1,o=nativeMax(s.length-e,0),c=Array(o);++a<o;)c[a]=s[e+a];a=-1;for(var d=Array(e+1);++a<e;)d[a]=s[a];return d[e]=c,apply(i,this,d)}}function isFlattenable(i){return isArray(i)||isArguments$1(i)||!!(spreadableSymbol&&i&&i[spreadableSymbol])}function toKey(i){if(typeof i=="string"||isSymbol$1(i))return i;var e=i+"";return e=="0"&&1/i==-INFINITY?"-0":e}function isArguments$1(i){return isArrayLikeObject(i)&&hasOwnProperty.call(i,"callee")&&(!propertyIsEnumerable.call(i,"callee")||objectToString.call(i)==argsTag)}var isArray=Array.isArray;function isArrayLike(i){return i!=null&&isLength(i.length)&&!isFunction$1(i)}function isArrayLikeObject(i){return isObjectLike(i)&&isArrayLike(i)}function isFunction$1(i){var e=isObject(i)?objectToString.call(i):"";return e==funcTag||e==genTag}function isLength(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=MAX_SAFE_INTEGER}function isObject(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function isObjectLike(i){return!!i&&typeof i=="object"}function isSymbol$1(i){return typeof i=="symbol"||isObjectLike(i)&&objectToString.call(i)==symbolTag}var pick=baseRest(function(i,e){return i==null?{}:basePick(i,arrayMap(baseFlatten(e,1),toKey))}),lodash_pick=pick;const pick$1=getDefaultExportFromCjs(lodash_pick);var lodash_omitby={exports:{}};lodash_omitby.exports;(function(i,e){var s=200,a="Expected a function",o="__lodash_hash_undefined__",c=1,d=2,h=1/0,_=9007199254740991,$="[object Arguments]",rt="[object Array]",lt="[object Boolean]",ct="[object Date]",bt="[object Error]",Ot="[object Function]",dt="[object GeneratorFunction]",vt="[object Map]",at="[object Number]",et="[object Object]",j="[object Promise]",St="[object RegExp]",mt="[object Set]",ft="[object String]",st="[object Symbol]",ht="[object WeakMap]",ot="[object ArrayBuffer]",ut="[object DataView]",It="[object Float32Array]",Ct="[object Float64Array]",zt="[object Int8Array]",Wt="[object Int16Array]",Ut="[object Int32Array]",or="[object Uint8Array]",tr="[object Uint8ClampedArray]",Bt="[object Uint16Array]",Ht="[object Uint32Array]",er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lr=/^\w*$/,dr=/^\./,kr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ir=/[\\^$.*+?()[\]{}|]/g,Kt=/\\(\\)?/g,br=/^\[object .+?Constructor\]$/,Zn=/^(?:0|[1-9]\d*)$/,qt={};qt[It]=qt[Ct]=qt[zt]=qt[Wt]=qt[Ut]=qt[or]=qt[tr]=qt[Bt]=qt[Ht]=!0,qt[$]=qt[rt]=qt[ot]=qt[lt]=qt[ut]=qt[ct]=qt[bt]=qt[Ot]=qt[vt]=qt[at]=qt[et]=qt[St]=qt[mt]=qt[ft]=qt[ht]=!1;var Br=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Rs=typeof self=="object"&&self&&self.Object===Object&&self,mr=Br||Rs||Function("return this")(),Bn=e&&!e.nodeType&&e,_r=Bn&&!0&&i&&!i.nodeType&&i,Os=_r&&_r.exports===Bn,pn=Os&&Br.process,ls=function(){try{return pn&&pn.binding("util")}catch{}}(),Fn=ls&&ls.isTypedArray;function Us(it,yt){for(var At=-1,xt=yt.length,rr=it.length;++At<xt;)it[rr+At]=yt[At];return it}function js(it,yt){for(var At=-1,xt=it?it.length:0;++At<xt;)if(yt(it[At],At,it))return!0;return!1}function hs(it){return function(yt){return yt==null?void 0:yt[it]}}function Ps(it,yt){for(var At=-1,xt=Array(it);++At<it;)xt[At]=yt(At);return xt}function Wn(it){return function(yt){return it(yt)}}function An(it,yt){return it==null?void 0:it[yt]}function Un(it){var yt=!1;if(it!=null&&typeof it.toString!="function")try{yt=!!(it+"")}catch{}return yt}function Ms(it){var yt=-1,At=Array(it.size);return it.forEach(function(xt,rr){At[++yt]=[rr,xt]}),At}function Ns(it,yt){return function(At){return it(yt(At))}}function ms(it){var yt=-1,At=Array(it.size);return it.forEach(function(xt){At[++yt]=xt}),At}var Cs=Array.prototype,Jn=Function.prototype,ur=Object.prototype,kn=mr["__core-js_shared__"],jn=function(){var it=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return it?"Symbol(src)_1."+it:""}(),un=Jn.toString,vr=ur.hasOwnProperty,Mr=ur.toString,bn=RegExp("^"+un.call(vr).replace(Ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vn=mr.Symbol,Jt=mr.Uint8Array,xn=Ns(Object.getPrototypeOf,Object),Yr=ur.propertyIsEnumerable,_i=Cs.splice,cn=Object.getOwnPropertySymbols,rn=Ns(Object.keys,Object),qr=Pn(mr,"DataView"),nn=Pn(mr,"Map"),xr=Pn(mr,"Promise"),sn=Pn(mr,"Set"),hn=Pn(mr,"WeakMap"),es=Pn(Object,"create"),qs=gr(qr),Xs=gr(nn),Vr=gr(xr),Tn=gr(sn),Hn=gr(hn),Gr=Vn?Vn.prototype:void 0,Ur=Gr?Gr.valueOf:void 0,gs=Gr?Gr.toString:void 0;function Kr(it){var yt=-1,At=it?it.length:0;for(this.clear();++yt<At;){var xt=it[yt];this.set(xt[0],xt[1])}}function ys(){this.__data__=es?es(null):{}}function As(it){return this.has(it)&&delete this.__data__[it]}function wn(it){var yt=this.__data__;if(es){var At=yt[it];return At===o?void 0:At}return vr.call(yt,it)?yt[it]:void 0}function Nr(it){var yt=this.__data__;return es?yt[it]!==void 0:vr.call(yt,it)}function _s(it,yt){var At=this.__data__;return At[it]=es&&yt===void 0?o:yt,this}Kr.prototype.clear=ys,Kr.prototype.delete=As,Kr.prototype.get=wn,Kr.prototype.has=Nr,Kr.prototype.set=_s;function In(it){var yt=-1,At=it?it.length:0;for(this.clear();++yt<At;){var xt=it[yt];this.set(xt[0],xt[1])}}function zs(){this.__data__=[]}function Zs(it){var yt=this.__data__,At=vn(yt,it);if(At<0)return!1;var xt=yt.length-1;return At==xt?yt.pop():_i.call(yt,At,1),!0}function mn(it){var yt=this.__data__,At=vn(yt,it);return At<0?void 0:yt[At][1]}function Lr(it){return vn(this.__data__,it)>-1}function Ws(it,yt){var At=this.__data__,xt=vn(At,it);return xt<0?At.push([it,yt]):At[xt][1]=yt,this}In.prototype.clear=zs,In.prototype.delete=Zs,In.prototype.get=mn,In.prototype.has=Lr,In.prototype.set=Ws;function Rn(it){var yt=-1,At=it?it.length:0;for(this.clear();++yt<At;){var xt=it[yt];this.set(xt[0],xt[1])}}function us(){this.__data__={hash:new Kr,map:new(nn||In),string:new Kr}}function ks(it){return ps(this,it).delete(it)}function Rr(it){return ps(this,it).get(it)}function an(it){return ps(this,it).has(it)}function vs(it,yt){return ps(this,it).set(it,yt),this}Rn.prototype.clear=us,Rn.prototype.delete=ks,Rn.prototype.get=Rr,Rn.prototype.has=an,Rn.prototype.set=vs;function Hr(it){var yt=-1,At=it?it.length:0;for(this.__data__=new Rn;++yt<At;)this.add(it[yt])}function Pr(it){return this.__data__.set(it,o),this}function Ss(it){return this.__data__.has(it)}Hr.prototype.add=Hr.prototype.push=Pr,Hr.prototype.has=Ss;function gn(it){this.__data__=new In(it)}function cs(){this.__data__=new In}function Ys(it){return this.__data__.delete(it)}function Js(it){return this.__data__.get(it)}function fs(it){return this.__data__.has(it)}function yn(it,yt){var At=this.__data__;if(At instanceof In){var xt=At.__data__;if(!nn||xt.length<s-1)return xt.push([it,yt]),this;At=this.__data__=new Rn(xt)}return At.set(it,yt),this}gn.prototype.clear=cs,gn.prototype.delete=Ys,gn.prototype.get=Js,gn.prototype.has=fs,gn.prototype.set=yn;function xs(it,yt){var At=Sr(it)||Dr(it)?Ps(it.length,String):[],xt=At.length,rr=!!xt;for(var Xt in it)(yt||vr.call(it,Xt))&&!(rr&&(Xt=="length"||Sn(Xt,xt)))&&At.push(Xt);return At}function vn(it,yt){for(var At=it.length;At--;)if(yr(it[At][0],yt))return At;return-1}function Es(it,yt){yt=Dn(yt,it)?[yt]:Fs(yt);for(var At=0,xt=yt.length;it!=null&&At<xt;)it=it[nr(yt[At++])];return At&&At==xt?it:void 0}function Ls(it,yt,At){var xt=yt(it);return Sr(it)?xt:Us(xt,At(it))}function ts(it){return Mr.call(it)}function Vs(it,yt){return it!=null&&yt in Object(it)}function bs(it,yt,At,xt,rr){return it===yt?!0:it==null||yt==null||!jr(it)&&!En(yt)?it!==it&&yt!==yt:rs(it,yt,bs,At,xt,rr)}function rs(it,yt,At,xt,rr,Xt){var ir=Sr(it),cr=Sr(yt),hr=rt,Er=rt;ir||(hr=Nn(it),hr=hr==$?et:hr),cr||(Er=Nn(yt),Er=Er==$?et:Er);var Or=hr==et&&!Un(it),Fr=Er==et&&!Un(yt),zr=hr==Er;if(zr&&!Or)return Xt||(Xt=new gn),ir||pt(it)?ns(it,yt,At,xt,rr,Xt):Qs(it,yt,hr,At,xt,rr,Xt);if(!(rr&d)){var en=Or&&vr.call(it,"__wrapped__"),tn=Fr&&vr.call(yt,"__wrapped__");if(en||tn){var g=en?it.value():it,_e=tn?yt.value():yt;return Xt||(Xt=new gn),At(g,_e,xt,rr,Xt)}}return zr?(Xt||(Xt=new gn),Jr(it,yt,At,xt,rr,Xt)):!1}function Ds(it,yt,At,xt){var rr=At.length,Xt=rr,ir=!xt;if(it==null)return!Xt;for(it=Object(it);rr--;){var cr=At[rr];if(ir&&cr[2]?cr[1]!==it[cr[0]]:!(cr[0]in it))return!1}for(;++rr<Xt;){cr=At[rr];var hr=cr[0],Er=it[hr],Or=cr[1];if(ir&&cr[2]){if(Er===void 0&&!(hr in it))return!1}else{var Fr=new gn;if(xt)var zr=xt(Er,Or,hr,it,yt,Fr);if(!(zr===void 0?bs(Or,Er,xt,c|d,Fr):zr))return!1}}return!0}function Hs(it){if(!jr(it)||Mn(it))return!1;var yt=Ar(it)||Un(it)?bn:br;return yt.test(gr(it))}function Gs(it){return En(it)&&$r(it.length)&&!!qt[Mr.call(it)]}function Ts(it){return typeof it=="function"?it:it==null?Rt:typeof it=="object"?Sr(it)?$s(it[0],it[1]):Ks(it):Pt(it)}function ds(it){if(!Kn(it))return rn(it);var yt=[];for(var At in Object(it))vr.call(it,At)&&At!="constructor"&&yt.push(At);return yt}function Gn(it){if(!jr(it))return Nt(it);var yt=Kn(it),At=[];for(var xt in it)xt=="constructor"&&(yt||!vr.call(it,xt))||At.push(xt);return At}function Ks(it){var yt=_n(it);return yt.length==1&&yt[0][2]?Et(yt[0][0],yt[0][1]):function(At){return At===it||Ds(At,it,yt)}}function $s(it,yt){return Dn(it)&&as(yt)?Et(nr(it),yt):function(At){var xt=Lt(At,it);return xt===void 0&&xt===yt?Qt(At,it):bs(yt,xt,void 0,c|d)}}function Ln(it,yt,At){for(var xt=-1,rr=yt.length,Xt={};++xt<rr;){var ir=yt[xt],cr=it[ir];At(cr,ir)&&(Xt[ir]=cr)}return Xt}function Bs(it){return function(yt){return Es(yt,it)}}function ws(it){if(typeof it=="string")return it;if(fn(it))return gs?gs.call(it):"";var yt=it+"";return yt=="0"&&1/it==-h?"-0":yt}function Fs(it){return Sr(it)?it:jt(it)}function ns(it,yt,At,xt,rr,Xt){var ir=rr&d,cr=it.length,hr=yt.length;if(cr!=hr&&!(ir&&hr>cr))return!1;var Er=Xt.get(it);if(Er&&Xt.get(yt))return Er==yt;var Or=-1,Fr=!0,zr=rr&c?new Hr:void 0;for(Xt.set(it,yt),Xt.set(yt,it);++Or<cr;){var en=it[Or],tn=yt[Or];if(xt)var g=ir?xt(tn,en,Or,yt,it,Xt):xt(en,tn,Or,it,yt,Xt);if(g!==void 0){if(g)continue;Fr=!1;break}if(zr){if(!js(yt,function(_e,nt){if(!zr.has(nt)&&(en===_e||At(en,_e,xt,rr,Xt)))return zr.add(nt)})){Fr=!1;break}}else if(!(en===tn||At(en,tn,xt,rr,Xt))){Fr=!1;break}}return Xt.delete(it),Xt.delete(yt),Fr}function Qs(it,yt,At,xt,rr,Xt,ir){switch(At){case ut:if(it.byteLength!=yt.byteLength||it.byteOffset!=yt.byteOffset)return!1;it=it.buffer,yt=yt.buffer;case ot:return!(it.byteLength!=yt.byteLength||!xt(new Jt(it),new Jt(yt)));case lt:case ct:case at:return yr(+it,+yt);case bt:return it.name==yt.name&&it.message==yt.message;case St:case ft:return it==yt+"";case vt:var cr=Ms;case mt:var hr=Xt&d;if(cr||(cr=ms),it.size!=yt.size&&!hr)return!1;var Er=ir.get(it);if(Er)return Er==yt;Xt|=c,ir.set(it,yt);var Or=ns(cr(it),cr(yt),xt,rr,Xt,ir);return ir.delete(it),Or;case st:if(Ur)return Ur.call(it)==Ur.call(yt)}return!1}function Jr(it,yt,At,xt,rr,Xt){var ir=rr&d,cr=pr(it),hr=cr.length,Er=pr(yt),Or=Er.length;if(hr!=Or&&!ir)return!1;for(var Fr=hr;Fr--;){var zr=cr[Fr];if(!(ir?zr in yt:vr.call(yt,zr)))return!1}var en=Xt.get(it);if(en&&Xt.get(yt))return en==yt;var tn=!0;Xt.set(it,yt),Xt.set(yt,it);for(var g=ir;++Fr<hr;){zr=cr[Fr];var _e=it[zr],nt=yt[zr];if(xt)var gt=ir?xt(nt,_e,zr,yt,it,Xt):xt(_e,nt,zr,it,yt,Xt);if(!(gt===void 0?_e===nt||At(_e,nt,xt,rr,Xt):gt)){tn=!1;break}g||(g=zr=="constructor")}if(tn&&!g){var Tt=it.constructor,Dt=yt.constructor;Tt!=Dt&&"constructor"in it&&"constructor"in yt&&!(typeof Tt=="function"&&Tt instanceof Tt&&typeof Dt=="function"&&Dt instanceof Dt)&&(tn=!1)}return Xt.delete(it),Xt.delete(yt),tn}function On(it){return Ls(it,b,Qr)}function ps(it,yt){var At=it.__data__;return ss(yt)?At[typeof yt=="string"?"string":"hash"]:At.map}function _n(it){for(var yt=pr(it),At=yt.length;At--;){var xt=yt[At],rr=it[xt];yt[At]=[xt,rr,as(rr)]}return yt}function Pn(it,yt){var At=An(it,yt);return Hs(At)?At:void 0}var on=cn?Ns(cn,Object):kt,Qr=cn?function(it){for(var yt=[];it;)Us(yt,on(it)),it=xn(it);return yt}:kt,Nn=ts;(qr&&Nn(new qr(new ArrayBuffer(1)))!=ut||nn&&Nn(new nn)!=vt||xr&&Nn(xr.resolve())!=j||sn&&Nn(new sn)!=mt||hn&&Nn(new hn)!=ht)&&(Nn=function(it){var yt=Mr.call(it),At=yt==et?it.constructor:void 0,xt=At?gr(At):void 0;if(xt)switch(xt){case qs:return ut;case Xs:return vt;case Vr:return j;case Tn:return mt;case Hn:return ht}return yt});function is(it,yt,At){yt=Dn(yt,it)?[yt]:Fs(yt);for(var xt,rr=-1,ir=yt.length;++rr<ir;){var Xt=nr(yt[rr]);if(!(xt=it!=null&&At(it,Xt)))break;it=it[Xt]}if(xt)return xt;var ir=it?it.length:0;return!!ir&&$r(ir)&&Sn(Xt,ir)&&(Sr(it)||Dr(it))}function Sn(it,yt){return yt=yt??_,!!yt&&(typeof it=="number"||Zn.test(it))&&it>-1&&it%1==0&&it<yt}function Dn(it,yt){if(Sr(it))return!1;var At=typeof it;return At=="number"||At=="symbol"||At=="boolean"||it==null||fn(it)?!0:lr.test(it)||!er.test(it)||yt!=null&&it in Object(yt)}function ss(it){var yt=typeof it;return yt=="string"||yt=="number"||yt=="symbol"||yt=="boolean"?it!=="__proto__":it===null}function Mn(it){return!!jn&&jn in it}function Kn(it){var yt=it&&it.constructor,At=typeof yt=="function"&&yt.prototype||ur;return it===At}function as(it){return it===it&&!jr(it)}function Et(it,yt){return function(At){return At==null?!1:At[it]===yt&&(yt!==void 0||it in Object(At))}}function Nt(it){var yt=[];if(it!=null)for(var At in Object(it))yt.push(At);return yt}var jt=fr(function(it){it=wt(it);var yt=[];return dr.test(it)&&yt.push(""),it.replace(kr,function(At,xt,rr,Xt){yt.push(rr?Xt.replace(Kt,"$1"):xt||At)}),yt});function nr(it){if(typeof it=="string"||fn(it))return it;var yt=it+"";return yt=="0"&&1/it==-h?"-0":yt}function gr(it){if(it!=null){try{return un.call(it)}catch{}try{return it+""}catch{}}return""}function fr(it,yt){if(typeof it!="function"||yt&&typeof yt!="function")throw new TypeError(a);var At=function(){var xt=arguments,rr=yt?yt.apply(this,xt):xt[0],Xt=At.cache;if(Xt.has(rr))return Xt.get(rr);var ir=it.apply(this,xt);return At.cache=Xt.set(rr,ir),ir};return At.cache=new(fr.Cache||Rn),At}fr.Cache=Rn;function wr(it){if(typeof it!="function")throw new TypeError(a);return function(){var yt=arguments;switch(yt.length){case 0:return!it.call(this);case 1:return!it.call(this,yt[0]);case 2:return!it.call(this,yt[0],yt[1]);case 3:return!it.call(this,yt[0],yt[1],yt[2])}return!it.apply(this,yt)}}function yr(it,yt){return it===yt||it!==it&&yt!==yt}function Dr(it){return Xr(it)&&vr.call(it,"callee")&&(!Yr.call(it,"callee")||Mr.call(it)==$)}var Sr=Array.isArray;function Cr(it){return it!=null&&$r(it.length)&&!Ar(it)}function Xr(it){return En(it)&&Cr(it)}function Ar(it){var yt=jr(it)?Mr.call(it):"";return yt==Ot||yt==dt}function $r(it){return typeof it=="number"&&it>-1&&it%1==0&&it<=_}function jr(it){var yt=typeof it;return!!it&&(yt=="object"||yt=="function")}function En(it){return!!it&&typeof it=="object"}function fn(it){return typeof it=="symbol"||En(it)&&Mr.call(it)==st}var pt=Fn?Wn(Fn):Gs;function wt(it){return it==null?"":ws(it)}function Lt(it,yt,At){var xt=it==null?void 0:Es(it,yt);return xt===void 0?At:xt}function Qt(it,yt){return it!=null&&is(it,yt,Vs)}function pr(it){return Cr(it)?xs(it):ds(it)}function b(it){return Cr(it)?xs(it,!0):Gn(it)}function tt(it,yt){return _t(it,wr(Ts(yt)))}function _t(it,yt){return it==null?{}:Ln(it,On(it),Ts(yt))}function Rt(it){return it}function Pt(it){return Dn(it)?hs(nr(it)):Bs(it)}function kt(){return[]}i.exports=tt})(lodash_omitby,lodash_omitby.exports);var lodash_omitbyExports=lodash_omitby.exports;const omitBy=getDefaultExportFromCjs(lodash_omitbyExports);var callBind$1={exports:{}},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$2=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function i(e,s){for(var a=[],o=0;o<e.length;o+=1)a[o]=e[o];for(var c=0;c<s.length;c+=1)a[c+e.length]=s[c];return a},slicy=function i(e,s){for(var a=[],o=s||0,c=0;o<e.length;o+=1,c+=1)a[c]=e[o];return a},joiny=function(i,e){for(var s="",a=0;a<i.length;a+=1)s+=i[a],a+1<i.length&&(s+=e);return s},implementation$4=function i(e){var s=this;if(typeof s!="function"||toStr$2.apply(s)!==funcType)throw new TypeError(ERROR_MESSAGE+s);for(var a=slicy(arguments,1),o,c=function(){if(this instanceof o){var rt=s.apply(this,concatty(a,arguments));return Object(rt)===rt?rt:this}return s.apply(e,concatty(a,arguments))},d=max(0,s.length-a.length),h=[],_=0;_<d;_++)h[_]="$"+_;if(o=Function("binder","return function ("+joiny(h,",")+"){ return binder.apply(this,arguments); }")(c),s.prototype){var $=function(){};$.prototype=s.prototype,o.prototype=new $,$.prototype=null}return o},implementation$3=implementation$4,functionBind=Function.prototype.bind||implementation$3,shams$1=function i(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},s=Symbol("test"),a=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var o=42;e[s]=o;for(s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==s||!Object.prototype.propertyIsEnumerable.call(e,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(e,s);if(d.value!==o||d.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$2=function i(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object$1=Object,hasProto$1=function i(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object$1)},call=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$1=functionBind,hasown=bind$1.call(call,$hasOwn),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$3=TypeError,getEvalledConstructor=function(i){try{return $Function('"use strict"; return ('+i+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols$1=hasSymbols$2(),hasProto=hasProto$1(),getProto=Object.getPrototypeOf||(hasProto?function(i){return i.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$1&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$1&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols$1||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols$1||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$1&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$1?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto)try{null.error}catch(i){var errorProto=getProto(getProto(i));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function i(e){var s;if(e==="%AsyncFunction%")s=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")s=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")s=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var a=i("%AsyncGeneratorFunction%");a&&(s=a.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=i("%AsyncGenerator%");o&&getProto&&(s=getProto(o.prototype))}return INTRINSICS[e]=s,s},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$2=hasown,$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function i(e){var s=$strSlice(e,0,1),a=$strSlice(e,-1);if(s==="%"&&a!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&s!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var o=[];return $replace(e,rePropName,function(c,d,h,_){o[o.length]=h?$replace(_,reEscapeChar,"$1"):d||c}),o},getBaseIntrinsic=function i(e,s){var a=e,o;if(hasOwn$2(LEGACY_ALIASES,a)&&(o=LEGACY_ALIASES[a],a="%"+o[0]+"%"),hasOwn$2(INTRINSICS,a)){var c=INTRINSICS[a];if(c===needsEval&&(c=doEval(a)),typeof c>"u"&&!s)throw new $TypeError$3("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:a,value:c}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},getIntrinsic=function i(e,s){if(typeof e!="string"||e.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof s!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=stringToPath(e),o=a.length>0?a[0]:"",c=getBaseIntrinsic("%"+o+"%",s),d=c.name,h=c.value,_=!1,$=c.alias;$&&(o=$[0],$spliceApply(a,$concat([0,1],$)));for(var rt=1,lt=!0;rt<a.length;rt+=1){var ct=a[rt],bt=$strSlice(ct,0,1),Ot=$strSlice(ct,-1);if((bt==='"'||bt==="'"||bt==="`"||Ot==='"'||Ot==="'"||Ot==="`")&&bt!==Ot)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((ct==="constructor"||!lt)&&(_=!0),o+="."+ct,d="%"+o+"%",hasOwn$2(INTRINSICS,d))h=INTRINSICS[d];else if(h!=null){if(!(ct in h)){if(!s)throw new $TypeError$3("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD$1&&rt+1>=a.length){var dt=$gOPD$1(h,ct);lt=!!dt,lt&&"get"in dt&&!("originalValue"in dt.get)?h=dt.get:h=h[ct]}else lt=hasOwn$2(h,ct),h=h[ct];lt&&!_&&(INTRINSICS[d]=h)}}return h},GetIntrinsic$6=getIntrinsic,$defineProperty$1=GetIntrinsic$6("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function i(){if($defineProperty$1)try{return $defineProperty$1({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function i(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty$1([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,GetIntrinsic$5=getIntrinsic,$gOPD=GetIntrinsic$5("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,hasPropertyDescriptors=hasPropertyDescriptors_1(),GetIntrinsic$4=getIntrinsic,$defineProperty=hasPropertyDescriptors&&GetIntrinsic$4("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch{$defineProperty=!1}var $SyntaxError=GetIntrinsic$4("%SyntaxError%"),$TypeError$2=GetIntrinsic$4("%TypeError%"),gopd=gopd$1,defineDataProperty$1=function i(e,s,a){if(!e||typeof e!="object"&&typeof e!="function")throw new $TypeError$2("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new $TypeError$2("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$2("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$2("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$2("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$2("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,_=!!gopd&&gopd(e,s);if($defineProperty)$defineProperty(e,s,{configurable:d===null&&_?_.configurable:!d,enumerable:o===null&&_?_.enumerable:!o,value:a,writable:c===null&&_?_.writable:!c});else if(h||!o&&!c&&!d)e[s]=a;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},GetIntrinsic$3=getIntrinsic,define=defineDataProperty$1,hasDescriptors=hasPropertyDescriptors_1(),gOPD=gopd$1,$TypeError$1=GetIntrinsic$3("%TypeError%"),$floor=GetIntrinsic$3("%Math.floor%"),setFunctionLength=function i(e,s){if(typeof e!="function")throw new $TypeError$1("`fn` is not a function");if(typeof s!="number"||s<0||s>4294967295||$floor(s)!==s)throw new $TypeError$1("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],o=!0,c=!0;if("length"in e&&gOPD){var d=gOPD(e,"length");d&&!d.configurable&&(o=!1),d&&!d.writable&&(c=!1)}return(o||c||!a)&&(hasDescriptors?define(e,"length",s,!0,!0):define(e,"length",s)),e};(function(i){var e=functionBind,s=getIntrinsic,a=setFunctionLength,o=s("%TypeError%"),c=s("%Function.prototype.apply%"),d=s("%Function.prototype.call%"),h=s("%Reflect.apply%",!0)||e.call(d,c),_=s("%Object.defineProperty%",!0),$=s("%Math.max%");if(_)try{_({},"a",{value:1})}catch{_=null}i.exports=function(ct){if(typeof ct!="function")throw new o("a function is required");var bt=h(e,d,arguments);return a(bt,1+$(0,ct.length-(arguments.length-1)),!0)};var rt=function(){return h(e,c,arguments)};_?_(i.exports,"apply",{value:rt}):i.exports.apply=rt})(callBind$1);var callBindExports=callBind$1.exports;const callBind=getDefaultExportFromCjs(callBindExports);var CheckObjectCoercible,hasRequiredCheckObjectCoercible;function requireCheckObjectCoercible(){if(hasRequiredCheckObjectCoercible)return CheckObjectCoercible;hasRequiredCheckObjectCoercible=1;var i=getIntrinsic,e=i("%TypeError%");return CheckObjectCoercible=function(a,o){if(a==null)throw new e(o||"Cannot call method on "+a);return a},CheckObjectCoercible}var RequireObjectCoercible$1,hasRequiredRequireObjectCoercible;function requireRequireObjectCoercible(){return hasRequiredRequireObjectCoercible||(hasRequiredRequireObjectCoercible=1,RequireObjectCoercible$1=requireCheckObjectCoercible()),RequireObjectCoercible$1}var GetIntrinsic$2=getIntrinsic,$Object=GetIntrinsic$2("%Object%"),RequireObjectCoercible=requireRequireObjectCoercible(),ToObject$1=function i(e){return RequireObjectCoercible(e),$Object(e)},isPrimitive,hasRequiredIsPrimitive;function requireIsPrimitive(){return hasRequiredIsPrimitive||(hasRequiredIsPrimitive=1,isPrimitive=function(e){return e===null||typeof e!="function"&&typeof e!="object"}),isPrimitive}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var i=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,s,a;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{s=Object.defineProperty({},"length",{get:function(){throw a}}),a={},e(function(){throw 42},null,s)}catch(et){et!==a&&(e=null)}else e=null;var o=/^\s*class\b/,c=function(j){try{var St=i.call(j);return o.test(St)}catch{return!1}},d=function(j){try{return c(j)?!1:(i.call(j),!0)}catch{return!1}},h=Object.prototype.toString,_="[object Object]",$="[object Function]",rt="[object GeneratorFunction]",lt="[object HTMLAllCollection]",ct="[object HTML document.all class]",bt="[object HTMLCollection]",Ot=typeof Symbol=="function"&&!!Symbol.toStringTag,dt=!(0 in[,]),vt=function(){return!1};if(typeof document=="object"){var at=document.all;h.call(at)===h.call(document.all)&&(vt=function(j){if((dt||!j)&&(typeof j>"u"||typeof j=="object"))try{var St=h.call(j);return(St===lt||St===ct||St===bt||St===_)&&j("")==null}catch{}return!1})}return isCallable=e?function(j){if(vt(j))return!0;if(!j||typeof j!="function"&&typeof j!="object")return!1;try{e(j,null,s)}catch(St){if(St!==a)return!1}return!c(j)&&d(j)}:function(j){if(vt(j))return!0;if(!j||typeof j!="function"&&typeof j!="object")return!1;if(Ot)return d(j);if(c(j))return!1;var St=h.call(j);return St!==$&&St!==rt&&!/^\[object HTML/.test(St)?!1:d(j)},isCallable}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var i=shams$1;return shams=function(){return i()&&!!Symbol.toStringTag},shams}var isDateObject,hasRequiredIsDateObject;function requireIsDateObject(){if(hasRequiredIsDateObject)return isDateObject;hasRequiredIsDateObject=1;var i=Date.prototype.getDay,e=function(d){try{return i.call(d),!0}catch{return!1}},s=Object.prototype.toString,a="[object Date]",o=requireShams()();return isDateObject=function(d){return typeof d!="object"||d===null?!1:o?e(d):s.call(d)===a},isDateObject}var isSymbol={exports:{}},hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol.exports;hasRequiredIsSymbol=1;var i=Object.prototype.toString,e=hasSymbols$2();if(e){var s=Symbol.prototype.toString,a=/^Symbol\(.*\)$/,o=function(d){return typeof d.valueOf()!="symbol"?!1:a.test(s.call(d))};isSymbol.exports=function(d){if(typeof d=="symbol")return!0;if(i.call(d)!=="[object Symbol]")return!1;try{return o(d)}catch{return!1}}}else isSymbol.exports=function(d){return!1};return isSymbol.exports}var es2015,hasRequiredEs2015;function requireEs2015(){if(hasRequiredEs2015)return es2015;hasRequiredEs2015=1;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",e=requireIsPrimitive(),s=requireIsCallable(),a=requireIsDateObject(),o=requireIsSymbol(),c=function(_,$){if(typeof _>"u"||_===null)throw new TypeError("Cannot call method on "+_);if(typeof $!="string"||$!=="number"&&$!=="string")throw new TypeError('hint must be "string" or "number"');var rt=$==="string"?["toString","valueOf"]:["valueOf","toString"],lt,ct,bt;for(bt=0;bt<rt.length;++bt)if(lt=_[rt[bt]],s(lt)&&(ct=lt.call(_),e(ct)))return ct;throw new TypeError("No default value")},d=function(_,$){var rt=_[$];if(rt!==null&&typeof rt<"u"){if(!s(rt))throw new TypeError(rt+" returned for property "+$+" of object "+_+" is not a function");return rt}};return es2015=function(_){if(e(_))return _;var $="default";arguments.length>1&&(arguments[1]===String?$="string":arguments[1]===Number&&($="number"));var rt;if(i&&(Symbol.toPrimitive?rt=d(_,Symbol.toPrimitive):o(_)&&(rt=Symbol.prototype.valueOf)),typeof rt<"u"){var lt=rt.call(_,$);if(e(lt))return lt;throw new TypeError("unable to convert exotic object to primitive")}return $==="default"&&(a(_)||o(_))&&($="string"),c(_,$==="default"?"number":$)},es2015}var ToPrimitive$1,hasRequiredToPrimitive;function requireToPrimitive(){if(hasRequiredToPrimitive)return ToPrimitive$1;hasRequiredToPrimitive=1;var i=requireEs2015();return ToPrimitive$1=function(s){return arguments.length>1?i(s,arguments[1]):i(s)},ToPrimitive$1}var ToString$1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return ToString$1;hasRequiredToString=1;var i=getIntrinsic,e=i("%String%"),s=i("%TypeError%");return ToString$1=function(o){if(typeof o=="symbol")throw new s("Cannot convert a Symbol value to a string");return e(o)},ToString$1}var GetIntrinsic$1=getIntrinsic,$String=GetIntrinsic$1("%String%"),ToPrimitive=requireToPrimitive(),ToString=requireToString(),ToPropertyKey$1=function i(e){var s=ToPrimitive(e,$String);return typeof s=="symbol"?s:ToString(s)},IsPropertyKey$1,hasRequiredIsPropertyKey;function requireIsPropertyKey(){return hasRequiredIsPropertyKey||(hasRequiredIsPropertyKey=1,IsPropertyKey$1=function(e){return typeof e=="string"||typeof e=="symbol"}),IsPropertyKey$1}var Type$2,hasRequiredType$1;function requireType$1(){return hasRequiredType$1||(hasRequiredType$1=1,Type$2=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}),Type$2}var Type$1,hasRequiredType;function requireType(){if(hasRequiredType)return Type$1;hasRequiredType=1;var i=requireType$1();return Type$1=function(s){return typeof s=="symbol"?"Symbol":typeof s=="bigint"?"BigInt":i(s)},Type$1}var GetIntrinsic=getIntrinsic,$TypeError=GetIntrinsic("%TypeError%"),hasOwn$1=hasown,IsPropertyKey=requireIsPropertyKey(),Type=requireType(),HasOwnProperty$1=function i(e,s){if(Type(e)!=="Object")throw new $TypeError("Assertion failed: `O` must be an Object");if(!IsPropertyKey(s))throw new $TypeError("Assertion failed: `P` must be a Property Key");return hasOwn$1(e,s)},ToObject=ToObject$1,ToPropertyKey=ToPropertyKey$1,HasOwnProperty=HasOwnProperty$1,implementation$2=function i(e,s){var a=ToObject(e),o=ToPropertyKey(s);return HasOwnProperty(a,o)},implementation$1=implementation$2,polyfill=function i(){return Object.hasOwn||implementation$1};const getPolyfill=getDefaultExportFromCjs(polyfill);var toStr$1=Object.prototype.toString,isArguments=function i(e){var s=toStr$1.call(e),a=s==="[object Arguments]";return a||(a=s!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&toStr$1.call(e.callee)==="[object Function]"),a},implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var i;if(!Object.keys){var e=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=isArguments,o=Object.prototype.propertyIsEnumerable,c=!o.call({toString:null},"toString"),d=o.call(function(){},"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],_=function(ct){var bt=ct.constructor;return bt&&bt.prototype===ct},$={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},rt=function(){if(typeof window>"u")return!1;for(var ct in window)try{if(!$["$"+ct]&&e.call(window,ct)&&window[ct]!==null&&typeof window[ct]=="object")try{_(window[ct])}catch{return!0}}catch{return!0}return!1}(),lt=function(ct){if(typeof window>"u"||!rt)return _(ct);try{return _(ct)}catch{return!1}};i=function(bt){var Ot=bt!==null&&typeof bt=="object",dt=s.call(bt)==="[object Function]",vt=a(bt),at=Ot&&s.call(bt)==="[object String]",et=[];if(!Ot&&!dt&&!vt)throw new TypeError("Object.keys called on a non-object");var j=d&&dt;if(at&&bt.length>0&&!e.call(bt,0))for(var St=0;St<bt.length;++St)et.push(String(St));if(vt&&bt.length>0)for(var mt=0;mt<bt.length;++mt)et.push(String(mt));else for(var ft in bt)!(j&&ft==="prototype")&&e.call(bt,ft)&&et.push(String(ft));if(c)for(var st=lt(bt),ht=0;ht<h.length;++ht)!(st&&h[ht]==="constructor")&&e.call(bt,h[ht])&&et.push(h[ht]);return et}}return implementation=i,implementation}var slice=Array.prototype.slice,isArgs=isArguments,origKeys=Object.keys,keysShim=origKeys?function i(e){return origKeys(e)}:requireImplementation(),originalKeys=Object.keys;keysShim.shim=function i(){if(Object.keys){var e=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);e||(Object.keys=function(a){return isArgs(a)?originalKeys(slice.call(a)):originalKeys(a)})}else Object.keys=keysShim;return Object.keys||keysShim};var objectKeys=keysShim,keys=objectKeys,hasSymbols=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",toStr=Object.prototype.toString,concat=Array.prototype.concat,defineDataProperty=defineDataProperty$1,isFunction=function(i){return typeof i=="function"&&toStr.call(i)==="[object Function]"},supportsDescriptors=hasPropertyDescriptors_1(),defineProperty=function(i,e,s,a){if(e in i){if(a===!0){if(i[e]===s)return}else if(!isFunction(a)||!a())return}supportsDescriptors?defineDataProperty(i,e,s,!0):defineDataProperty(i,e,s)},defineProperties=function(i,e){var s=arguments.length>2?arguments[2]:{},a=keys(e);hasSymbols&&(a=concat.call(a,Object.getOwnPropertySymbols(e)));for(var o=0;o<a.length;o+=1)defineProperty(i,a[o],e[a[o]],s[a[o]])};defineProperties.supportsDescriptors=!!supportsDescriptors;const hasOwn=callBind(getPolyfill(),null);class Table{constructor(e,s,a,o,c){Zt(this,"_builder");Zt(this,"_executor");Zt(this,"_shapeManager");Zt(this,"_qualifiedTableName");Zt(this,"_tables");Zt(this,"_fields");Zt(this,"_schema");Zt(this,"createSchema");Zt(this,"createManySchema");Zt(this,"findUniqueSchema");Zt(this,"findSchema");Zt(this,"updateSchema");Zt(this,"updateManySchema");Zt(this,"upsertSchema");Zt(this,"deleteSchema");Zt(this,"deleteManySchema");Zt(this,"syncSchema");this.tableName=e,this._dbDescription=c,this._fields=this._dbDescription.getFields(e);const d=this._dbDescription.getFieldNames(e),h=this._dbDescription.getTableDescription(e);this._builder=new Builder(e,d,o,h),this._executor=new Executor(s,a,this._fields),this._shapeManager=o,this._qualifiedTableName=new QualifiedTablename("main",e),this._tables=new Map,this._schema=h.modelSchema,this.createSchema=omitCountFromSelectAndIncludeSchema(h.createSchema),this.createManySchema=h.createManySchema,this.findUniqueSchema=h.findUniqueSchema,this.findSchema=h.findSchema,this.updateSchema=omitCountFromSelectAndIncludeSchema(h.updateSchema),this.updateManySchema=h.updateManySchema,this.upsertSchema=h.upsertSchema,this.deleteSchema=h.deleteSchema,this.deleteManySchema=h.deleteManySchema,this.syncSchema=h.findSchema.pick({include:!0})}setTables(e){this._tables=e}getIncludedTables(e){const s=e.include??{},a=Object.keys(s),o=new Set([this]);return a.forEach(c=>{const d=this._dbDescription.getRelatedTable(this.tableName,c),h=this._tables.get(d),_=o.add(h),$=s[c];if(typeof $=="object"&&!Array.isArray($)&&$!==null)return h.getIncludedTables($).forEach(lt=>_.add(lt)),_;if(typeof $=="boolean")return _;throw new Error(`Unexpected value in include tree for syncShape: ${JSON.stringify($)}`)}),o}sync(e){const s=this.syncSchema.parse(e??{}),c={tables:Array.from(this.getIncludedTables(s)).map(d=>d.tableName)};return this._shapeManager.sync(c)}async create(e){return this._executor.transaction((s,a,o)=>this._create(e,s,a,o))}async createMany(e){return this._executor.execute(this._createMany.bind(this,e))}async findUnique(e){return this._executor.execute((s,a,o)=>this._findUnique(e,s,a,o),!1)}liveUnique(e){return this.makeLiveResult(()=>this.findUnique(e),e)}async findFirst(e){return this._executor.execute((s,a,o)=>this._findFirst(e,s,a,o),!1)}liveFirst(e){return this.makeLiveResult(()=>this.findFirst(e),e??{})}async findMany(e){return this._executor.execute((s,a,o)=>this._findMany(e,s,a,o),!1)}liveMany(e){return this.makeLiveResult(()=>this.findMany(e),e??{})}async update(e){return this._executor.transaction((s,a,o)=>this._update(e,s,a,o))}async updateMany(e){return this._executor.execute(this._updateMany.bind(this,e))}async upsert(e){return this._executor.transaction((s,a,o)=>this._upsert(e,s,a,o))}async delete(e){return this._executor.transaction((s,a,o)=>this._delete(e,s,a,o))}async deleteMany(e){return this._executor.execute(this._deleteMany.bind(this,e))}forEachRelation(e,s,a){const o=this._dbDescription.getRelations(this.tableName);forEach((c,d)=>{hasOwn(e,c.relationField)?s(c,d):d()},o,a)}forEachOutgoingRelation(e,s,a){this.forEachRelation(e,(o,c)=>{o.isOutgoingRelation()?s(o,c):c()},a)}_create(e,s,a,o){const c=transformCreate(validate(e,this.createSchema),this._fields),d=c.data;this.forEachOutgoingRelation(d,(h,_)=>{const{fromField:$,toField:rt,relationField:lt,relatedTable:ct}=h,bt=parseNestedCreate(d[lt]).create;this._tables.get(ct)._create({data:bt},s,dt=>{delete d[lt],d[$]=dt[rt],_()},o)},()=>{const h=this._dbDescription.getIncomingRelations(this.tableName);let _=(lt,ct)=>ct();const $=(lt,ct)=>{const{relationField:bt,relatedTable:Ot,relationName:dt}=lt;delete d[bt];const vt=_;_=(at,et)=>{const j=this._tables.get(Ot),{fromField:St,toField:mt}=this._dbDescription.getRelation(Ot,dt);ct[St]=at[mt],j._create({data:ct},s,()=>{vt(at,et)},o)}};h.forEach(lt=>{const{relationField:ct}=lt;if(hasOwn(d,ct)){const bt=parseNestedCreate(d[ct]).create;Array.isArray(bt)?bt.forEach($.bind(this,lt)):$(lt,bt)}});const rt=this._builder.create({...c,data:d});s.query(rt,this._schema,(lt,ct)=>{ct.length!==1&&o("Wrong amount of objects were created.");const bt=ct[0];_(bt,()=>{this._findUniqueWithoutAutoSelect({where:d,select:c.select,...notNullNotUndefined(c.include)&&{include:c.include}},lt,a,o,"Create")})},o)})}_createMany(e,s,a,o){const c=transformCreateMany(validate(e,this.createManySchema),this._fields),d=this._builder.createMany(c);s.run(d,(h,{rowsAffected:_})=>{a({count:_})},o)}_findUnique(e,s,a,o){const c=transformFindUnique(validate(e,this.findUniqueSchema),this._fields),d=this._builder.findUnique(c);s.query(d,this._schema,(h,_)=>{if(_.length>1)throw new InvalidArgumentError(_NOT_UNIQUE_);return _.length===1?this.fetchIncludes(_,c.include,s,$=>{a($[0])},o):a(null)},o)}_findFirst(e,s,a,o){const c=transformFindNonUnique(validate(e??{},this.findSchema),this._fields),d=this._builder.findFirst(c);s.query(d,this._schema,(h,_)=>_.length==0?a(null):this.fetchIncludes([_[0]],c.include,s,$=>{a($[0])},o),o)}joinObjects(e,s,a,o,c,d){return e.map(h=>{const _=s.filter($=>h[a]==$[o]);if(_.length===0)return h;if(d==="one"){if(_.length>1)throw TypeError(`Relation on field '${c}' is one-to-one but found several related objects: `+JSON.stringify(_));const[$]=_;return Object.assign(h,{[c]:$})}else return Object.assign(h,{[c]:_})})}fetchRelated(e,s,a,o,c,d,h,_,$,rt){const lt=this._tables.get(s),ct=h===!0?{}:h,bt=typeof ct.where>"u"?{}:ct.where,Ot=e.map(dt=>dt[a]);lt._findMany({...ct,where:{...bt,[o]:{in:Ot}}},_,dt=>{const vt=this.joinObjects(e,dt,a,o,c,d);$(vt)},rt)}fetchInclude(e,s,a,o,c,d){if(a===!1)return c([]);if(s.isIncomingRelation()){const{fromField:h,toField:_}=s.getOppositeRelation(this._dbDescription);this.fetchRelated(e,s.relatedTable,_,h,s.relationField,s.relatedObjects,a,o,c,d)}else{const{fromField:h,toField:_,relationField:$,relatedObjects:rt,relatedTable:lt}=s;this.fetchRelated(e,lt,h,_,$,rt,a,o,c,d)}}fetchIncludes(e,s,a,o,c){if(typeof s>"u"||e.length===0)return o(e);{const d=Object.keys(s);let h=[];forEach((_,$)=>{if(!this._dbDescription.hasRelationForField(this.tableName,_))throw new InvalidArgumentError("Unexpected field `"+_+"` in `include` argument.");const rt=this._dbDescription.getRelationName(this.tableName,_),lt=this._dbDescription.getRelation(this.tableName,rt);this.fetchInclude(e,lt,s[_],a,ct=>{h=h.concat(ct),$()},c)},d,()=>{o(h)})}}_findMany(e,s,a,o){const c=transformFindNonUnique(validate(e??{},this.findSchema),this._fields),d=this._builder.findMany(c);s.query(d,this._schema,(h,_)=>{this.fetchIncludes(_,c.include,s,a,o)},o)}_findUniqueWithoutAutoSelect(e,s,a,o,c){const d=this._builder.findWithoutAutoSelect(e);s.query(d,this._schema,(h,_)=>{if(_.length===0)throw new InvalidArgumentError(_RECORD_NOT_FOUND_(c));if(_.length>1)throw new InvalidArgumentError(_NOT_UNIQUE_);this.fetchIncludes(_,e.include,s,$=>{const[rt]=$;a(rt)},o)},o)}updateRelatedObject(e,s,a,o,c,d,h,_,$="update"){if(typeof e>"u")h();else{const rt=this._tables.get(s);if($==="update"){const lt=c?e.where:{...e.where,[o]:a};rt._update({data:e.data,where:lt},d,h,_)}else rt._updateMany({data:e.data,where:{...e.where,[o]:a}},d,h,_)}}updateFKs(e,s,a,o,c){const d=omitBy(s,($,rt)=>e[rt]===$),_=Object.keys(d).filter($=>this._dbDescription.getRelationsPointingAtField(this.tableName,$).length>0);forEach(($,rt)=>{const lt=this._dbDescription.getRelationsPointingAtField(this.tableName,$);forEach((ct,bt)=>{const Ot=ct.relatedTable,{fromField:dt}=ct.getOppositeRelation(this._dbDescription);this._tables.get(Ot)._updateMany({data:{[dt]:s[$]},where:{[dt]:e[$]}},a,bt,o)},lt,rt)},_,c)}updateManyRelatedObjectsFromIncomingRelation(e,s,a,o,c,d,h){const{fromField:_,toField:$}=this._dbDescription.getRelation(e,s),rt=a[$],lt=Array.isArray(o)?o:typeof o>"u"?[]:[o];forEach((ct,bt)=>{this.updateRelatedObject(ct,e,rt,_,!0,c,bt,d,"updateMany")},lt,h)}updateRelatedObjectFromIncomingRelation(e,s,a,o,c,d,h){const{relatedObjects:_}=this._dbDescription.getRelation(this.tableName,s),{fromField:$,toField:rt}=this._dbDescription.getRelation(e,s),lt=a[rt];if(_==="many"){const ct=Array.isArray(o)?o:typeof o>"u"?[]:[o];forEach((bt,Ot)=>{this.updateRelatedObject(bt,e,lt,$,!0,c,dt=>{const vt=dt;if(vt[$]!==lt)throw new InvalidArgumentError(`Nested update cannot update an unrelated object.
Related object has field ${$} === ${lt}
but the object identified by ${JSON.stringify(bt)} has ${$} === ${vt[$]}`);Ot()},d)},ct,h)}else{const ct=typeof o>"u"?void 0:{data:o,where:{[rt]:lt}};this.updateRelatedObject(ct,e,lt,$,!0,c,h,d)}}updateRelatedObjectFromOutgoingRelation(e,s,a,o,c,d,h){const{fromField:_,toField:$}=e,rt=s[_],lt=typeof a>"u"?void 0:{data:a};this.updateRelatedObject(lt,o,rt,$,!1,c,d,h)}_update(e,s,a,o){const c=transformUpdate(validate(e,this.updateSchema),this._fields);this._findUnique({where:c.where},s,d=>{const h=d;if(d===null)throw new InvalidArgumentError(_RECORD_NOT_FOUND_("Update"));const _=this._dbDescription.getFieldNames(this.tableName),$=pick$1(c.data,_),rt=Object.keys($),lt={...c,data:$},ct=(bt,Ot)=>{const dt=Ot[0];this.updateFKs(d,dt,bt,o,()=>{this.updateRelatedObjects(c,h,bt,$,o,a)})};if(rt.length>0){const bt=this._builder.update(lt);s.query(bt,this._schema,ct,o)}else ct(s,[h])},o)}updateRelatedObjects(e,s,a,o,c,d){this.forEachRelation(e.data,(h,_)=>{const{relationField:$,relatedTable:rt,relationName:lt}=h,ct=e.data,bt=parseNestedUpdate(ct[$]),Ot=bt.update;h.isOutgoingRelation()?this.updateRelatedObjectFromOutgoingRelation(h,s,Ot,rt,a,dt=>{const at=dt[h.toField];o[h.fromField]=at,_()},c):this.updateRelatedObjectFromIncomingRelation(rt,lt,s,Ot,a,c,()=>{const dt=bt.updateMany;this.updateManyRelatedObjectsFromIncomingRelation(rt,lt,s,dt,a,c,_)})},()=>{this._findUniqueWithoutAutoSelect({where:{...e.where,...o},select:e.select,...notNullNotUndefined(e.include)&&{include:e.include}},a,d,c,"Update")})}_updateMany(e,s,a,o){const c=transformUpdateMany(validate(e,this.updateManySchema),this._fields),d=this._builder.updateMany(c);s.run(d,(h,{rowsAffected:_})=>a({count:_}),o)}_upsert(e,s,a,o){const c=transformUpsert(validate(e,this.upsertSchema),this._fields);this._findUnique({where:e.where},s,d=>d===null?this._create({data:c.create,select:c.select,...notNullNotUndefined(c.include)&&{include:c.include}},s,a,o):this._update({data:c.update,where:c.where,select:c.select,...notNullNotUndefined(c.include)&&{include:c.include}},s,a,o),o)}_delete(e,s,a,o){const c=transformDelete(validate(e,this.deleteSchema),this._fields);this._findUniqueWithoutAutoSelect(c,s,d=>{const h=this._builder.delete(c);s.run(h,()=>a(d),o)},o,"Delete")}_deleteMany(e,s,a,o){const c=transformDeleteMany(validate(e??{},this.deleteManySchema),this._fields),d=this._builder.deleteMany(c);s.run(d,(h,{rowsAffected:_})=>{a({count:_})},o)}makeLiveResult(e,s){const a=[...this.getIncludedTables(s)].map(c=>c._qualifiedTableName),o=()=>e().then(c=>new LiveResult(c,a));return o.sourceQuery=s,o}}function unsafeExec(i,e){return i.query(e)}function rawQuery(i,e){if(isPotentiallyDangerous(e.sql))throw new InvalidArgumentError("Cannot use queries that might alter the store - please use read-only queries");return unsafeExec(i,e)}function liveRawQuery(i,e){const s=async()=>{const a=parseTableNames(e.sql),o=await rawQuery(i,e);return new LiveResult(o,a)};return s.sourceQuery=e,s}class BaseShapeManager{constructor(){Zt(this,"tablesPreviouslySubscribed");this.tablesPreviouslySubscribed=new Set}hasBeenSubscribed(e){return this.tablesPreviouslySubscribed.has(e)}}class ShapeManager extends BaseShapeManager{constructor(s){super();Zt(this,"satellite");this.satellite=s}async sync(s){const a={selects:s.tables.map(d=>({tablename:d}))};return{synced:(await this.satellite.subscribe([a])).synced.then(()=>{s.tables.forEach(d=>this.tablesPreviouslySubscribed.add(d))})}}hasBeenSubscribed(s){return this.tablesPreviouslySubscribed.has(s)}}class ElectricClient extends ElectricNamespace{constructor(e,s,a,o,c,d){super(s,a,o,d),this.db=e,this.satellite=c,this.satellite=c}static create(e,s,a,o,c,d){const h=s.extendedTables,_=new ShapeManager(c),$=ct=>new Table(ct,a,o,_,s),rt=Object.fromEntries(Object.keys(h).map(ct=>[ct,$(ct)]));Object.keys(rt).forEach(ct=>{rt[ct].setTables(new Map(Object.entries(rt)))});const lt={...rt,unsafeExec:unsafeExec.bind(null,a),rawQuery:rawQuery.bind(null,a),liveRawQuery:liveRawQuery.bind(null,a),raw:unsafeExec.bind(null,a),liveRaw:liveRawQuery.bind(null,a)};return new ElectricClient(lt,e,a,o,c,d)}}const defaultPrepare=async i=>{await i.run({sql:"PRAGMA foreign_keys = ON;"})},electrify$1=async(i,e,s,a,o,c)=>{setLogLevel(o.debug?"TRACE":"WARN"),await((c==null?void 0:c.prepare)??defaultPrepare)(s);const h=hydrateConfig(o),_=(c==null?void 0:c.migrator)||new BundleMigrator(s,e.migrations),$=(c==null?void 0:c.notifier)||new EventNotifier(i),rt=(c==null?void 0:c.registry)||globalRegistry,lt=await rt.ensureStarted(i,e,s,_,$,a,h),ct=ElectricClient.create(i,e,s,$,lt,rt);return lt.connectivityState!==void 0&&ct.setIsConnected(lt.connectivityState),ct};class WebSocketWeb{constructor(e){Zt(this,"socket");Zt(this,"connectCallbacks",[]);Zt(this,"errorCallbacks",[]);Zt(this,"onceErrorCallbacks",[]);Zt(this,"errorListener",()=>{for(const s of this.errorCallbacks)s(new SatelliteError(SatelliteErrorCode.SOCKET_ERROR,"socket error"));let e;for(;e=this.onceErrorCallbacks.pop();)e(new SatelliteError(SatelliteErrorCode.SOCKET_ERROR,"socket error"))});Zt(this,"connectListener",()=>{let e;for(;e=this.connectCallbacks.pop();)e()});Zt(this,"messageListener");Zt(this,"closeListener");this.protocolVsn=e}open(e){if(this.socket)throw new SatelliteError(SatelliteErrorCode.INTERNAL,"trying to open a socket before closing existing socket");return this.socket=new WebSocket(e.url,[this.protocolVsn]),this.socket.binaryType="arraybuffer",this.socket.addEventListener("open",this.connectListener),this.socket.addEventListener("error",this.errorListener),this}write(e){var s;return(s=this.socket)==null||s.send(e),this}closeAndRemoveListeners(){var e,s,a,o;return(e=this.socket)==null||e.removeEventListener("error",this.errorListener),this.messageListener&&((s=this.socket)==null||s.removeEventListener("message",this.messageListener)),this.closeListener&&((a=this.socket)==null||a.removeEventListener("close",this.closeListener)),(o=this.socket)==null||o.close(),this.socket=void 0,this}onMessage(e){var s;if(this.messageListener)throw new SatelliteError(SatelliteErrorCode.INTERNAL,"socket does not support multiple message listeners");this.messageListener=a=>{const o=new Uint8Array(a.data);e(o)},(s=this.socket)==null||s.addEventListener("message",this.messageListener)}onError(e){this.errorCallbacks.push(e)}onClose(e){var s;if(this.closeListener)throw new SatelliteError(SatelliteErrorCode.INTERNAL,"socket does not support multiple close listeners");this.closeListener=e,(s=this.socket)==null||s.addEventListener("close",this.closeListener)}onceConnect(e){this.connectCallbacks.push(e)}onceError(e){this.onceErrorCallbacks.push(e)}removeErrorListener(e){const s=this.errorCallbacks.indexOf(e);s>=0&&this.errorCallbacks.splice(s,1);const a=this.onceErrorCallbacks.indexOf(e);a>=0&&this.onceErrorCallbacks.splice(a,1)}}const electrify=async(i,e,s,a)=>{const o=i.name,c=(a==null?void 0:a.adapter)||new DatabaseAdapter(i),d=(a==null?void 0:a.socketFactory)||WebSocketWeb;return await electrify$1(o,e,c,d,s,a)};function insecureAuthToken(i){return`${encode({alg:"none"})}.${encode(i)}.`}function encode(i){const e=JSON.stringify(i);return base64(e).replace(/\+/g,"-").replace(/\//,"_").replace(/=+$/,"")}function base64(i){const e=new TextEncoder().encode(i),a=Array.from(e,o=>String.fromCodePoint(o)).join("");return btoa(a)}const dummyUserId=genUUID(),authToken=()=>insecureAuthToken({user_id:dummyUserId});var lodash_partition={exports:{}};lodash_partition.exports;(function(i,e){var s=200,a="Expected a function",o="__lodash_hash_undefined__",c=1,d=2,h=1/0,_=9007199254740991,$="[object Arguments]",rt="[object Array]",lt="[object Boolean]",ct="[object Date]",bt="[object Error]",Ot="[object Function]",dt="[object GeneratorFunction]",vt="[object Map]",at="[object Number]",et="[object Object]",j="[object Promise]",St="[object RegExp]",mt="[object Set]",ft="[object String]",st="[object Symbol]",ht="[object WeakMap]",ot="[object ArrayBuffer]",ut="[object DataView]",It="[object Float32Array]",Ct="[object Float64Array]",zt="[object Int8Array]",Wt="[object Int16Array]",Ut="[object Int32Array]",or="[object Uint8Array]",tr="[object Uint8ClampedArray]",Bt="[object Uint16Array]",Ht="[object Uint32Array]",er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lr=/^\w*$/,dr=/^\./,kr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ir=/[\\^$.*+?()[\]{}|]/g,Kt=/\\(\\)?/g,br=/^\[object .+?Constructor\]$/,Zn=/^(?:0|[1-9]\d*)$/,qt={};qt[It]=qt[Ct]=qt[zt]=qt[Wt]=qt[Ut]=qt[or]=qt[tr]=qt[Bt]=qt[Ht]=!0,qt[$]=qt[rt]=qt[ot]=qt[lt]=qt[ut]=qt[ct]=qt[bt]=qt[Ot]=qt[vt]=qt[at]=qt[et]=qt[St]=qt[mt]=qt[ft]=qt[ht]=!1;var Br=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Rs=typeof self=="object"&&self&&self.Object===Object&&self,mr=Br||Rs||Function("return this")(),Bn=e&&!e.nodeType&&e,_r=Bn&&!0&&i&&!i.nodeType&&i,Os=_r&&_r.exports===Bn,pn=Os&&Br.process,ls=function(){try{return pn&&pn.binding("util")}catch{}}(),Fn=ls&&ls.isTypedArray;function Us(b,tt,_t,Rt){for(var Pt=-1,kt=b?b.length:0;++Pt<kt;){var it=b[Pt];tt(Rt,it,_t(it),b)}return Rt}function js(b,tt){for(var _t=-1,Rt=b?b.length:0;++_t<Rt;)if(tt(b[_t],_t,b))return!0;return!1}function hs(b){return function(tt){return tt==null?void 0:tt[b]}}function Ps(b,tt){for(var _t=-1,Rt=Array(b);++_t<b;)Rt[_t]=tt(_t);return Rt}function Wn(b){return function(tt){return b(tt)}}function An(b,tt){return b==null?void 0:b[tt]}function Un(b){var tt=!1;if(b!=null&&typeof b.toString!="function")try{tt=!!(b+"")}catch{}return tt}function Ms(b){var tt=-1,_t=Array(b.size);return b.forEach(function(Rt,Pt){_t[++tt]=[Pt,Rt]}),_t}function Ns(b,tt){return function(_t){return b(tt(_t))}}function ms(b){var tt=-1,_t=Array(b.size);return b.forEach(function(Rt){_t[++tt]=Rt}),_t}var Cs=Array.prototype,Jn=Function.prototype,ur=Object.prototype,kn=mr["__core-js_shared__"],jn=function(){var b=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),un=Jn.toString,vr=ur.hasOwnProperty,Mr=ur.toString,bn=RegExp("^"+un.call(vr).replace(Ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vn=mr.Symbol,Jt=mr.Uint8Array,xn=ur.propertyIsEnumerable,Yr=Cs.splice,_i=Ns(Object.keys,Object),cn=on(mr,"DataView"),rn=on(mr,"Map"),qr=on(mr,"Promise"),nn=on(mr,"Set"),xr=on(mr,"WeakMap"),sn=on(Object,"create"),hn=jt(cn),es=jt(rn),qs=jt(qr),Xs=jt(nn),Vr=jt(xr),Tn=Vn?Vn.prototype:void 0,Hn=Tn?Tn.valueOf:void 0,Gr=Tn?Tn.toString:void 0;function Ur(b){var tt=-1,_t=b?b.length:0;for(this.clear();++tt<_t;){var Rt=b[tt];this.set(Rt[0],Rt[1])}}function gs(){this.__data__=sn?sn(null):{}}function Kr(b){return this.has(b)&&delete this.__data__[b]}function ys(b){var tt=this.__data__;if(sn){var _t=tt[b];return _t===o?void 0:_t}return vr.call(tt,b)?tt[b]:void 0}function As(b){var tt=this.__data__;return sn?tt[b]!==void 0:vr.call(tt,b)}function wn(b,tt){var _t=this.__data__;return _t[b]=sn&&tt===void 0?o:tt,this}Ur.prototype.clear=gs,Ur.prototype.delete=Kr,Ur.prototype.get=ys,Ur.prototype.has=As,Ur.prototype.set=wn;function Nr(b){var tt=-1,_t=b?b.length:0;for(this.clear();++tt<_t;){var Rt=b[tt];this.set(Rt[0],Rt[1])}}function _s(){this.__data__=[]}function In(b){var tt=this.__data__,_t=yn(tt,b);if(_t<0)return!1;var Rt=tt.length-1;return _t==Rt?tt.pop():Yr.call(tt,_t,1),!0}function zs(b){var tt=this.__data__,_t=yn(tt,b);return _t<0?void 0:tt[_t][1]}function Zs(b){return yn(this.__data__,b)>-1}function mn(b,tt){var _t=this.__data__,Rt=yn(_t,b);return Rt<0?_t.push([b,tt]):_t[Rt][1]=tt,this}Nr.prototype.clear=_s,Nr.prototype.delete=In,Nr.prototype.get=zs,Nr.prototype.has=Zs,Nr.prototype.set=mn;function Lr(b){var tt=-1,_t=b?b.length:0;for(this.clear();++tt<_t;){var Rt=b[tt];this.set(Rt[0],Rt[1])}}function Ws(){this.__data__={hash:new Ur,map:new(rn||Nr),string:new Ur}}function Rn(b){return _n(this,b).delete(b)}function us(b){return _n(this,b).get(b)}function ks(b){return _n(this,b).has(b)}function Rr(b,tt){return _n(this,b).set(b,tt),this}Lr.prototype.clear=Ws,Lr.prototype.delete=Rn,Lr.prototype.get=us,Lr.prototype.has=ks,Lr.prototype.set=Rr;function an(b){var tt=-1,_t=b?b.length:0;for(this.__data__=new Lr;++tt<_t;)this.add(b[tt])}function vs(b){return this.__data__.set(b,o),this}function Hr(b){return this.__data__.has(b)}an.prototype.add=an.prototype.push=vs,an.prototype.has=Hr;function Pr(b){this.__data__=new Nr(b)}function Ss(){this.__data__=new Nr}function gn(b){return this.__data__.delete(b)}function cs(b){return this.__data__.get(b)}function Ys(b){return this.__data__.has(b)}function Js(b,tt){var _t=this.__data__;if(_t instanceof Nr){var Rt=_t.__data__;if(!rn||Rt.length<s-1)return Rt.push([b,tt]),this;_t=this.__data__=new Lr(Rt)}return _t.set(b,tt),this}Pr.prototype.clear=Ss,Pr.prototype.delete=gn,Pr.prototype.get=cs,Pr.prototype.has=Ys,Pr.prototype.set=Js;function fs(b,tt){var _t=yr(b)||wr(b)?Ps(b.length,String):[],Rt=_t.length,Pt=!!Rt;for(var kt in b)(tt||vr.call(b,kt))&&!(Pt&&(kt=="length"||is(kt,Rt)))&&_t.push(kt);return _t}function yn(b,tt){for(var _t=b.length;_t--;)if(fr(b[_t][0],tt))return _t;return-1}function xs(b,tt,_t,Rt){return vn(b,function(Pt,kt,it){tt(Rt,Pt,_t(Pt),it)}),Rt}var vn=ns(Ls),Es=Qs();function Ls(b,tt){return b&&Es(b,tt,Lt)}function ts(b,tt){tt=Sn(tt,b)?[tt]:ws(tt);for(var _t=0,Rt=tt.length;b!=null&&_t<Rt;)b=b[Nt(tt[_t++])];return _t&&_t==Rt?b:void 0}function Vs(b){return Mr.call(b)}function bs(b,tt){return b!=null&&tt in Object(b)}function rs(b,tt,_t,Rt,Pt){return b===tt?!0:b==null||tt==null||!Ar(b)&&!$r(tt)?b!==b&&tt!==tt:Ds(b,tt,rs,_t,Rt,Pt)}function Ds(b,tt,_t,Rt,Pt,kt){var it=yr(b),yt=yr(tt),At=rt,xt=rt;it||(At=Qr(b),At=At==$?et:At),yt||(xt=Qr(tt),xt=xt==$?et:xt);var rr=At==et&&!Un(b),Xt=xt==et&&!Un(tt),ir=At==xt;if(ir&&!rr)return kt||(kt=new Pr),it||En(b)?Jr(b,tt,_t,Rt,Pt,kt):On(b,tt,At,_t,Rt,Pt,kt);if(!(Pt&d)){var cr=rr&&vr.call(b,"__wrapped__"),hr=Xt&&vr.call(tt,"__wrapped__");if(cr||hr){var Er=cr?b.value():b,Or=hr?tt.value():tt;return kt||(kt=new Pr),_t(Er,Or,Rt,Pt,kt)}}return ir?(kt||(kt=new Pr),ps(b,tt,_t,Rt,Pt,kt)):!1}function Hs(b,tt,_t,Rt){var Pt=_t.length,kt=Pt,it=!Rt;if(b==null)return!kt;for(b=Object(b);Pt--;){var yt=_t[Pt];if(it&&yt[2]?yt[1]!==b[yt[0]]:!(yt[0]in b))return!1}for(;++Pt<kt;){yt=_t[Pt];var At=yt[0],xt=b[At],rr=yt[1];if(it&&yt[2]){if(xt===void 0&&!(At in b))return!1}else{var Xt=new Pr;if(Rt)var ir=Rt(xt,rr,At,b,tt,Xt);if(!(ir===void 0?rs(rr,xt,Rt,c|d,Xt):ir))return!1}}return!0}function Gs(b){if(!Ar(b)||ss(b))return!1;var tt=Cr(b)||Un(b)?bn:br;return tt.test(jt(b))}function Ts(b){return $r(b)&&Xr(b.length)&&!!qt[Mr.call(b)]}function ds(b){return typeof b=="function"?b:b==null?Qt:typeof b=="object"?yr(b)?$s(b[0],b[1]):Ks(b):pr(b)}function Gn(b){if(!Mn(b))return _i(b);var tt=[];for(var _t in Object(b))vr.call(b,_t)&&_t!="constructor"&&tt.push(_t);return tt}function Ks(b){var tt=Pn(b);return tt.length==1&&tt[0][2]?as(tt[0][0],tt[0][1]):function(_t){return _t===b||Hs(_t,b,tt)}}function $s(b,tt){return Sn(b)&&Kn(tt)?as(Nt(b),tt):function(_t){var Rt=pt(_t,b);return Rt===void 0&&Rt===tt?wt(_t,b):rs(tt,Rt,void 0,c|d)}}function Ln(b){return function(tt){return ts(tt,b)}}function Bs(b){if(typeof b=="string")return b;if(jr(b))return Gr?Gr.call(b):"";var tt=b+"";return tt=="0"&&1/b==-h?"-0":tt}function ws(b){return yr(b)?b:Et(b)}function Fs(b,tt){return function(_t,Rt){var Pt=yr(_t)?Us:xs,kt=tt?tt():{};return Pt(_t,b,ds(Rt),kt)}}function ns(b,tt){return function(_t,Rt){if(_t==null)return _t;if(!Dr(_t))return b(_t,Rt);for(var Pt=_t.length,kt=tt?Pt:-1,it=Object(_t);(tt?kt--:++kt<Pt)&&Rt(it[kt],kt,it)!==!1;);return _t}}function Qs(b){return function(tt,_t,Rt){for(var Pt=-1,kt=Object(tt),it=Rt(tt),yt=it.length;yt--;){var At=it[b?yt:++Pt];if(_t(kt[At],At,kt)===!1)break}return tt}}function Jr(b,tt,_t,Rt,Pt,kt){var it=Pt&d,yt=b.length,At=tt.length;if(yt!=At&&!(it&&At>yt))return!1;var xt=kt.get(b);if(xt&&kt.get(tt))return xt==tt;var rr=-1,Xt=!0,ir=Pt&c?new an:void 0;for(kt.set(b,tt),kt.set(tt,b);++rr<yt;){var cr=b[rr],hr=tt[rr];if(Rt)var Er=it?Rt(hr,cr,rr,tt,b,kt):Rt(cr,hr,rr,b,tt,kt);if(Er!==void 0){if(Er)continue;Xt=!1;break}if(ir){if(!js(tt,function(Or,Fr){if(!ir.has(Fr)&&(cr===Or||_t(cr,Or,Rt,Pt,kt)))return ir.add(Fr)})){Xt=!1;break}}else if(!(cr===hr||_t(cr,hr,Rt,Pt,kt))){Xt=!1;break}}return kt.delete(b),kt.delete(tt),Xt}function On(b,tt,_t,Rt,Pt,kt,it){switch(_t){case ut:if(b.byteLength!=tt.byteLength||b.byteOffset!=tt.byteOffset)return!1;b=b.buffer,tt=tt.buffer;case ot:return!(b.byteLength!=tt.byteLength||!Rt(new Jt(b),new Jt(tt)));case lt:case ct:case at:return fr(+b,+tt);case bt:return b.name==tt.name&&b.message==tt.message;case St:case ft:return b==tt+"";case vt:var yt=Ms;case mt:var At=kt&d;if(yt||(yt=ms),b.size!=tt.size&&!At)return!1;var xt=it.get(b);if(xt)return xt==tt;kt|=c,it.set(b,tt);var rr=Jr(yt(b),yt(tt),Rt,Pt,kt,it);return it.delete(b),rr;case st:if(Hn)return Hn.call(b)==Hn.call(tt)}return!1}function ps(b,tt,_t,Rt,Pt,kt){var it=Pt&d,yt=Lt(b),At=yt.length,xt=Lt(tt),rr=xt.length;if(At!=rr&&!it)return!1;for(var Xt=At;Xt--;){var ir=yt[Xt];if(!(it?ir in tt:vr.call(tt,ir)))return!1}var cr=kt.get(b);if(cr&&kt.get(tt))return cr==tt;var hr=!0;kt.set(b,tt),kt.set(tt,b);for(var Er=it;++Xt<At;){ir=yt[Xt];var Or=b[ir],Fr=tt[ir];if(Rt)var zr=it?Rt(Fr,Or,ir,tt,b,kt):Rt(Or,Fr,ir,b,tt,kt);if(!(zr===void 0?Or===Fr||_t(Or,Fr,Rt,Pt,kt):zr)){hr=!1;break}Er||(Er=ir=="constructor")}if(hr&&!Er){var en=b.constructor,tn=tt.constructor;en!=tn&&"constructor"in b&&"constructor"in tt&&!(typeof en=="function"&&en instanceof en&&typeof tn=="function"&&tn instanceof tn)&&(hr=!1)}return kt.delete(b),kt.delete(tt),hr}function _n(b,tt){var _t=b.__data__;return Dn(tt)?_t[typeof tt=="string"?"string":"hash"]:_t.map}function Pn(b){for(var tt=Lt(b),_t=tt.length;_t--;){var Rt=tt[_t],Pt=b[Rt];tt[_t]=[Rt,Pt,Kn(Pt)]}return tt}function on(b,tt){var _t=An(b,tt);return Gs(_t)?_t:void 0}var Qr=Vs;(cn&&Qr(new cn(new ArrayBuffer(1)))!=ut||rn&&Qr(new rn)!=vt||qr&&Qr(qr.resolve())!=j||nn&&Qr(new nn)!=mt||xr&&Qr(new xr)!=ht)&&(Qr=function(b){var tt=Mr.call(b),_t=tt==et?b.constructor:void 0,Rt=_t?jt(_t):void 0;if(Rt)switch(Rt){case hn:return ut;case es:return vt;case qs:return j;case Xs:return mt;case Vr:return ht}return tt});function Nn(b,tt,_t){tt=Sn(tt,b)?[tt]:ws(tt);for(var Rt,Pt=-1,it=tt.length;++Pt<it;){var kt=Nt(tt[Pt]);if(!(Rt=b!=null&&_t(b,kt)))break;b=b[kt]}if(Rt)return Rt;var it=b?b.length:0;return!!it&&Xr(it)&&is(kt,it)&&(yr(b)||wr(b))}function is(b,tt){return tt=tt??_,!!tt&&(typeof b=="number"||Zn.test(b))&&b>-1&&b%1==0&&b<tt}function Sn(b,tt){if(yr(b))return!1;var _t=typeof b;return _t=="number"||_t=="symbol"||_t=="boolean"||b==null||jr(b)?!0:lr.test(b)||!er.test(b)||tt!=null&&b in Object(tt)}function Dn(b){var tt=typeof b;return tt=="string"||tt=="number"||tt=="symbol"||tt=="boolean"?b!=="__proto__":b===null}function ss(b){return!!jn&&jn in b}function Mn(b){var tt=b&&b.constructor,_t=typeof tt=="function"&&tt.prototype||ur;return b===_t}function Kn(b){return b===b&&!Ar(b)}function as(b,tt){return function(_t){return _t==null?!1:_t[b]===tt&&(tt!==void 0||b in Object(_t))}}var Et=gr(function(b){b=fn(b);var tt=[];return dr.test(b)&&tt.push(""),b.replace(kr,function(_t,Rt,Pt,kt){tt.push(Pt?kt.replace(Kt,"$1"):Rt||_t)}),tt});function Nt(b){if(typeof b=="string"||jr(b))return b;var tt=b+"";return tt=="0"&&1/b==-h?"-0":tt}function jt(b){if(b!=null){try{return un.call(b)}catch{}try{return b+""}catch{}}return""}var nr=Fs(function(b,tt,_t){b[_t?0:1].push(tt)},function(){return[[],[]]});function gr(b,tt){if(typeof b!="function"||tt&&typeof tt!="function")throw new TypeError(a);var _t=function(){var Rt=arguments,Pt=tt?tt.apply(this,Rt):Rt[0],kt=_t.cache;if(kt.has(Pt))return kt.get(Pt);var it=b.apply(this,Rt);return _t.cache=kt.set(Pt,it),it};return _t.cache=new(gr.Cache||Lr),_t}gr.Cache=Lr;function fr(b,tt){return b===tt||b!==b&&tt!==tt}function wr(b){return Sr(b)&&vr.call(b,"callee")&&(!xn.call(b,"callee")||Mr.call(b)==$)}var yr=Array.isArray;function Dr(b){return b!=null&&Xr(b.length)&&!Cr(b)}function Sr(b){return $r(b)&&Dr(b)}function Cr(b){var tt=Ar(b)?Mr.call(b):"";return tt==Ot||tt==dt}function Xr(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=_}function Ar(b){var tt=typeof b;return!!b&&(tt=="object"||tt=="function")}function $r(b){return!!b&&typeof b=="object"}function jr(b){return typeof b=="symbol"||$r(b)&&Mr.call(b)==st}var En=Fn?Wn(Fn):Ts;function fn(b){return b==null?"":Bs(b)}function pt(b,tt,_t){var Rt=b==null?void 0:ts(b,tt);return Rt===void 0?_t:Rt}function wt(b,tt){return b!=null&&Nn(b,tt,bs)}function Lt(b){return Dr(b)?fs(b):Gn(b)}function Qt(b){return b}function pr(b){return Sn(b)?hs(Nt(b)):Ln(b)}i.exports=nr})(lodash_partition,lodash_partition.exports);var lodash_partitionExports=lodash_partition.exports;const partition=getDefaultExportFromCjs(lodash_partitionExports);var lodash_groupby={exports:{}};lodash_groupby.exports;(function(i,e){var s=200,a="Expected a function",o="__lodash_hash_undefined__",c=1,d=2,h=1/0,_=9007199254740991,$="[object Arguments]",rt="[object Array]",lt="[object Boolean]",ct="[object Date]",bt="[object Error]",Ot="[object Function]",dt="[object GeneratorFunction]",vt="[object Map]",at="[object Number]",et="[object Object]",j="[object Promise]",St="[object RegExp]",mt="[object Set]",ft="[object String]",st="[object Symbol]",ht="[object WeakMap]",ot="[object ArrayBuffer]",ut="[object DataView]",It="[object Float32Array]",Ct="[object Float64Array]",zt="[object Int8Array]",Wt="[object Int16Array]",Ut="[object Int32Array]",or="[object Uint8Array]",tr="[object Uint8ClampedArray]",Bt="[object Uint16Array]",Ht="[object Uint32Array]",er=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lr=/^\w*$/,dr=/^\./,kr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ir=/[\\^$.*+?()[\]{}|]/g,Kt=/\\(\\)?/g,br=/^\[object .+?Constructor\]$/,Zn=/^(?:0|[1-9]\d*)$/,qt={};qt[It]=qt[Ct]=qt[zt]=qt[Wt]=qt[Ut]=qt[or]=qt[tr]=qt[Bt]=qt[Ht]=!0,qt[$]=qt[rt]=qt[ot]=qt[lt]=qt[ut]=qt[ct]=qt[bt]=qt[Ot]=qt[vt]=qt[at]=qt[et]=qt[St]=qt[mt]=qt[ft]=qt[ht]=!1;var Br=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Rs=typeof self=="object"&&self&&self.Object===Object&&self,mr=Br||Rs||Function("return this")(),Bn=e&&!e.nodeType&&e,_r=Bn&&!0&&i&&!i.nodeType&&i,Os=_r&&_r.exports===Bn,pn=Os&&Br.process,ls=function(){try{return pn&&pn.binding("util")}catch{}}(),Fn=ls&&ls.isTypedArray;function Us(b,tt,_t,Rt){for(var Pt=-1,kt=b?b.length:0;++Pt<kt;){var it=b[Pt];tt(Rt,it,_t(it),b)}return Rt}function js(b,tt){for(var _t=-1,Rt=b?b.length:0;++_t<Rt;)if(tt(b[_t],_t,b))return!0;return!1}function hs(b){return function(tt){return tt==null?void 0:tt[b]}}function Ps(b,tt){for(var _t=-1,Rt=Array(b);++_t<b;)Rt[_t]=tt(_t);return Rt}function Wn(b){return function(tt){return b(tt)}}function An(b,tt){return b==null?void 0:b[tt]}function Un(b){var tt=!1;if(b!=null&&typeof b.toString!="function")try{tt=!!(b+"")}catch{}return tt}function Ms(b){var tt=-1,_t=Array(b.size);return b.forEach(function(Rt,Pt){_t[++tt]=[Pt,Rt]}),_t}function Ns(b,tt){return function(_t){return b(tt(_t))}}function ms(b){var tt=-1,_t=Array(b.size);return b.forEach(function(Rt){_t[++tt]=Rt}),_t}var Cs=Array.prototype,Jn=Function.prototype,ur=Object.prototype,kn=mr["__core-js_shared__"],jn=function(){var b=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),un=Jn.toString,vr=ur.hasOwnProperty,Mr=ur.toString,bn=RegExp("^"+un.call(vr).replace(Ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vn=mr.Symbol,Jt=mr.Uint8Array,xn=ur.propertyIsEnumerable,Yr=Cs.splice,_i=Ns(Object.keys,Object),cn=on(mr,"DataView"),rn=on(mr,"Map"),qr=on(mr,"Promise"),nn=on(mr,"Set"),xr=on(mr,"WeakMap"),sn=on(Object,"create"),hn=jt(cn),es=jt(rn),qs=jt(qr),Xs=jt(nn),Vr=jt(xr),Tn=Vn?Vn.prototype:void 0,Hn=Tn?Tn.valueOf:void 0,Gr=Tn?Tn.toString:void 0;function Ur(b){var tt=-1,_t=b?b.length:0;for(this.clear();++tt<_t;){var Rt=b[tt];this.set(Rt[0],Rt[1])}}function gs(){this.__data__=sn?sn(null):{}}function Kr(b){return this.has(b)&&delete this.__data__[b]}function ys(b){var tt=this.__data__;if(sn){var _t=tt[b];return _t===o?void 0:_t}return vr.call(tt,b)?tt[b]:void 0}function As(b){var tt=this.__data__;return sn?tt[b]!==void 0:vr.call(tt,b)}function wn(b,tt){var _t=this.__data__;return _t[b]=sn&&tt===void 0?o:tt,this}Ur.prototype.clear=gs,Ur.prototype.delete=Kr,Ur.prototype.get=ys,Ur.prototype.has=As,Ur.prototype.set=wn;function Nr(b){var tt=-1,_t=b?b.length:0;for(this.clear();++tt<_t;){var Rt=b[tt];this.set(Rt[0],Rt[1])}}function _s(){this.__data__=[]}function In(b){var tt=this.__data__,_t=yn(tt,b);if(_t<0)return!1;var Rt=tt.length-1;return _t==Rt?tt.pop():Yr.call(tt,_t,1),!0}function zs(b){var tt=this.__data__,_t=yn(tt,b);return _t<0?void 0:tt[_t][1]}function Zs(b){return yn(this.__data__,b)>-1}function mn(b,tt){var _t=this.__data__,Rt=yn(_t,b);return Rt<0?_t.push([b,tt]):_t[Rt][1]=tt,this}Nr.prototype.clear=_s,Nr.prototype.delete=In,Nr.prototype.get=zs,Nr.prototype.has=Zs,Nr.prototype.set=mn;function Lr(b){var tt=-1,_t=b?b.length:0;for(this.clear();++tt<_t;){var Rt=b[tt];this.set(Rt[0],Rt[1])}}function Ws(){this.__data__={hash:new Ur,map:new(rn||Nr),string:new Ur}}function Rn(b){return _n(this,b).delete(b)}function us(b){return _n(this,b).get(b)}function ks(b){return _n(this,b).has(b)}function Rr(b,tt){return _n(this,b).set(b,tt),this}Lr.prototype.clear=Ws,Lr.prototype.delete=Rn,Lr.prototype.get=us,Lr.prototype.has=ks,Lr.prototype.set=Rr;function an(b){var tt=-1,_t=b?b.length:0;for(this.__data__=new Lr;++tt<_t;)this.add(b[tt])}function vs(b){return this.__data__.set(b,o),this}function Hr(b){return this.__data__.has(b)}an.prototype.add=an.prototype.push=vs,an.prototype.has=Hr;function Pr(b){this.__data__=new Nr(b)}function Ss(){this.__data__=new Nr}function gn(b){return this.__data__.delete(b)}function cs(b){return this.__data__.get(b)}function Ys(b){return this.__data__.has(b)}function Js(b,tt){var _t=this.__data__;if(_t instanceof Nr){var Rt=_t.__data__;if(!rn||Rt.length<s-1)return Rt.push([b,tt]),this;_t=this.__data__=new Lr(Rt)}return _t.set(b,tt),this}Pr.prototype.clear=Ss,Pr.prototype.delete=gn,Pr.prototype.get=cs,Pr.prototype.has=Ys,Pr.prototype.set=Js;function fs(b,tt){var _t=yr(b)||wr(b)?Ps(b.length,String):[],Rt=_t.length,Pt=!!Rt;for(var kt in b)(tt||vr.call(b,kt))&&!(Pt&&(kt=="length"||is(kt,Rt)))&&_t.push(kt);return _t}function yn(b,tt){for(var _t=b.length;_t--;)if(fr(b[_t][0],tt))return _t;return-1}function xs(b,tt,_t,Rt){return vn(b,function(Pt,kt,it){tt(Rt,Pt,_t(Pt),it)}),Rt}var vn=ns(Ls),Es=Qs();function Ls(b,tt){return b&&Es(b,tt,Lt)}function ts(b,tt){tt=Sn(tt,b)?[tt]:ws(tt);for(var _t=0,Rt=tt.length;b!=null&&_t<Rt;)b=b[Nt(tt[_t++])];return _t&&_t==Rt?b:void 0}function Vs(b){return Mr.call(b)}function bs(b,tt){return b!=null&&tt in Object(b)}function rs(b,tt,_t,Rt,Pt){return b===tt?!0:b==null||tt==null||!Ar(b)&&!$r(tt)?b!==b&&tt!==tt:Ds(b,tt,rs,_t,Rt,Pt)}function Ds(b,tt,_t,Rt,Pt,kt){var it=yr(b),yt=yr(tt),At=rt,xt=rt;it||(At=Qr(b),At=At==$?et:At),yt||(xt=Qr(tt),xt=xt==$?et:xt);var rr=At==et&&!Un(b),Xt=xt==et&&!Un(tt),ir=At==xt;if(ir&&!rr)return kt||(kt=new Pr),it||En(b)?Jr(b,tt,_t,Rt,Pt,kt):On(b,tt,At,_t,Rt,Pt,kt);if(!(Pt&d)){var cr=rr&&vr.call(b,"__wrapped__"),hr=Xt&&vr.call(tt,"__wrapped__");if(cr||hr){var Er=cr?b.value():b,Or=hr?tt.value():tt;return kt||(kt=new Pr),_t(Er,Or,Rt,Pt,kt)}}return ir?(kt||(kt=new Pr),ps(b,tt,_t,Rt,Pt,kt)):!1}function Hs(b,tt,_t,Rt){var Pt=_t.length,kt=Pt,it=!Rt;if(b==null)return!kt;for(b=Object(b);Pt--;){var yt=_t[Pt];if(it&&yt[2]?yt[1]!==b[yt[0]]:!(yt[0]in b))return!1}for(;++Pt<kt;){yt=_t[Pt];var At=yt[0],xt=b[At],rr=yt[1];if(it&&yt[2]){if(xt===void 0&&!(At in b))return!1}else{var Xt=new Pr;if(Rt)var ir=Rt(xt,rr,At,b,tt,Xt);if(!(ir===void 0?rs(rr,xt,Rt,c|d,Xt):ir))return!1}}return!0}function Gs(b){if(!Ar(b)||ss(b))return!1;var tt=Cr(b)||Un(b)?bn:br;return tt.test(jt(b))}function Ts(b){return $r(b)&&Xr(b.length)&&!!qt[Mr.call(b)]}function ds(b){return typeof b=="function"?b:b==null?Qt:typeof b=="object"?yr(b)?$s(b[0],b[1]):Ks(b):pr(b)}function Gn(b){if(!Mn(b))return _i(b);var tt=[];for(var _t in Object(b))vr.call(b,_t)&&_t!="constructor"&&tt.push(_t);return tt}function Ks(b){var tt=Pn(b);return tt.length==1&&tt[0][2]?as(tt[0][0],tt[0][1]):function(_t){return _t===b||Hs(_t,b,tt)}}function $s(b,tt){return Sn(b)&&Kn(tt)?as(Nt(b),tt):function(_t){var Rt=pt(_t,b);return Rt===void 0&&Rt===tt?wt(_t,b):rs(tt,Rt,void 0,c|d)}}function Ln(b){return function(tt){return ts(tt,b)}}function Bs(b){if(typeof b=="string")return b;if(jr(b))return Gr?Gr.call(b):"";var tt=b+"";return tt=="0"&&1/b==-h?"-0":tt}function ws(b){return yr(b)?b:Et(b)}function Fs(b,tt){return function(_t,Rt){var Pt=yr(_t)?Us:xs,kt=tt?tt():{};return Pt(_t,b,ds(Rt),kt)}}function ns(b,tt){return function(_t,Rt){if(_t==null)return _t;if(!Dr(_t))return b(_t,Rt);for(var Pt=_t.length,kt=tt?Pt:-1,it=Object(_t);(tt?kt--:++kt<Pt)&&Rt(it[kt],kt,it)!==!1;);return _t}}function Qs(b){return function(tt,_t,Rt){for(var Pt=-1,kt=Object(tt),it=Rt(tt),yt=it.length;yt--;){var At=it[b?yt:++Pt];if(_t(kt[At],At,kt)===!1)break}return tt}}function Jr(b,tt,_t,Rt,Pt,kt){var it=Pt&d,yt=b.length,At=tt.length;if(yt!=At&&!(it&&At>yt))return!1;var xt=kt.get(b);if(xt&&kt.get(tt))return xt==tt;var rr=-1,Xt=!0,ir=Pt&c?new an:void 0;for(kt.set(b,tt),kt.set(tt,b);++rr<yt;){var cr=b[rr],hr=tt[rr];if(Rt)var Er=it?Rt(hr,cr,rr,tt,b,kt):Rt(cr,hr,rr,b,tt,kt);if(Er!==void 0){if(Er)continue;Xt=!1;break}if(ir){if(!js(tt,function(Or,Fr){if(!ir.has(Fr)&&(cr===Or||_t(cr,Or,Rt,Pt,kt)))return ir.add(Fr)})){Xt=!1;break}}else if(!(cr===hr||_t(cr,hr,Rt,Pt,kt))){Xt=!1;break}}return kt.delete(b),kt.delete(tt),Xt}function On(b,tt,_t,Rt,Pt,kt,it){switch(_t){case ut:if(b.byteLength!=tt.byteLength||b.byteOffset!=tt.byteOffset)return!1;b=b.buffer,tt=tt.buffer;case ot:return!(b.byteLength!=tt.byteLength||!Rt(new Jt(b),new Jt(tt)));case lt:case ct:case at:return fr(+b,+tt);case bt:return b.name==tt.name&&b.message==tt.message;case St:case ft:return b==tt+"";case vt:var yt=Ms;case mt:var At=kt&d;if(yt||(yt=ms),b.size!=tt.size&&!At)return!1;var xt=it.get(b);if(xt)return xt==tt;kt|=c,it.set(b,tt);var rr=Jr(yt(b),yt(tt),Rt,Pt,kt,it);return it.delete(b),rr;case st:if(Hn)return Hn.call(b)==Hn.call(tt)}return!1}function ps(b,tt,_t,Rt,Pt,kt){var it=Pt&d,yt=Lt(b),At=yt.length,xt=Lt(tt),rr=xt.length;if(At!=rr&&!it)return!1;for(var Xt=At;Xt--;){var ir=yt[Xt];if(!(it?ir in tt:vr.call(tt,ir)))return!1}var cr=kt.get(b);if(cr&&kt.get(tt))return cr==tt;var hr=!0;kt.set(b,tt),kt.set(tt,b);for(var Er=it;++Xt<At;){ir=yt[Xt];var Or=b[ir],Fr=tt[ir];if(Rt)var zr=it?Rt(Fr,Or,ir,tt,b,kt):Rt(Or,Fr,ir,b,tt,kt);if(!(zr===void 0?Or===Fr||_t(Or,Fr,Rt,Pt,kt):zr)){hr=!1;break}Er||(Er=ir=="constructor")}if(hr&&!Er){var en=b.constructor,tn=tt.constructor;en!=tn&&"constructor"in b&&"constructor"in tt&&!(typeof en=="function"&&en instanceof en&&typeof tn=="function"&&tn instanceof tn)&&(hr=!1)}return kt.delete(b),kt.delete(tt),hr}function _n(b,tt){var _t=b.__data__;return Dn(tt)?_t[typeof tt=="string"?"string":"hash"]:_t.map}function Pn(b){for(var tt=Lt(b),_t=tt.length;_t--;){var Rt=tt[_t],Pt=b[Rt];tt[_t]=[Rt,Pt,Kn(Pt)]}return tt}function on(b,tt){var _t=An(b,tt);return Gs(_t)?_t:void 0}var Qr=Vs;(cn&&Qr(new cn(new ArrayBuffer(1)))!=ut||rn&&Qr(new rn)!=vt||qr&&Qr(qr.resolve())!=j||nn&&Qr(new nn)!=mt||xr&&Qr(new xr)!=ht)&&(Qr=function(b){var tt=Mr.call(b),_t=tt==et?b.constructor:void 0,Rt=_t?jt(_t):void 0;if(Rt)switch(Rt){case hn:return ut;case es:return vt;case qs:return j;case Xs:return mt;case Vr:return ht}return tt});function Nn(b,tt,_t){tt=Sn(tt,b)?[tt]:ws(tt);for(var Rt,Pt=-1,it=tt.length;++Pt<it;){var kt=Nt(tt[Pt]);if(!(Rt=b!=null&&_t(b,kt)))break;b=b[kt]}if(Rt)return Rt;var it=b?b.length:0;return!!it&&Xr(it)&&is(kt,it)&&(yr(b)||wr(b))}function is(b,tt){return tt=tt??_,!!tt&&(typeof b=="number"||Zn.test(b))&&b>-1&&b%1==0&&b<tt}function Sn(b,tt){if(yr(b))return!1;var _t=typeof b;return _t=="number"||_t=="symbol"||_t=="boolean"||b==null||jr(b)?!0:lr.test(b)||!er.test(b)||tt!=null&&b in Object(tt)}function Dn(b){var tt=typeof b;return tt=="string"||tt=="number"||tt=="symbol"||tt=="boolean"?b!=="__proto__":b===null}function ss(b){return!!jn&&jn in b}function Mn(b){var tt=b&&b.constructor,_t=typeof tt=="function"&&tt.prototype||ur;return b===_t}function Kn(b){return b===b&&!Ar(b)}function as(b,tt){return function(_t){return _t==null?!1:_t[b]===tt&&(tt!==void 0||b in Object(_t))}}var Et=gr(function(b){b=fn(b);var tt=[];return dr.test(b)&&tt.push(""),b.replace(kr,function(_t,Rt,Pt,kt){tt.push(Pt?kt.replace(Kt,"$1"):Rt||_t)}),tt});function Nt(b){if(typeof b=="string"||jr(b))return b;var tt=b+"";return tt=="0"&&1/b==-h?"-0":tt}function jt(b){if(b!=null){try{return un.call(b)}catch{}try{return b+""}catch{}}return""}var nr=Fs(function(b,tt,_t){vr.call(b,_t)?b[_t].push(tt):b[_t]=[tt]});function gr(b,tt){if(typeof b!="function"||tt&&typeof tt!="function")throw new TypeError(a);var _t=function(){var Rt=arguments,Pt=tt?tt.apply(this,Rt):Rt[0],kt=_t.cache;if(kt.has(Pt))return kt.get(Pt);var it=b.apply(this,Rt);return _t.cache=kt.set(Pt,it),it};return _t.cache=new(gr.Cache||Lr),_t}gr.Cache=Lr;function fr(b,tt){return b===tt||b!==b&&tt!==tt}function wr(b){return Sr(b)&&vr.call(b,"callee")&&(!xn.call(b,"callee")||Mr.call(b)==$)}var yr=Array.isArray;function Dr(b){return b!=null&&Xr(b.length)&&!Cr(b)}function Sr(b){return $r(b)&&Dr(b)}function Cr(b){var tt=Ar(b)?Mr.call(b):"";return tt==Ot||tt==dt}function Xr(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=_}function Ar(b){var tt=typeof b;return!!b&&(tt=="object"||tt=="function")}function $r(b){return!!b&&typeof b=="object"}function jr(b){return typeof b=="symbol"||$r(b)&&Mr.call(b)==st}var En=Fn?Wn(Fn):Ts;function fn(b){return b==null?"":Bs(b)}function pt(b,tt,_t){var Rt=b==null?void 0:ts(b,tt);return Rt===void 0?_t:Rt}function wt(b,tt){return b!=null&&Nn(b,tt,bs)}function Lt(b){return Dr(b)?fs(b):Gn(b)}function Qt(b){return b}function pr(b){return Sn(b)?hs(Nt(b)):Ln(b)}i.exports=nr})(lodash_groupby,lodash_groupby.exports);var lodash_groupbyExports=lodash_groupby.exports;const groupBy=getDefaultExportFromCjs(lodash_groupbyExports);class DbSchema{constructor(e,s){Zt(this,"extendedTables");Zt(this,"incomingRelationsIndex");this.tables=e,this.migrations=s,this.extendedTables=this.extend(e),this.incomingRelationsIndex=this.indexIncomingRelations()}extend(e){return mapValues(e,s=>{const[a,o]=partition(s.relations,c=>c.isIncomingRelation());return{...s,incomingRelations:a,outgoingRelations:o}})}indexIncomingRelations(){const e=Object.keys(this.extendedTables),s=o=>{const c=this.getIncomingRelations(o);return groupBy(c,d=>d.getOppositeRelation(this).toField)},a={};return e.forEach(o=>{a[o]=s(o)}),a}hasTable(e){return Object.keys(this.extendedTables).includes(e)}getTableDescription(e){return this.extendedTables[e]}getFields(e){return this.extendedTables[e].fields}getFieldNames(e){return Array.from(this.getFields(e).keys())}hasRelationForField(e,s){return this.getRelations(e).some(a=>a.relationField===s)}getRelationName(e,s){return this.getRelations(e).find(a=>a.relationField===s).relationName}getRelation(e,s){return this.getRelations(e).find(a=>a.relationName===s)}getRelatedTable(e,s){const a=this.getRelationName(e,s);return this.getRelation(e,a).relatedTable}getRelations(e){return this.extendedTables[e].relations}getOutgoingRelations(e){return this.extendedTables[e].outgoingRelations}getIncomingRelations(e){return this.extendedTables[e].incomingRelations}getRelationsPointingAtField(e,s){const o=this.incomingRelationsIndex[e][s];return typeof o>"u"?[]:o}}const migrations=[{statements:[`CREATE TABLE "items" (
  "value" TEXT NOT NULL,
  CONSTRAINT "items_pkey" PRIMARY KEY ("value")
) WITHOUT ROWID;
`,`-- Toggles for turning the triggers on and off
INSERT OR IGNORE INTO _electric_trigger_settings(tablename,flag) VALUES ('main.items', 1);`,`  /* Triggers for table items */

  -- ensures primary key is immutable
  DROP TRIGGER IF EXISTS update_ensure_main_items_primarykey;`,`CREATE TRIGGER update_ensure_main_items_primarykey
  BEFORE UPDATE ON "main"."items"
BEGIN
  SELECT
    CASE
      WHEN old."value" != new."value" THEN
      		RAISE (ABORT, 'cannot change the value of column value as it belongs to the primary key')
    END;
END;`,`-- Triggers that add INSERT, UPDATE, DELETE operation to the _opslog table
DROP TRIGGER IF EXISTS insert_main_items_into_oplog;`,`CREATE TRIGGER insert_main_items_into_oplog
   AFTER INSERT ON "main"."items"
   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.items')
BEGIN
  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)
  VALUES ('main', 'items', 'INSERT', json_object('value', new."value"), json_object('value', new."value"), NULL, NULL);
END;`,"DROP TRIGGER IF EXISTS update_main_items_into_oplog;",`CREATE TRIGGER update_main_items_into_oplog
   AFTER UPDATE ON "main"."items"
   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.items')
BEGIN
  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)
  VALUES ('main', 'items', 'UPDATE', json_object('value', new."value"), json_object('value', new."value"), json_object('value', old."value"), NULL);
END;`,"DROP TRIGGER IF EXISTS delete_main_items_into_oplog;",`CREATE TRIGGER delete_main_items_into_oplog
   AFTER DELETE ON "main"."items"
   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.items')
BEGIN
  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)
  VALUES ('main', 'items', 'DELETE', json_object('value', old."value"), NULL, json_object('value', old."value"), NULL);
END;`],version:"1"}],ItemsScalarFieldEnumSchema=z.enum(["value"]),QueryModeSchema=z.enum(["default","insensitive"]),SortOrderSchema=z.enum(["asc","desc"]);z.enum(["ReadUncommitted","ReadCommitted","RepeatableRead","Serializable"]);z.object({value:z.string()});const ItemsSelectSchema=z.object({value:z.boolean().optional()}).strict(),ItemsWhereInputSchema=z.object({AND:z.union([z.lazy(()=>ItemsWhereInputSchema),z.lazy(()=>ItemsWhereInputSchema).array()]).optional(),OR:z.lazy(()=>ItemsWhereInputSchema).array().optional(),NOT:z.union([z.lazy(()=>ItemsWhereInputSchema),z.lazy(()=>ItemsWhereInputSchema).array()]).optional(),value:z.union([z.lazy(()=>StringFilterSchema),z.string()]).optional()}).strict(),ItemsOrderByWithRelationInputSchema=z.object({value:z.lazy(()=>SortOrderSchema).optional()}).strict(),ItemsWhereUniqueInputSchema=z.object({value:z.string().optional()}).strict(),ItemsOrderByWithAggregationInputSchema=z.object({value:z.lazy(()=>SortOrderSchema).optional(),_count:z.lazy(()=>ItemsCountOrderByAggregateInputSchema).optional(),_max:z.lazy(()=>ItemsMaxOrderByAggregateInputSchema).optional(),_min:z.lazy(()=>ItemsMinOrderByAggregateInputSchema).optional()}).strict(),ItemsScalarWhereWithAggregatesInputSchema=z.object({AND:z.union([z.lazy(()=>ItemsScalarWhereWithAggregatesInputSchema),z.lazy(()=>ItemsScalarWhereWithAggregatesInputSchema).array()]).optional(),OR:z.lazy(()=>ItemsScalarWhereWithAggregatesInputSchema).array().optional(),NOT:z.union([z.lazy(()=>ItemsScalarWhereWithAggregatesInputSchema),z.lazy(()=>ItemsScalarWhereWithAggregatesInputSchema).array()]).optional(),value:z.union([z.lazy(()=>StringWithAggregatesFilterSchema),z.string()]).optional()}).strict(),ItemsCreateInputSchema=z.object({value:z.string()}).strict(),ItemsUncheckedCreateInputSchema=z.object({value:z.string()}).strict(),ItemsUpdateInputSchema=z.object({value:z.union([z.string(),z.lazy(()=>StringFieldUpdateOperationsInputSchema)]).optional()}).strict(),ItemsUncheckedUpdateInputSchema=z.object({value:z.union([z.string(),z.lazy(()=>StringFieldUpdateOperationsInputSchema)]).optional()}).strict(),ItemsCreateManyInputSchema=z.object({value:z.string()}).strict(),ItemsUpdateManyMutationInputSchema=z.object({value:z.union([z.string(),z.lazy(()=>StringFieldUpdateOperationsInputSchema)]).optional()}).strict(),ItemsUncheckedUpdateManyInputSchema=z.object({value:z.union([z.string(),z.lazy(()=>StringFieldUpdateOperationsInputSchema)]).optional()}).strict(),StringFilterSchema=z.object({equals:z.string().optional(),in:z.string().array().optional(),notIn:z.string().array().optional(),lt:z.string().optional(),lte:z.string().optional(),gt:z.string().optional(),gte:z.string().optional(),contains:z.string().optional(),startsWith:z.string().optional(),endsWith:z.string().optional(),mode:z.lazy(()=>QueryModeSchema).optional(),not:z.union([z.string(),z.lazy(()=>NestedStringFilterSchema)]).optional()}).strict(),ItemsCountOrderByAggregateInputSchema=z.object({value:z.lazy(()=>SortOrderSchema).optional()}).strict(),ItemsMaxOrderByAggregateInputSchema=z.object({value:z.lazy(()=>SortOrderSchema).optional()}).strict(),ItemsMinOrderByAggregateInputSchema=z.object({value:z.lazy(()=>SortOrderSchema).optional()}).strict(),StringWithAggregatesFilterSchema=z.object({equals:z.string().optional(),in:z.string().array().optional(),notIn:z.string().array().optional(),lt:z.string().optional(),lte:z.string().optional(),gt:z.string().optional(),gte:z.string().optional(),contains:z.string().optional(),startsWith:z.string().optional(),endsWith:z.string().optional(),mode:z.lazy(()=>QueryModeSchema).optional(),not:z.union([z.string(),z.lazy(()=>NestedStringWithAggregatesFilterSchema)]).optional(),_count:z.lazy(()=>NestedIntFilterSchema).optional(),_min:z.lazy(()=>NestedStringFilterSchema).optional(),_max:z.lazy(()=>NestedStringFilterSchema).optional()}).strict(),StringFieldUpdateOperationsInputSchema=z.object({set:z.string().optional()}).strict(),NestedStringFilterSchema=z.object({equals:z.string().optional(),in:z.string().array().optional(),notIn:z.string().array().optional(),lt:z.string().optional(),lte:z.string().optional(),gt:z.string().optional(),gte:z.string().optional(),contains:z.string().optional(),startsWith:z.string().optional(),endsWith:z.string().optional(),not:z.union([z.string(),z.lazy(()=>NestedStringFilterSchema)]).optional()}).strict(),NestedStringWithAggregatesFilterSchema=z.object({equals:z.string().optional(),in:z.string().array().optional(),notIn:z.string().array().optional(),lt:z.string().optional(),lte:z.string().optional(),gt:z.string().optional(),gte:z.string().optional(),contains:z.string().optional(),startsWith:z.string().optional(),endsWith:z.string().optional(),not:z.union([z.string(),z.lazy(()=>NestedStringWithAggregatesFilterSchema)]).optional(),_count:z.lazy(()=>NestedIntFilterSchema).optional(),_min:z.lazy(()=>NestedStringFilterSchema).optional(),_max:z.lazy(()=>NestedStringFilterSchema).optional()}).strict(),NestedIntFilterSchema=z.object({equals:z.number().optional(),in:z.number().array().optional(),notIn:z.number().array().optional(),lt:z.number().optional(),lte:z.number().optional(),gt:z.number().optional(),gte:z.number().optional(),not:z.union([z.number(),z.lazy(()=>NestedIntFilterSchema)]).optional()}).strict(),ItemsFindFirstArgsSchema=z.object({select:ItemsSelectSchema.optional(),where:ItemsWhereInputSchema.optional(),orderBy:z.union([ItemsOrderByWithRelationInputSchema.array(),ItemsOrderByWithRelationInputSchema]).optional(),cursor:ItemsWhereUniqueInputSchema.optional(),take:z.number().optional(),skip:z.number().optional(),distinct:ItemsScalarFieldEnumSchema.array().optional()}).strict();z.object({select:ItemsSelectSchema.optional(),where:ItemsWhereInputSchema.optional(),orderBy:z.union([ItemsOrderByWithRelationInputSchema.array(),ItemsOrderByWithRelationInputSchema]).optional(),cursor:ItemsWhereUniqueInputSchema.optional(),take:z.number().optional(),skip:z.number().optional(),distinct:ItemsScalarFieldEnumSchema.array().optional()}).strict();z.object({select:ItemsSelectSchema.optional(),where:ItemsWhereInputSchema.optional(),orderBy:z.union([ItemsOrderByWithRelationInputSchema.array(),ItemsOrderByWithRelationInputSchema]).optional(),cursor:ItemsWhereUniqueInputSchema.optional(),take:z.number().optional(),skip:z.number().optional(),distinct:ItemsScalarFieldEnumSchema.array().optional()}).strict();z.object({where:ItemsWhereInputSchema.optional(),orderBy:z.union([ItemsOrderByWithRelationInputSchema.array(),ItemsOrderByWithRelationInputSchema]).optional(),cursor:ItemsWhereUniqueInputSchema.optional(),take:z.number().optional(),skip:z.number().optional()}).strict();z.object({where:ItemsWhereInputSchema.optional(),orderBy:z.union([ItemsOrderByWithAggregationInputSchema.array(),ItemsOrderByWithAggregationInputSchema]).optional(),by:ItemsScalarFieldEnumSchema.array(),having:ItemsScalarWhereWithAggregatesInputSchema.optional(),take:z.number().optional(),skip:z.number().optional()}).strict();const ItemsFindUniqueArgsSchema=z.object({select:ItemsSelectSchema.optional(),where:ItemsWhereUniqueInputSchema}).strict();z.object({select:ItemsSelectSchema.optional(),where:ItemsWhereUniqueInputSchema}).strict();const ItemsCreateArgsSchema=z.object({select:ItemsSelectSchema.optional(),data:z.union([ItemsCreateInputSchema,ItemsUncheckedCreateInputSchema])}).strict(),ItemsUpsertArgsSchema=z.object({select:ItemsSelectSchema.optional(),where:ItemsWhereUniqueInputSchema,create:z.union([ItemsCreateInputSchema,ItemsUncheckedCreateInputSchema]),update:z.union([ItemsUpdateInputSchema,ItemsUncheckedUpdateInputSchema])}).strict(),ItemsCreateManyArgsSchema=z.object({data:ItemsCreateManyInputSchema.array(),skipDuplicates:z.boolean().optional()}).strict(),ItemsDeleteArgsSchema=z.object({select:ItemsSelectSchema.optional(),where:ItemsWhereUniqueInputSchema}).strict(),ItemsUpdateArgsSchema=z.object({select:ItemsSelectSchema.optional(),data:z.union([ItemsUpdateInputSchema,ItemsUncheckedUpdateInputSchema]),where:ItemsWhereUniqueInputSchema}).strict(),ItemsUpdateManyArgsSchema=z.object({data:z.union([ItemsUpdateManyMutationInputSchema,ItemsUncheckedUpdateManyInputSchema]),where:ItemsWhereInputSchema.optional()}).strict(),ItemsDeleteManyArgsSchema=z.object({where:ItemsWhereInputSchema.optional()}).strict(),tableSchemas={items:{fields:new Map([["value","TEXT"]]),relations:[],modelSchema:ItemsCreateInputSchema.partial().or(ItemsUncheckedCreateInputSchema.partial()),createSchema:ItemsCreateArgsSchema,createManySchema:ItemsCreateManyArgsSchema,findUniqueSchema:ItemsFindUniqueArgsSchema,findSchema:ItemsFindFirstArgsSchema,updateSchema:ItemsUpdateArgsSchema,updateManySchema:ItemsUpdateManyArgsSchema,upsertSchema:ItemsUpsertArgsSchema,deleteSchema:ItemsDeleteArgsSchema,deleteManySchema:ItemsDeleteManyArgsSchema}},schema=new DbSchema(tableSchemas,migrations),Example$1="",{ElectricProvider,useElectric}=makeElectricContext(),Example=()=>{const[i,e]=reactExports.useState();return reactExports.useEffect(()=>{let s=!0;return(async()=>{const o={auth:{token:authToken()},debug:!1,url:{}.ELECTRIC_SERVICE},{tabId:c}=uniqueTabId(),d=`basic-${LIB_VERSION}-${c}.db`,h=await ElectricDatabase.init(d),_=await electrify(h,schema,o);s&&e(_)})(),()=>{s=!1}},[]),i===void 0?null:jsxRuntimeExports.jsx(ElectricProvider,{db:i,children:jsxRuntimeExports.jsx(ExampleComponent,{})})},ExampleComponent=()=>{const{db:i}=useElectric(),{results:e}=useLiveQuery_default(i.items.liveMany());reactExports.useEffect(()=>{(async()=>{await(await i.items.sync()).synced})()},[]);const s=async()=>{await i.items.create({data:{value:genUUID()}})},a=async()=>{await i.items.deleteMany()},o=e??[];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"controls",children:[jsxRuntimeExports.jsx("button",{className:"button",onClick:s,children:"Add"}),jsxRuntimeExports.jsx("button",{className:"button",onClick:a,children:"Clear"})]}),o.map((c,d)=>jsxRuntimeExports.jsx("p",{className:"item",children:jsxRuntimeExports.jsx("code",{children:c.value})},d))]})};function App(){return jsxRuntimeExports.jsx("div",{className:"App",children:jsxRuntimeExports.jsxs("header",{className:"App-header",children:[jsxRuntimeExports.jsx("img",{src:logo,className:"App-logo",alt:"logo"}),jsxRuntimeExports.jsx(Example,{})]})})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
